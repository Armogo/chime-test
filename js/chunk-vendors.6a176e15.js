(self["webpackChunkchime_t"]=self["webpackChunkchime_t"]||[]).push([[998],{9662:function(e,t,n){var i=n(614),r=n(6330),o=TypeError;e.exports=function(e){if(i(e))return e;throw o(r(e)+" is not a function")}},6077:function(e,t,n){var i=n(614),r=String,o=TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw o("Can't set "+r(e)+" as a prototype")}},5787:function(e,t,n){var i=n(7976),r=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw r("Incorrect invocation")}},9670:function(e,t,n){var i=n(111),r=String,o=TypeError;e.exports=function(e){if(i(e))return e;throw o(r(e)+" is not an object")}},1318:function(e,t,n){var i=n(5656),r=n(1400),o=n(6244),s=function(e){return function(t,n,s){var a,c=i(t),l=o(c),d=r(s,l);if(e&&n!=n){while(l>d)if(a=c[d++],a!=a)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},3658:function(e,t,n){"use strict";var i=n(9781),r=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(r(e)&&!s(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4326:function(e,t,n){var i=n(1702),r=i({}.toString),o=i("".slice);e.exports=function(e){return o(r(e),8,-1)}},648:function(e,t,n){var i=n(1694),r=n(614),o=n(4326),s=n(5112),a=s("toStringTag"),c=Object,l="Arguments"==o(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(n){}};e.exports=i?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=d(t=c(e),a))?n:l?o(t):"Object"==(i=o(t))&&r(t.callee)?"Arguments":i}},9920:function(e,t,n){var i=n(2597),r=n(3887),o=n(1236),s=n(3070);e.exports=function(e,t,n){for(var a=r(t),c=s.f,l=o.f,d=0;d<a.length;d++){var u=a[d];i(e,u)||n&&i(n,u)||c(e,u,l(t,u))}}},8880:function(e,t,n){var i=n(9781),r=n(3070),o=n(9114);e.exports=i?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7045:function(e,t,n){var i=n(6339),r=n(3070);e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),r.f(e,t,n)}},8052:function(e,t,n){var i=n(614),r=n(3070),o=n(6339),s=n(3072);e.exports=function(e,t,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:t;if(i(n)&&o(n,l,a),a.global)c?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(d){}c?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:function(e,t,n){var i=n(7854),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},5117:function(e,t,n){"use strict";var i=n(6330),r=TypeError;e.exports=function(e,t){if(!delete e[t])throw r("Cannot delete property "+i(t)+" of "+i(e))}},9781:function(e,t,n){var i=n(7293);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var i=n(7854),r=n(111),o=i.document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},7207:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var i,r,o=n(7854),s=n(8113),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,d=l&&l.v8;d&&(i=d.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(i=s.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),e.exports=r},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(e,t,n){var i=n(1702),r=Error,o=i("".replace),s=function(e){return String(r(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!r.prepareStackTrace)while(t--)e=o(e,a,"");return e}},2109:function(e,t,n){var i=n(7854),r=n(1236).f,o=n(8880),s=n(8052),a=n(3072),c=n(9920),l=n(4705);e.exports=function(e,t){var n,d,u,h,p,f,m=e.target,g=e.global,v=e.stat;if(d=g?i:v?i[m]||a(m,{}):(i[m]||{}).prototype,d)for(u in t){if(p=t[u],e.dontCallGetSet?(f=r(d,u),h=f&&f.value):h=d[u],n=l(g?u:m+(v?".":"#")+u,e.forced),!n&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(e.sham||h&&h.sham)&&o(p,"sham",!0),s(d,u,p,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4374:function(e,t,n){var i=n(7293);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var i=n(4374),r=Function.prototype.call;e.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},6530:function(e,t,n){var i=n(9781),r=n(2597),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!i||i&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},1702:function(e,t,n){var i=n(4374),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);e.exports=i?s:function(e){return function(){return o.apply(e,arguments)}}},5005:function(e,t,n){var i=n(7854),r=n(614),o=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e]):i[e]&&i[e][t]}},8173:function(e,t,n){var i=n(9662),r=n(8554);e.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}},7854:function(e,t,n){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var i=n(1702),r=n(7908),o=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(r(e),t)}},3501:function(e){e.exports={}},4664:function(e,t,n){var i=n(9781),r=n(7293),o=n(317);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var i=n(1702),r=n(7293),o=n(4326),s=Object,a=i("".split);e.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a(e,""):s(e)}:s},9587:function(e,t,n){var i=n(614),r=n(111),o=n(7674);e.exports=function(e,t,n){var s,a;return o&&i(s=t.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(e,a),e}},2788:function(e,t,n){var i=n(1702),r=n(614),o=n(5465),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},9909:function(e,t,n){var i,r,o,s=n(4811),a=n(7854),c=n(111),l=n(8880),d=n(2597),u=n(5465),h=n(6200),p=n(3501),f="Object already initialized",m=a.TypeError,g=a.WeakMap,v=function(e){return o(e)?r(e):i(e,{})},b=function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}};if(s||u.state){var S=u.state||(u.state=new g);S.get=S.get,S.has=S.has,S.set=S.set,i=function(e,t){if(S.has(e))throw m(f);return t.facade=e,S.set(e,t),t},r=function(e){return S.get(e)||{}},o=function(e){return S.has(e)}}else{var y=h("state");p[y]=!0,i=function(e,t){if(d(e,y))throw m(f);return t.facade=e,l(e,y,t),t},r=function(e){return d(e,y)?e[y]:{}},o=function(e){return d(e,y)}}e.exports={set:i,get:r,has:o,enforce:v,getterFor:b}},3157:function(e,t,n){var i=n(4326);e.exports=Array.isArray||function(e){return"Array"==i(e)}},614:function(e,t,n){var i=n(4154),r=i.all;e.exports=i.IS_HTMLDDA?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},4705:function(e,t,n){var i=n(7293),r=n(614),o=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n==d||n!=l&&(r(t)?i(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",d=s.POLYFILL="P";e.exports=s},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,n){var i=n(614),r=n(4154),o=r.all;e.exports=r.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:i(e)||e===o}:function(e){return"object"==typeof e?null!==e:i(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var i=n(5005),r=n(614),o=n(7976),s=n(3307),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&o(t.prototype,a(e))}},6244:function(e,t,n){var i=n(7466);e.exports=function(e){return i(e.length)}},6339:function(e,t,n){var i=n(1702),r=n(7293),o=n(614),s=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),d=n(9909),u=d.enforce,h=d.get,p=String,f=Object.defineProperty,m=i("".slice),g=i("".replace),v=i([].join),b=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),S=String(String).split("String"),y=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),b&&n&&s(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(r){}var i=u(e);return s(i,"source")||(i.source=v(S,"string"==typeof t?t:"")),e};Function.prototype.toString=y((function(){return o(this)&&h(this).source||l(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},6277:function(e,t,n){var i=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},3070:function(e,t,n){var i=n(9781),r=n(4664),o=n(3353),s=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",p="writable";t.f=i?o?function(e,t,n){if(s(e),t=a(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var i=d(e,t);i&&i[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:u in n?n[u]:i[u],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(s(e),t=a(t),s(n),r)try{return l(e,t,n)}catch(i){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var i=n(9781),r=n(6916),o=n(5296),s=n(9114),a=n(5656),c=n(4948),l=n(2597),d=n(4664),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=a(e),t=c(t),d)try{return u(e,t)}catch(n){}if(l(e,t))return s(!r(o.f,e,t),e[t])}},8006:function(e,t,n){var i=n(6324),r=n(748),o=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},7976:function(e,t,n){var i=n(1702);e.exports=i({}.isPrototypeOf)},6324:function(e,t,n){var i=n(1702),r=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),c=i([].push);e.exports=function(e,t){var n,i=o(e),l=0,d=[];for(n in i)!r(a,n)&&r(i,n)&&c(d,n);while(t.length>l)r(i,n=t[l++])&&(~s(d,n)||c(d,n));return d}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var i=n(1702),r=n(9670),o=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(s){}return function(n,i){return r(n),o(i),t?e(n,i):n.__proto__=i,n}}():void 0)},2140:function(e,t,n){var i=n(6916),r=n(614),o=n(111),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!o(a=i(n,e)))return a;if(r(n=e.valueOf)&&!o(a=i(n,e)))return a;if("string"!==t&&r(n=e.toString)&&!o(a=i(n,e)))return a;throw s("Can't convert object to primitive value")}},3887:function(e,t,n){var i=n(5005),r=n(1702),o=n(8006),s=n(5181),a=n(9670),c=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?c(t,n(e)):t}},7066:function(e,t,n){"use strict";var i=n(9670);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4488:function(e,t,n){var i=n(8554),r=TypeError;e.exports=function(e){if(i(e))throw r("Can't call method on "+e);return e}},6200:function(e,t,n){var i=n(2309),r=n(9711),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},5465:function(e,t,n){var i=n(7854),r=n(3072),o="__core-js_shared__",s=i[o]||r(o,{});e.exports=s},2309:function(e,t,n){var i=n(1913),r=n(5465);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.27.2",mode:i?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,n){var i=n(7392),r=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},1400:function(e,t,n){var i=n(9303),r=Math.max,o=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):o(n,t)}},5656:function(e,t,n){var i=n(8361),r=n(4488);e.exports=function(e){return i(r(e))}},9303:function(e,t,n){var i=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:i(t)}},7466:function(e,t,n){var i=n(9303),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},7908:function(e,t,n){var i=n(4488),r=Object;e.exports=function(e){return r(i(e))}},7593:function(e,t,n){var i=n(6916),r=n(111),o=n(2190),s=n(8173),a=n(2140),c=n(5112),l=TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!r(e)||o(e))return e;var n,c=s(e,d);if(c){if(void 0===t&&(t="default"),n=i(c,e,t),!r(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,n){var i=n(7593),r=n(2190);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},1694:function(e,t,n){var i=n(5112),r=i("toStringTag"),o={};o[r]="z",e.exports="[object z]"===String(o)},1340:function(e,t,n){var i=n(648),r=String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var i=n(1702),r=0,o=Math.random(),s=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++r+o,36)}},3307:function(e,t,n){var i=n(6293);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var i=n(9781),r=n(7293);e.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(e,t,n){var i=n(7854),r=n(614),o=i.WeakMap;e.exports=r(o)&&/native code/.test(String(o))},5112:function(e,t,n){var i=n(7854),r=n(2309),o=n(2597),s=n(9711),a=n(6293),c=n(3307),l=i.Symbol,d=r("wks"),u=c?l["for"]||l:l&&l.withoutSetter||s;e.exports=function(e){return o(d,e)||(d[e]=a&&o(l,e)?l[e]:u("Symbol."+e)),d[e]}},7658:function(e,t,n){"use strict";var i=n(2109),r=n(7908),o=n(6244),s=n(3658),a=n(7207),c=n(7293),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},u=l||!d();i({target:"Array",proto:!0,arity:1,forced:u},{push:function(e){var t=r(this),n=o(t),i=arguments.length;a(n+i);for(var c=0;c<i;c++)t[n]=arguments[c],n++;return s(t,n),n}})},541:function(e,t,n){"use strict";var i=n(2109),r=n(7908),o=n(6244),s=n(3658),a=n(5117),c=n(7207),l=1!==[].unshift(0),d=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},u=l||!d();i({target:"Array",proto:!0,arity:1,forced:u},{unshift:function(e){var t=r(this),n=o(t),i=arguments.length;if(i){c(n+i);var l=n;while(l--){var d=l+i;l in t?t[d]=t[l]:a(t,d)}for(var u=0;u<i;u++)t[u]=arguments[u]}return s(t,n+i)}})},2087:function(e,t,n){var i=n(7854),r=n(9781),o=n(7045),s=n(7066),a=n(7293),c=i.RegExp,l=c.prototype,d=r&&a((function(){var e=!0;try{c(".","d")}catch(d){e=!1}var t={},n="",i=e?"dgimsy":"gimsy",r=function(e,i){Object.defineProperty(t,e,{get:function(){return n+=i,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in e&&(o.hasIndices="d"),o)r(s,o[s]);var a=Object.getOwnPropertyDescriptor(l,"flags").get.call(t);return a!==i||n!==i}));d&&o(l,"flags",{configurable:!0,get:s})},2801:function(e,t,n){"use strict";var i=n(2109),r=n(7854),o=n(5005),s=n(9114),a=n(3070).f,c=n(2597),l=n(5787),d=n(9587),u=n(6277),h=n(3678),p=n(1060),f=n(9781),m=n(1913),g="DOMException",v=o("Error"),b=o(g),S=function(){l(this,y);var e=arguments.length,t=u(e<1?void 0:arguments[0]),n=u(e<2?void 0:arguments[1],"Error"),i=new b(t,n),r=v(t);return r.name=g,a(i,"stack",s(1,p(r.stack,1))),d(i,this,S),i},y=S.prototype=b.prototype,w="stack"in v(g),C="stack"in new b(1,2),k=b&&f&&Object.getOwnPropertyDescriptor(r,g),E=!!k&&!(k.writable&&k.configurable),I=w&&!E&&!C;i({global:!0,constructor:!0,forced:m||I},{DOMException:I?S:b});var T=o(g),x=T.prototype;if(x.constructor!==T)for(var M in m||a(x,"constructor",s(1,T)),h)if(c(h,M)){var A=h[M],P=A.s;c(T,P)||a(T,P,s(6,A.c))}},3868:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1980:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9278:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1435:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6132:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function i(e){return"MSInputMethodContext"in e&&"msCrypto"in e}function r(e){if(i(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,r=t.getRandomValues,o=t.subtle;return n.map((function(e){return o[e]})).concat(r).every((function(e){return"function"===typeof e}))}return!1}t.isMsWindow=r},1460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4793);i.__exportStar(n(3868),t),i.__exportStar(n(1980),t),i.__exportStar(n(9278),t),i.__exportStar(n(1435),t),i.__exportStar(n(6132),t)},4793:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return y},__asyncGenerator:function(){return S},__asyncValues:function(){return w},__await:function(){return b},__awaiter:function(){return d},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return T},__createBinding:function(){return h},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return r},__generator:function(){return u},__importDefault:function(){return E},__importStar:function(){return k},__makeTemplateObject:function(){return C},__metadata:function(){return l},__param:function(){return c},__read:function(){return m},__rest:function(){return s},__spread:function(){return g},__spreadArrays:function(){return v},__values:function(){return f}});n(7658);var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function u(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{while((void 0===t||t-- >0)&&!(i=o.next()).done)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{c(r[e](t))}catch(n){u(o[0][3],n)}}function c(e){e.value instanceof b?Promise.resolve(e.value.v).then(l,d):u(o[0][2],e)}function l(e){a("next",e)}function d(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function y(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:b(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof f?f(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){t=e[n](t),r(i,o,t.done,t.value)}))}}function r(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},6241:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},5157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(4799),r=n(6615),o=n(3041),s=n(6685),a=n(1460),c=n(4980),l=n(9416),d=function(){function e(e){(0,s.supportsWebCrypto)((0,c.locateWindow)())?this.hash=new r.Sha256(e):(0,a.isMsWindow)((0,c.locateWindow)())?this.hash=new i.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update((0,l.convertToBuffer)(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();t.Sha256=d},4799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(1037),r=n(6241),o=n(1166),s=n(4980),a=function(){function e(e){this.secret=e,this.reset()}return e.prototype.update=function(e){var t=this;(0,i.isEmptyData)(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(l(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e.prototype.reset=function(){this.secret?(this.operation=c(this.secret).then((function(e){return(0,s.locateWindow)().msCrypto.subtle.sign(r.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,s.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();function c(e){return new Promise((function(t,n){var i=(0,s.locateWindow)().msCrypto.subtle.importKey("raw",l(e),r.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n(new Error("ImportKey completed without importing key."))},i.onerror=function(){n(new Error("ImportKey failed to import key."))}}))}function l(e){return"string"===typeof e?(0,o.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},8485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0;var i=n(4242);i.__exportStar(n(5157),t);var r=n(4799);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var o=n(6615);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return o.Sha256}})},1037:function(e,t){"use strict";function n(e){return"string"===typeof e?0===e.length:0===e.byteLength}Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=n},6615:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(9416),r=n(6241),o=n(4980),s=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!(0,i.isEmptyData)(e)){var t=(0,i.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return(0,o.locateWindow)().crypto.subtle.sign(r.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):(0,i.isEmptyData)(this.toHash)?Promise.resolve(r.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return(0,o.locateWindow)().crypto.subtle.digest(r.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise((function(t,n){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,i.convertToBuffer)(e.secret),r.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))},e}();t.Sha256=s},5718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var i=n(5169),r=function(){function e(){this.state=Int32Array.from(i.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>i.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");while(n>0)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===i.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%i.BLOCK_SIZE>=i.BLOCK_SIZE-8){for(var r=this.bufferLength;r<i.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<i.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(i.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(i.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(i.DIGEST_LENGTH);for(r=0;r<8;r++)o[4*r]=this.state[r]>>>24&255,o[4*r+1]=this.state[r]>>>16&255,o[4*r+2]=this.state[r]>>>8&255,o[4*r+3]=this.state[r]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,n=e.state,r=n[0],o=n[1],s=n[2],a=n[3],c=n[4],l=n[5],d=n[6],u=n[7],h=0;h<i.BLOCK_SIZE;h++){if(h<16)this.temp[h]=(255&t[4*h])<<24|(255&t[4*h+1])<<16|(255&t[4*h+2])<<8|255&t[4*h+3];else{var p=this.temp[h-2],f=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[h-15];var m=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[h]=(f+this.temp[h-7]|0)+(m+this.temp[h-16]|0)}var g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&l^~c&d)|0)+(u+(i.KEY[h]+this.temp[h]|0)|0)|0,v=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&o^r&s^o&s)|0;u=d,d=l,l=c,c=a+g|0,a=s,s=o,o=r,r=g+v|0}n[0]+=r,n[1]+=o,n[2]+=s,n[3]+=a,n[4]+=c,n[5]+=l,n[6]+=d,n[7]+=u},e}();t.RawSha256=r},5169:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},3041:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4242);i.__exportStar(n(3871),t)},3871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(4242),r=n(5169),o=n(5718),s=n(9416),a=function(){function e(e){this.secret=e,this.hash=new o.RawSha256,this.reset()}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(t){this.error=t}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e.prototype.reset=function(){if(this.hash=new o.RawSha256,this.secret){this.outer=new o.RawSha256;var e=c(this.secret),t=new Uint8Array(r.BLOCK_SIZE);t.set(e);for(var n=0;n<r.BLOCK_SIZE;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(n=0;n<e.byteLength;n++)e[n]=0}},e}();function c(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>r.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(r.BLOCK_SIZE);return i.set(t),i}t.Sha256=a},347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var i=n(1166),r="undefined"!==typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:i.fromUtf8;function o(e){return e instanceof Uint8Array?e:"string"===typeof e?r(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.convertToBuffer=o},9416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var i=n(347);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return i.convertToBuffer}});var r=n(7099);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var o=n(2975);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(3450);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},7099:function(e,t){"use strict";function n(e){return"string"===typeof e?0===e.length:0===e.byteLength}Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=n},2975:function(e,t){"use strict";function n(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=n},3450:function(e,t){"use strict";function n(e){if(!Uint32Array.from){var t=new Uint32Array(e.length),n=0;while(n<e.length)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=n},4242:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return y},__asyncGenerator:function(){return S},__asyncValues:function(){return w},__await:function(){return b},__awaiter:function(){return d},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return T},__createBinding:function(){return h},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return r},__generator:function(){return u},__importDefault:function(){return E},__importStar:function(){return k},__makeTemplateObject:function(){return C},__metadata:function(){return l},__param:function(){return c},__read:function(){return m},__rest:function(){return s},__spread:function(){return g},__spreadArrays:function(){return v},__values:function(){return f}});n(7658);var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function u(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{while((void 0===t||t-- >0)&&!(i=o.next()).done)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{c(r[e](t))}catch(n){u(o[0][3],n)}}function c(e){e.value instanceof b?Promise.resolve(e.value.v).then(l,d):u(o[0][2],e)}function l(e){a("next",e)}function d(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function y(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:b(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof f?f(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){t=e[n](t),r(i,o,t.done,t.value)}))}}function r(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},5830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var i=n(1888),r=function(){function e(){this.state=Int32Array.from(i.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>i.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");while(n>0)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===i.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%i.BLOCK_SIZE>=i.BLOCK_SIZE-8){for(var r=this.bufferLength;r<i.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<i.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(i.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(i.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(i.DIGEST_LENGTH);for(r=0;r<8;r++)o[4*r]=this.state[r]>>>24&255,o[4*r+1]=this.state[r]>>>16&255,o[4*r+2]=this.state[r]>>>8&255,o[4*r+3]=this.state[r]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,n=e.state,r=n[0],o=n[1],s=n[2],a=n[3],c=n[4],l=n[5],d=n[6],u=n[7],h=0;h<i.BLOCK_SIZE;h++){if(h<16)this.temp[h]=(255&t[4*h])<<24|(255&t[4*h+1])<<16|(255&t[4*h+2])<<8|255&t[4*h+3];else{var p=this.temp[h-2],f=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[h-15];var m=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[h]=(f+this.temp[h-7]|0)+(m+this.temp[h-16]|0)}var g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&l^~c&d)|0)+(u+(i.KEY[h]+this.temp[h]|0)|0)|0,v=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&o^r&s^o&s)|0;u=d,d=l,l=c,c=a+g|0,a=s,s=o,o=r,r=g+v|0}n[0]+=r,n[1]+=o,n[2]+=s,n[3]+=a,n[4]+=c,n[5]+=l,n[6]+=d,n[7]+=u},e}();t.RawSha256=r},1888:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},3487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6776);i.__exportStar(n(9401),t)},9401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(6776),r=n(1888),o=n(5830),s=n(1517),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=c(e),n=new Uint8Array(r.BLOCK_SIZE);n.set(t);for(var i=0;i<r.BLOCK_SIZE;i++)t[i]^=54,n[i]^=92;this.hash.update(t),this.outer.update(n);for(i=0;i<t.byteLength;i++)t[i]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(t){this.error=t}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function c(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>r.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(r.BLOCK_SIZE);return i.set(t),i}t.Sha256=a},6776:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return y},__asyncGenerator:function(){return S},__asyncValues:function(){return w},__await:function(){return b},__awaiter:function(){return d},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return T},__createBinding:function(){return h},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return r},__generator:function(){return u},__importDefault:function(){return E},__importStar:function(){return k},__makeTemplateObject:function(){return C},__metadata:function(){return l},__param:function(){return c},__read:function(){return m},__rest:function(){return s},__spread:function(){return g},__spreadArrays:function(){return v},__values:function(){return f}});n(7658);var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function u(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{while((void 0===t||t-- >0)&&!(i=o.next()).done)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{c(r[e](t))}catch(n){u(o[0][3],n)}}function c(e){e.value instanceof b?Promise.resolve(e.value.v).then(l,d):u(o[0][2],e)}function l(e){a("next",e)}function d(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function y(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:b(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof f?f(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){t=e[n](t),r(i,o,t.done,t.value)}))}}function r(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},6685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3253);i.__exportStar(n(2519),t)},2519:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var i=n(3253),r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){if(s(e)&&"object"===typeof e.crypto.subtle){var t=e.crypto.subtle;return a(t)}return!1}function s(e){if("object"===typeof e&&"object"===typeof e.crypto){var t=e.crypto.getRandomValues;return"function"===typeof t}return!1}function a(e){return e&&r.every((function(t){return"function"===typeof e[t]}))}function c(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n;return i.__generator(this,(function(i){switch(i.label){case 0:if(!a(e))return[2,!1];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=i.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return n=i.sent(),[2,16===n.byteLength];case 4:return i.sent(),[2,!1];case 5:return[2]}}))}))}t.supportsWebCrypto=o,t.supportsSecureRandom=s,t.supportsSubtleCrypto=a,t.supportsZeroByteGCM=c},3253:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return y},__asyncGenerator:function(){return S},__asyncValues:function(){return w},__await:function(){return b},__awaiter:function(){return d},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return T},__createBinding:function(){return h},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return r},__generator:function(){return u},__importDefault:function(){return E},__importStar:function(){return k},__makeTemplateObject:function(){return C},__metadata:function(){return l},__param:function(){return c},__read:function(){return m},__rest:function(){return s},__spread:function(){return g},__spreadArrays:function(){return v},__values:function(){return f}});n(7658);var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function u(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function h(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{while((void 0===t||t-- >0)&&!(i=o.next()).done)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{c(r[e](t))}catch(n){u(o[0][3],n)}}function c(e){e.value instanceof b?Promise.resolve(e.value.v).then(l,d):u(o[0][2],e)}function l(e){a("next",e)}function d(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function y(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:b(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof f?f(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){t=e[n](t),r(i,o,t.done,t.value)}))}}function r(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},9902:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var i=n(1166),r="undefined"!==typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:i.fromUtf8;function o(e){return e instanceof Uint8Array?e:"string"===typeof e?r(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.convertToBuffer=o},1517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var i=n(9902);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return i.convertToBuffer}});var r=n(3043);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var o=n(5560);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(4947);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},3043:function(e,t){"use strict";function n(e){return"string"===typeof e?0===e.length:0===e.byteLength}Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=n},5560:function(e,t){"use strict";function n(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=n},4947:function(e,t){"use strict";function n(e){if(!Uint32Array.from){var t=new Uint32Array(e.length),n=0;while(n<e.length)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=n},362:function(e,t,n){"use strict";n.r(t),n.d(t,{AllowNotifications:function(){return Cr},AppInstanceUserMembershipSummaryFilterSensitiveLog:function(){return Hr},AssociateChannelFlowCommand:function(){return du},AssociateChannelFlowRequestFilterSensitiveLog:function(){return qr},BadRequestException:function(){return Nr},BatchChannelMembershipsFilterSensitiveLog:function(){return Gr},BatchCreateChannelMembershipCommand:function(){return uu},BatchCreateChannelMembershipErrorFilterSensitiveLog:function(){return Zr},BatchCreateChannelMembershipRequestFilterSensitiveLog:function(){return Jr},BatchCreateChannelMembershipResponseFilterSensitiveLog:function(){return Qr},ChannelAssociatedWithFlowSummaryFilterSensitiveLog:function(){return eo},ChannelBanFilterSensitiveLog:function(){return to},ChannelBanSummaryFilterSensitiveLog:function(){return no},ChannelFilterSensitiveLog:function(){return Yr},ChannelFlowCallbackCommand:function(){return hu},ChannelFlowCallbackRequestFilterSensitiveLog:function(){return uo},ChannelFlowCallbackResponseFilterSensitiveLog:function(){return ho},ChannelFlowFilterSensitiveLog:function(){return so},ChannelFlowSummaryFilterSensitiveLog:function(){return po},ChannelMembershipFilterSensitiveLog:function(){return fo},ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:function(){return go},ChannelMembershipPreferencesFilterSensitiveLog:function(){return bo},ChannelMembershipSummaryFilterSensitiveLog:function(){return So},ChannelMembershipType:function(){return kr},ChannelMessageCallbackFilterSensitiveLog:function(){return lo},ChannelMessageFilterSensitiveLog:function(){return wo},ChannelMessagePersistenceType:function(){return Pr},ChannelMessageStatus:function(){return _r},ChannelMessageStatusStructureFilterSensitiveLog:function(){return yo},ChannelMessageSummaryFilterSensitiveLog:function(){return Co},ChannelMessageType:function(){return Or},ChannelMode:function(){return Ir},ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:function(){return ko},ChannelModeratorFilterSensitiveLog:function(){return Eo},ChannelModeratorSummaryFilterSensitiveLog:function(){return Io},ChannelPrivacy:function(){return Tr},ChannelSummaryFilterSensitiveLog:function(){return mo},ChimeSDKMessaging:function(){return ih},ChimeSDKMessagingClient:function(){return yr},ChimeSDKMessagingServiceException:function(){return wr},ConflictException:function(){return Lr},CreateChannelBanCommand:function(){return pu},CreateChannelBanRequestFilterSensitiveLog:function(){return Ao},CreateChannelBanResponseFilterSensitiveLog:function(){return Po},CreateChannelCommand:function(){return fu},CreateChannelFlowCommand:function(){return mu},CreateChannelFlowRequestFilterSensitiveLog:function(){return _o},CreateChannelFlowResponseFilterSensitiveLog:function(){return Oo},CreateChannelMembershipCommand:function(){return gu},CreateChannelMembershipRequestFilterSensitiveLog:function(){return Ro},CreateChannelMembershipResponseFilterSensitiveLog:function(){return Do},CreateChannelModeratorCommand:function(){return vu},CreateChannelModeratorRequestFilterSensitiveLog:function(){return Fo},CreateChannelModeratorResponseFilterSensitiveLog:function(){return No},CreateChannelRequestFilterSensitiveLog:function(){return xo},CreateChannelResponseFilterSensitiveLog:function(){return Mo},DeleteChannelBanCommand:function(){return bu},DeleteChannelBanRequestFilterSensitiveLog:function(){return Bo},DeleteChannelCommand:function(){return Su},DeleteChannelFlowCommand:function(){return yu},DeleteChannelFlowRequestFilterSensitiveLog:function(){return Uo},DeleteChannelMembershipCommand:function(){return wu},DeleteChannelMembershipRequestFilterSensitiveLog:function(){return Vo},DeleteChannelMessageCommand:function(){return Cu},DeleteChannelMessageRequestFilterSensitiveLog:function(){return jo},DeleteChannelModeratorCommand:function(){return ku},DeleteChannelModeratorRequestFilterSensitiveLog:function(){return zo},DeleteChannelRequestFilterSensitiveLog:function(){return Lo},DescribeChannelBanCommand:function(){return Eu},DescribeChannelBanRequestFilterSensitiveLog:function(){return Ho},DescribeChannelBanResponseFilterSensitiveLog:function(){return qo},DescribeChannelCommand:function(){return Iu},DescribeChannelFlowCommand:function(){return Tu},DescribeChannelFlowRequestFilterSensitiveLog:function(){return Ko},DescribeChannelFlowResponseFilterSensitiveLog:function(){return Go},DescribeChannelMembershipCommand:function(){return xu},DescribeChannelMembershipForAppInstanceUserCommand:function(){return Mu},DescribeChannelMembershipForAppInstanceUserRequestFilterSensitiveLog:function(){return Qo},DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:function(){return Xo},DescribeChannelMembershipRequestFilterSensitiveLog:function(){return Jo},DescribeChannelMembershipResponseFilterSensitiveLog:function(){return Zo},DescribeChannelModeratedByAppInstanceUserCommand:function(){return Au},DescribeChannelModeratedByAppInstanceUserRequestFilterSensitiveLog:function(){return Yo},DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:function(){return es},DescribeChannelModeratorCommand:function(){return Pu},DescribeChannelModeratorRequestFilterSensitiveLog:function(){return ts},DescribeChannelModeratorResponseFilterSensitiveLog:function(){return ns},DescribeChannelRequestFilterSensitiveLog:function(){return $o},DescribeChannelResponseFilterSensitiveLog:function(){return Wo},DisassociateChannelFlowCommand:function(){return _u},DisassociateChannelFlowRequestFilterSensitiveLog:function(){return is},ElasticChannelConfigurationFilterSensitiveLog:function(){return Xr},ErrorCode:function(){return Er},FallbackAction:function(){return Mr},ForbiddenException:function(){return Br},GetChannelMembershipPreferencesCommand:function(){return Ou},GetChannelMembershipPreferencesRequestFilterSensitiveLog:function(){return rs},GetChannelMembershipPreferencesResponseFilterSensitiveLog:function(){return os},GetChannelMessageCommand:function(){return Ru},GetChannelMessageRequestFilterSensitiveLog:function(){return ss},GetChannelMessageResponseFilterSensitiveLog:function(){return as},GetChannelMessageStatusCommand:function(){return Du},GetChannelMessageStatusRequestFilterSensitiveLog:function(){return cs},GetChannelMessageStatusResponseFilterSensitiveLog:function(){return ls},GetMessagingSessionEndpointCommand:function(){return Fu},GetMessagingSessionEndpointRequestFilterSensitiveLog:function(){return ds},GetMessagingSessionEndpointResponseFilterSensitiveLog:function(){return hs},IdentityFilterSensitiveLog:function(){return Kr},InvocationType:function(){return xr},LambdaConfigurationFilterSensitiveLog:function(){return io},ListChannelBansCommand:function(){return Nu},ListChannelBansRequestFilterSensitiveLog:function(){return ps},ListChannelBansResponseFilterSensitiveLog:function(){return fs},ListChannelFlowsCommand:function(){return Lu},ListChannelFlowsRequestFilterSensitiveLog:function(){return ms},ListChannelFlowsResponseFilterSensitiveLog:function(){return gs},ListChannelMembershipsCommand:function(){return Bu},ListChannelMembershipsForAppInstanceUserCommand:function(){return Uu},ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:function(){return Ss},ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:function(){return ys},ListChannelMembershipsRequestFilterSensitiveLog:function(){return vs},ListChannelMembershipsResponseFilterSensitiveLog:function(){return bs},ListChannelMessagesCommand:function(){return Vu},ListChannelMessagesRequestFilterSensitiveLog:function(){return ws},ListChannelMessagesResponseFilterSensitiveLog:function(){return Cs},ListChannelModeratorsCommand:function(){return ju},ListChannelModeratorsRequestFilterSensitiveLog:function(){return ks},ListChannelModeratorsResponseFilterSensitiveLog:function(){return Es},ListChannelsAssociatedWithChannelFlowCommand:function(){return zu},ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:function(){return xs},ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:function(){return Ms},ListChannelsCommand:function(){return $u},ListChannelsModeratedByAppInstanceUserCommand:function(){return Wu},ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:function(){return As},ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:function(){return Ps},ListChannelsRequestFilterSensitiveLog:function(){return Is},ListChannelsResponseFilterSensitiveLog:function(){return Ts},ListSubChannelsCommand:function(){return Hu},ListSubChannelsRequestFilterSensitiveLog:function(){return _s},ListSubChannelsResponseFilterSensitiveLog:function(){return Rs},ListTagsForResourceCommand:function(){return qu},ListTagsForResourceRequestFilterSensitiveLog:function(){return Ds},ListTagsForResourceResponseFilterSensitiveLog:function(){return Fs},MessageAttributeValueFilterSensitiveLog:function(){return ao},MessagingSessionEndpointFilterSensitiveLog:function(){return us},NotFoundException:function(){return Ur},ProcessorConfigurationFilterSensitiveLog:function(){return ro},ProcessorFilterSensitiveLog:function(){return oo},PushNotificationConfigurationFilterSensitiveLog:function(){return co},PushNotificationPreferencesFilterSensitiveLog:function(){return vo},PushNotificationType:function(){return Ar},PutChannelMembershipPreferencesCommand:function(){return Ku},PutChannelMembershipPreferencesRequestFilterSensitiveLog:function(){return Ns},PutChannelMembershipPreferencesResponseFilterSensitiveLog:function(){return Ls},RedactChannelMessageCommand:function(){return Gu},RedactChannelMessageRequestFilterSensitiveLog:function(){return Bs},RedactChannelMessageResponseFilterSensitiveLog:function(){return Us},ResourceLimitExceededException:function(){return Wr},SearchChannelsCommand:function(){return Ju},SearchChannelsRequestFilterSensitiveLog:function(){return js},SearchChannelsResponseFilterSensitiveLog:function(){return zs},SearchFieldFilterSensitiveLog:function(){return Vs},SearchFieldKey:function(){return Dr},SearchFieldOperator:function(){return Fr},SendChannelMessageCommand:function(){return Zu},SendChannelMessageRequestFilterSensitiveLog:function(){return $s},SendChannelMessageResponseFilterSensitiveLog:function(){return Ws},ServiceFailureException:function(){return Vr},ServiceUnavailableException:function(){return jr},SortOrder:function(){return Rr},SubChannelSummaryFilterSensitiveLog:function(){return Os},TagFilterSensitiveLog:function(){return To},TagResourceCommand:function(){return Qu},TagResourceRequestFilterSensitiveLog:function(){return Hs},ThrottledClientException:function(){return zr},UnauthorizedClientException:function(){return $r},UntagResourceCommand:function(){return Xu},UntagResourceRequestFilterSensitiveLog:function(){return qs},UpdateChannelCommand:function(){return Yu},UpdateChannelFlowCommand:function(){return eh},UpdateChannelFlowRequestFilterSensitiveLog:function(){return Js},UpdateChannelFlowResponseFilterSensitiveLog:function(){return Zs},UpdateChannelMessageCommand:function(){return th},UpdateChannelMessageRequestFilterSensitiveLog:function(){return Qs},UpdateChannelMessageResponseFilterSensitiveLog:function(){return Xs},UpdateChannelReadMarkerCommand:function(){return nh},UpdateChannelReadMarkerRequestFilterSensitiveLog:function(){return Ys},UpdateChannelReadMarkerResponseFilterSensitiveLog:function(){return ea},UpdateChannelRequestFilterSensitiveLog:function(){return Ks},UpdateChannelResponseFilterSensitiveLog:function(){return Gs},paginateListChannelBans:function(){return sh},paginateListChannelFlows:function(){return lh},paginateListChannelMemberships:function(){return mh},paginateListChannelMembershipsForAppInstanceUser:function(){return hh},paginateListChannelMessages:function(){return bh},paginateListChannelModerators:function(){return wh},paginateListChannels:function(){return Ph},paginateListChannelsAssociatedWithChannelFlow:function(){return Eh},paginateListChannelsModeratedByAppInstanceUser:function(){return xh},paginateListSubChannels:function(){return Rh},paginateSearchChannels:function(){return Nh}});var i={};n.r(i),n.d(i,{isVirtualHostableS3Bucket:function(){return vi},parseArn:function(){return bi},partition:function(){return li}});var r,o={};n.r(o),n.d(o,{aws:function(){return i},booleanEquals:function(){return Si},getAttr:function(){return wi},isSet:function(){return Ci},isValidHostLabel:function(){return gi},not:function(){return ki},parseURL:function(){return xi},stringEquals:function(){return Mi},substring:function(){return Ai},uriEncode:function(){return Pi}}),function(e){e["ENV"]="env",e["CONFIG"]="shared config entry"}(r||(r={}));const s=!1,a=!1,c=e=>"string"===typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),l=e=>c(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,d=e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if("string"===typeof t)return l(t);const e=await t();return l(e)},useFipsEndpoint:async()=>{const e="string"===typeof t?t:await t();return!!c(e)||("function"!==typeof n?Promise.resolve(!!n):n())}}};class u{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"===typeof t["query"]&&"object"===typeof t["headers"]}clone(){const e=new u({...this,headers:{...this.headers}});return e.query&&(e.query=h(e.query)),e}}function h(e){return Object.keys(e).reduce(((t,n)=>{const i=e[n];return{...t,[n]:Array.isArray(i)?[...i]:i}}),{})}const p="content-length";function f(e){return t=>async n=>{const i=n.request;if(u.isInstance(i)){const{body:t,headers:n}=i;if(t&&-1===Object.keys(n).map((e=>e.toLowerCase())).indexOf(p))try{const n=e(t);i.headers={...i.headers,[p]:String(n)}}catch(r){}}return t({...n,request:i})}}const m={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},g=e=>({applyToStack:t=>{t.add(f(e.bodyLengthChecker),m)}});n(7658);function v(e){const t={};if(e=e.replace(/^\?/,""),e)for(const n of e.split("&")){let[e,i=null]=n.split("=");e=decodeURIComponent(e),i&&(i=decodeURIComponent(i)),e in t?Array.isArray(t[e])?t[e].push(i):t[e]=[t[e],i]:t[e]=i}return t}const b=e=>{if("string"===typeof e)return b(new URL(e));const{hostname:t,pathname:n,port:i,protocol:r,search:o}=e;let s;return o&&(s=v(o)),{hostname:t,port:i?parseInt(i):void 0,protocol:r,path:n,query:s}},S=e=>"object"===typeof e?"url"in e?b(e.url):e:b(e),y=(e,t)=>(n,i)=>async i=>{const{response:r}=await n(i);try{const n=await t(r,e);return{response:r,output:n}}catch(o){throw Object.defineProperty(o,"$response",{value:r}),o}},w=(e,t)=>(n,i)=>async r=>{const o=i.endpointV2?.url&&e.urlParser?async()=>e.urlParser(i.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const s=await t(r.input,{...e,endpoint:o});return n({...r,request:s})},C={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},k={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function E(e,t,n){return{applyToStack:i=>{i.add(y(e,n),C),i.add(w(e,t),k)}}}const I=async e=>{const t=e?.Bucket||"";if("string"===typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),P(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!A(t)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},T=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,x=/(\d+\.){3}\d+/,M=/\.\./,A=e=>T.test(e)&&!x.test(e)&&!M.test(e),P=e=>{const[t,n,i,r,o,s]=e.split(":"),a="arn"===t&&e.split(":").length>=6,c=5===[t,n,i,o,s].filter(Boolean).length;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return"arn"===t&&!!n&&!!i&&!!o&&!!s},_=(e,t,n)=>{const i=async()=>{const i=n[e]??n[t];return"function"===typeof i?i():i};return"endpoint"===e||"endpoint"===t?async()=>{const e=await i();if(e&&"object"===typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:n,port:i,path:r}=e;return`${t}//${n}${i?":"+i:""}${r}`}}return e}:i},O=async(e,t,n,i)=>{const r=await R(e,t,n);if("function"!==typeof n.endpointProvider)throw new Error("config.endpointProvider is not set.");const o=n.endpointProvider(r,i);return o},R=async(e,t,n)=>{const i={},r=t?.getEndpointParameterInstructions?.()||{};for(const[o,s]of Object.entries(r))switch(s.type){case"staticContextParams":i[o]=s.value;break;case"contextParams":i[o]=e[s.name];break;case"clientContextParams":case"builtInParams":i[o]=await _(s.name,o,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(s))}return 0===Object.keys(r).length&&Object.assign(i,n),"s3"===String(n.serviceId).toLowerCase()&&await I(i),i},D=({config:e,instructions:t})=>(n,i)=>async r=>{const o=await O(r.input,{getEndpointParameterInstructions(){return t}},{...e},i);i.endpointV2=o,i.authSchemes=o.properties?.authSchemes;const s=i.authSchemes?.[0];return s&&(i["signing_region"]=s.signingRegion,i["signing_service"]=s.signingName),n({...r})},F={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:k.name},N=(e,t)=>({applyToStack:n=>{n.addRelativeTo(D({config:e,instructions:t}),F)}}),L=e=>{if("function"===typeof e)return e;const t=Promise.resolve(e);return()=>t},B=e=>{const t=e.tls??!0,{endpoint:n}=e,i=null!=n?async()=>S(await L(n)()):void 0,r=!!n;return{...e,endpoint:i,tls:t,isCustomEndpoint:r,useDualstackEndpoint:L(e.useDualstackEndpoint??!1),useFipsEndpoint:L(e.useFipsEndpoint??!1)}};function U(e){return e}const V=e=>t=>async n=>{if(!u.isInstance(n.request))return t(n);const{request:i}=n,{handlerProtocol:r=""}=e.requestHandler.metadata||{};return r.indexOf("h2")>=0&&!i.headers[":authority"]?(delete i.headers["host"],i.headers[":authority"]=""):i.headers["host"]||(i.headers["host"]=i.hostname),t(n)},j={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},z=e=>({applyToStack:t=>{t.add(V(e),j)}}),$=()=>(e,t)=>async n=>{const i=await e(n),{clientName:r,commandName:o,logger:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:u}=l;if(!s)return i;if("function"===typeof s.info){const{$metadata:e,...t}=i.output;s.info({clientName:r,commandName:o,input:(d??a)(n.input),output:(u??c)(t),metadata:e})}return i},W={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},H=e=>({applyToStack:e=>{e.add($(),W)}}),q="X-Amzn-Trace-Id",K="AWS_LAMBDA_FUNCTION_NAME",G="_X_AMZN_TRACE_ID",J=e=>t=>async n=>{const{request:i}=n;if(!u.isInstance(i)||"node"!==e.runtime||i.headers.hasOwnProperty(q))return t(n);const r={NODE_ENV:"production",BASE_URL:"/chime-test/"}[K],o={NODE_ENV:"production",BASE_URL:"/chime-test/"}[G],s=e=>"string"===typeof e&&e.length>0;return s(r)&&s(o)&&(i.headers[q]=o),t({...n,request:i})},Z={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Q=e=>({applyToStack:t=>{t.add(J(e),Z)}});var X;(function(e){e["STANDARD"]="standard",e["ADAPTIVE"]="adaptive"})(X||(X={}));const Y=3,ee="STANDARD",te=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ne=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],ie=[500,502,503,504],re=["ECONNRESET","EPIPE","ETIMEDOUT"],oe=e=>429===e.$metadata?.httpStatusCode||te.includes(e.name)||1==e.$retryable?.throttling,se=e=>ne.includes(e.name)||re.includes(e?.code||"")||ie.includes(e.$metadata?.httpStatusCode||0),ae=e=>{if(void 0!==e.$metadata?.httpStatusCode){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!se(e)}return!1};class ce{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>setTimeout(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),oe(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}const le=100,de=2e4,ue=500,he=500,pe=5,fe=10,me=1,ge="amz-sdk-invocation-id",ve="amz-sdk-request",be=()=>{let e=le;const t=t=>Math.floor(Math.min(de,Math.random()*2**t*e)),n=t=>{e=t};return{computeNextBackoffDelay:t,setDelayBase:n}},Se=(e,t,n,i)=>{const r=e,o=i?.retryCost??pe,s=i?.timeoutRetryCost??fe,a=i?.retryBackoffStrategy??be();let c,l=e,d=Math.min(de,t),u=n??0;const h=e=>"TRANSIENT"===e?s:o,p=()=>u,f=()=>d,m=()=>c,g=e=>h(e)<=l,v=e=>{const t=e.errorType;if(!g(t))throw new Error("No retry token available");const n=h(t),i="THROTTLING"===t?ue:le;a.setDelayBase(i);const r=a.computeNextBackoffDelay(u);if(e.retryAfterHint){const t=e.retryAfterHint.getTime()-Date.now();d=Math.max(t||0,r)}else d=r;return u++,c=n,l-=n,n},b=e=>{l+=e??me,l=Math.min(l,r)};return{getRetryCount:p,getRetryDelay:f,getLastRetryCost:m,hasRetryTokens:g,getRetryTokenCount:v,releaseRetryTokens:b}};class ye{constructor(e){this.maxAttemptsProvider=e,this.mode=X.STANDARD,this.retryToken=Se(he,le),this.maxAttemptsProvider=e}async acquireInitialRetryToken(e){return this.retryToken}async refreshRetryTokenForRetry(e,t){const n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n))return e.getRetryTokenCount(t),e;throw new Error("No retry token available")}recordSuccess(e){this.retryToken.releaseRetryTokens(e.getLastRetryCost())}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn(`Max attempts provider could not resolve. Using default of ${Y}`),Y}}shouldRetry(e,t,n){const i=e.getRetryCount();return i<n&&e.hasRetryTokens(t.errorType)&&this.isRetryableError(t.errorType)}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class we{constructor(e,t){this.maxAttemptsProvider=e,this.mode=X.ADAPTIVE;const{rateLimiter:n}=t??{};this.rateLimiter=n??new ce,this.standardRetryStrategy=new ye(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const Ce=e=>{const{retryStrategy:t}=e,n=L(e.maxAttempts??Y);return{...e,maxAttempts:n,retryStrategy:async()=>{if(t)return t;const i=await L(e.retryMode)();return i===X.ADAPTIVE?new we(n):new ye(n)}}};class ke{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"===typeof t.statusCode&&"object"===typeof t.headers}}var Ee,Ie=new Uint8Array(16);function Te(){if(!Ee&&(Ee="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!Ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ee(Ie)}var xe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Me(e){return"string"===typeof e&&xe.test(e)}for(var Ae=Me,Pe=[],_e=0;_e<256;++_e)Pe.push((_e+256).toString(16).substr(1));function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Pe[e[t+0]]+Pe[e[t+1]]+Pe[e[t+2]]+Pe[e[t+3]]+"-"+Pe[e[t+4]]+Pe[e[t+5]]+"-"+Pe[e[t+6]]+Pe[e[t+7]]+"-"+Pe[e[t+8]]+Pe[e[t+9]]+"-"+Pe[e[t+10]]+Pe[e[t+11]]+Pe[e[t+12]]+Pe[e[t+13]]+Pe[e[t+14]]+Pe[e[t+15]]).toLowerCase();if(!Ae(n))throw TypeError("Stringified UUID is invalid");return n}var Re=Oe;function De(e,t,n){e=e||{};var i=e.random||(e.rng||Te)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return Re(i)}var Fe=De;const Ne=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"===typeof e?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Le=e=>(t,n)=>async i=>{let r=await e.retryStrategy();const o=await e.maxAttempts();if(!Be(r))return r?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,i);{let e=await r.acquireInitialRetryToken(n["partition_id"]),a=new Error,c=0,l=0;const{request:d}=i;u.isInstance(d)&&(d.headers[ge]=Fe());while(1)try{u.isInstance(d)&&(d.headers[ve]=`attempt=${c+1}; max=${o}`);const{response:n,output:s}=await t(i);return r.recordSuccess(e),s.$metadata.attempts=c+1,s.$metadata.totalRetryDelay=l,{response:n,output:s}}catch(Yi){const n=Ue(Yi);a=Ne(Yi);try{e=await r.refreshRetryTokenForRetry(e,n)}catch(s){throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=l,a}c=e.getRetryCount();const i=e.getRetryDelay();l+=i,await new Promise((e=>setTimeout(e,i)))}}},Be=e=>"undefined"!==typeof e.acquireInitialRetryToken&&"undefined"!==typeof e.refreshRetryTokenForRetry&&"undefined"!==typeof e.recordSuccess,Ue=e=>{const t={errorType:Ve(e)},n=$e(e.$response);return n&&(t.retryAfterHint=n),t},Ve=e=>oe(e)?"THROTTLING":se(e)?"TRANSIENT":ae(e)?"SERVER_ERROR":"CLIENT_ERROR",je={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ze=e=>({applyToStack:t=>{t.add(Le(e),je)}}),$e=e=>{if(!ke.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const n=e.headers[t],i=Number(n);if(!Number.isNaN(i))return new Date(1e3*i);const r=new Date(n);return r};class We extends Error{constructor(e,t=!0){super(e),this.tryNextLink=t,this.name="ProviderError",Object.setPrototypeOf(this,We.prototype)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}const He=(e,t,n)=>{let i,r,o,s=!1;const a=async()=>{r||(r=e());try{i=await r,o=!0,s=!1}finally{r=void 0}return i};return void 0===t?async e=>(o&&!e?.forceRefresh||(i=await a()),i):async e=>(o&&!e?.forceRefresh||(i=await a()),s?i:n&&!n(i)?(s=!0,i):t(i)?(await a(),i):i)};var qe=n(45);const Ke=e=>(new TextEncoder).encode(e),Ge=e=>"string"===typeof e?Ke(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Je="X-Amz-Algorithm",Ze="X-Amz-Credential",Qe="X-Amz-Date",Xe="X-Amz-SignedHeaders",Ye="X-Amz-Expires",et="X-Amz-Signature",tt="X-Amz-Security-Token",nt="authorization",it=Qe.toLowerCase(),rt="date",ot=[nt,it,rt],st=et.toLowerCase(),at="x-amz-content-sha256",ct=tt.toLowerCase(),lt={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},dt=/^proxy-/,ut=/^sec-/,ht="AWS4-HMAC-SHA256",pt="AWS4-HMAC-SHA256-PAYLOAD",ft="UNSIGNED-PAYLOAD",mt=50,gt="aws4_request",vt=604800,bt={},St=[],yt=(e,t,n)=>`${e}/${t}/${n}/${gt}`,wt=async(e,t,n,i,r)=>{const o=await Ct(e,t.secretAccessKey,t.accessKeyId),s=`${n}:${i}:${r}:${(0,qe.toHex)(o)}:${t.sessionToken}`;if(s in bt)return bt[s];St.push(s);while(St.length>mt)delete bt[St.shift()];let a=`AWS4${t.secretAccessKey}`;for(const c of[n,i,r,gt])a=await Ct(e,a,c);return bt[s]=a},Ct=(e,t,n)=>{const i=new e(t);return i.update(Ge(n)),i.digest()},kt=({headers:e},t,n)=>{const i={};for(const r of Object.keys(e).sort()){if(void 0==e[r])continue;const o=r.toLowerCase();(o in lt||t?.has(o)||dt.test(o)||ut.test(o))&&(!n||n&&!n.has(o))||(i[o]=e[r].trim().replace(/\s+/g," "))}return i},Et=e=>encodeURIComponent(e).replace(/[!'()*]/g,It),It=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,Tt=({query:e={}})=>{const t=[],n={};for(const i of Object.keys(e).sort()){if(i.toLowerCase()===st)continue;t.push(i);const r=e[i];"string"===typeof r?n[i]=`${Et(i)}=${Et(r)}`:Array.isArray(r)&&(n[i]=r.slice(0).sort().reduce(((e,t)=>e.concat([`${Et(i)}=${Et(t)}`])),[]).join("&"))}return t.map((e=>n[e])).filter((e=>e)).join("&")},xt=e=>"function"===typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),Mt=async({headers:e,body:t},n)=>{for(const i of Object.keys(e))if(i.toLowerCase()===at)return e[i];if(void 0==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"===typeof t||ArrayBuffer.isView(t)||xt(t)){const e=new n;return e.update(Ge(t)),(0,qe.toHex)(await e.digest())}return ft},At=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},Pt=({headers:e,query:t,...n})=>({...n,headers:{...e},query:t?_t(t):void 0}),_t=e=>Object.keys(e).reduce(((t,n)=>{const i=e[n];return{...t,[n]:Array.isArray(i)?[...i]:i}}),{}),Ot=(e,t={})=>{const{headers:n,query:i={}}="function"===typeof e.clone?e.clone():Pt(e);for(const r of Object.keys(n)){const e=r.toLowerCase();"x-amz-"!==e.slice(0,6)||t.unhoistableHeaders?.has(e)||(i[r]=n[r],delete n[r])}return{...e,headers:n,query:i}},Rt=e=>{e="function"===typeof e.clone?e.clone():Pt(e);for(const t of Object.keys(e.headers))ot.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},Dt=e=>Ft(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Ft=e=>"number"===typeof e?new Date(1e3*e):"string"===typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e;class Nt{constructor({applyChecksum:e,credentials:t,region:n,service:i,sha256:r,uriEscapePath:o=!0}){this.service=i,this.sha256=r,this.uriEscapePath=o,this.applyChecksum="boolean"!==typeof e||e,this.regionProvider=L(n),this.credentialProvider=L(t)}async presign(e,t={}){const{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:r,unhoistableHeaders:o,signableHeaders:s,signingRegion:a,signingService:c}=t,l=await this.credentialProvider();this.validateResolvedCredentials(l);const d=a??await this.regionProvider(),{longDate:u,shortDate:h}=Lt(n);if(i>vt)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const p=yt(h,d,c??this.service),f=Ot(Rt(e),{unhoistableHeaders:o});l.sessionToken&&(f.query[tt]=l.sessionToken),f.query[Je]=ht,f.query[Ze]=`${l.accessKeyId}/${p}`,f.query[Qe]=u,f.query[Ye]=i.toString(10);const m=kt(f,r,s);return f.query[Xe]=Bt(m),f.query[et]=await this.getSignature(u,p,this.getSigningKey(l,d,h,c),this.createCanonicalRequest(f,m,await Mt(e,this.sha256))),f}async sign(e,t){return"string"===typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:n=new Date,priorSignature:i,signingRegion:r,signingService:o}){const s=r??await this.regionProvider(),{shortDate:a,longDate:c}=Lt(n),l=yt(a,s,o??this.service),d=await Mt({headers:{},body:t},this.sha256),u=new this.sha256;u.update(e);const h=(0,qe.toHex)(await u.digest()),p=[pt,c,l,i,h,d].join("\n");return this.signString(p,{signingDate:n,signingRegion:s,signingService:o})}async signString(e,{signingDate:t=new Date,signingRegion:n,signingService:i}={}){const r=await this.credentialProvider();this.validateResolvedCredentials(r);const o=n??await this.regionProvider(),{shortDate:s}=Lt(t),a=new this.sha256(await this.getSigningKey(r,o,s,i));return a.update(Ge(e)),(0,qe.toHex)(await a.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:r,signingService:o}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const a=r??await this.regionProvider(),c=Rt(e),{longDate:l,shortDate:d}=Lt(t),u=yt(d,a,o??this.service);c.headers[it]=l,s.sessionToken&&(c.headers[ct]=s.sessionToken);const h=await Mt(c,this.sha256);!At(at,c.headers)&&this.applyChecksum&&(c.headers[at]=h);const p=kt(c,i,n),f=await this.getSignature(l,u,this.getSigningKey(s,a,d,o),this.createCanonicalRequest(c,p,h));return c.headers[nt]=`${ht} Credential=${s.accessKeyId}/${u}, SignedHeaders=${Bt(p)}, Signature=${f}`,c}createCanonicalRequest(e,t,n){const i=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${Tt(e)}\n${i.map((e=>`${e}:${t[e]}`)).join("\n")}\n\n${i.join(";")}\n${n}`}async createStringToSign(e,t,n){const i=new this.sha256;i.update(Ge(n));const r=await i.digest();return`${ht}\n${e}\n${t}\n${(0,qe.toHex)(r)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const r of e.split("/"))0!==r?.length&&"."!==r&&(".."===r?t.pop():t.push(r));const n=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`,i=encodeURIComponent(n);return i.replace(/%2F/g,"/")}return e}async getSignature(e,t,n,i){const r=await this.createStringToSign(e,t,i),o=new this.sha256(await n);return o.update(Ge(r)),(0,qe.toHex)(await o.digest())}getSigningKey(e,t,n,i){return wt(this.sha256,e,n,t,i||this.service)}validateResolvedCredentials(e){if("object"!==typeof e||"string"!==typeof e.accessKeyId||"string"!==typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const Lt=e=>{const t=Dt(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Bt=e=>Object.keys(e).sort().join(";"),Ut=3e5,Vt=e=>{const t=e.credentials?jt(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:n=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:r}=e;let o;return o=e.signer?L(e.signer):e.regionInfoProvider?()=>L(e.region)().then((async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t])).then((([i,o])=>{const{signingRegion:s,signingService:a}=i;e.signingRegion=e.signingRegion||s||o,e.signingName=e.signingName||a||e.serviceId;const c={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},l=e.signerConstructor||Nt;return new l(c)})):async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await L(e.region)(),properties:{}},i);const o=i.signingRegion,s=i.signingName;e.signingRegion=e.signingRegion||o,e.signingName=e.signingName||s||e.serviceId;const a={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},c=e.signerConstructor||Nt;return new c(a)},{...e,systemClockOffset:i,signingEscapePath:n,credentials:t,signer:o}},jt=e=>"function"===typeof e?He(e,(e=>void 0!==e.expiration&&e.expiration.getTime()-Date.now()<Ut),(e=>void 0!==e.expiration)):L(e),zt=e=>new Date(Date.now()+e),$t=(e,t)=>Math.abs(zt(t).getTime()-e)>=3e5,Wt=(e,t)=>{const n=Date.parse(e);return $t(n,t)?n-Date.now():t},Ht=e=>(t,n)=>async function(i){if(!u.isInstance(i.request))return t(i);const r=n.endpointV2?.properties?.authSchemes?.[0],o="sigv4a"===r?.name?r?.signingRegionSet?.join(","):void 0,s=await e.signer(r),a=await t({...i,request:await s.sign(i.request,{signingDate:zt(e.systemClockOffset),signingRegion:o||n["signing_region"],signingService:n["signing_service"]})}).catch((t=>{const n=t.ServerTime??qt(t.$response);throw n&&(e.systemClockOffset=Wt(n,e.systemClockOffset)),t})),c=qt(a.response);return c&&(e.systemClockOffset=Wt(c,e.systemClockOffset)),a},qt=e=>ke.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,Kt={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Gt=e=>({applyToStack:t=>{t.addRelativeTo(Ht(e),Kt)}});function Jt(e){return{...e,customUserAgent:"string"===typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent}}const Zt="user-agent",Qt="x-amz-user-agent",Xt=" ",Yt=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,en=e=>(t,n)=>async i=>{const{request:r}=i;if(!u.isInstance(r))return t(i);const{headers:o}=r,s=n?.userAgent?.map(tn)||[],a=(await e.defaultUserAgentProvider()).map(tn),c=e?.customUserAgent?.map(tn)||[],l=[...a,...s,...c].join(Xt),d=[...a.filter((e=>e.startsWith("aws-sdk-"))),...c].join(Xt);return"browser"!==e.runtime?(d&&(o[Qt]=o[Qt]?`${o[Zt]} ${d}`:d),o[Zt]=l):o[Qt]=l,t({...i,request:r})},tn=([e,t])=>{const n=e.indexOf("/"),i=e.substring(0,n);let r=e.substring(n+1);return"api"===i&&(r=r.toLowerCase()),[i,r,t].filter((e=>e&&e.length>0)).map((e=>e?.replace(Yt,"_"))).join("/")},nn={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},rn=e=>({applyToStack:t=>{t.add(en(e),nn)}});class on{trace(){}debug(){}info(){}warn(){}error(){}}const sn=()=>{let e=[],t=[];const n=new Set,i=e=>e.sort(((e,t)=>an[t.step]-an[e.step]||cn[t.priority||"normal"]-cn[e.priority||"normal"])),r=i=>{let r=!1;const o=e=>!e.name||e.name!==i||(r=!0,n.delete(i),!1);return e=e.filter(o),t=t.filter(o),r},o=i=>{let r=!1;const o=e=>e.middleware!==i||(r=!0,e.name&&n.delete(e.name),!1);return e=e.filter(o),t=t.filter(o),r},s=n=>(e.forEach((e=>{n.add(e.middleware,{...e})})),t.forEach((e=>{n.addRelativeTo(e.middleware,{...e})})),n),a=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...a(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...a(e))})),t},c=(n=!1)=>{const r=[],o=[],s={};e.forEach((e=>{const t={...e,before:[],after:[]};t.name&&(s[t.name]=t),r.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};t.name&&(s[t.name]=t),o.push(t)})),o.forEach((e=>{if(e.toMiddleware){const t=s[e.toMiddleware];if(void 0===t){if(n)return;throw new Error(`${e.toMiddleware} is not found when adding ${e.name||"anonymous"} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}));const c=i(r).map(a).reduce(((e,t)=>(e.push(...t),e)),[]);return c},l={add:(t,i={})=>{const{name:r,override:o}=i,s={step:"initialize",priority:"normal",middleware:t,...i};if(r){if(n.has(r)){if(!o)throw new Error(`Duplicate middleware name '${r}'`);const t=e.findIndex((e=>e.name===r)),n=e[t];if(n.step!==s.step||n.priority!==s.priority)throw new Error(`"${r}" middleware with ${n.priority} priority in ${n.step} step cannot be overridden by same-name middleware with ${s.priority} priority in ${s.step} step.`);e.splice(t,1)}n.add(r)}e.push(s)},addRelativeTo:(e,i)=>{const{name:r,override:o}=i,s={middleware:e,...i};if(r){if(n.has(r)){if(!o)throw new Error(`Duplicate middleware name '${r}'`);const e=t.findIndex((e=>e.name===r)),n=t[e];if(n.toMiddleware!==s.toMiddleware||n.relation!==s.relation)throw new Error(`"${r}" middleware ${n.relation} "${n.toMiddleware}" middleware cannot be overridden by same-name middleware ${s.relation} "${s.toMiddleware}" middleware.`);t.splice(e,1)}n.add(r)}t.push(s)},clone:()=>s(sn()),use:e=>{e.applyToStack(l)},remove:e=>"string"===typeof e?r(e):o(e),removeByTag:i=>{let r=!1;const o=e=>{const{tags:t,name:o}=e;return!t||!t.includes(i)||(o&&n.delete(o),r=!0,!1)};return e=e.filter(o),t=t.filter(o),r},concat:e=>{const t=s(sn());return t.use(e),t},applyToStack:s,identify:()=>c(!0).map((e=>e.name+": "+(e.tags||[]).join(","))),resolve:(e,t)=>{for(const n of c().map((e=>e.middleware)).reverse())e=n(e,t);return e}};return l},an={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},cn={high:3,normal:2,low:1};class ln{constructor(e){this.middlewareStack=sn(),this.config=e}send(e,t,n){const i="function"!==typeof t?t:void 0,r="function"===typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,i);if(!r)return o(e).then((e=>e.output));o(e).then((e=>r(null,e.output)),(e=>r(e))).catch((()=>{}))}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}class dn{constructor(){this.middlewareStack=sn()}}const un="***SensitiveInformation***",hn=e=>{if(null!==e&&void 0!==e){if("number"===typeof e){if(0!==e&&1!==e||In.warn(En(`Expected boolean, got ${typeof e}: ${e}`)),0===e)return!1;if(1===e)return!0}if("string"===typeof e){const t=e.toLowerCase();if("false"!==t&&"true"!==t||In.warn(En(`Expected boolean, got ${typeof e}: ${e}`)),"false"===t)return!1;if("true"===t)return!0}if("boolean"===typeof e)return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},pn=e=>{if(null!==e&&void 0!==e){if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&In.warn(En(`Expected number but observed string: ${e}`)),t}if("number"===typeof e)return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},fn=(Math.ceil(2**127*(2-2**-23)),e=>{if(null!==e&&void 0!==e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}}),mn=e=>gn(e,32),gn=(e,t)=>{const n=fn(e);if(void 0!==n&&vn(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},vn=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},bn=(e,t)=>{if(null===e||void 0===e){if(t)throw new TypeError(`Expected a non-null value for ${t}`);throw new TypeError("Expected a non-null value")}return e},Sn=e=>{if(null===e||void 0===e)return;if("object"===typeof e&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},yn=e=>{if(null!==e&&void 0!==e){if("string"===typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return In.warn(En(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},wn=e=>pn("string"==typeof e?kn(e):e),Cn=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,kn=e=>{const t=e.match(Cn);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},En=e=>String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((e=>!e.includes("stackTraceWarning"))).join("\n"),In={warn:console.warn};const Tn=e=>{if(null===e||void 0===e)return;let t;if("number"===typeof e)t=e;else{if("string"!==typeof e)throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");t=wn(e)}if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(1e3*t))};class xn extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,xn.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}const Mn=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,n])=>{void 0!=e[t]&&""!==e[t]||(e[t]=n)}));const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},An=({output:e,parsedBody:t,exceptionCtor:n,errorCode:i})=>{const r=Pn(e),o=r.httpStatusCode?r.httpStatusCode+"":void 0,s=new n({name:t.code||t.Code||i||o||"UnknownError",$fault:"client",$metadata:r});throw Mn(s,t)},Pn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),_n=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},On=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),n=new t;return Object.setPrototypeOf(n,e.prototype),n};On.prototype=Object.create(String.prototype,{constructor:{value:On,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(On,String);function Rn(e,t,n){let i,r,o;if("undefined"===typeof t&&"undefined"===typeof n)i={},o=e;else{if(i=e,"function"===typeof t)return r=t,o=n,Dn(i,r,o);o=t}for(const s of Object.keys(o)){if(!Array.isArray(o[s])){i[s]=o[s];continue}let[e,t]=o[s];if("function"===typeof t){let n;const r=void 0===e&&null!=(n=t()),o="function"===typeof e&&!!e(void 0)||"function"!==typeof e&&!!e;r?i[s]=n:o&&(i[s]=t())}else{const n=void 0===e&&null!=t,r="function"===typeof e&&!!e(t)||"function"!==typeof e&&!!e;(n||r)&&(i[s]=t)}}return i}const Dn=(e,t,n)=>Rn(e,Object.entries(n).reduce(((e,[n,i])=>(Array.isArray(i)?e[n]=i:e[n]="function"===typeof i?[t,i()]:[t,i],e)),{}));function Fn(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}const Nn=(e,t,n,i,r,o)=>{if(null==t||void 0===t[n])throw new Error("No value provided for input HTTP label: "+n+".");{const t=i();if(t.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");e=e.replace(r,o?t.split("/").map((e=>Fn(e))).join("/"):Fn(t))}return e};const Ln=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"chime"});var Bn={i8:"3.264.0"},Un=n(8485);function Vn(e){const t=[];for(let n of Object.keys(e).sort()){const i=e[n];if(n=Et(n),Array.isArray(i))for(let e=0,r=i.length;e<r;e++)t.push(`${n}=${Et(i[e])}`);else{let e=n;(i||"string"===typeof i)&&(e+=`=${Et(i)}`),t.push(e)}}return t.join("&")}function jn(e=0){return new Promise(((t,n)=>{e&&setTimeout((()=>{const t=new Error(`Request did not complete within ${e} ms`);t.name="TimeoutError",n(t)}),e)}))}class zn{constructor(e){"function"===typeof e?this.configProvider=e().then((e=>e||{})):(this.config=e??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(e,{abortSignal:t}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout;if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",Promise.reject(e)}let i=e.path;if(e.query){const t=Vn(e.query);t&&(i+=`?${t}`)}const{port:r,method:o}=e,s=`${e.protocol}//${e.hostname}${r?`:${r}`:""}${i}`,a="GET"===o||"HEAD"===o?void 0:e.body,c={body:a,headers:new Headers(e.headers),method:o};"undefined"!==typeof AbortController&&(c["signal"]=t);const l=new Request(s,c),d=[fetch(l).then((e=>{const t=e.headers,n={};for(const r of t.entries())n[r[0]]=r[1];const i=void 0!==e.body;return i?{response:new ke({headers:n,statusCode:e.status,body:e.body})}:e.blob().then((t=>({response:new ke({headers:n,statusCode:e.status,body:t})})))})),jn(n)];return t&&d.push(new Promise(((e,n)=>{t.onabort=()=>{const e=new Error("Request aborted");e.name="AbortError",n(e)}}))),Promise.race(d)}}const $n={},Wn=new Array(64);for(let Lh=0,Bh="A".charCodeAt(0),Uh="Z".charCodeAt(0);Lh+Bh<=Uh;Lh++){const e=String.fromCharCode(Lh+Bh);$n[e]=Lh,Wn[Lh]=e}for(let Lh=0,Bh="a".charCodeAt(0),Uh="z".charCodeAt(0);Lh+Bh<=Uh;Lh++){const e=String.fromCharCode(Lh+Bh),t=Lh+26;$n[e]=t,Wn[t]=e}for(let Lh=0;Lh<10;Lh++){$n[Lh.toString(10)]=Lh+52;const e=Lh.toString(10),t=Lh+52;$n[e]=t,Wn[t]=e}$n["+"]=62,Wn[62]="+",$n["/"]=63,Wn[63]="/";const Hn=6,qn=8,Kn=63,Gn=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;const n=new ArrayBuffer(t),i=new DataView(n);for(let r=0;r<e.length;r+=4){let t=0,n=0;for(let i=r,a=r+3;i<=a;i++)if("="!==e[i]){if(!(e[i]in $n))throw new TypeError(`Invalid character ${e[i]} in base64 string.`);t|=$n[e[i]]<<(a-i)*Hn,n+=Hn}else t>>=Hn;const o=r/4*3;t>>=n%qn;const s=Math.floor(n/qn);for(let e=0;e<s;e++){const n=(s-e-1)*qn;i.setUint8(o+e,(t&255<<n)>>n)}}return new Uint8Array(n)};function Jn(e){let t="";for(let n=0;n<e.length;n+=3){let i=0,r=0;for(let t=n,s=Math.min(n+3,e.length);t<s;t++)i|=e[t]<<(s-t-1)*qn,r+=qn;const o=Math.ceil(r/Hn);i<<=o*Hn-r;for(let e=1;e<=o;e++){const n=(o-e)*Hn;t+=Wn[(i&Kn<<n)>>n]}t+="==".slice(0,4-o)}return t}const Zn=e=>"function"===typeof Blob&&e instanceof Blob?Qn(e):Xn(e);async function Qn(e){const t=await Yn(e),n=Gn(t);return new Uint8Array(n)}async function Xn(e){let t=new Uint8Array(0);const n=e.getReader();let i=!1;while(!i){const{done:e,value:r}=await n.read();if(r){const e=t;t=new Uint8Array(e.length+r.length),t.set(e),t.set(r,e.length)}i=e}return t}function Yn(e){return new Promise(((t,n)=>{const i=new FileReader;i.onloadend=()=>{if(2!==i.readyState)return n(new Error("Reader aborted too early"));const e=i.result??"",r=e.indexOf(","),o=r>-1?r+1:e.length;t(e.substring(o))},i.onabort=()=>n(new Error("Read aborted")),i.onerror=()=>n(i.error),i.readAsDataURL(e)}))}const ei=e=>()=>Promise.reject(e),ti=e=>{if("string"===typeof e){let t=e.length;for(let n=t-1;n>=0;n--){const i=e.charCodeAt(n);i>127&&i<=2047?t++:i>2047&&i<=65535&&(t+=2),i>=56320&&i<=57343&&n--}return t}if("number"===typeof e.byteLength)return e.byteLength;if("number"===typeof e.size)return e.size;throw new Error(`Body Length computation failed for ${e}`)};var ni=n(7544),ii=n.n(ni);const ri=({serviceId:e,clientVersion:t})=>async()=>{const n="undefined"!==typeof window&&window?.navigator?.userAgent?ii().parse(window.navigator.userAgent):void 0,i=[["aws-sdk-js",t],[`os/${n?.os?.name||"other"}`,n?.os?.version],["lang/js"],["md/browser",`${n?.browser?.name??"unknown"}_${n?.browser?.version??"unknown"}`]];return e&&i.push([`api/${e}`,t]),i},oi=e=>new TextDecoder("utf-8").decode(e);var si=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}}],"version":"1.1"}');const{partitions:ai}=si,ci=ai.find((e=>"aws"===e.id)),li=e=>{for(const t of ai){const{regions:n,outputs:i}=t;for(const[t,r]of Object.entries(n))if(t===e)return{...i,...r}}for(const t of ai){const{regionRegex:n,outputs:i}=t;if(new RegExp(n).test(e))return{...i}}if(!ci)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...ci.outputs}},di="endpoints";function ui(e){return"object"!==typeof e||null==e?e:"ref"in e?`$${ui(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(ui).join(", ")})`:JSON.stringify(e,null,2)}class hi extends Error{constructor(e){super(e),this.name="EndpointError"}}const pi=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),fi=e=>pi.test(e)||e.startsWith("[")&&e.endsWith("]"),mi=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),gi=(e,t=!1)=>{if(!t)return mi.test(e);const n=e.split(".");for(const i of n)if(!gi(i))return!1;return!0},vi=(e,t=!1)=>{if(t){for(const t of e.split("."))if(!vi(t))return!1;return!0}return!!gi(e)&&(!(e.length<3||e.length>63)&&(e===e.toLowerCase()&&!fi(e)))},bi=e=>{const t=e.split(":");if(t.length<6)return null;const[n,i,r,o,s,...a]=t;return"arn"!==n||""===i||""===r||""===a[0]?null:{partition:i,service:r,region:o,accountId:s,resourceId:a[0].includes("/")?a[0].split("/"):a}},Si=(e,t)=>e===t,yi=e=>{const t=e.split("."),n=[];for(const i of t){const t=i.indexOf("[");if(-1!==t){if(i.indexOf("]")!==i.length-1)throw new hi(`Path: '${e}' does not end with ']'`);const r=i.slice(t+1,-1);if(Number.isNaN(parseInt(r)))throw new hi(`Invalid array index: '${r}' in path: '${e}'`);0!==t&&n.push(i.slice(0,t)),n.push(r)}else n.push(i)}return n},wi=(e,t)=>yi(t).reduce(((n,i)=>{if("object"!==typeof n)throw new hi(`Index '${i}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(i)]:n[i]}),e),Ci=e=>null!=e,ki=e=>!e;var Ei,Ii;(function(e){e["HEADER"]="header",e["QUERY"]="query"})(Ei||(Ei={})),function(e){e["HTTP"]="http",e["HTTPS"]="https"}(Ii||(Ii={}));const Ti={[Ii.HTTP]:80,[Ii.HTTPS]:443},xi=e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"===typeof e&&"hostname"in e){const{hostname:t,port:n,protocol:i="",path:r="",query:o={}}=e,s=new URL(`${i}//${t}${n?`:${n}`:""}${r}`);return s.search=Object.entries(o).map((([e,t])=>`${e}=${t}`)).join("&"),s}return new URL(e)}catch(t){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:i,hostname:r,pathname:o,protocol:s,search:a}=t;if(a)return null;const c=s.slice(0,-1);if(!Object.values(Ii).includes(c))return null;const l=fi(r),d=n.includes(`${i}:${Ti[c]}`)||"string"===typeof e&&e.includes(`${i}:${Ti[c]}`),u=`${i}${d?`:${Ti[c]}`:""}`;return{scheme:c,authority:u,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},Mi=(e,t)=>e===t,Ai=(e,t,n,i)=>t>=n||e.length<n?null:i?e.substring(e.length-n,e.length-t):e.substring(t,n),Pi=e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),_i=(e,t)=>{const n=[],i={...t.endpointParams,...t.referenceRecord};let r=0;while(r<e.length){const t=e.indexOf("{",r);if(-1===t){n.push(e.slice(r));break}n.push(e.slice(r,t));const o=e.indexOf("}",t);if(-1===o){n.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[o+1]&&(n.push(e.slice(t+1,o)),r=o+2);const s=e.substring(t+1,o);if(s.includes("#")){const[e,t]=s.split("#");n.push(wi(i[e],t))}else n.push(i[s]);r=o+1}return n.join("")},Oi=({ref:e},t)=>{const n={...t.endpointParams,...t.referenceRecord};return n[e]},Ri=(e,t,n)=>{if("string"===typeof e)return _i(e,n);if(e["fn"])return Di(e,n);if(e["ref"])return Oi(e,n);throw new hi(`'${t}': ${String(e)} is not a string, function or reference.`)},Di=({fn:e,argv:t},n)=>{const i=t.map((e=>["boolean","number"].includes(typeof e)?e:Ri(e,"arg",n)));return e.split(".").reduce(((e,t)=>e[t]),o)(...i)},Fi=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new hi(`'${e}' is already defined in Reference Record.`);const i=Di(t,n);return n.logger?.debug?.(di,`evaluateCondition: ${ui(t)} = ${ui(i)}`),{result:""===i||!!i,...null!=e&&{toAssign:{name:e,value:i}}}},Ni=(e=[],t)=>{const n={};for(const i of e){const{result:e,toAssign:r}=Fi(i,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};r&&(n[r.name]=r.value,t.logger?.debug?.(di,`assign: ${r.name} := ${ui(r.value)}`))}return{result:!0,referenceRecord:n}},Li=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>({...e,[n]:i.map((e=>{const i=Ri(e,"Header value entry",t);if("string"!==typeof i)throw new hi(`Header '${n}' value '${i}' is not a string`);return i}))})),{}),Bi=(e,t)=>{if(Array.isArray(e))return e.map((e=>Bi(e,t)));switch(typeof e){case"string":return _i(e,t);case"object":if(null===e)throw new hi(`Unexpected endpoint property: ${e}`);return Ui(e,t);case"boolean":return e;default:throw new hi("Unexpected endpoint property type: "+typeof e)}},Ui=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>({...e,[n]:Bi(i,t)})),{}),Vi=(e,t)=>{const n=Ri(e,"Endpoint URL",t);if("string"===typeof n)try{return new URL(n)}catch(i){throw console.error(`Failed to construct URL with ${n}`,i),i}throw new hi("Endpoint URL must be a string, got "+typeof n)},ji=(e,t)=>{const{conditions:n,endpoint:i}=e,{result:r,referenceRecord:o}=Ni(n,t);if(!r)return;const s={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:l}=i;return t.logger?.debug?.(di,`Resolving endpoint from template: ${ui(i)}`),{...void 0!=l&&{headers:Li(l,s)},...void 0!=c&&{properties:Ui(c,s)},url:Vi(a,s)}},zi=(e,t)=>{const{conditions:n,error:i}=e,{result:r,referenceRecord:o}=Ni(n,t);if(r)throw new hi(Ri(i,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},$i=(e,t)=>{const{conditions:n,rules:i}=e,{result:r,referenceRecord:o}=Ni(n,t);if(r)return Wi(i,{...t,referenceRecord:{...t.referenceRecord,...o}})},Wi=(e,t)=>{for(const n of e)if("endpoint"===n.type){const e=ji(n,t);if(e)return e}else if("error"===n.type)zi(n,t);else{if("tree"!==n.type)throw new hi(`Unknown endpoint rule: ${n}`);{const e=$i(n,t);if(e)return e}}throw new hi("Rules evaluation failed")},Hi=(e,t)=>{const{endpointParams:n,logger:i}=t,{parameters:r,rules:o}=e;t.logger?.debug?.(di,`Initial EndpointParams: ${ui(n)}`);const s=Object.entries(r).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(s.length>0)for(const[l,d]of s)n[l]=n[l]??d;const a=Object.entries(r).filter((([,e])=>e.required)).map((([e])=>e));for(const l of a)if(null==n[l])throw new hi(`Missing required parameter: '${l}'`);const c=Wi(o,{endpointParams:n,logger:i,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{const e=new URL(t.endpointParams.Endpoint),{protocol:n,port:i}=e;c.url.protocol=n,c.url.port=i}catch(Yi){}return t.logger?.debug?.(di,`Resolved endpoint: ${ui(c)}`),c},qi="fn",Ki="argv",Gi="ref",Ji=!0,Zi=!1,Qi="String",Xi="PartitionResult",Yi="tree",er="error",tr="endpoint",nr={required:!0,default:!1,type:"Boolean"},ir={[Gi]:"Endpoint"},rr={[qi]:"booleanEquals",[Ki]:[{[Gi]:"UseFIPS"},!0]},or={[qi]:"booleanEquals",[Ki]:[{[Gi]:"UseDualStack"},!0]},sr={},ar={[qi]:"booleanEquals",[Ki]:[!0,{[qi]:"getAttr",[Ki]:[{[Gi]:Xi},"supportsFIPS"]}]},cr={[qi]:"booleanEquals",[Ki]:[!0,{[qi]:"getAttr",[Ki]:[{[Gi]:Xi},"supportsDualStack"]}]},lr=[ir],dr=[rr],ur=[or],hr={version:"1.0",parameters:{Region:{required:Ji,type:Qi},UseDualStack:nr,UseFIPS:nr,Endpoint:{required:Zi,type:Qi}},rules:[{conditions:[{[qi]:"aws.partition",[Ki]:[{[Gi]:"Region"}],assign:Xi}],type:Yi,rules:[{conditions:[{[qi]:"isSet",[Ki]:lr},{[qi]:"parseURL",[Ki]:lr,assign:"url"}],type:Yi,rules:[{conditions:dr,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:er},{type:Yi,rules:[{conditions:ur,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:er},{endpoint:{url:ir,properties:sr,headers:sr},type:tr}]}]},{conditions:[rr,or],type:Yi,rules:[{conditions:[ar,cr],type:Yi,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:sr,headers:sr},type:tr}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:er}]},{conditions:dr,type:Yi,rules:[{conditions:[ar],type:Yi,rules:[{type:Yi,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:sr,headers:sr},type:tr}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:er}]},{conditions:ur,type:Yi,rules:[{conditions:[cr],type:Yi,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:sr,headers:sr},type:tr}]},{error:"DualStack is enabled but this partition does not support DualStack",type:er}]},{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:sr,headers:sr},type:tr}]}]},pr=hr,fr=(e,t={})=>Hi(pr,{endpointParams:e,logger:t.logger}),mr=e=>({apiVersion:"2021-05-15",base64Decoder:e?.base64Decoder??Gn,base64Encoder:e?.base64Encoder??Jn,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??fr,logger:e?.logger??new on,serviceId:e?.serviceId??"Chime SDK Messaging",urlParser:e?.urlParser??b,utf8Decoder:e?.utf8Decoder??Ke,utf8Encoder:e?.utf8Encoder??oi}),gr=["in-region","cross-region","mobile","standard","legacy"],vr=({defaultsMode:e}={})=>He((async()=>{const t="function"===typeof e?await e():e;switch(t?.toLowerCase()){case"auto":return Promise.resolve(br()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${gr.join(", ")}, got ${t}`)}})),br=()=>{const e="undefined"!==typeof window&&window?.navigator?.userAgent?ii().parse(window.navigator.userAgent):void 0,t=e?.platform?.type;return"tablet"===t||"mobile"===t},Sr=e=>{const t=vr(e),n=()=>t().then(_n),i=mr(e);return{...i,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??ti,credentialDefaultProvider:e?.credentialDefaultProvider??(e=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??ri({serviceId:i.serviceId,clientVersion:Bn.i8}),maxAttempts:e?.maxAttempts??Y,region:e?.region??ei("Region is missing"),requestHandler:e?.requestHandler??new zn(n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||ee),sha256:e?.sha256??Un.Sha256,streamCollector:e?.streamCollector??Zn,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(s)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(a))}};class yr extends ln{constructor(e){const t=Sr(e),n=Ln(t),i=d(n),r=B(i),o=Ce(r),s=U(o),a=Vt(s),c=Jt(a);super(c),this.config=c,this.middlewareStack.use(ze(this.config)),this.middlewareStack.use(g(this.config)),this.middlewareStack.use(z(this.config)),this.middlewareStack.use(H(this.config)),this.middlewareStack.use(Q(this.config)),this.middlewareStack.use(Gt(this.config)),this.middlewareStack.use(rn(this.config))}destroy(){super.destroy()}}class wr extends xn{constructor(e){super(e),Object.setPrototypeOf(this,wr.prototype)}}var Cr,kr,Er,Ir,Tr,xr,Mr,Ar,Pr,_r,Or,Rr,Dr,Fr;(function(e){e["ALL"]="ALL",e["FILTERED"]="FILTERED",e["NONE"]="NONE"})(Cr||(Cr={})),function(e){e["DEFAULT"]="DEFAULT",e["HIDDEN"]="HIDDEN"}(kr||(kr={})),function(e){e["AccessDenied"]="AccessDenied",e["BadRequest"]="BadRequest",e["Conflict"]="Conflict",e["Forbidden"]="Forbidden",e["NotFound"]="NotFound",e["PhoneNumberAssociationsExist"]="PhoneNumberAssociationsExist",e["PreconditionFailed"]="PreconditionFailed",e["ResourceLimitExceeded"]="ResourceLimitExceeded",e["ServiceFailure"]="ServiceFailure",e["ServiceUnavailable"]="ServiceUnavailable",e["Throttled"]="Throttled",e["Throttling"]="Throttling",e["Unauthorized"]="Unauthorized",e["Unprocessable"]="Unprocessable",e["VoiceConnectorGroupAssociationsExist"]="VoiceConnectorGroupAssociationsExist"}(Er||(Er={}));class Nr extends wr{constructor(e){super({name:"BadRequestException",$fault:"client",...e}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Nr.prototype),this.Code=e.Code,this.Message=e.Message}}class Lr extends wr{constructor(e){super({name:"ConflictException",$fault:"client",...e}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,Lr.prototype),this.Code=e.Code,this.Message=e.Message}}class Br extends wr{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,Br.prototype),this.Code=e.Code,this.Message=e.Message}}class Ur extends wr{constructor(e){super({name:"NotFoundException",$fault:"client",...e}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,Ur.prototype),this.Code=e.Code,this.Message=e.Message}}class Vr extends wr{constructor(e){super({name:"ServiceFailureException",$fault:"server",...e}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,Vr.prototype),this.Code=e.Code,this.Message=e.Message}}class jr extends wr{constructor(e){super({name:"ServiceUnavailableException",$fault:"server",...e}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,jr.prototype),this.Code=e.Code,this.Message=e.Message}}class zr extends wr{constructor(e){super({name:"ThrottledClientException",$fault:"client",...e}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,zr.prototype),this.Code=e.Code,this.Message=e.Message}}class $r extends wr{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,$r.prototype),this.Code=e.Code,this.Message=e.Message}}class Wr extends wr{constructor(e){super({name:"ResourceLimitExceededException",$fault:"client",...e}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,Wr.prototype),this.Code=e.Code,this.Message=e.Message}}(function(e){e["RESTRICTED"]="RESTRICTED",e["UNRESTRICTED"]="UNRESTRICTED"})(Ir||(Ir={})),function(e){e["PRIVATE"]="PRIVATE",e["PUBLIC"]="PUBLIC"}(Tr||(Tr={})),function(e){e["ASYNC"]="ASYNC"}(xr||(xr={})),function(e){e["ABORT"]="ABORT",e["CONTINUE"]="CONTINUE"}(Mr||(Mr={})),function(e){e["DEFAULT"]="DEFAULT",e["VOIP"]="VOIP"}(Ar||(Ar={})),function(e){e["NON_PERSISTENT"]="NON_PERSISTENT",e["PERSISTENT"]="PERSISTENT"}(Pr||(Pr={})),function(e){e["DENIED"]="DENIED",e["FAILED"]="FAILED",e["PENDING"]="PENDING",e["SENT"]="SENT"}(_r||(_r={})),function(e){e["CONTROL"]="CONTROL",e["STANDARD"]="STANDARD"}(Or||(Or={})),function(e){e["ASCENDING"]="ASCENDING",e["DESCENDING"]="DESCENDING"}(Rr||(Rr={})),function(e){e["MEMBERS"]="MEMBERS"}(Dr||(Dr={})),function(e){e["EQUALS"]="EQUALS",e["INCLUDES"]="INCLUDES"}(Fr||(Fr={}));const Hr=e=>({...e}),qr=e=>({...e}),Kr=e=>({...e,...e.Name&&{Name:un}}),Gr=e=>({...e,...e.InvitedBy&&{InvitedBy:Kr(e.InvitedBy)},...e.Members&&{Members:e.Members.map((e=>Kr(e)))}}),Jr=e=>({...e}),Zr=e=>({...e}),Qr=e=>({...e,...e.BatchChannelMemberships&&{BatchChannelMemberships:Gr(e.BatchChannelMemberships)}}),Xr=e=>({...e}),Yr=e=>({...e,...e.Name&&{Name:un},...e.Metadata&&{Metadata:un},...e.CreatedBy&&{CreatedBy:Kr(e.CreatedBy)}}),eo=e=>({...e,...e.Name&&{Name:un},...e.Metadata&&{Metadata:un}}),to=e=>({...e,...e.Member&&{Member:Kr(e.Member)},...e.CreatedBy&&{CreatedBy:Kr(e.CreatedBy)}}),no=e=>({...e,...e.Member&&{Member:Kr(e.Member)}}),io=e=>({...e}),ro=e=>({...e}),oo=e=>({...e,...e.Name&&{Name:un}}),so=e=>({...e,...e.Processors&&{Processors:e.Processors.map((e=>oo(e)))},...e.Name&&{Name:un}}),ao=e=>({...e,...e.StringValues&&{StringValues:un}}),co=e=>({...e,...e.Title&&{Title:un},...e.Body&&{Body:un}}),lo=e=>({...e,...e.Content&&{Content:un},...e.Metadata&&{Metadata:un},...e.PushNotification&&{PushNotification:co(e.PushNotification)},...e.MessageAttributes&&{MessageAttributes:Object.entries(e.MessageAttributes).reduce(((e,[t,n])=>(e[t]=ao(n),e)),{})}}),uo=e=>({...e,...e.ChannelMessage&&{ChannelMessage:lo(e.ChannelMessage)}}),ho=e=>({...e}),po=e=>({...e,...e.Name&&{Name:un},...e.Processors&&{Processors:e.Processors.map((e=>oo(e)))}}),fo=e=>({...e,...e.InvitedBy&&{InvitedBy:Kr(e.InvitedBy)},...e.Member&&{Member:Kr(e.Member)}}),mo=e=>({...e,...e.Name&&{Name:un},...e.Metadata&&{Metadata:un}}),go=e=>({...e,...e.ChannelSummary&&{ChannelSummary:mo(e.ChannelSummary)}}),vo=e=>({...e,...e.FilterRule&&{FilterRule:un}}),bo=e=>({...e,...e.PushNotifications&&{PushNotifications:vo(e.PushNotifications)}}),So=e=>({...e,...e.Member&&{Member:Kr(e.Member)}}),yo=e=>({...e}),wo=e=>({...e,...e.Content&&{Content:un},...e.Metadata&&{Metadata:un},...e.Sender&&{Sender:Kr(e.Sender)},...e.MessageAttributes&&{MessageAttributes:Object.entries(e.MessageAttributes).reduce(((e,[t,n])=>(e[t]=ao(n),e)),{})}}),Co=e=>({...e,...e.Content&&{Content:un},...e.Metadata&&{Metadata:un},...e.Sender&&{Sender:Kr(e.Sender)},...e.MessageAttributes&&{MessageAttributes:Object.entries(e.MessageAttributes).reduce(((e,[t,n])=>(e[t]=ao(n),e)),{})}}),ko=e=>({...e,...e.ChannelSummary&&{ChannelSummary:mo(e.ChannelSummary)}}),Eo=e=>({...e,...e.Moderator&&{Moderator:Kr(e.Moderator)},...e.CreatedBy&&{CreatedBy:Kr(e.CreatedBy)}}),Io=e=>({...e,...e.Moderator&&{Moderator:Kr(e.Moderator)}}),To=e=>({...e,...e.Key&&{Key:un},...e.Value&&{Value:un}}),xo=e=>({...e,...e.Name&&{Name:un},...e.Metadata&&{Metadata:un},...e.ClientRequestToken&&{ClientRequestToken:un},...e.Tags&&{Tags:e.Tags.map((e=>To(e)))},...e.ChannelId&&{ChannelId:un}}),Mo=e=>({...e}),Ao=e=>({...e}),Po=e=>({...e,...e.Member&&{Member:Kr(e.Member)}}),_o=e=>({...e,...e.Processors&&{Processors:e.Processors.map((e=>oo(e)))},...e.Name&&{Name:un},...e.Tags&&{Tags:e.Tags.map((e=>To(e)))},...e.ClientRequestToken&&{ClientRequestToken:un}}),Oo=e=>({...e}),Ro=e=>({...e}),Do=e=>({...e,...e.Member&&{Member:Kr(e.Member)}}),Fo=e=>({...e}),No=e=>({...e,...e.ChannelModerator&&{ChannelModerator:Kr(e.ChannelModerator)}}),Lo=e=>({...e}),Bo=e=>({...e}),Uo=e=>({...e}),Vo=e=>({...e}),jo=e=>({...e}),zo=e=>({...e}),$o=e=>({...e}),Wo=e=>({...e,...e.Channel&&{Channel:Yr(e.Channel)}}),Ho=e=>({...e}),qo=e=>({...e,...e.ChannelBan&&{ChannelBan:to(e.ChannelBan)}}),Ko=e=>({...e}),Go=e=>({...e,...e.ChannelFlow&&{ChannelFlow:so(e.ChannelFlow)}}),Jo=e=>({...e}),Zo=e=>({...e,...e.ChannelMembership&&{ChannelMembership:fo(e.ChannelMembership)}}),Qo=e=>({...e}),Xo=e=>({...e,...e.ChannelMembership&&{ChannelMembership:go(e.ChannelMembership)}}),Yo=e=>({...e}),es=e=>({...e,...e.Channel&&{Channel:ko(e.Channel)}}),ts=e=>({...e}),ns=e=>({...e,...e.ChannelModerator&&{ChannelModerator:Eo(e.ChannelModerator)}}),is=e=>({...e}),rs=e=>({...e}),os=e=>({...e,...e.Member&&{Member:Kr(e.Member)},...e.Preferences&&{Preferences:bo(e.Preferences)}}),ss=e=>({...e}),as=e=>({...e,...e.ChannelMessage&&{ChannelMessage:wo(e.ChannelMessage)}}),cs=e=>({...e}),ls=e=>({...e}),ds=e=>({...e}),us=e=>({...e}),hs=e=>({...e}),ps=e=>({...e,...e.NextToken&&{NextToken:un}}),fs=e=>({...e,...e.NextToken&&{NextToken:un},...e.ChannelBans&&{ChannelBans:e.ChannelBans.map((e=>no(e)))}}),ms=e=>({...e,...e.NextToken&&{NextToken:un}}),gs=e=>({...e,...e.ChannelFlows&&{ChannelFlows:e.ChannelFlows.map((e=>po(e)))},...e.NextToken&&{NextToken:un}}),vs=e=>({...e,...e.NextToken&&{NextToken:un}}),bs=e=>({...e,...e.ChannelMemberships&&{ChannelMemberships:e.ChannelMemberships.map((e=>So(e)))},...e.NextToken&&{NextToken:un}}),Ss=e=>({...e,...e.NextToken&&{NextToken:un}}),ys=e=>({...e,...e.ChannelMemberships&&{ChannelMemberships:e.ChannelMemberships.map((e=>go(e)))},...e.NextToken&&{NextToken:un}}),ws=e=>({...e,...e.NextToken&&{NextToken:un}}),Cs=e=>({...e,...e.NextToken&&{NextToken:un},...e.ChannelMessages&&{ChannelMessages:e.ChannelMessages.map((e=>Co(e)))}}),ks=e=>({...e,...e.NextToken&&{NextToken:un}}),Es=e=>({...e,...e.NextToken&&{NextToken:un},...e.ChannelModerators&&{ChannelModerators:e.ChannelModerators.map((e=>Io(e)))}}),Is=e=>({...e,...e.NextToken&&{NextToken:un}}),Ts=e=>({...e,...e.Channels&&{Channels:e.Channels.map((e=>mo(e)))},...e.NextToken&&{NextToken:un}}),xs=e=>({...e,...e.NextToken&&{NextToken:un}}),Ms=e=>({...e,...e.Channels&&{Channels:e.Channels.map((e=>eo(e)))},...e.NextToken&&{NextToken:un}}),As=e=>({...e,...e.NextToken&&{NextToken:un}}),Ps=e=>({...e,...e.Channels&&{Channels:e.Channels.map((e=>ko(e)))},...e.NextToken&&{NextToken:un}}),_s=e=>({...e,...e.NextToken&&{NextToken:un}}),Os=e=>({...e}),Rs=e=>({...e,...e.NextToken&&{NextToken:un}}),Ds=e=>({...e}),Fs=e=>({...e,...e.Tags&&{Tags:e.Tags.map((e=>To(e)))}}),Ns=e=>({...e,...e.Preferences&&{Preferences:bo(e.Preferences)}}),Ls=e=>({...e,...e.Member&&{Member:Kr(e.Member)},...e.Preferences&&{Preferences:bo(e.Preferences)}}),Bs=e=>({...e}),Us=e=>({...e}),Vs=e=>({...e}),js=e=>({...e,...e.NextToken&&{NextToken:un}}),zs=e=>({...e,...e.Channels&&{Channels:e.Channels.map((e=>mo(e)))},...e.NextToken&&{NextToken:un}}),$s=e=>({...e,...e.Content&&{Content:un},...e.Metadata&&{Metadata:un},...e.ClientRequestToken&&{ClientRequestToken:un},...e.PushNotification&&{PushNotification:co(e.PushNotification)},...e.MessageAttributes&&{MessageAttributes:Object.entries(e.MessageAttributes).reduce(((e,[t,n])=>(e[t]=ao(n),e)),{})}}),Ws=e=>({...e}),Hs=e=>({...e,...e.Tags&&{Tags:e.Tags.map((e=>To(e)))}}),qs=e=>({...e,...e.TagKeys&&{TagKeys:un}}),Ks=e=>({...e,...e.Name&&{Name:un},...e.Metadata&&{Metadata:un}}),Gs=e=>({...e}),Js=e=>({...e,...e.Processors&&{Processors:e.Processors.map((e=>oo(e)))},...e.Name&&{Name:un}}),Zs=e=>({...e}),Qs=e=>({...e,...e.Content&&{Content:un},...e.Metadata&&{Metadata:un}}),Xs=e=>({...e}),Ys=e=>({...e}),ea=e=>({...e}),ta=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/channel-flow`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=JSON.stringify({...null!=e.ChannelFlowArn&&{ChannelFlowArn:e.ChannelFlowArn}}),new u({protocol:i,hostname:n,port:r,method:"PUT",headers:s,path:c,body:a})},na=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/memberships`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({operation:[,"batch-create"]});let l;return l=JSON.stringify({...null!=e.MemberArns&&{MemberArns:Zl(e.MemberArns,t)},...null!=e.SubChannelId&&{SubChannelId:e.SubChannelId},...null!=e.Type&&{Type:e.Type}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,query:c,body:l})},ia=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={"content-type":"application/json"};let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({operation:[,"channel-flow-callback"]});let l;return l=JSON.stringify({CallbackId:e.CallbackId??Fe(),...null!=e.ChannelMessage&&{ChannelMessage:ql(e.ChannelMessage,t)},...null!=e.DeleteResource&&{DeleteResource:e.DeleteResource}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,query:c,body:l})},ra=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels`;let c;return c=JSON.stringify({...null!=e.AppInstanceArn&&{AppInstanceArn:e.AppInstanceArn},...null!=e.ChannelId&&{ChannelId:e.ChannelId},ClientRequestToken:e.ClientRequestToken??Fe(),...null!=e.ElasticChannelConfiguration&&{ElasticChannelConfiguration:Gl(e.ElasticChannelConfiguration,t)},...null!=e.MemberArns&&{MemberArns:Wl(e.MemberArns,t)},...null!=e.Metadata&&{Metadata:e.Metadata},...null!=e.Mode&&{Mode:e.Mode},...null!=e.ModeratorArns&&{ModeratorArns:Kl(e.ModeratorArns,t)},...null!=e.Name&&{Name:e.Name},...null!=e.Privacy&&{Privacy:e.Privacy},...null!=e.Tags&&{Tags:dd(e.Tags,t)}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,body:c})},oa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/bans`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=JSON.stringify({...null!=e.MemberArn&&{MemberArn:e.MemberArn}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:c,body:a})},sa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channel-flows`;let c;return c=JSON.stringify({...null!=e.AppInstanceArn&&{AppInstanceArn:e.AppInstanceArn},...null!=e.ClientRequestToken&&{ClientRequestToken:e.ClientRequestToken},...null!=e.Name&&{Name:e.Name},...null!=e.Processors&&{Processors:nd(e.Processors,t)},...null!=e.Tags&&{Tags:dd(e.Tags,t)}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,body:c})},aa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/memberships`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=JSON.stringify({...null!=e.MemberArn&&{MemberArn:e.MemberArn},...null!=e.SubChannelId&&{SubChannelId:e.SubChannelId},...null!=e.Type&&{Type:e.Type}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:c,body:a})},ca=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/moderators`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=JSON.stringify({...null!=e.ChannelModeratorArn&&{ChannelModeratorArn:e.ChannelModeratorArn}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:c,body:a})},la=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"DELETE",headers:s,path:a,query:c,body:l})},da=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/bans/{MemberArn}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"MemberArn",(()=>e.MemberArn),"{MemberArn}",!1),new u({protocol:i,hostname:n,port:r,method:"DELETE",headers:s,path:c,body:a})},ua=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={};let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channel-flows/{ChannelFlowArn}`;return c=Nn(c,e,"ChannelFlowArn",(()=>e.ChannelFlowArn),"{ChannelFlowArn}",!1),new u({protocol:i,hostname:n,port:r,method:"DELETE",headers:s,path:c,body:a})},ha=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/memberships/{MemberArn}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=Nn(a,e,"MemberArn",(()=>e.MemberArn),"{MemberArn}",!1);const c=Dl({"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"DELETE",headers:s,path:a,query:c,body:l})},pa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/messages/{MessageId}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=Nn(a,e,"MessageId",(()=>e.MessageId),"{MessageId}",!1);const c=Dl({"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"DELETE",headers:s,path:a,query:c,body:l})},fa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"ChannelModeratorArn",(()=>e.ChannelModeratorArn),"{ChannelModeratorArn}",!1),new u({protocol:i,hostname:n,port:r,method:"DELETE",headers:s,path:c,body:a})},ma=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:c,body:a})},ga=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/bans/{MemberArn}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"MemberArn",(()=>e.MemberArn),"{MemberArn}",!1),new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:c,body:a})},va=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={};let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channel-flows/{ChannelFlowArn}`;return c=Nn(c,e,"ChannelFlowArn",(()=>e.ChannelFlowArn),"{ChannelFlowArn}",!1),new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:c,body:a})},ba=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/memberships/{MemberArn}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=Nn(a,e,"MemberArn",(()=>e.MemberArn),"{MemberArn}",!1);const c=Dl({"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Sa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({scope:[,"app-instance-user-membership"],"app-instance-user-arn":[,bn(e.AppInstanceUserArn,"AppInstanceUserArn")]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},ya=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({scope:[,"app-instance-user-moderated-channel"],"app-instance-user-arn":[,bn(e.AppInstanceUserArn,"AppInstanceUserArn")]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},wa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"ChannelModeratorArn",(()=>e.ChannelModeratorArn),"{ChannelModeratorArn}",!1),new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:c,body:a})},Ca=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"ChannelFlowArn",(()=>e.ChannelFlowArn),"{ChannelFlowArn}",!1),new u({protocol:i,hostname:n,port:r,method:"DELETE",headers:s,path:c,body:a})},ka=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"MemberArn",(()=>e.MemberArn),"{MemberArn}",!1),new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:c,body:a})},Ea=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/messages/{MessageId}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=Nn(a,e,"MessageId",(()=>e.MessageId),"{MessageId}",!1);const c=Dl({"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Ia=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/messages/{MessageId}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=Nn(a,e,"MessageId",(()=>e.MessageId),"{MessageId}",!1);const c=Dl({scope:[,"message-status"],"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Ta=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/endpoints/messaging-session`;let c;return c="",new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,body:c})},xa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/bans`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Ma=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channel-flows`,c=Dl({"app-instance-arn":[,bn(e.AppInstanceArn,"AppInstanceArn")],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Aa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/memberships`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({type:[,e.Type],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken],"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Pa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels`,c=Dl({scope:[,"app-instance-user-memberships"],"app-instance-user-arn":[,e.AppInstanceUserArn],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},_a=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/messages`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({"sort-order":[,e.SortOrder],"not-before":[()=>void 0!==e.NotBefore,()=>(e.NotBefore.toISOString().split(".")[0]+"Z").toString()],"not-after":[()=>void 0!==e.NotAfter,()=>(e.NotAfter.toISOString().split(".")[0]+"Z").toString()],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken],"sub-channel-id":[,e.SubChannelId]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Oa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/moderators`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Ra=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels`,c=Dl({"app-instance-arn":[,bn(e.AppInstanceArn,"AppInstanceArn")],privacy:[,e.Privacy],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Da=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels`,c=Dl({scope:[,"channel-flow-associations"],"channel-flow-arn":[,bn(e.ChannelFlowArn,"ChannelFlowArn")],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Fa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels`,c=Dl({scope:[,"app-instance-user-moderated-channels"],"app-instance-user-arn":[,e.AppInstanceUserArn],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Na=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/subchannels`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1);const c=Dl({"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},La=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/tags`,c=Dl({arn:[,bn(e.ResourceARN,"ResourceARN")]});let l;return new u({protocol:i,hostname:n,port:r,method:"GET",headers:s,path:a,query:c,body:l})},Ba=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"MemberArn",(()=>e.MemberArn),"{MemberArn}",!1),a=JSON.stringify({...null!=e.Preferences&&{Preferences:Hl(e.Preferences,t)}}),new u({protocol:i,hostname:n,port:r,method:"PUT",headers:s,path:c,body:a})},Ua=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/messages/{MessageId}`;a=Nn(a,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=Nn(a,e,"MessageId",(()=>e.MessageId),"{MessageId}",!1);const c=Dl({operation:[,"redact"]});let l;return l=JSON.stringify({...null!=e.SubChannelId&&{SubChannelId:e.SubChannelId}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,query:c,body:l})},Va=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels`,c=Dl({operation:[,"search"],"max-results":[()=>void 0!==e.MaxResults,()=>e.MaxResults.toString()],"next-token":[,e.NextToken]});let l;return l=JSON.stringify({...null!=e.Fields&&{Fields:sd(e.Fields,t)}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,query:c,body:l})},ja=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/messages`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=JSON.stringify({ClientRequestToken:e.ClientRequestToken??Fe(),...null!=e.Content&&{Content:e.Content},...null!=e.MessageAttributes&&{MessageAttributes:Ql(e.MessageAttributes,t)},...null!=e.Metadata&&{Metadata:e.Metadata},...null!=e.Persistence&&{Persistence:e.Persistence},...null!=e.PushNotification&&{PushNotification:id(e.PushNotification,t)},...null!=e.SubChannelId&&{SubChannelId:e.SubChannelId},...null!=e.Type&&{Type:e.Type}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:c,body:a})},za=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/tags`,c=Dl({operation:[,"tag-resource"]});let l;return l=JSON.stringify({...null!=e.ResourceARN&&{ResourceARN:e.ResourceARN},...null!=e.Tags&&{Tags:dd(e.Tags,t)}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,query:c,body:l})},$a=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/tags`,c=Dl({operation:[,"untag-resource"]});let l;return l=JSON.stringify({...null!=e.ResourceARN&&{ResourceARN:e.ResourceARN},...null!=e.TagKeys&&{TagKeys:ld(e.TagKeys,t)}}),new u({protocol:i,hostname:n,port:r,method:"POST",headers:s,path:a,query:c,body:l})},Wa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=JSON.stringify({...null!=e.Metadata&&{Metadata:e.Metadata},...null!=e.Mode&&{Mode:e.Mode},...null!=e.Name&&{Name:e.Name}}),new u({protocol:i,hostname:n,port:r,method:"PUT",headers:s,path:c,body:a})},Ha=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s={"content-type":"application/json"};let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channel-flows/{ChannelFlowArn}`;return c=Nn(c,e,"ChannelFlowArn",(()=>e.ChannelFlowArn),"{ChannelFlowArn}",!1),a=JSON.stringify({...null!=e.Name&&{Name:e.Name},...null!=e.Processors&&{Processors:nd(e.Processors,t)}}),new u({protocol:i,hostname:n,port:r,method:"PUT",headers:s,path:c,body:a})},qa=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/messages/{MessageId}`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),c=Nn(c,e,"MessageId",(()=>e.MessageId),"{MessageId}",!1),a=JSON.stringify({...null!=e.Content&&{Content:e.Content},...null!=e.Metadata&&{Metadata:e.Metadata},...null!=e.SubChannelId&&{SubChannelId:e.SubChannelId}}),new u({protocol:i,hostname:n,port:r,method:"PUT",headers:s,path:c,body:a})},Ka=async(e,t)=>{const{hostname:n,protocol:i="https",port:r,path:o}=await t.endpoint(),s=Dl({},su,{"content-type":"application/json","x-amz-chime-bearer":e.ChimeBearer});let a,c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/channels/{ChannelArn}/readMarker`;return c=Nn(c,e,"ChannelArn",(()=>e.ChannelArn),"{ChannelArn}",!1),a=JSON.stringify({...null!=e.SubChannelId&&{SubChannelId:e.SubChannelId}}),new u({protocol:i,hostname:n,port:r,method:"PUT",headers:s,path:c,body:a})},Ga=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Ja(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},Ja=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Za=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Qa(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.BatchChannelMemberships&&(n.BatchChannelMemberships=hd(i.BatchChannelMemberships,t)),null!=i.Errors&&(n.Errors=fd(i.Errors,t)),n},Qa=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await Ul(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Xa=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Ya(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.CallbackId&&(n.CallbackId=yn(i.CallbackId)),null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),n},Ya=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},ec=async(e,t)=>{if(201!==e.statusCode&&e.statusCode>=300)return tc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),n},tc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await Ul(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},nc=async(e,t)=>{if(201!==e.statusCode&&e.statusCode>=300)return ic(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.Member&&(n.Member=zd(i.Member,t)),n},ic=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await Ul(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},rc=async(e,t)=>{if(201!==e.statusCode&&e.statusCode>=300)return oc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelFlowArn&&(n.ChannelFlowArn=yn(i.ChannelFlowArn)),n},oc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await Ul(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},sc=async(e,t)=>{if(201!==e.statusCode&&e.statusCode>=300)return ac(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.Member&&(n.Member=zd(i.Member,t)),null!=i.SubChannelId&&(n.SubChannelId=yn(i.SubChannelId)),n},ac=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await Ul(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},cc=async(e,t)=>{if(201!==e.statusCode&&e.statusCode>=300)return lc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.ChannelModerator&&(n.ChannelModerator=zd(i.ChannelModerator,t)),n},lc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await Ul(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},dc=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return uc(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},uc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},hc=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return pc(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},pc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},fc=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return mc(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},mc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},gc=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return vc(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},vc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},bc=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return Sc(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},Sc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},yc=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return wc(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},wc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Cc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return kc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Channel&&(n.Channel=md(i.Channel,t)),n},kc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Ec=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Ic(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelBan&&(n.ChannelBan=bd(i.ChannelBan,t)),n},Ic=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Tc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return xc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelFlow&&(n.ChannelFlow=wd(i.ChannelFlow,t)),n},xc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Mc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Ac(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelMembership&&(n.ChannelMembership=Ed(i.ChannelMembership,t)),n},Ac=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Pc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return _c(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelMembership&&(n.ChannelMembership=Id(i.ChannelMembership,t)),n},_c=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Oc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Rc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Channel&&(n.Channel=Dd(i.Channel,t)),n},Rc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Dc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Fc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelModerator&&(n.ChannelModerator=Nd(i.ChannelModerator,t)),n},Fc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Nc=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return Lc(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},Lc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Bc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Uc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.Member&&(n.Member=zd(i.Member,t)),null!=i.Preferences&&(n.Preferences=xd(i.Preferences,t)),n},Uc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Vc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return jc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelMessage&&(n.ChannelMessage=Pd(i.ChannelMessage,t)),n},jc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await Bl(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},zc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return $c(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Status&&(n.Status=_d(i.Status,t)),n},$c=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Wc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Hc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Endpoint&&(n.Endpoint=Gd(i.Endpoint,t)),n},Hc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},qc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Kc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.ChannelBans&&(n.ChannelBans=yd(i.ChannelBans,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},Kc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Gc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Jc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelFlows&&(n.ChannelFlows=kd(i.ChannelFlows,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},Jc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Zc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Qc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.ChannelMemberships&&(n.ChannelMemberships=Ad(i.ChannelMemberships,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},Qc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Xc=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Yc(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelMemberships&&(n.ChannelMemberships=Td(i.ChannelMemberships,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},Yc=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},el=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return tl(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.ChannelMessages&&(n.ChannelMessages=Rd(i.ChannelMessages,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),null!=i.SubChannelId&&(n.SubChannelId=yn(i.SubChannelId)),n},tl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},nl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return il(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.ChannelModerators&&(n.ChannelModerators=Bd(i.ChannelModerators,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},il=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},rl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return ol(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Channels&&(n.Channels=Vd(i.Channels,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},ol=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},sl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return al(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Channels&&(n.Channels=vd(i.Channels,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},al=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},cl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return ll(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Channels&&(n.Channels=Fd(i.Channels,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},ll=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},dl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return ul(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),null!=i.SubChannels&&(n.SubChannels=eu(i.SubChannels,t)),n},ul=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},hl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return pl(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Tags&&(n.Tags=nu(i.Tags,t)),n},pl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},fl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return ml(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.Member&&(n.Member=zd(i.Member,t)),null!=i.Preferences&&(n.Preferences=xd(i.Preferences,t)),n},ml=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},gl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return vl(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.MessageId&&(n.MessageId=yn(i.MessageId)),null!=i.SubChannelId&&(n.SubChannelId=yn(i.SubChannelId)),n},vl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},bl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Sl(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.Channels&&(n.Channels=Vd(i.Channels,t)),null!=i.NextToken&&(n.NextToken=yn(i.NextToken)),n},Sl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},yl=async(e,t)=>{if(201!==e.statusCode&&e.statusCode>=300)return wl(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.MessageId&&(n.MessageId=yn(i.MessageId)),null!=i.Status&&(n.Status=_d(i.Status,t)),null!=i.SubChannelId&&(n.SubChannelId=yn(i.SubChannelId)),n},wl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Cl=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return kl(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},kl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await Ul(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},El=async(e,t)=>{if(204!==e.statusCode&&e.statusCode>=300)return Il(e,t);const n=Dl({$metadata:iu(e)});return await ru(e.body,t),n},Il=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Tl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return xl(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),n},xl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Ml=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Al(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelFlowArn&&(n.ChannelFlowArn=yn(i.ChannelFlowArn)),n},Al=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Pl=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return _l(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.MessageId&&(n.MessageId=yn(i.MessageId)),null!=i.Status&&(n.Status=_d(i.Status,t)),null!=i.SubChannelId&&(n.SubChannelId=yn(i.SubChannelId)),n},_l=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Ol=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Rl(e,t);const n=Dl({$metadata:iu(e)}),i=bn(Sn(await au(e.body,t)),"body");return null!=i.ChannelArn&&(n.ChannelArn=yn(i.ChannelArn)),null!=i.SubChannelId&&(n.SubChannelId=yn(i.SubChannelId)),n},Rl=async(e,t)=>{const n={...e,body:await cu(e.body,t)},i=lu(e,n.body);switch(i){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await Fl(n,t);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await Nl(n,t);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await Ll(n,t);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await Vl(n,t);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await jl(n,t);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await zl(n,t);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await $l(n,t);default:const r=n.body;An({output:e,parsedBody:r,exceptionCtor:wr,errorCode:i})}},Dl=Rn,Fl=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new Nr({$metadata:iu(e),...n});return Mn(r,e.body)},Nl=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new Lr({$metadata:iu(e),...n});return Mn(r,e.body)},Ll=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new Br({$metadata:iu(e),...n});return Mn(r,e.body)},Bl=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new Ur({$metadata:iu(e),...n});return Mn(r,e.body)},Ul=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new Wr({$metadata:iu(e),...n});return Mn(r,e.body)},Vl=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new Vr({$metadata:iu(e),...n});return Mn(r,e.body)},jl=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new jr({$metadata:iu(e),...n});return Mn(r,e.body)},zl=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new zr({$metadata:iu(e),...n});return Mn(r,e.body)},$l=async(e,t)=>{const n=Dl({}),i=e.body;null!=i.Code&&(n.Code=yn(i.Code)),null!=i.Message&&(n.Message=yn(i.Message));const r=new $r({$metadata:iu(e),...n});return Mn(r,e.body)},Wl=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),Hl=(e,t)=>({...null!=e.PushNotifications&&{PushNotifications:rd(e.PushNotifications,t)}}),ql=(e,t)=>({...null!=e.Content&&{Content:e.Content},...null!=e.MessageAttributes&&{MessageAttributes:Ql(e.MessageAttributes,t)},...null!=e.MessageId&&{MessageId:e.MessageId},...null!=e.Metadata&&{Metadata:e.Metadata},...null!=e.PushNotification&&{PushNotification:id(e.PushNotification,t)},...null!=e.SubChannelId&&{SubChannelId:e.SubChannelId}}),Kl=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),Gl=(e,t)=>({...null!=e.MaximumSubChannels&&{MaximumSubChannels:e.MaximumSubChannels},...null!=e.MinimumMembershipPercentage&&{MinimumMembershipPercentage:e.MinimumMembershipPercentage},...null!=e.TargetMembershipsPerSubChannel&&{TargetMembershipsPerSubChannel:e.TargetMembershipsPerSubChannel}}),Jl=(e,t)=>({...null!=e.InvocationType&&{InvocationType:e.InvocationType},...null!=e.ResourceArn&&{ResourceArn:e.ResourceArn}}),Zl=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),Ql=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>(null===i||(e[n]=Yl(i,t)),e)),{}),Xl=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),Yl=(e,t)=>({...null!=e.StringValues&&{StringValues:Xl(e.StringValues,t)}}),ed=(e,t)=>({...null!=e.Configuration&&{Configuration:td(e.Configuration,t)},...null!=e.ExecutionOrder&&{ExecutionOrder:e.ExecutionOrder},...null!=e.FallbackAction&&{FallbackAction:e.FallbackAction},...null!=e.Name&&{Name:e.Name}}),td=(e,t)=>({...null!=e.Lambda&&{Lambda:Jl(e.Lambda,t)}}),nd=(e,t)=>e.filter((e=>null!=e)).map((e=>ed(e,t))),id=(e,t)=>({...null!=e.Body&&{Body:e.Body},...null!=e.Title&&{Title:e.Title},...null!=e.Type&&{Type:e.Type}}),rd=(e,t)=>({...null!=e.AllowNotifications&&{AllowNotifications:e.AllowNotifications},...null!=e.FilterRule&&{FilterRule:e.FilterRule}}),od=(e,t)=>({...null!=e.Key&&{Key:e.Key},...null!=e.Operator&&{Operator:e.Operator},...null!=e.Values&&{Values:ad(e.Values,t)}}),sd=(e,t)=>e.filter((e=>null!=e)).map((e=>od(e,t))),ad=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),cd=(e,t)=>({...null!=e.Key&&{Key:e.Key},...null!=e.Value&&{Value:e.Value}}),ld=(e,t)=>e.filter((e=>null!=e)).map((e=>e)),dd=(e,t)=>e.filter((e=>null!=e)).map((e=>cd(e,t))),ud=(e,t)=>({ReadMarkerTimestamp:null!=e.ReadMarkerTimestamp?bn(Tn(pn(e.ReadMarkerTimestamp))):void 0,SubChannelId:yn(e.SubChannelId),Type:yn(e.Type)}),hd=(e,t)=>({ChannelArn:yn(e.ChannelArn),InvitedBy:null!=e.InvitedBy?zd(e.InvitedBy,t):void 0,Members:null!=e.Members?Wd(e.Members,t):void 0,SubChannelId:yn(e.SubChannelId),Type:yn(e.Type)}),pd=(e,t)=>({ErrorCode:yn(e.ErrorCode),ErrorMessage:yn(e.ErrorMessage),MemberArn:yn(e.MemberArn)}),fd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:pd(e,t)));return n},md=(e,t)=>({ChannelArn:yn(e.ChannelArn),ChannelFlowArn:yn(e.ChannelFlowArn),CreatedBy:null!=e.CreatedBy?zd(e.CreatedBy,t):void 0,CreatedTimestamp:null!=e.CreatedTimestamp?bn(Tn(pn(e.CreatedTimestamp))):void 0,ElasticChannelConfiguration:null!=e.ElasticChannelConfiguration?jd(e.ElasticChannelConfiguration,t):void 0,LastMessageTimestamp:null!=e.LastMessageTimestamp?bn(Tn(pn(e.LastMessageTimestamp))):void 0,LastUpdatedTimestamp:null!=e.LastUpdatedTimestamp?bn(Tn(pn(e.LastUpdatedTimestamp))):void 0,Metadata:yn(e.Metadata),Mode:yn(e.Mode),Name:yn(e.Name),Privacy:yn(e.Privacy)}),gd=(e,t)=>({ChannelArn:yn(e.ChannelArn),Metadata:yn(e.Metadata),Mode:yn(e.Mode),Name:yn(e.Name),Privacy:yn(e.Privacy)}),vd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:gd(e,t)));return n},bd=(e,t)=>({ChannelArn:yn(e.ChannelArn),CreatedBy:null!=e.CreatedBy?zd(e.CreatedBy,t):void 0,CreatedTimestamp:null!=e.CreatedTimestamp?bn(Tn(pn(e.CreatedTimestamp))):void 0,Member:null!=e.Member?zd(e.Member,t):void 0}),Sd=(e,t)=>({Member:null!=e.Member?zd(e.Member,t):void 0}),yd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Sd(e,t)));return n},wd=(e,t)=>({ChannelFlowArn:yn(e.ChannelFlowArn),CreatedTimestamp:null!=e.CreatedTimestamp?bn(Tn(pn(e.CreatedTimestamp))):void 0,LastUpdatedTimestamp:null!=e.LastUpdatedTimestamp?bn(Tn(pn(e.LastUpdatedTimestamp))):void 0,Name:yn(e.Name),Processors:null!=e.Processors?Qd(e.Processors,t):void 0}),Cd=(e,t)=>({ChannelFlowArn:yn(e.ChannelFlowArn),Name:yn(e.Name),Processors:null!=e.Processors?Qd(e.Processors,t):void 0}),kd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Cd(e,t)));return n},Ed=(e,t)=>({ChannelArn:yn(e.ChannelArn),CreatedTimestamp:null!=e.CreatedTimestamp?bn(Tn(pn(e.CreatedTimestamp))):void 0,InvitedBy:null!=e.InvitedBy?zd(e.InvitedBy,t):void 0,LastUpdatedTimestamp:null!=e.LastUpdatedTimestamp?bn(Tn(pn(e.LastUpdatedTimestamp))):void 0,Member:null!=e.Member?zd(e.Member,t):void 0,SubChannelId:yn(e.SubChannelId),Type:yn(e.Type)}),Id=(e,t)=>({AppInstanceUserMembershipSummary:null!=e.AppInstanceUserMembershipSummary?ud(e.AppInstanceUserMembershipSummary,t):void 0,ChannelSummary:null!=e.ChannelSummary?Ud(e.ChannelSummary,t):void 0}),Td=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Id(e,t)));return n},xd=(e,t)=>({PushNotifications:null!=e.PushNotifications?Xd(e.PushNotifications,t):void 0}),Md=(e,t)=>({Member:null!=e.Member?zd(e.Member,t):void 0}),Ad=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Md(e,t)));return n},Pd=(e,t)=>({ChannelArn:yn(e.ChannelArn),Content:yn(e.Content),CreatedTimestamp:null!=e.CreatedTimestamp?bn(Tn(pn(e.CreatedTimestamp))):void 0,LastEditedTimestamp:null!=e.LastEditedTimestamp?bn(Tn(pn(e.LastEditedTimestamp))):void 0,LastUpdatedTimestamp:null!=e.LastUpdatedTimestamp?bn(Tn(pn(e.LastUpdatedTimestamp))):void 0,MessageAttributes:null!=e.MessageAttributes?Hd(e.MessageAttributes,t):void 0,MessageId:yn(e.MessageId),Metadata:yn(e.Metadata),Persistence:yn(e.Persistence),Redacted:hn(e.Redacted),Sender:null!=e.Sender?zd(e.Sender,t):void 0,Status:null!=e.Status?_d(e.Status,t):void 0,SubChannelId:yn(e.SubChannelId),Type:yn(e.Type)}),_d=(e,t)=>({Detail:yn(e.Detail),Value:yn(e.Value)}),Od=(e,t)=>({Content:yn(e.Content),CreatedTimestamp:null!=e.CreatedTimestamp?bn(Tn(pn(e.CreatedTimestamp))):void 0,LastEditedTimestamp:null!=e.LastEditedTimestamp?bn(Tn(pn(e.LastEditedTimestamp))):void 0,LastUpdatedTimestamp:null!=e.LastUpdatedTimestamp?bn(Tn(pn(e.LastUpdatedTimestamp))):void 0,MessageAttributes:null!=e.MessageAttributes?Hd(e.MessageAttributes,t):void 0,MessageId:yn(e.MessageId),Metadata:yn(e.Metadata),Redacted:hn(e.Redacted),Sender:null!=e.Sender?zd(e.Sender,t):void 0,Status:null!=e.Status?_d(e.Status,t):void 0,Type:yn(e.Type)}),Rd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Od(e,t)));return n},Dd=(e,t)=>({ChannelSummary:null!=e.ChannelSummary?Ud(e.ChannelSummary,t):void 0}),Fd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Dd(e,t)));return n},Nd=(e,t)=>({ChannelArn:yn(e.ChannelArn),CreatedBy:null!=e.CreatedBy?zd(e.CreatedBy,t):void 0,CreatedTimestamp:null!=e.CreatedTimestamp?bn(Tn(pn(e.CreatedTimestamp))):void 0,Moderator:null!=e.Moderator?zd(e.Moderator,t):void 0}),Ld=(e,t)=>({Moderator:null!=e.Moderator?zd(e.Moderator,t):void 0}),Bd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Ld(e,t)));return n},Ud=(e,t)=>({ChannelArn:yn(e.ChannelArn),LastMessageTimestamp:null!=e.LastMessageTimestamp?bn(Tn(pn(e.LastMessageTimestamp))):void 0,Metadata:yn(e.Metadata),Mode:yn(e.Mode),Name:yn(e.Name),Privacy:yn(e.Privacy)}),Vd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Ud(e,t)));return n},jd=(e,t)=>({MaximumSubChannels:mn(e.MaximumSubChannels),MinimumMembershipPercentage:mn(e.MinimumMembershipPercentage),TargetMembershipsPerSubChannel:mn(e.TargetMembershipsPerSubChannel)}),zd=(e,t)=>({Arn:yn(e.Arn),Name:yn(e.Name)}),$d=(e,t)=>({InvocationType:yn(e.InvocationType),ResourceArn:yn(e.ResourceArn)}),Wd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:zd(e,t)));return n},Hd=(e,t)=>Object.entries(e).reduce(((e,[n,i])=>(null===i||(e[n]=Kd(i,t)),e)),{}),qd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:yn(e)));return n},Kd=(e,t)=>({StringValues:null!=e.StringValues?qd(e.StringValues,t):void 0}),Gd=(e,t)=>({Url:yn(e.Url)}),Jd=(e,t)=>({Configuration:null!=e.Configuration?Zd(e.Configuration,t):void 0,ExecutionOrder:mn(e.ExecutionOrder),FallbackAction:yn(e.FallbackAction),Name:yn(e.Name)}),Zd=(e,t)=>({Lambda:null!=e.Lambda?$d(e.Lambda,t):void 0}),Qd=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Jd(e,t)));return n},Xd=(e,t)=>({AllowNotifications:yn(e.AllowNotifications),FilterRule:yn(e.FilterRule)}),Yd=(e,t)=>({MembershipCount:mn(e.MembershipCount),SubChannelId:yn(e.SubChannelId)}),eu=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:Yd(e,t)));return n},tu=(e,t)=>({Key:yn(e.Key),Value:yn(e.Value)}),nu=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>null===e?null:tu(e,t)));return n},iu=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ru=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),ou=(e,t)=>ru(e,t).then((e=>t.utf8Encoder(e))),su=e=>void 0!==e&&null!==e&&""!==e&&(!Object.getOwnPropertyNames(e).includes("length")||0!=e.length)&&(!Object.getOwnPropertyNames(e).includes("size")||0!=e.size),au=(e,t)=>ou(e,t).then((e=>e.length?JSON.parse(e):{})),cu=async(e,t)=>{const n=await au(e,t);return n.message=n.message??n.Message,n},lu=(e,t)=>{const n=(e,t)=>Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase())),i=e=>{let t=e;return"number"===typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},r=n(e.headers,"x-amzn-errortype");return void 0!==r?i(e.headers[r]):void 0!==t.code?i(t.code):void 0!==t["__type"]?i(t["__type"]):void 0};class du extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,du.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="AssociateChannelFlowCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:qr,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ta(e,t)}deserialize(e,t){return Ga(e,t)}}class uu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,uu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="BatchCreateChannelMembershipCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Jr,outputFilterSensitiveLog:Qr},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return na(e,t)}deserialize(e,t){return Za(e,t)}}class hu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,hu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ChannelFlowCallbackCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:uo,outputFilterSensitiveLog:ho},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ia(e,t)}deserialize(e,t){return Xa(e,t)}}class pu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,pu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="CreateChannelBanCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ao,outputFilterSensitiveLog:Po},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return oa(e,t)}deserialize(e,t){return nc(e,t)}}class fu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,fu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="CreateChannelCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:xo,outputFilterSensitiveLog:Mo},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ra(e,t)}deserialize(e,t){return ec(e,t)}}class mu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,mu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="CreateChannelFlowCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:_o,outputFilterSensitiveLog:Oo},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return sa(e,t)}deserialize(e,t){return rc(e,t)}}class gu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,gu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="CreateChannelMembershipCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ro,outputFilterSensitiveLog:Do},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return aa(e,t)}deserialize(e,t){return sc(e,t)}}class vu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,vu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="CreateChannelModeratorCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Fo,outputFilterSensitiveLog:No},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ca(e,t)}deserialize(e,t){return cc(e,t)}}class bu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,bu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DeleteChannelBanCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Bo,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return da(e,t)}deserialize(e,t){return hc(e,t)}}class Su extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Su.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DeleteChannelCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Lo,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return la(e,t)}deserialize(e,t){return dc(e,t)}}class yu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,yu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DeleteChannelFlowCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Uo,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ua(e,t)}deserialize(e,t){return fc(e,t)}}class wu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,wu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DeleteChannelMembershipCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Vo,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ha(e,t)}deserialize(e,t){return gc(e,t)}}class Cu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Cu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DeleteChannelMessageCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:jo,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return pa(e,t)}deserialize(e,t){return bc(e,t)}}class ku extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,ku.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DeleteChannelModeratorCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:zo,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return fa(e,t)}deserialize(e,t){return yc(e,t)}}class Eu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Eu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DescribeChannelBanCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ho,outputFilterSensitiveLog:qo},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ga(e,t)}deserialize(e,t){return Ec(e,t)}}class Iu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Iu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DescribeChannelCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:$o,outputFilterSensitiveLog:Wo},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ma(e,t)}deserialize(e,t){return Cc(e,t)}}class Tu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Tu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DescribeChannelFlowCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ko,outputFilterSensitiveLog:Go},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return va(e,t)}deserialize(e,t){return Tc(e,t)}}class xu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,xu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DescribeChannelMembershipCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Jo,outputFilterSensitiveLog:Zo},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ba(e,t)}deserialize(e,t){return Mc(e,t)}}class Mu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Mu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DescribeChannelMembershipForAppInstanceUserCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Qo,outputFilterSensitiveLog:Xo},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Sa(e,t)}deserialize(e,t){return Pc(e,t)}}class Au extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Au.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DescribeChannelModeratedByAppInstanceUserCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Yo,outputFilterSensitiveLog:es},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ya(e,t)}deserialize(e,t){return Oc(e,t)}}class Pu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Pu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DescribeChannelModeratorCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:ts,outputFilterSensitiveLog:ns},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return wa(e,t)}deserialize(e,t){return Dc(e,t)}}class _u extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,_u.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="DisassociateChannelFlowCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:is,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ca(e,t)}deserialize(e,t){return Nc(e,t)}}class Ou extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Ou.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="GetChannelMembershipPreferencesCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:rs,outputFilterSensitiveLog:os},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ka(e,t)}deserialize(e,t){return Bc(e,t)}}class Ru extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Ru.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="GetChannelMessageCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:ss,outputFilterSensitiveLog:as},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ea(e,t)}deserialize(e,t){return Vc(e,t)}}class Du extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Du.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="GetChannelMessageStatusCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:cs,outputFilterSensitiveLog:ls},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ia(e,t)}deserialize(e,t){return zc(e,t)}}class Fu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Fu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="GetMessagingSessionEndpointCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:ds,outputFilterSensitiveLog:hs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ta(e,t)}deserialize(e,t){return Wc(e,t)}}class Nu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Nu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelBansCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:ps,outputFilterSensitiveLog:fs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return xa(e,t)}deserialize(e,t){return qc(e,t)}}class Lu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Lu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelFlowsCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:ms,outputFilterSensitiveLog:gs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ma(e,t)}deserialize(e,t){return Gc(e,t)}}class Bu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Bu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelMembershipsCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:vs,outputFilterSensitiveLog:bs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Aa(e,t)}deserialize(e,t){return Zc(e,t)}}class Uu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Uu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelMembershipsForAppInstanceUserCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ss,outputFilterSensitiveLog:ys},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Pa(e,t)}deserialize(e,t){return Xc(e,t)}}class Vu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Vu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelMessagesCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:ws,outputFilterSensitiveLog:Cs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return _a(e,t)}deserialize(e,t){return el(e,t)}}class ju extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,ju.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelModeratorsCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:ks,outputFilterSensitiveLog:Es},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Oa(e,t)}deserialize(e,t){return nl(e,t)}}class zu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,zu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelsAssociatedWithChannelFlowCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:xs,outputFilterSensitiveLog:Ms},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Da(e,t)}deserialize(e,t){return sl(e,t)}}class $u extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,$u.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelsCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Is,outputFilterSensitiveLog:Ts},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ra(e,t)}deserialize(e,t){return rl(e,t)}}class Wu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Wu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListChannelsModeratedByAppInstanceUserCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:As,outputFilterSensitiveLog:Ps},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Fa(e,t)}deserialize(e,t){return cl(e,t)}}class Hu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Hu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListSubChannelsCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:_s,outputFilterSensitiveLog:Rs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Na(e,t)}deserialize(e,t){return dl(e,t)}}class qu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,qu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="ListTagsForResourceCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ds,outputFilterSensitiveLog:Fs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return La(e,t)}deserialize(e,t){return hl(e,t)}}class Ku extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Ku.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="PutChannelMembershipPreferencesCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ns,outputFilterSensitiveLog:Ls},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ba(e,t)}deserialize(e,t){return fl(e,t)}}class Gu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Gu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="RedactChannelMessageCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Bs,outputFilterSensitiveLog:Us},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ua(e,t)}deserialize(e,t){return gl(e,t)}}class Ju extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Ju.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="SearchChannelsCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:js,outputFilterSensitiveLog:zs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Va(e,t)}deserialize(e,t){return bl(e,t)}}class Zu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Zu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="SendChannelMessageCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:$s,outputFilterSensitiveLog:Ws},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return ja(e,t)}deserialize(e,t){return yl(e,t)}}class Qu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Qu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="TagResourceCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Hs,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return za(e,t)}deserialize(e,t){return Cl(e,t)}}class Xu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Xu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="UntagResourceCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:qs,outputFilterSensitiveLog:e=>e},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return $a(e,t)}deserialize(e,t){return El(e,t)}}class Yu extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,Yu.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="UpdateChannelCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ks,outputFilterSensitiveLog:Gs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Wa(e,t)}deserialize(e,t){return Tl(e,t)}}class eh extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,eh.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="UpdateChannelFlowCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Js,outputFilterSensitiveLog:Zs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ha(e,t)}deserialize(e,t){return Ml(e,t)}}class th extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,th.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="UpdateChannelMessageCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Qs,outputFilterSensitiveLog:Xs},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return qa(e,t)}deserialize(e,t){return Pl(e,t)}}class nh extends dn{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,n){this.middlewareStack.use(E(t,this.serialize,this.deserialize)),this.middlewareStack.use(N(t,nh.getEndpointParameterInstructions()));const i=e.concat(this.middlewareStack),{logger:r}=t,o="ChimeSDKMessagingClient",s="UpdateChannelReadMarkerCommand",a={logger:r,clientName:o,commandName:s,inputFilterSensitiveLog:Ys,outputFilterSensitiveLog:ea},{requestHandler:c}=t;return i.resolve((e=>c.handle(e.request,n||{})),a)}serialize(e,t){return Ka(e,t)}deserialize(e,t){return Ol(e,t)}}class ih extends yr{associateChannelFlow(e,t,n){const i=new du(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}batchCreateChannelMembership(e,t,n){const i=new uu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}channelFlowCallback(e,t,n){const i=new hu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}createChannel(e,t,n){const i=new fu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}createChannelBan(e,t,n){const i=new pu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}createChannelFlow(e,t,n){const i=new mu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}createChannelMembership(e,t,n){const i=new gu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}createChannelModerator(e,t,n){const i=new vu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteChannel(e,t,n){const i=new Su(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteChannelBan(e,t,n){const i=new bu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteChannelFlow(e,t,n){const i=new yu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteChannelMembership(e,t,n){const i=new wu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteChannelMessage(e,t,n){const i=new Cu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}deleteChannelModerator(e,t,n){const i=new ku(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeChannel(e,t,n){const i=new Iu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeChannelBan(e,t,n){const i=new Eu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeChannelFlow(e,t,n){const i=new Tu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeChannelMembership(e,t,n){const i=new xu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeChannelMembershipForAppInstanceUser(e,t,n){const i=new Mu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeChannelModeratedByAppInstanceUser(e,t,n){const i=new Au(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}describeChannelModerator(e,t,n){const i=new Pu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}disassociateChannelFlow(e,t,n){const i=new _u(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getChannelMembershipPreferences(e,t,n){const i=new Ou(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getChannelMessage(e,t,n){const i=new Ru(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getChannelMessageStatus(e,t,n){const i=new Du(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}getMessagingSessionEndpoint(e,t,n){const i=new Fu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelBans(e,t,n){const i=new Nu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelFlows(e,t,n){const i=new Lu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelMemberships(e,t,n){const i=new Bu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelMembershipsForAppInstanceUser(e,t,n){const i=new Uu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelMessages(e,t,n){const i=new Vu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelModerators(e,t,n){const i=new ju(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannels(e,t,n){const i=new $u(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelsAssociatedWithChannelFlow(e,t,n){const i=new zu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listChannelsModeratedByAppInstanceUser(e,t,n){const i=new Wu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listSubChannels(e,t,n){const i=new Hu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}listTagsForResource(e,t,n){const i=new qu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}putChannelMembershipPreferences(e,t,n){const i=new Ku(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}redactChannelMessage(e,t,n){const i=new Gu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}searchChannels(e,t,n){const i=new Ju(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}sendChannelMessage(e,t,n){const i=new Zu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}tagResource(e,t,n){const i=new Qu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}untagResource(e,t,n){const i=new Xu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}updateChannel(e,t,n){const i=new Yu(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}updateChannelFlow(e,t,n){const i=new eh(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}updateChannelMessage(e,t,n){const i=new th(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}updateChannelReadMarker(e,t,n){const i=new nh(e);if("function"===typeof t)this.send(i,t);else{if("function"!==typeof n)return this.send(i,t);if("object"!==typeof t)throw new Error("Expect http options but get "+typeof t);this.send(i,t||{},n)}}}const rh=async(e,t,...n)=>await e.send(new Nu(t),...n),oh=async(e,t,...n)=>await e.listChannelBans(t,...n);async function*sh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await oh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await rh(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const ah=async(e,t,...n)=>await e.send(new Lu(t),...n),ch=async(e,t,...n)=>await e.listChannelFlows(t,...n);async function*lh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await ch(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await ah(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const dh=async(e,t,...n)=>await e.send(new Uu(t),...n),uh=async(e,t,...n)=>await e.listChannelMembershipsForAppInstanceUser(t,...n);async function*hh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await uh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await dh(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const ph=async(e,t,...n)=>await e.send(new Bu(t),...n),fh=async(e,t,...n)=>await e.listChannelMemberships(t,...n);async function*mh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await fh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await ph(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const gh=async(e,t,...n)=>await e.send(new Vu(t),...n),vh=async(e,t,...n)=>await e.listChannelMessages(t,...n);async function*bh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await vh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await gh(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const Sh=async(e,t,...n)=>await e.send(new ju(t),...n),yh=async(e,t,...n)=>await e.listChannelModerators(t,...n);async function*wh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await yh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await Sh(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const Ch=async(e,t,...n)=>await e.send(new zu(t),...n),kh=async(e,t,...n)=>await e.listChannelsAssociatedWithChannelFlow(t,...n);async function*Eh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await kh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await Ch(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const Ih=async(e,t,...n)=>await e.send(new Wu(t),...n),Th=async(e,t,...n)=>await e.listChannelsModeratedByAppInstanceUser(t,...n);async function*xh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await Th(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await Ih(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const Mh=async(e,t,...n)=>await e.send(new $u(t),...n),Ah=async(e,t,...n)=>await e.listChannels(t,...n);async function*Ph(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await Ah(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await Mh(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const _h=async(e,t,...n)=>await e.send(new Hu(t),...n),Oh=async(e,t,...n)=>await e.listSubChannels(t,...n);async function*Rh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await Oh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await _h(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}const Dh=async(e,t,...n)=>await e.send(new Ju(t),...n),Fh=async(e,t,...n)=>await e.searchChannels(t,...n);async function*Nh(e,t,...n){let i,r=e.startingToken||void 0,o=!0;while(o){if(t.NextToken=r,t["MaxResults"]=e.pageSize,e.client instanceof ih)i=await Fh(e.client,t,...n);else{if(!(e.client instanceof yr))throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");i=await Dh(e.client,t,...n)}yield i;const s=r;r=i.NextToken,o=!(!r||e.stopOnSameToken&&r===s)}}},45:function(e,t,n){"use strict";n.r(t),n.d(t,{fromHex:function(){return o},toHex:function(){return s}});const i={},r={};for(let a=0;a<256;a++){let e=a.toString(16).toLowerCase();1===e.length&&(e=`0${e}`),i[a]=e,r[e]=a}function o(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const i=e.slice(n,n+2).toLowerCase();if(!(i in r))throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`);t[n/2]=r[i]}return t}function s(e){let t="";for(let n=0;n<e.byteLength;n++)t+=i[e[n]];return t}},4980:function(e,t,n){"use strict";n.r(t),n.d(t,{locateWindow:function(){return r}});const i={};function r(){return"undefined"!==typeof window?window:"undefined"!==typeof self?self:i}},1166:function(e,t,n){"use strict";n.r(t),n.d(t,{fromUtf8:function(){return a},toUtf8:function(){return c}});n(7658);const i=e=>{const t=[];for(let n=0,i=e.length;n<i;n++){const i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296===(64512&i)&&56320===(64512&e.charCodeAt(n+1))){const r=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)},r=e=>{let t="";for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const r=e[++n];t+=String.fromCharCode((31&i)<<6|63&r)}else if(240<=i&&i<365){const r=[i,e[++n],e[++n],e[++n]],o="%"+r.map((e=>e.toString(16))).join("%");t+=decodeURIComponent(o)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t};function o(e){return(new TextEncoder).encode(e)}function s(e){return new TextDecoder("utf-8").decode(e)}const a=e=>"function"===typeof TextEncoder?o(e):i(e),c=e=>"function"===typeof TextDecoder?s(e):r(e)},5186:function(e){"use strict";function t(e,t){var n=new Array(arguments.length-1),i=0,r=2,o=!0;while(r<arguments.length)n[i++]=arguments[r++];return new Promise((function(r,s){n[i]=function(e){if(o)if(o=!1,e)s(e);else{var t=new Array(arguments.length-1),n=0;while(n<t.length)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(a){o&&(o=!1,s(a))}}))}e.exports=t},8673:function(e,t,n){"use strict";n(7658);var i=t;i.length=function(e){var t=e.length;if(!t)return 0;var n=0;while(--t%4>1&&"="===e.charAt(t))++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),s=0;s<64;)o[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;i.encode=function(e,t,n){var i,o=null,s=[],a=0,c=0;while(t<n){var l=e[t++];switch(c){case 0:s[a++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:s[a++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:s[a++]=r[i|l>>6],s[a++]=r[63&l],c=0;break}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[i],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";i.decode=function(e,t,n){for(var i,r=n,s=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=o[l]))throw Error(a);switch(s){case 0:i=l,s=1;break;case 1:t[n++]=i<<2|(48&l)>>4,i=l,s=2;break;case 2:t[n++]=(15&i)<<4|(60&l)>>2,i=l,s=3;break;case 3:t[n++]=(3&i)<<6|l,s=0;break}}if(1===s)throw Error(a);return n-r},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},8825:function(e,t,n){"use strict";function i(){this._listeners={}}n(7658),e.exports=i,i.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},2913:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function o(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function a(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:o,e.writeFloatBE=i?o:r,e.readFloatLE=i?s:a,e.readFloatBE=i?a:s}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var o=Math.floor(Math.log(t)/Math.LN2),s=8388607&Math.round(t*Math.pow(2,-o)*8388608);e((r<<31|o+127<<23|s)>>>0,n,i)}}function s(e,t,n){var i=e(t,n),r=2*(i>>31)+1,o=i>>>23&255,s=8388607&i;return 255===o?s?NaN:r*(1/0):0===o?1401298464324817e-60*r*s:r*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=s.bind(null,r),e.readFloatBE=s.bind(null,o)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function o(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function a(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:o,e.writeDoubleBE=i?o:r,e.readDoubleLE=i?s:a,e.readDoubleBE=i?a:s}():function(){function t(e,t,n,i,r,o){var s=i<0?1:0;if(s&&(i=-i),0===i)e(0,r,o+t),e(1/i>0?0:2147483648,r,o+n);else if(isNaN(i))e(0,r,o+t),e(2146959360,r,o+n);else if(i>17976931348623157e292)e(0,r,o+t),e((s<<31|2146435072)>>>0,r,o+n);else{var a;if(i<22250738585072014e-324)a=i/5e-324,e(a>>>0,r,o+t),e((s<<31|a/4294967296)>>>0,r,o+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),a=i*Math.pow(2,-c),e(4503599627370496*a>>>0,r,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,r,o+n)}}}function s(e,t,n,i,r){var o=e(i,r+t),s=e(i,r+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=s.bind(null,r,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},6332:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1168:function(e){"use strict";function t(e,t,n){var i=n||8192,r=i>>>1,o=null,s=i;return function(n){if(n<1||n>r)return e(n);s+n>i&&(o=e(i),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}e.exports=t},9561:function(e,t,n){"use strict";n(7658);var i=t;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){var i=n-t;if(i<1)return"";var r,o=null,s=[],a=0;while(t<n)r=e[t++],r<128?s[a++]=r:r>191&&r<224?s[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(r>>10),s[a++]=56320+(1023&r)):s[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},i.write=function(e,t,n){for(var i,r,o=n,s=0;s<e.length;++s)i=e.charCodeAt(s),i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&56320===(64512&(r=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&r),++s,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-o}},4870:function(e,t,n){"use strict";n.d(t,{Bj:function(){return o},Fl:function(){return ze},IU:function(){return Pe},Jd:function(){return E},PG:function(){return Te},Um:function(){return ke},WL:function(){return Ue},X$:function(){return M},X3:function(){return Ae},Xl:function(){return _e},dq:function(){return Ne},j:function(){return T},lk:function(){return I},nZ:function(){return a},qj:function(){return Ce},qq:function(){return y},yT:function(){return Me}});n(7658);var i=n(7139);let r;class o{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=r,!e&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=r;try{return r=this,e()}finally{r=t}}else 0}on(){r=this}off(){r=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function s(e,t=r){t&&t.active&&t.effects.push(e)}function a(){return r}const c=e=>{const t=new Set(e);return t.w=0,t.n=0,t},l=e=>(e.w&m)>0,d=e=>(e.n&m)>0,u=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=m},h=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];l(r)&&!d(r)?r.delete(e):t[n++]=r,r.w&=~m,r.n&=~m}t.length=n}},p=new WeakMap;let f=0,m=1;const g=30;let v;const b=Symbol(""),S=Symbol("");class y{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,s(this,n)}run(){if(!this.active)return this.fn();let e=v,t=C;while(e){if(e===this)return;e=e.parent}try{return this.parent=v,v=this,C=!0,m=1<<++f,f<=g?u(this):w(this),this.fn()}finally{f<=g&&h(this),m=1<<--f,v=this.parent,C=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){v===this?this.deferStop=!0:this.active&&(w(this),this.onStop&&this.onStop(),this.active=!1)}}function w(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let C=!0;const k=[];function E(){k.push(C),C=!1}function I(){const e=k.pop();C=void 0===e||e}function T(e,t,n){if(C&&v){let t=p.get(e);t||p.set(e,t=new Map);let i=t.get(n);i||t.set(n,i=c());const r=void 0;x(i,r)}}function x(e,t){let n=!1;f<=g?d(e)||(e.n|=m,n=!l(e)):n=!e.has(v),n&&(e.add(v),v.deps.push(e))}function M(e,t,n,r,o,s){const a=p.get(e);if(!a)return;let l=[];if("clear"===t)l=[...a.values()];else if("length"===n&&(0,i.kJ)(e)){const e=Number(r);a.forEach(((t,n)=>{("length"===n||n>=e)&&l.push(t)}))}else switch(void 0!==n&&l.push(a.get(n)),t){case"add":(0,i.kJ)(e)?(0,i.S0)(n)&&l.push(a.get("length")):(l.push(a.get(b)),(0,i._N)(e)&&l.push(a.get(S)));break;case"delete":(0,i.kJ)(e)||(l.push(a.get(b)),(0,i._N)(e)&&l.push(a.get(S)));break;case"set":(0,i._N)(e)&&l.push(a.get(b));break}if(1===l.length)l[0]&&A(l[0]);else{const e=[];for(const t of l)t&&e.push(...t);A(c(e))}}function A(e,t){const n=(0,i.kJ)(e)?e:[...e];for(const i of n)i.computed&&P(i,t);for(const i of n)i.computed||P(i,t)}function P(e,t){(e!==v||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const _=(0,i.fY)("__proto__,__v_isRef,__isVue"),O=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(i.yk)),R=U(),D=U(!1,!0),F=U(!0),N=L();function L(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Pe(this);for(let t=0,r=this.length;t<r;t++)T(n,"get",t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(Pe)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){E();const n=Pe(this)[t].apply(this,e);return I(),n}})),e}function B(e){const t=Pe(this);return T(t,"has",e),t.hasOwnProperty(e)}function U(e=!1,t=!1){return function(n,r,o){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&o===(e?t?Se:be:t?ve:ge).get(n))return n;const s=(0,i.kJ)(n);if(!e){if(s&&(0,i.RI)(N,r))return Reflect.get(N,r,o);if("hasOwnProperty"===r)return B}const a=Reflect.get(n,r,o);return((0,i.yk)(r)?O.has(r):_(r))?a:(e||T(n,"get",r),t?a:Ne(a)?s&&(0,i.S0)(r)?a:a.value:(0,i.Kn)(a)?e?Ee(a):Ce(a):a)}}const V=z(),j=z(!0);function z(e=!1){return function(t,n,r,o){let s=t[n];if(xe(s)&&Ne(s)&&!Ne(r))return!1;if(!e&&(Me(r)||xe(r)||(s=Pe(s),r=Pe(r)),!(0,i.kJ)(t)&&Ne(s)&&!Ne(r)))return s.value=r,!0;const a=(0,i.kJ)(t)&&(0,i.S0)(n)?Number(n)<t.length:(0,i.RI)(t,n),c=Reflect.set(t,n,r,o);return t===Pe(o)&&(a?(0,i.aU)(r,s)&&M(t,"set",n,r,s):M(t,"add",n,r)),c}}function $(e,t){const n=(0,i.RI)(e,t),r=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&M(e,"delete",t,void 0,r),o}function W(e,t){const n=Reflect.has(e,t);return(0,i.yk)(t)&&O.has(t)||T(e,"has",t),n}function H(e){return T(e,"iterate",(0,i.kJ)(e)?"length":b),Reflect.ownKeys(e)}const q={get:R,set:V,deleteProperty:$,has:W,ownKeys:H},K={get:F,set(e,t){return!0},deleteProperty(e,t){return!0}},G=(0,i.l7)({},q,{get:D,set:j}),J=e=>e,Z=e=>Reflect.getPrototypeOf(e);function Q(e,t,n=!1,i=!1){e=e["__v_raw"];const r=Pe(e),o=Pe(t);n||(t!==o&&T(r,"get",t),T(r,"get",o));const{has:s}=Z(r),a=i?J:n?Re:Oe;return s.call(r,t)?a(e.get(t)):s.call(r,o)?a(e.get(o)):void(e!==r&&e.get(t))}function X(e,t=!1){const n=this["__v_raw"],i=Pe(n),r=Pe(e);return t||(e!==r&&T(i,"has",e),T(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function Y(e,t=!1){return e=e["__v_raw"],!t&&T(Pe(e),"iterate",b),Reflect.get(e,"size",e)}function ee(e){e=Pe(e);const t=Pe(this),n=Z(t),i=n.has.call(t,e);return i||(t.add(e),M(t,"add",e,e)),this}function te(e,t){t=Pe(t);const n=Pe(this),{has:r,get:o}=Z(n);let s=r.call(n,e);s||(e=Pe(e),s=r.call(n,e));const a=o.call(n,e);return n.set(e,t),s?(0,i.aU)(t,a)&&M(n,"set",e,t,a):M(n,"add",e,t),this}function ne(e){const t=Pe(this),{has:n,get:i}=Z(t);let r=n.call(t,e);r||(e=Pe(e),r=n.call(t,e));const o=i?i.call(t,e):void 0,s=t.delete(e);return r&&M(t,"delete",e,void 0,o),s}function ie(){const e=Pe(this),t=0!==e.size,n=void 0,i=e.clear();return t&&M(e,"clear",void 0,void 0,n),i}function re(e,t){return function(n,i){const r=this,o=r["__v_raw"],s=Pe(o),a=t?J:e?Re:Oe;return!e&&T(s,"iterate",b),o.forEach(((e,t)=>n.call(i,a(e),a(t),r)))}}function oe(e,t,n){return function(...r){const o=this["__v_raw"],s=Pe(o),a=(0,i._N)(s),c="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,d=o[e](...r),u=n?J:t?Re:Oe;return!t&&T(s,"iterate",l?S:b),{next(){const{value:e,done:t}=d.next();return t?{value:e,done:t}:{value:c?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function se(e){return function(...t){return"delete"!==e&&this}}function ae(){const e={get(e){return Q(this,e)},get size(){return Y(this)},has:X,add:ee,set:te,delete:ne,clear:ie,forEach:re(!1,!1)},t={get(e){return Q(this,e,!1,!0)},get size(){return Y(this)},has:X,add:ee,set:te,delete:ne,clear:ie,forEach:re(!1,!0)},n={get(e){return Q(this,e,!0)},get size(){return Y(this,!0)},has(e){return X.call(this,e,!0)},add:se("add"),set:se("set"),delete:se("delete"),clear:se("clear"),forEach:re(!0,!1)},i={get(e){return Q(this,e,!0,!0)},get size(){return Y(this,!0)},has(e){return X.call(this,e,!0)},add:se("add"),set:se("set"),delete:se("delete"),clear:se("clear"),forEach:re(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{e[r]=oe(r,!1,!1),n[r]=oe(r,!0,!1),t[r]=oe(r,!1,!0),i[r]=oe(r,!0,!0)})),[e,n,t,i]}const[ce,le,de,ue]=ae();function he(e,t){const n=t?e?ue:de:e?le:ce;return(t,r,o)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,i.RI)(n,r)&&r in t?n:t,r,o)}const pe={get:he(!1,!1)},fe={get:he(!1,!0)},me={get:he(!0,!1)};const ge=new WeakMap,ve=new WeakMap,be=new WeakMap,Se=new WeakMap;function ye(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function we(e){return e["__v_skip"]||!Object.isExtensible(e)?0:ye((0,i.W7)(e))}function Ce(e){return xe(e)?e:Ie(e,!1,q,pe,ge)}function ke(e){return Ie(e,!1,G,fe,ve)}function Ee(e){return Ie(e,!0,K,me,be)}function Ie(e,t,n,r,o){if(!(0,i.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const s=o.get(e);if(s)return s;const a=we(e);if(0===a)return e;const c=new Proxy(e,2===a?r:n);return o.set(e,c),c}function Te(e){return xe(e)?Te(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function xe(e){return!(!e||!e["__v_isReadonly"])}function Me(e){return!(!e||!e["__v_isShallow"])}function Ae(e){return Te(e)||xe(e)}function Pe(e){const t=e&&e["__v_raw"];return t?Pe(t):e}function _e(e){return(0,i.Nj)(e,"__v_skip",!0),e}const Oe=e=>(0,i.Kn)(e)?Ce(e):e,Re=e=>(0,i.Kn)(e)?Ee(e):e;function De(e){C&&v&&(e=Pe(e),x(e.dep||(e.dep=c())))}function Fe(e,t){e=Pe(e);const n=e.dep;n&&A(n)}function Ne(e){return!(!e||!0!==e.__v_isRef)}function Le(e){return Ne(e)?e.value:e}const Be={get:(e,t,n)=>Le(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Ne(r)&&!Ne(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Ue(e){return Te(e)?e:new Proxy(e,Be)}var Ve;class je{constructor(e,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Ve]=!1,this._dirty=!0,this.effect=new y(e,(()=>{this._dirty||(this._dirty=!0,Fe(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const e=Pe(this);return De(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ze(e,t,n=!1){let r,o;const s=(0,i.mf)(e);s?(r=e,o=i.dG):(r=e.get,o=e.set);const a=new je(r,o,s||!o,n);return a}Ve="__v_isReadonly"},3396:function(e,t,n){"use strict";n.d(t,{$d:function(){return s},Cn:function(){return N},FN:function(){return dn},HY:function(){return Pt},P$:function(){return ie},Q6:function(){return le},U2:function(){return oe},Us:function(){return Et},Wm:function(){return Jt},Y8:function(){return ee},_:function(){return Gt},dD:function(){return F},h:function(){return xn},iD:function(){return jt},ic:function(){return Ee},j4:function(){return zt},nK:function(){return ce},up:function(){return De},wg:function(){return Nt},wy:function(){return _e}});n(7658),n(541);var i=n(4870),r=n(7139);function o(e,t,n,i){let r;try{r=i?e(...i):e()}catch(o){a(o,t,n)}return r}function s(e,t,n,i){if((0,r.mf)(e)){const s=o(e,t,n,i);return s&&(0,r.tI)(s)&&s.catch((e=>{a(e,t,n)})),s}const c=[];for(let r=0;r<e.length;r++)c.push(s(e[r],t,n,i));return c}function a(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let i=t.parent;const r=t.proxy,s=n;while(i){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,s))return;i=i.parent}const a=t.appContext.config.errorHandler;if(a)return void o(a,null,10,[e,r,s])}c(e,n,r,i)}function c(e,t,n,i=!0){console.error(e)}let l=!1,d=!1;const u=[];let h=0;const p=[];let f=null,m=0;const g=Promise.resolve();let v=null;function b(e){const t=v||g;return e?t.then(this?e.bind(this):e):t}function S(e){let t=h+1,n=u.length;while(t<n){const i=t+n>>>1,r=T(u[i]);r<e?t=i+1:n=i}return t}function y(e){u.length&&u.includes(e,l&&e.allowRecurse?h+1:h)||(null==e.id?u.push(e):u.splice(S(e.id),0,e),w())}function w(){l||d||(d=!0,v=g.then(M))}function C(e){const t=u.indexOf(e);t>h&&u.splice(t,1)}function k(e){(0,r.kJ)(e)?p.push(...e):f&&f.includes(e,e.allowRecurse?m+1:m)||p.push(e),w()}function E(e,t=(l?h+1:0)){for(0;t<u.length;t++){const e=u[t];e&&e.pre&&(u.splice(t,1),t--,e())}}function I(e){if(p.length){const e=[...new Set(p)];if(p.length=0,f)return void f.push(...e);for(f=e,f.sort(((e,t)=>T(e)-T(t))),m=0;m<f.length;m++)f[m]();f=null,m=0}}const T=e=>null==e.id?1/0:e.id,x=(e,t)=>{const n=T(e)-T(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function M(e){d=!1,l=!0,u.sort(x);r.dG;try{for(h=0;h<u.length;h++){const e=u[h];e&&!1!==e.active&&o(e,null,14)}}finally{h=0,u.length=0,I(e),l=!1,v=null,(u.length||p.length)&&M(e)}}new Set;new Map;function A(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||r.kT;let o=n;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in i){const e=`${"modelValue"===c?"model":c}Modifiers`,{number:t,trim:s}=i[e]||r.kT;s&&(o=n.map((e=>(0,r.HD)(e)?e.trim():e))),t&&(o=n.map(r.h5))}let l;let d=i[l=(0,r.hR)(t)]||i[l=(0,r.hR)((0,r._A)(t))];!d&&a&&(d=i[l=(0,r.hR)((0,r.rs)(t))]),d&&s(d,e,6,o);const u=i[l+"Once"];if(u){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,s(u,e,6,o)}}function P(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(void 0!==o)return o;const s=e.emits;let a={},c=!1;if(!(0,r.mf)(e)){const i=e=>{const n=P(e,t,!0);n&&(c=!0,(0,r.l7)(a,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return s||c?((0,r.kJ)(s)?s.forEach((e=>a[e]=null)):(0,r.l7)(a,s),(0,r.Kn)(e)&&i.set(e,a),a):((0,r.Kn)(e)&&i.set(e,null),null)}function _(e,t){return!(!e||!(0,r.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,r.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,r.RI)(e,(0,r.rs)(t))||(0,r.RI)(e,t))}let O=null,R=null;function D(e){const t=O;return O=e,R=e&&e.type.__scopeId||null,t}function F(e){R=e}function N(){R=null}function L(e,t=O,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&Ut(-1);const r=D(t);let o;try{o=e(...n)}finally{D(r),i._d&&Ut(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function B(e){const{type:t,vnode:n,proxy:i,withProxy:o,props:s,propsOptions:[c],slots:l,attrs:d,emit:u,render:h,renderCache:p,data:f,setupState:m,ctx:g,inheritAttrs:v}=e;let b,S;const y=D(e);try{if(4&n.shapeFlag){const e=o||i;b=en(h.call(e,e,p,s,m,f,g)),S=d}else{const e=t;0,b=en(e.length>1?e(s,{attrs:d,slots:l,emit:u}):e(s,null)),S=t.props?d:U(d)}}catch(C){Dt.length=0,a(C,e,1),b=Jt(Ot)}let w=b;if(S&&!1!==v){const e=Object.keys(S),{shapeFlag:t}=w;e.length&&7&t&&(c&&e.some(r.tR)&&(S=V(S,c)),w=Xt(w,S))}return n.dirs&&(w=Xt(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),b=w,D(y),b}const U=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,r.F7)(n))&&((t||(t={}))[n]=e[n]);return t},V=(e,t)=>{const n={};for(const i in e)(0,r.tR)(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function j(e,t,n){const{props:i,children:r,component:o}=e,{props:s,children:a,patchFlag:c}=t,l=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!r&&!a||a&&a.$stable)||i!==s&&(i?!s||z(i,s,l):!!s);if(1024&c)return!0;if(16&c)return i?z(i,s,l):!!s;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==i[n]&&!_(l,n))return!0}}return!1}function z(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!_(n,o))return!0}return!1}function $({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const W=e=>e.__isSuspense;function H(e,t){t&&t.pendingBranch?(0,r.kJ)(e)?t.effects.push(...e):t.effects.push(e):k(e)}function q(e,t){if(ln){let n=ln.provides;const i=ln.parent&&ln.parent.provides;i===n&&(n=ln.provides=Object.create(i)),n[e]=t}else 0}function K(e,t,n=!1){const i=ln||O;if(i){const o=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&(0,r.mf)(t)?t.call(i.proxy):t}else 0}const G={};function J(e,t,n){return Z(e,t,n)}function Z(e,t,{immediate:n,deep:a,flush:c,onTrack:l,onTrigger:d}=r.kT){const u=(0,i.nZ)()===(null===ln||void 0===ln?void 0:ln.scope)?ln:null;let h,p,f=!1,m=!1;if((0,i.dq)(e)?(h=()=>e.value,f=(0,i.yT)(e)):(0,i.PG)(e)?(h=()=>e,a=!0):(0,r.kJ)(e)?(m=!0,f=e.some((e=>(0,i.PG)(e)||(0,i.yT)(e))),h=()=>e.map((e=>(0,i.dq)(e)?e.value:(0,i.PG)(e)?Y(e):(0,r.mf)(e)?o(e,u,2):void 0))):h=(0,r.mf)(e)?t?()=>o(e,u,2):()=>{if(!u||!u.isUnmounted)return p&&p(),s(e,u,3,[v])}:r.dG,t&&a){const e=h;h=()=>Y(e())}let g,v=e=>{p=C.onStop=()=>{o(e,u,4)}};if(gn){if(v=r.dG,t?n&&s(t,u,3,[h(),m?[]:void 0,v]):h(),"sync"!==c)return r.dG;{const e=An();g=e.__watcherHandles||(e.__watcherHandles=[])}}let b=m?new Array(e.length).fill(G):G;const S=()=>{if(C.active)if(t){const e=C.run();(a||f||(m?e.some(((e,t)=>(0,r.aU)(e,b[t]))):(0,r.aU)(e,b)))&&(p&&p(),s(t,u,3,[e,b===G?void 0:m&&b[0]===G?[]:b,v]),b=e)}else C.run()};let w;S.allowRecurse=!!t,"sync"===c?w=S:"post"===c?w=()=>kt(S,u&&u.suspense):(S.pre=!0,u&&(S.id=u.uid),w=()=>y(S));const C=new i.qq(h,w);t?n?S():b=C.run():"post"===c?kt(C.run.bind(C),u&&u.suspense):C.run();const k=()=>{C.stop(),u&&u.scope&&(0,r.Od)(u.scope.effects,C)};return g&&g.push(k),k}function Q(e,t,n){const i=this.proxy,o=(0,r.HD)(e)?e.includes(".")?X(i,e):()=>i[e]:e.bind(i,i);let s;(0,r.mf)(t)?s=t:(s=t.handler,n=t);const a=ln;un(this);const c=Z(o,s.bind(i),n);return a?un(a):hn(),c}function X(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Y(e,t){if(!(0,r.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,i.dq)(e))Y(e.value,t);else if((0,r.kJ)(e))for(let n=0;n<e.length;n++)Y(e[n],t);else if((0,r.DM)(e)||(0,r._N)(e))e.forEach((e=>{Y(e,t)}));else if((0,r.PO)(e))for(const n in e)Y(e[n],t);return e}function ee(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ce((()=>{e.isMounted=!0})),Ie((()=>{e.isUnmounting=!0})),e}const te=[Function,Array],ne={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:te,onEnter:te,onAfterEnter:te,onEnterCancelled:te,onBeforeLeave:te,onLeave:te,onAfterLeave:te,onLeaveCancelled:te,onBeforeAppear:te,onAppear:te,onAfterAppear:te,onAppearCancelled:te},setup(e,{slots:t}){const n=dn(),r=ee();let o;return()=>{const s=t.default&&le(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let e=!1;for(const t of s)if(t.type!==Ot){0,a=t,e=!0;break}}const c=(0,i.IU)(e),{mode:l}=c;if(r.isLeaving)return se(a);const d=ae(a);if(!d)return se(a);const u=oe(d,c,r,n);ce(d,u);const h=n.subTree,p=h&&ae(h);let f=!1;const{getTransitionKey:m}=d.type;if(m){const e=m();void 0===o?o=e:e!==o&&(o=e,f=!0)}if(p&&p.type!==Ot&&(!Wt(d,p)||f)){const e=oe(p,c,r,n);if(ce(p,e),"out-in"===l)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&n.update()},se(a);"in-out"===l&&d.type!==Ot&&(e.delayLeave=(e,t,n)=>{const i=re(r,p);i[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return a}}},ie=ne;function re(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function oe(e,t,n,i){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:l,onEnter:d,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:p,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:b,onAfterAppear:S,onAppearCancelled:y}=t,w=String(e.key),C=re(n,e),k=(e,t)=>{e&&s(e,i,9,t)},E=(e,t)=>{const n=t[1];k(e,t),(0,r.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},I={mode:a,persisted:c,beforeEnter(t){let i=l;if(!n.isMounted){if(!o)return;i=v||l}t._leaveCb&&t._leaveCb(!0);const r=C[w];r&&Wt(e,r)&&r.el._leaveCb&&r.el._leaveCb(),k(i,[t])},enter(e){let t=d,i=u,r=h;if(!n.isMounted){if(!o)return;t=b||d,i=S||u,r=y||h}let s=!1;const a=e._enterCb=t=>{s||(s=!0,k(t?r:i,[e]),I.delayedLeave&&I.delayedLeave(),e._enterCb=void 0)};t?E(t,[e,a]):a()},leave(t,i){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return i();k(p,[t]);let o=!1;const s=t._leaveCb=n=>{o||(o=!0,i(),k(n?g:m,[t]),t._leaveCb=void 0,C[r]===e&&delete C[r])};C[r]=e,f?E(f,[t,s]):s()},clone(e){return oe(e,t,n,i)}};return I}function se(e){if(ue(e))return e=Xt(e),e.children=null,e}function ae(e){return ue(e)?e.children?e.children[0]:void 0:e}function ce(e,t){6&e.shapeFlag&&e.component?ce(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function le(e,t=!1,n){let i=[],r=0;for(let o=0;o<e.length;o++){let s=e[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===Pt?(128&s.patchFlag&&r++,i=i.concat(le(s.children,t,a))):(t||s.type!==Ot)&&i.push(null!=a?Xt(s,{key:a}):s)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const de=e=>!!e.type.__asyncLoader;const ue=e=>e.type.__isKeepAlive;RegExp,RegExp;function he(e,t){return(0,r.kJ)(e)?e.some((e=>he(e,t))):(0,r.HD)(e)?e.split(",").includes(t):!!(0,r.Kj)(e)&&e.test(t)}function pe(e,t){me(e,"a",t)}function fe(e,t){me(e,"da",t)}function me(e,t,n=ln){const i=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(Se(t,i,n),n){let e=n.parent;while(e&&e.parent)ue(e.parent.vnode)&&ge(i,t,n,e),e=e.parent}}function ge(e,t,n,i){const o=Se(t,e,i,!0);Te((()=>{(0,r.Od)(i[t],o)}),n)}function ve(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function be(e){return 128&e.shapeFlag?e.ssContent:e}function Se(e,t,n=ln,r=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;(0,i.Jd)(),un(n);const o=s(t,n,e,r);return hn(),(0,i.lk)(),o});return r?o.unshift(a):o.push(a),a}}const ye=e=>(t,n=ln)=>(!gn||"sp"===e)&&Se(e,((...e)=>t(...e)),n),we=ye("bm"),Ce=ye("m"),ke=ye("bu"),Ee=ye("u"),Ie=ye("bum"),Te=ye("um"),xe=ye("sp"),Me=ye("rtg"),Ae=ye("rtc");function Pe(e,t=ln){Se("ec",e,t)}function _e(e,t){const n=O;if(null===n)return e;const i=kn(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[e,n,a,c=r.kT]=t[s];e&&((0,r.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&Y(n),o.push({dir:e,instance:i,value:n,oldValue:void 0,arg:a,modifiers:c}))}return e}function Oe(e,t,n,r){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const l=o[c];a&&(l.oldValue=a[c].value);let d=l.dir[r];d&&((0,i.Jd)(),s(d,n,8,[e.el,l,e,t]),(0,i.lk)())}}const Re="components";function De(e,t){return Ne(Re,e,!0,t)||e}const Fe=Symbol();function Ne(e,t,n=!0,i=!1){const o=O||ln;if(o){const n=o.type;if(e===Re){const e=En(n,!1);if(e&&(e===t||e===(0,r._A)(t)||e===(0,r.kC)((0,r._A)(t))))return n}const s=Le(o[e]||n[e],t)||Le(o.appContext[e],t);return!s&&i?n:s}}function Le(e,t){return e&&(e[t]||e[(0,r._A)(t)]||e[(0,r.kC)((0,r._A)(t))])}const Be=e=>e?pn(e)?kn(e)||e.proxy:Be(e.parent):null,Ue=(0,r.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Be(e.parent),$root:e=>Be(e.root),$emit:e=>e.emit,$options:e=>Ke(e),$forceUpdate:e=>e.f||(e.f=()=>y(e.update)),$nextTick:e=>e.n||(e.n=b.bind(e.proxy)),$watch:e=>Q.bind(e)}),Ve=(e,t)=>e!==r.kT&&!e.__isScriptSetup&&(0,r.RI)(e,t),je={get({_:e},t){const{ctx:n,setupState:o,data:s,props:a,accessCache:c,type:l,appContext:d}=e;let u;if("$"!==t[0]){const i=c[t];if(void 0!==i)switch(i){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if(Ve(o,t))return c[t]=1,o[t];if(s!==r.kT&&(0,r.RI)(s,t))return c[t]=2,s[t];if((u=e.propsOptions[0])&&(0,r.RI)(u,t))return c[t]=3,a[t];if(n!==r.kT&&(0,r.RI)(n,t))return c[t]=4,n[t];ze&&(c[t]=0)}}const h=Ue[t];let p,f;return h?("$attrs"===t&&(0,i.j)(e,"get",t),h(e)):(p=l.__cssModules)&&(p=p[t])?p:n!==r.kT&&(0,r.RI)(n,t)?(c[t]=4,n[t]):(f=d.config.globalProperties,(0,r.RI)(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:i,setupState:o,ctx:s}=e;return Ve(o,t)?(o[t]=n,!0):i!==r.kT&&(0,r.RI)(i,t)?(i[t]=n,!0):!(0,r.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:s}},a){let c;return!!n[a]||e!==r.kT&&(0,r.RI)(e,a)||Ve(t,a)||(c=s[0])&&(0,r.RI)(c,a)||(0,r.RI)(i,a)||(0,r.RI)(Ue,a)||(0,r.RI)(o.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,r.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let ze=!0;function $e(e){const t=Ke(e),n=e.proxy,o=e.ctx;ze=!1,t.beforeCreate&&He(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:c,watch:l,provide:d,inject:u,created:h,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:v,deactivated:b,beforeDestroy:S,beforeUnmount:y,destroyed:w,unmounted:C,render:k,renderTracked:E,renderTriggered:I,errorCaptured:T,serverPrefetch:x,expose:M,inheritAttrs:A,components:P,directives:_,filters:O}=t,R=null;if(u&&We(u,o,R,e.appContext.config.unwrapInjectedRef),c)for(const i in c){const e=c[i];(0,r.mf)(e)&&(o[i]=e.bind(n))}if(s){0;const t=s.call(n,n);0,(0,r.Kn)(t)&&(e.data=(0,i.qj)(t))}if(ze=!0,a)for(const i in a){const e=a[i],t=(0,r.mf)(e)?e.bind(n,n):(0,r.mf)(e.get)?e.get.bind(n,n):r.dG;0;const s=!(0,r.mf)(e)&&(0,r.mf)(e.set)?e.set.bind(n):r.dG,c=Tn({get:t,set:s});Object.defineProperty(o,i,{enumerable:!0,configurable:!0,get:()=>c.value,set:e=>c.value=e})}if(l)for(const i in l)qe(l[i],o,n,i);if(d){const e=(0,r.mf)(d)?d.call(n):d;Reflect.ownKeys(e).forEach((t=>{q(t,e[t])}))}function D(e,t){(0,r.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&He(h,e,"c"),D(we,p),D(Ce,f),D(ke,m),D(Ee,g),D(pe,v),D(fe,b),D(Pe,T),D(Ae,E),D(Me,I),D(Ie,y),D(Te,C),D(xe,x),(0,r.kJ)(M))if(M.length){const t=e.exposed||(e.exposed={});M.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});k&&e.render===r.dG&&(e.render=k),null!=A&&(e.inheritAttrs=A),P&&(e.components=P),_&&(e.directives=_)}function We(e,t,n=r.dG,o=!1){(0,r.kJ)(e)&&(e=Xe(e));for(const s in e){const n=e[s];let a;a=(0,r.Kn)(n)?"default"in n?K(n.from||s,n.default,!0):K(n.from||s):K(n),(0,i.dq)(a)&&o?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[s]=a}}function He(e,t,n){s((0,r.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function qe(e,t,n,i){const o=i.includes(".")?X(n,i):()=>n[i];if((0,r.HD)(e)){const n=t[e];(0,r.mf)(n)&&J(o,n)}else if((0,r.mf)(e))J(o,e.bind(n));else if((0,r.Kn)(e))if((0,r.kJ)(e))e.forEach((e=>qe(e,t,n,i)));else{const i=(0,r.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,r.mf)(i)&&J(o,i,e)}else 0}function Ke(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,c=s.get(t);let l;return c?l=c:o.length||n||i?(l={},o.length&&o.forEach((e=>Ge(l,e,a,!0))),Ge(l,t,a)):l=t,(0,r.Kn)(t)&&s.set(t,l),l}function Ge(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&Ge(e,o,n,!0),r&&r.forEach((t=>Ge(e,t,n,!0)));for(const s in t)if(i&&"expose"===s);else{const i=Je[s]||n&&n[s];e[s]=i?i(e[s],t[s]):t[s]}return e}const Je={data:Ze,props:et,emits:et,methods:et,computed:et,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:et,directives:et,watch:tt,provide:Ze,inject:Qe};function Ze(e,t){return t?e?function(){return(0,r.l7)((0,r.mf)(e)?e.call(this,this):e,(0,r.mf)(t)?t.call(this,this):t)}:t:e}function Qe(e,t){return et(Xe(e),Xe(t))}function Xe(e){if((0,r.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ye(e,t){return e?[...new Set([].concat(e,t))]:t}function et(e,t){return e?(0,r.l7)((0,r.l7)(Object.create(null),e),t):t}function tt(e,t){if(!e)return t;if(!t)return e;const n=(0,r.l7)(Object.create(null),e);for(const i in t)n[i]=Ye(e[i],t[i]);return n}function nt(e,t,n,o=!1){const s={},a={};(0,r.Nj)(a,Ht,1),e.propsDefaults=Object.create(null),rt(e,t,s,a);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=o?s:(0,i.Um)(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function it(e,t,n,o){const{props:s,attrs:a,vnode:{patchFlag:c}}=e,l=(0,i.IU)(s),[d]=e.propsOptions;let u=!1;if(!(o||c>0)||16&c){let i;rt(e,t,s,a)&&(u=!0);for(const o in l)t&&((0,r.RI)(t,o)||(i=(0,r.rs)(o))!==o&&(0,r.RI)(t,i))||(d?!n||void 0===n[o]&&void 0===n[i]||(s[o]=ot(d,l,o,void 0,e,!0)):delete s[o]);if(a!==l)for(const e in a)t&&(0,r.RI)(t,e)||(delete a[e],u=!0)}else if(8&c){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let o=n[i];if(_(e.emitsOptions,o))continue;const c=t[o];if(d)if((0,r.RI)(a,o))c!==a[o]&&(a[o]=c,u=!0);else{const t=(0,r._A)(o);s[t]=ot(d,l,t,c,e,!1)}else c!==a[o]&&(a[o]=c,u=!0)}}u&&(0,i.X$)(e,"set","$attrs")}function rt(e,t,n,o){const[s,a]=e.propsOptions;let c,l=!1;if(t)for(let i in t){if((0,r.Gg)(i))continue;const d=t[i];let u;s&&(0,r.RI)(s,u=(0,r._A)(i))?a&&a.includes(u)?(c||(c={}))[u]=d:n[u]=d:_(e.emitsOptions,i)||i in o&&d===o[i]||(o[i]=d,l=!0)}if(a){const t=(0,i.IU)(n),o=c||r.kT;for(let i=0;i<a.length;i++){const c=a[i];n[c]=ot(s,t,c,o[c],e,!(0,r.RI)(o,c))}}return l}function ot(e,t,n,i,o,s){const a=e[n];if(null!=a){const e=(0,r.RI)(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&(0,r.mf)(e)){const{propsDefaults:r}=o;n in r?i=r[n]:(un(o),i=r[n]=e.call(null,t),hn())}else i=e}a[0]&&(s&&!e?i=!1:!a[1]||""!==i&&i!==(0,r.rs)(n)||(i=!0))}return i}function st(e,t,n=!1){const i=t.propsCache,o=i.get(e);if(o)return o;const s=e.props,a={},c=[];let l=!1;if(!(0,r.mf)(e)){const i=e=>{l=!0;const[n,i]=st(e,t,!0);(0,r.l7)(a,n),i&&c.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!s&&!l)return(0,r.Kn)(e)&&i.set(e,r.Z6),r.Z6;if((0,r.kJ)(s))for(let u=0;u<s.length;u++){0;const e=(0,r._A)(s[u]);at(e)&&(a[e]=r.kT)}else if(s){0;for(const e in s){const t=(0,r._A)(e);if(at(t)){const n=s[e],i=a[t]=(0,r.kJ)(n)||(0,r.mf)(n)?{type:n}:Object.assign({},n);if(i){const e=dt(Boolean,i.type),n=dt(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||(0,r.RI)(i,"default"))&&c.push(t)}}}}const d=[a,c];return(0,r.Kn)(e)&&i.set(e,d),d}function at(e){return"$"!==e[0]}function ct(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function lt(e,t){return ct(e)===ct(t)}function dt(e,t){return(0,r.kJ)(t)?t.findIndex((t=>lt(t,e))):(0,r.mf)(t)&&lt(t,e)?0:-1}const ut=e=>"_"===e[0]||"$stable"===e,ht=e=>(0,r.kJ)(e)?e.map(en):[en(e)],pt=(e,t,n)=>{if(t._n)return t;const i=L(((...e)=>ht(t(...e))),n);return i._c=!1,i},ft=(e,t,n)=>{const i=e._ctx;for(const o in e){if(ut(o))continue;const n=e[o];if((0,r.mf)(n))t[o]=pt(o,n,i);else if(null!=n){0;const e=ht(n);t[o]=()=>e}}},mt=(e,t)=>{const n=ht(t);e.slots.default=()=>n},gt=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,i.IU)(t),(0,r.Nj)(t,"_",n)):ft(t,e.slots={})}else e.slots={},t&&mt(e,t);(0,r.Nj)(e.slots,Ht,1)},vt=(e,t,n)=>{const{vnode:i,slots:o}=e;let s=!0,a=r.kT;if(32&i.shapeFlag){const e=t._;e?n&&1===e?s=!1:((0,r.l7)(o,t),n||1!==e||delete o._):(s=!t.$stable,ft(t,o)),a=t}else t&&(mt(e,t),a={default:1});if(s)for(const r in o)ut(r)||r in a||delete o[r]};function bt(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let St=0;function yt(e,t){return function(n,i=null){(0,r.mf)(n)||(n=Object.assign({},n)),null==i||(0,r.Kn)(i)||(i=null);const o=bt(),s=new Set;let a=!1;const c=o.app={_uid:St++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Pn,get config(){return o.config},set config(e){0},use(e,...t){return s.has(e)||(e&&(0,r.mf)(e.install)?(s.add(e),e.install(c,...t)):(0,r.mf)(e)&&(s.add(e),e(c,...t))),c},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),c},component(e,t){return t?(o.components[e]=t,c):o.components[e]},directive(e,t){return t?(o.directives[e]=t,c):o.directives[e]},mount(r,s,l){if(!a){0;const d=Jt(n,i);return d.appContext=o,s&&t?t(d,r):e(d,r,l),a=!0,c._container=r,r.__vue_app__=c,kn(d.component)||d.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return o.provides[e]=t,c}};return c}}function wt(e,t,n,s,a=!1){if((0,r.kJ)(e))return void e.forEach(((e,i)=>wt(e,t&&((0,r.kJ)(t)?t[i]:t),n,s,a)));if(de(s)&&!a)return;const c=4&s.shapeFlag?kn(s.component)||s.component.proxy:s.el,l=a?null:c,{i:d,r:u}=e;const h=t&&t.r,p=d.refs===r.kT?d.refs={}:d.refs,f=d.setupState;if(null!=h&&h!==u&&((0,r.HD)(h)?(p[h]=null,(0,r.RI)(f,h)&&(f[h]=null)):(0,i.dq)(h)&&(h.value=null)),(0,r.mf)(u))o(u,d,12,[l,p]);else{const t=(0,r.HD)(u),o=(0,i.dq)(u);if(t||o){const i=()=>{if(e.f){const n=t?(0,r.RI)(f,u)?f[u]:p[u]:u.value;a?(0,r.kJ)(n)&&(0,r.Od)(n,c):(0,r.kJ)(n)?n.includes(c)||n.push(c):t?(p[u]=[c],(0,r.RI)(f,u)&&(f[u]=p[u])):(u.value=[c],e.k&&(p[e.k]=u.value))}else t?(p[u]=l,(0,r.RI)(f,u)&&(f[u]=l)):o&&(u.value=l,e.k&&(p[e.k]=l))};l?(i.id=-1,kt(i,n)):i()}else 0}}function Ct(){}const kt=H;function Et(e){return It(e)}function It(e,t){Ct();const n=(0,r.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:c,createText:l,createComment:d,setText:u,setElementText:h,parentNode:p,nextSibling:f,setScopeId:m=r.dG,insertStaticContent:g}=e,v=(e,t,n,i=null,r=null,o=null,s=!1,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Wt(e,t)&&(i=X(e),K(e,r,o,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:d,shapeFlag:u}=t;switch(l){case _t:b(e,t,n,i);break;case Ot:S(e,t,n,i);break;case Rt:null==e&&w(t,n,i,s);break;case Pt:D(e,t,n,i,r,o,s,a,c);break;default:1&u?x(e,t,n,i,r,o,s,a,c):6&u?F(e,t,n,i,r,o,s,a,c):(64&u||128&u)&&l.process(e,t,n,i,r,o,s,a,c,ee)}null!=d&&r&&wt(d,e&&e.ref,o,t||e,!t)},b=(e,t,n,i)=>{if(null==e)o(t.el=l(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&u(n,t.children)}},S=(e,t,n,i)=>{null==e?o(t.el=d(t.children||""),n,i):t.el=e.el},w=(e,t,n,i)=>{[e.el,e.anchor]=g(e.children,t,n,i,e.el,e.anchor)},k=({el:e,anchor:t},n,i)=>{let r;while(e&&e!==t)r=f(e),o(e,n,i),e=r;o(t,n,i)},T=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=f(e),s(e),e=n;s(t)},x=(e,t,n,i,r,o,s,a,c)=>{s=s||"svg"===t.type,null==e?M(t,n,i,r,o,s,a,c):_(e,t,r,o,s,a,c)},M=(e,t,n,i,s,l,d,u)=>{let p,f;const{type:m,props:g,shapeFlag:v,transition:b,dirs:S}=e;if(p=e.el=c(e.type,l,g&&g.is,g),8&v?h(p,e.children):16&v&&P(e.children,p,null,i,s,l&&"foreignObject"!==m,d,u),S&&Oe(e,null,i,"created"),A(p,e,e.scopeId,d,i),g){for(const t in g)"value"===t||(0,r.Gg)(t)||a(p,t,null,g[t],l,e.children,i,s,Q);"value"in g&&a(p,"value",null,g.value),(f=g.onVnodeBeforeMount)&&on(f,i,e)}S&&Oe(e,null,i,"beforeMount");const y=(!s||s&&!s.pendingBranch)&&b&&!b.persisted;y&&b.beforeEnter(p),o(p,t,n),((f=g&&g.onVnodeMounted)||y||S)&&kt((()=>{f&&on(f,i,e),y&&b.enter(p),S&&Oe(e,null,i,"mounted")}),s)},A=(e,t,n,i,r)=>{if(n&&m(e,n),i)for(let o=0;o<i.length;o++)m(e,i[o]);if(r){let n=r.subTree;if(t===n){const t=r.vnode;A(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},P=(e,t,n,i,r,o,s,a,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=a?tn(e[l]):en(e[l]);v(null,c,t,n,i,r,o,s,a)}},_=(e,t,n,i,o,s,c)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:u,dirs:p}=t;d|=16&e.patchFlag;const f=e.props||r.kT,m=t.props||r.kT;let g;n&&Tt(n,!1),(g=m.onVnodeBeforeUpdate)&&on(g,n,t,e),p&&Oe(t,e,n,"beforeUpdate"),n&&Tt(n,!0);const v=o&&"foreignObject"!==t.type;if(u?O(e.dynamicChildren,u,l,n,i,v,s):c||z(e,t,l,null,n,i,v,s,!1),d>0){if(16&d)R(l,t,f,m,n,i,o);else if(2&d&&f.class!==m.class&&a(l,"class",null,m.class,o),4&d&&a(l,"style",f.style,m.style,o),8&d){const r=t.dynamicProps;for(let t=0;t<r.length;t++){const s=r[t],c=f[s],d=m[s];d===c&&"value"!==s||a(l,s,c,d,o,e.children,n,i,Q)}}1&d&&e.children!==t.children&&h(l,t.children)}else c||null!=u||R(l,t,f,m,n,i,o);((g=m.onVnodeUpdated)||p)&&kt((()=>{g&&on(g,n,t,e),p&&Oe(t,e,n,"updated")}),i)},O=(e,t,n,i,r,o,s)=>{for(let a=0;a<t.length;a++){const c=e[a],l=t[a],d=c.el&&(c.type===Pt||!Wt(c,l)||70&c.shapeFlag)?p(c.el):n;v(c,l,d,null,i,r,o,s,!0)}},R=(e,t,n,i,o,s,c)=>{if(n!==i){if(n!==r.kT)for(const l in n)(0,r.Gg)(l)||l in i||a(e,l,n[l],null,c,t.children,o,s,Q);for(const l in i){if((0,r.Gg)(l))continue;const d=i[l],u=n[l];d!==u&&"value"!==l&&a(e,l,u,d,c,t.children,o,s,Q)}"value"in i&&a(e,"value",n.value,i.value)}},D=(e,t,n,i,r,s,a,c,d)=>{const u=t.el=e?e.el:l(""),h=t.anchor=e?e.anchor:l("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(o(u,n,i),o(h,n,i),P(t.children,n,h,r,s,a,c,d)):p>0&&64&p&&f&&e.dynamicChildren?(O(e.dynamicChildren,f,n,r,s,a,c),(null!=t.key||r&&t===r.subTree)&&xt(e,t,!0)):z(e,t,n,h,r,s,a,c,d)},F=(e,t,n,i,r,o,s,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,s,c):N(t,n,i,r,o,s,c):L(e,t,c)},N=(e,t,n,i,r,o,s)=>{const a=e.component=cn(e,i,r);if(ue(e)&&(a.ctx.renderer=ee),vn(a),a.asyncDep){if(r&&r.registerDep(a,U),!e.el){const e=a.subTree=Jt(Ot);S(null,e,t,n)}}else U(a,e,t,n,r,o,s)},L=(e,t,n)=>{const i=t.component=e.component;if(j(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void V(i,t,n);i.next=t,C(i.update),i.update()}else t.el=e.el,i.vnode=t},U=(e,t,n,o,s,a,c)=>{const l=()=>{if(e.isMounted){let t,{next:n,bu:i,u:o,parent:l,vnode:d}=e,u=n;0,Tt(e,!1),n?(n.el=d.el,V(e,n,c)):n=d,i&&(0,r.ir)(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&on(t,l,n,d),Tt(e,!0);const h=B(e);0;const f=e.subTree;e.subTree=h,v(f,h,p(f.el),X(f),e,s,a),n.el=h.el,null===u&&$(e,h.el),o&&kt(o,s),(t=n.props&&n.props.onVnodeUpdated)&&kt((()=>on(t,l,n,d)),s)}else{let i;const{el:c,props:l}=t,{bm:d,m:u,parent:h}=e,p=de(t);if(Tt(e,!1),d&&(0,r.ir)(d),!p&&(i=l&&l.onVnodeBeforeMount)&&on(i,h,t),Tt(e,!0),c&&ne){const n=()=>{e.subTree=B(e),ne(c,e.subTree,e,s,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const i=e.subTree=B(e);0,v(null,i,n,o,e,s,a),t.el=i.el}if(u&&kt(u,s),!p&&(i=l&&l.onVnodeMounted)){const e=t;kt((()=>on(i,h,e)),s)}(256&t.shapeFlag||h&&de(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&kt(e.a,s),e.isMounted=!0,t=n=o=null}},d=e.effect=new i.qq(l,(()=>y(u)),e.scope),u=e.update=()=>d.run();u.id=e.uid,Tt(e,!0),u()},V=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,it(e,t.props,r,n),vt(e,t.children,n),(0,i.Jd)(),E(),(0,i.lk)()},z=(e,t,n,i,r,o,s,a,c=!1)=>{const l=e&&e.children,d=e?e.shapeFlag:0,u=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void H(l,u,n,i,r,o,s,a,c);if(256&p)return void W(l,u,n,i,r,o,s,a,c)}8&f?(16&d&&Q(l,r,o),u!==l&&h(n,u)):16&d?16&f?H(l,u,n,i,r,o,s,a,c):Q(l,r,o,!0):(8&d&&h(n,""),16&f&&P(u,n,i,r,o,s,a,c))},W=(e,t,n,i,o,s,a,c,l)=>{e=e||r.Z6,t=t||r.Z6;const d=e.length,u=t.length,h=Math.min(d,u);let p;for(p=0;p<h;p++){const i=t[p]=l?tn(t[p]):en(t[p]);v(e[p],i,n,null,o,s,a,c,l)}d>u?Q(e,o,s,!0,!1,h):P(t,n,i,o,s,a,c,l,h)},H=(e,t,n,i,o,s,a,c,l)=>{let d=0;const u=t.length;let h=e.length-1,p=u-1;while(d<=h&&d<=p){const i=e[d],r=t[d]=l?tn(t[d]):en(t[d]);if(!Wt(i,r))break;v(i,r,n,null,o,s,a,c,l),d++}while(d<=h&&d<=p){const i=e[h],r=t[p]=l?tn(t[p]):en(t[p]);if(!Wt(i,r))break;v(i,r,n,null,o,s,a,c,l),h--,p--}if(d>h){if(d<=p){const e=p+1,r=e<u?t[e].el:i;while(d<=p)v(null,t[d]=l?tn(t[d]):en(t[d]),n,r,o,s,a,c,l),d++}}else if(d>p)while(d<=h)K(e[d],o,s,!0),d++;else{const f=d,m=d,g=new Map;for(d=m;d<=p;d++){const e=t[d]=l?tn(t[d]):en(t[d]);null!=e.key&&g.set(e.key,d)}let b,S=0;const y=p-m+1;let w=!1,C=0;const k=new Array(y);for(d=0;d<y;d++)k[d]=0;for(d=f;d<=h;d++){const i=e[d];if(S>=y){K(i,o,s,!0);continue}let r;if(null!=i.key)r=g.get(i.key);else for(b=m;b<=p;b++)if(0===k[b-m]&&Wt(i,t[b])){r=b;break}void 0===r?K(i,o,s,!0):(k[r-m]=d+1,r>=C?C=r:w=!0,v(i,t[r],n,null,o,s,a,c,l),S++)}const E=w?Mt(k):r.Z6;for(b=E.length-1,d=y-1;d>=0;d--){const e=m+d,r=t[e],h=e+1<u?t[e+1].el:i;0===k[d]?v(null,r,n,h,o,s,a,c,l):w&&(b<0||d!==E[b]?q(r,n,h,2):b--)}}},q=(e,t,n,i,r=null)=>{const{el:s,type:a,transition:c,children:l,shapeFlag:d}=e;if(6&d)return void q(e.component.subTree,t,n,i);if(128&d)return void e.suspense.move(t,n,i);if(64&d)return void a.move(e,t,n,ee);if(a===Pt){o(s,t,n);for(let e=0;e<l.length;e++)q(l[e],t,n,i);return void o(e.anchor,t,n)}if(a===Rt)return void k(e,t,n);const u=2!==i&&1&d&&c;if(u)if(0===i)c.beforeEnter(s),o(s,t,n),kt((()=>c.enter(s)),r);else{const{leave:e,delayLeave:i,afterLeave:r}=c,a=()=>o(s,t,n),l=()=>{e(s,(()=>{a(),r&&r()}))};i?i(s,a,l):l()}else o(s,t,n)},K=(e,t,n,i=!1,r=!1)=>{const{type:o,props:s,ref:a,children:c,dynamicChildren:l,shapeFlag:d,patchFlag:u,dirs:h}=e;if(null!=a&&wt(a,null,n,e,!0),256&d)return void t.ctx.deactivate(e);const p=1&d&&h,f=!de(e);let m;if(f&&(m=s&&s.onVnodeBeforeUnmount)&&on(m,t,e),6&d)Z(e.component,n,i);else{if(128&d)return void e.suspense.unmount(n,i);p&&Oe(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,n,r,ee,i):l&&(o!==Pt||u>0&&64&u)?Q(l,t,n,!1,!0):(o===Pt&&384&u||!r&&16&d)&&Q(c,t,n),i&&G(e)}(f&&(m=s&&s.onVnodeUnmounted)||p)&&kt((()=>{m&&on(m,t,e),p&&Oe(e,null,t,"unmounted")}),n)},G=e=>{const{type:t,el:n,anchor:i,transition:r}=e;if(t===Pt)return void J(n,i);if(t===Rt)return void T(e);const o=()=>{s(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:i}=r,s=()=>t(n,o);i?i(e.el,o,s):s()}else o()},J=(e,t)=>{let n;while(e!==t)n=f(e),s(e),e=n;s(t)},Z=(e,t,n)=>{const{bum:i,scope:o,update:s,subTree:a,um:c}=e;i&&(0,r.ir)(i),o.stop(),s&&(s.active=!1,K(a,e,t,n)),c&&kt(c,t),kt((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Q=(e,t,n,i=!1,r=!1,o=0)=>{for(let s=o;s<e.length;s++)K(e[s],t,n,i,r)},X=e=>6&e.shapeFlag?X(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),Y=(e,t,n)=>{null==e?t._vnode&&K(t._vnode,null,null,!0):v(t._vnode||null,e,t,null,null,null,n),E(),I(),t._vnode=e},ee={p:v,um:K,m:q,r:G,mt:N,mc:P,pc:z,pbc:O,n:X,o:e};let te,ne;return t&&([te,ne]=t(ee)),{render:Y,hydrate:te,createApp:yt(Y,te)}}function Tt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function xt(e,t,n=!1){const i=e.children,o=t.children;if((0,r.kJ)(i)&&(0,r.kJ)(o))for(let r=0;r<i.length;r++){const e=i[r];let t=o[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[r]=tn(o[r]),t.el=e.el),n||xt(e,t)),t.type===_t&&(t.el=e.el)}}function Mt(e){const t=e.slice(),n=[0];let i,r,o,s,a;const c=e.length;for(i=0;i<c;i++){const c=e[i];if(0!==c){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,e[n[a]]<c?o=a+1:s=a;c<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=t[s];return n}const At=e=>e.__isTeleport;const Pt=Symbol(void 0),_t=Symbol(void 0),Ot=Symbol(void 0),Rt=Symbol(void 0),Dt=[];let Ft=null;function Nt(e=!1){Dt.push(Ft=e?null:[])}function Lt(){Dt.pop(),Ft=Dt[Dt.length-1]||null}let Bt=1;function Ut(e){Bt+=e}function Vt(e){return e.dynamicChildren=Bt>0?Ft||r.Z6:null,Lt(),Bt>0&&Ft&&Ft.push(e),e}function jt(e,t,n,i,r,o){return Vt(Gt(e,t,n,i,r,o,!0))}function zt(e,t,n,i,r){return Vt(Jt(e,t,n,i,r,!0))}function $t(e){return!!e&&!0===e.__v_isVNode}function Wt(e,t){return e.type===t.type&&e.key===t.key}const Ht="__vInternal",qt=({key:e})=>null!=e?e:null,Kt=({ref:e,ref_key:t,ref_for:n})=>null!=e?(0,r.HD)(e)||(0,i.dq)(e)||(0,r.mf)(e)?{i:O,r:e,k:t,f:!!n}:e:null;function Gt(e,t=null,n=null,i=0,o=null,s=(e===Pt?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qt(t),ref:t&&Kt(t),scopeId:R,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:O};return c?(nn(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=(0,r.HD)(n)?8:16),Bt>0&&!a&&Ft&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Ft.push(l),l}const Jt=Zt;function Zt(e,t=null,n=null,o=0,s=null,a=!1){if(e&&e!==Fe||(e=Ot),$t(e)){const i=Xt(e,t,!0);return n&&nn(i,n),Bt>0&&!a&&Ft&&(6&i.shapeFlag?Ft[Ft.indexOf(e)]=i:Ft.push(i)),i.patchFlag|=-2,i}if(In(e)&&(e=e.__vccOpts),t){t=Qt(t);let{class:e,style:n}=t;e&&!(0,r.HD)(e)&&(t.class=(0,r.C_)(e)),(0,r.Kn)(n)&&((0,i.X3)(n)&&!(0,r.kJ)(n)&&(n=(0,r.l7)({},n)),t.style=(0,r.j5)(n))}const c=(0,r.HD)(e)?1:W(e)?128:At(e)?64:(0,r.Kn)(e)?4:(0,r.mf)(e)?2:0;return Gt(e,t,n,o,s,c,a,!0)}function Qt(e){return e?(0,i.X3)(e)||Ht in e?(0,r.l7)({},e):e:null}function Xt(e,t,n=!1){const{props:i,ref:o,patchFlag:s,children:a}=e,c=t?rn(i||{},t):i,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&qt(c),ref:t&&t.ref?n&&o?(0,r.kJ)(o)?o.concat(Kt(t)):[o,Kt(t)]:Kt(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pt?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Xt(e.ssContent),ssFallback:e.ssFallback&&Xt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l}function Yt(e=" ",t=0){return Jt(_t,null,e,t)}function en(e){return null==e||"boolean"===typeof e?Jt(Ot):(0,r.kJ)(e)?Jt(Pt,null,e.slice()):"object"===typeof e?tn(e):Jt(_t,null,String(e))}function tn(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Xt(e)}function nn(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if((0,r.kJ)(t))n=16;else if("object"===typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),nn(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||Ht in t?3===i&&O&&(1===O.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=O}}else(0,r.mf)(t)?(t={default:t,_ctx:O},n=32):(t=String(t),64&i?(n=16,t=[Yt(t)]):n=8);e.children=t,e.shapeFlag|=n}function rn(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=(0,r.C_)([t.class,i.class]));else if("style"===e)t.style=(0,r.j5)([t.style,i.style]);else if((0,r.F7)(e)){const n=t[e],o=i[e];!o||n===o||(0,r.kJ)(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=i[e])}return t}function on(e,t,n,i=null){s(e,t,7,[n,i])}const sn=bt();let an=0;function cn(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||sn,a={uid:an++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:st(o,s),emitsOptions:P(o,s),emit:null,emitted:null,propsDefaults:r.kT,inheritAttrs:o.inheritAttrs,ctx:r.kT,data:r.kT,props:r.kT,attrs:r.kT,slots:r.kT,refs:r.kT,setupState:r.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=A.bind(null,a),e.ce&&e.ce(a),a}let ln=null;const dn=()=>ln||O,un=e=>{ln=e,e.scope.on()},hn=()=>{ln&&ln.scope.off(),ln=null};function pn(e){return 4&e.vnode.shapeFlag}let fn,mn,gn=!1;function vn(e,t=!1){gn=t;const{props:n,children:i}=e.vnode,r=pn(e);nt(e,n,r,t),gt(e,i);const o=r?bn(e,t):void 0;return gn=!1,o}function bn(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,i.Xl)(new Proxy(e.ctx,je));const{setup:s}=n;if(s){const n=e.setupContext=s.length>1?Cn(e):null;un(e),(0,i.Jd)();const c=o(s,e,0,[e.props,n]);if((0,i.lk)(),hn(),(0,r.tI)(c)){if(c.then(hn,hn),t)return c.then((n=>{Sn(e,n,t)})).catch((t=>{a(t,e,0)}));e.asyncDep=c}else Sn(e,c,t)}else yn(e,t)}function Sn(e,t,n){(0,r.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,r.Kn)(t)&&(e.setupState=(0,i.WL)(t)),yn(e,n)}function yn(e,t,n){const o=e.type;if(!e.render){if(!t&&fn&&!o.render){const t=o.template||Ke(e).template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:s,compilerOptions:a}=o,c=(0,r.l7)((0,r.l7)({isCustomElement:n,delimiters:s},i),a);o.render=fn(t,c)}}e.render=o.render||r.dG,mn&&mn(e)}un(e),(0,i.Jd)(),$e(e),(0,i.lk)(),hn()}function wn(e){return new Proxy(e.attrs,{get(t,n){return(0,i.j)(e,"get","$attrs"),t[n]}})}function Cn(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=wn(e))},slots:e.slots,emit:e.emit,expose:t}}function kn(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,i.WL)((0,i.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in Ue?Ue[n](e):void 0},has(e,t){return t in e||t in Ue}}))}function En(e,t=!0){return(0,r.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function In(e){return(0,r.mf)(e)&&"__vccOpts"in e}const Tn=(e,t)=>(0,i.Fl)(e,t,gn);function xn(e,t,n){const i=arguments.length;return 2===i?(0,r.Kn)(t)&&!(0,r.kJ)(t)?$t(t)?Jt(e,null,[t]):Jt(e,t):Jt(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&$t(n)&&(n=[n]),Jt(e,t,n))}const Mn=Symbol(""),An=()=>{{const e=K(Mn);return e}};const Pn="3.2.47"},9242:function(e,t,n){"use strict";n.d(t,{F8:function(){return oe},ri:function(){return de}});n(7658);var i=n(7139),r=n(3396),o=n(4870);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),l={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?a.createElementNS(s,e):a.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,o){const s=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),n),r===o||!(r=r.nextSibling))break}else{c.innerHTML=i?`<svg>${e}</svg>`:e;const r=c.content;if(i){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function d(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function u(e,t,n){const r=e.style,o=(0,i.HD)(n);if(n&&!o){if(t&&!(0,i.HD)(t))for(const e in t)null==n[e]&&p(r,e,"");for(const e in n)p(r,e,n[e])}else{const i=r.display;o?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const h=/\s*!important$/;function p(e,t,n){if((0,i.kJ)(n))n.forEach((n=>p(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=g(e,t);h.test(n)?e.setProperty((0,i.rs)(r),n.replace(h,""),"important"):e[r]=n}}const f=["Webkit","Moz","ms"],m={};function g(e,t){const n=m[t];if(n)return n;let r=(0,i._A)(t);if("filter"!==r&&r in e)return m[t]=r;r=(0,i.kC)(r);for(let i=0;i<f.length;i++){const n=f[i]+r;if(n in e)return m[t]=n}return t}const v="http://www.w3.org/1999/xlink";function b(e,t,n,r,o){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(v,t.slice(6,t.length)):e.setAttributeNS(v,t,n);else{const r=(0,i.Pq)(t);null==n||r&&!(0,i.yA)(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function S(e,t,n,r,o,s,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,o,s),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const i=null==n?"":n;return e.value===i&&"OPTION"!==e.tagName||(e.value=i),void(null==n&&e.removeAttribute(t))}let c=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=(0,i.yA)(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{e[t]=n}catch(l){0}c&&e.removeAttribute(t)}function y(e,t,n,i){e.addEventListener(t,n,i)}function w(e,t,n,i){e.removeEventListener(t,n,i)}function C(e,t,n,i,r=null){const o=e._vei||(e._vei={}),s=o[t];if(i&&s)s.value=i;else{const[n,a]=E(t);if(i){const s=o[t]=M(i,r);y(e,n,s,a)}else s&&(w(e,n,s,a),o[t]=void 0)}}const k=/(?:Once|Passive|Capture)$/;function E(e){let t;if(k.test(e)){let n;t={};while(n=e.match(k))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,i.rs)(e.slice(2));return[n,t]}let I=0;const T=Promise.resolve(),x=()=>I||(T.then((()=>I=0)),I=Date.now());function M(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,r.$d)(A(e,n.value),t,5,[e])};return n.value=e,n.attached=x(),n}function A(e,t){if((0,i.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const P=/^on[a-z]/,_=(e,t,n,r,o=!1,s,a,c,l)=>{"class"===t?d(e,r,o):"style"===t?u(e,n,r):(0,i.F7)(t)?(0,i.tR)(t)||C(e,t,n,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):O(e,t,r,o))?S(e,t,r,s,a,c,l):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),b(e,t,r,o))};function O(e,t,n,r){return r?"innerHTML"===t||"textContent"===t||!!(t in e&&P.test(t)&&(0,i.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!P.test(t)||!(0,i.HD)(n))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const R="transition",D="animation",F=(e,{slots:t})=>(0,r.h)(r.P$,V(e),t);F.displayName="Transition";const N={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},L=F.props=(0,i.l7)({},r.P$.props,N),B=(e,t=[])=>{(0,i.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},U=e=>!!e&&((0,i.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function V(e){const t={};for(const i in e)i in N||(t[i]=e[i]);if(!1===e.css)return t;const{name:n="v",type:r,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:d=a,appearToClass:u=c,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,m=j(o),g=m&&m[0],v=m&&m[1],{onBeforeEnter:b,onEnter:S,onEnterCancelled:y,onLeave:w,onLeaveCancelled:C,onBeforeAppear:k=b,onAppear:E=S,onAppearCancelled:I=y}=t,T=(e,t,n)=>{W(e,t?u:c),W(e,t?d:a),n&&n()},x=(e,t)=>{e._isLeaving=!1,W(e,h),W(e,f),W(e,p),t&&t()},M=e=>(t,n)=>{const i=e?E:S,o=()=>T(t,e,n);B(i,[t,o]),H((()=>{W(t,e?l:s),$(t,e?u:c),U(i)||K(t,r,g,o)}))};return(0,i.l7)(t,{onBeforeEnter(e){B(b,[e]),$(e,s),$(e,a)},onBeforeAppear(e){B(k,[e]),$(e,l),$(e,d)},onEnter:M(!1),onAppear:M(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>x(e,t);$(e,h),Q(),$(e,p),H((()=>{e._isLeaving&&(W(e,h),$(e,f),U(w)||K(e,r,v,n))})),B(w,[e,n])},onEnterCancelled(e){T(e,!1),B(y,[e])},onAppearCancelled(e){T(e,!0),B(I,[e])},onLeaveCancelled(e){x(e),B(C,[e])}})}function j(e){if(null==e)return null;if((0,i.Kn)(e))return[z(e.enter),z(e.leave)];{const t=z(e);return[t,t]}}function z(e){const t=(0,i.He)(e);return t}function $(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function W(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function H(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let q=0;function K(e,t,n,i){const r=e._endId=++q,o=()=>{r===e._endId&&i()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:c}=G(e,t);if(!s)return i();const l=s+"end";let d=0;const u=()=>{e.removeEventListener(l,h),o()},h=t=>{t.target===e&&++d>=c&&u()};setTimeout((()=>{d<c&&u()}),a+1),e.addEventListener(l,h)}function G(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i(`${R}Delay`),o=i(`${R}Duration`),s=J(r,o),a=i(`${D}Delay`),c=i(`${D}Duration`),l=J(a,c);let d=null,u=0,h=0;t===R?s>0&&(d=R,u=s,h=o.length):t===D?l>0&&(d=D,u=l,h=c.length):(u=Math.max(s,l),d=u>0?s>l?R:D:null,h=d?d===R?o.length:c.length:0);const p=d===R&&/\b(transform|all)(,|$)/.test(i(`${R}Property`).toString());return{type:d,timeout:u,propCount:h,hasTransform:p}}function J(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>Z(t)+Z(e[n]))))}function Z(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Q(){return document.body.offsetHeight}const X=new WeakMap,Y=new WeakMap,ee={name:"TransitionGroup",props:(0,i.l7)({},L,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,r.FN)(),i=(0,r.Y8)();let s,a;return(0,r.ic)((()=>{if(!s.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!re(s[0].el,n.vnode.el,t))return;s.forEach(te),s.forEach(ne);const i=s.filter(ie);Q(),i.forEach((e=>{const n=e.el,i=n.style;$(n,t),i.transform=i.webkitTransform=i.transitionDuration="";const r=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,W(n,t))};n.addEventListener("transitionend",r)}))})),()=>{const c=(0,o.IU)(e),l=V(c);let d=c.tag||r.HY;s=a,a=t.default?(0,r.Q6)(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&(0,r.nK)(t,(0,r.U2)(t,l,i,n))}if(s)for(let e=0;e<s.length;e++){const t=s[e];(0,r.nK)(t,(0,r.U2)(t,l,i,n)),X.set(t,t.el.getBoundingClientRect())}return(0,r.Wm)(d,null,a)}}};ee.props;function te(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function ne(e){Y.set(e,e.el.getBoundingClientRect())}function ie(e){const t=X.get(e),n=Y.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${i}px,${r}px)`,t.transitionDuration="0s",e}}function re(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&i.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&i.classList.add(e))),i.style.display="none";const r=1===t.nodeType?t:t.parentNode;r.appendChild(i);const{hasTransform:o}=G(i);return r.removeChild(i),o}const oe={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):se(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!==!n&&(i?t?(i.beforeEnter(e),se(e,!0),i.enter(e)):i.leave(e,(()=>{se(e,!1)})):se(e,t))},beforeUnmount(e,{value:t}){se(e,t)}};function se(e,t){e.style.display=t?e._vod:"none"}const ae=(0,i.l7)({patchProp:_},l);let ce;function le(){return ce||(ce=(0,r.Us)(ae))}const de=(...e)=>{const t=le().createApp(...e);const{mount:n}=t;return t.mount=e=>{const r=ue(e);if(!r)return;const o=t._component;(0,i.mf)(o)||o.render||o.template||(o.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function ue(e){if((0,i.HD)(e)){const t=document.querySelector(e);return t}return e}},7139:function(e,t,n){"use strict";n.d(t,{C_:function(){return u},DM:function(){return R},E9:function(){return se},F7:function(){return I},Gg:function(){return q},HD:function(){return L},He:function(){return re},Kj:function(){return F},Kn:function(){return U},NO:function(){return k},Nj:function(){return ne},Od:function(){return M},PO:function(){return W},Pq:function(){return p},RI:function(){return P},S0:function(){return H},W7:function(){return $},WV:function(){return g},Z6:function(){return w},_A:function(){return J},_N:function(){return O},aU:function(){return ee},dG:function(){return C},e1:function(){return o},fY:function(){return i},h5:function(){return ie},hR:function(){return Y},hq:function(){return v},ir:function(){return te},j5:function(){return s},kC:function(){return X},kJ:function(){return _},kT:function(){return y},l7:function(){return x},mf:function(){return N},rs:function(){return Q},tI:function(){return V},tR:function(){return T},yA:function(){return f},yk:function(){return B},zw:function(){return b}});n(7658);function i(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const r="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=i(r);function s(e){if(_(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=L(i)?d(i):s(i);if(r)for(const e in r)t[e]=r[e]}return t}return L(e)||U(e)?e:void 0}const a=/;(?![^(]*\))/g,c=/:([^]+)/,l=/\/\*.*?\*\//gs;function d(e){const t={};return e.replace(l,"").split(a).forEach((e=>{if(e){const n=e.split(c);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function u(e){let t="";if(L(e))t=e;else if(_(e))for(let n=0;n<e.length;n++){const i=u(e[n]);i&&(t+=i+" ")}else if(U(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const h="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",p=i(h);function f(e){return!!e||""===e}function m(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=g(e[i],t[i]);return n}function g(e,t){if(e===t)return!0;let n=D(e),i=D(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=B(e),i=B(t),n||i)return e===t;if(n=_(e),i=_(t),n||i)return!(!n||!i)&&m(e,t);if(n=U(e),i=U(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!g(e[n],t[n]))return!1}}return String(e)===String(t)}function v(e,t){return e.findIndex((e=>g(e,t)))}const b=e=>L(e)?e:null==e?"":_(e)||U(e)&&(e.toString===j||!N(e.toString))?JSON.stringify(e,S,2):String(e),S=(e,t)=>t&&t.__v_isRef?S(e,t.value):O(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:R(t)?{[`Set(${t.size})`]:[...t.values()]}:!U(t)||_(t)||W(t)?t:String(t),y={},w=[],C=()=>{},k=()=>!1,E=/^on[^a-z]/,I=e=>E.test(e),T=e=>e.startsWith("onUpdate:"),x=Object.assign,M=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},A=Object.prototype.hasOwnProperty,P=(e,t)=>A.call(e,t),_=Array.isArray,O=e=>"[object Map]"===z(e),R=e=>"[object Set]"===z(e),D=e=>"[object Date]"===z(e),F=e=>"[object RegExp]"===z(e),N=e=>"function"===typeof e,L=e=>"string"===typeof e,B=e=>"symbol"===typeof e,U=e=>null!==e&&"object"===typeof e,V=e=>U(e)&&N(e.then)&&N(e.catch),j=Object.prototype.toString,z=e=>j.call(e),$=e=>z(e).slice(8,-1),W=e=>"[object Object]"===z(e),H=e=>L(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,q=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),K=e=>{const t=Object.create(null);return n=>{const i=t[n];return i||(t[n]=e(n))}},G=/-(\w)/g,J=K((e=>e.replace(G,((e,t)=>t?t.toUpperCase():"")))),Z=/\B([A-Z])/g,Q=K((e=>e.replace(Z,"-$1").toLowerCase())),X=K((e=>e.charAt(0).toUpperCase()+e.slice(1))),Y=K((e=>e?`on${X(e)}`:"")),ee=(e,t)=>!Object.is(e,t),te=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ne=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ie=e=>{const t=parseFloat(e);return isNaN(t)?e:t},re=e=>{const t=L(e)?Number(e):NaN;return isNaN(t)?e:t};let oe;const se=()=>oe||(oe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},8889:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8389);class o{constructor(e,t,n,i=1e3,r=200){this.realtimeController=e,this.selfAttendeeId=t,this.hasBandwidthPriorityCallback=n,this.waitIntervalMs=i,this.updateIntervalMs=r,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}needUpdate(e){return!this.activeSpeakers||(0===this.speakerScores[e]&&this.activeSpeakers.includes(e)||this.speakerScores[e]>0&&!this.activeSpeakers.includes(e))}updateActiveSpeakers(e,t,n){if(!this.needUpdate(n))return;const i=[],r=Object.keys(this.speakerScores);for(let l=0;l<r.length;l++){const e=r[l];i.push({attendeeId:e,activeScore:this.speakerScores[e]})}const o=i.sort(((e,t)=>t.activeScore-e.activeScore)).filter((function(e){return e.activeScore>0})).map((function(e){return e.attendeeId}));this.activeSpeakers=o,t(o);const s=o.length>0&&o[0]===this.selfAttendeeId,a=s&&e.prioritizeVideoSendBandwidthForActiveSpeaker(),c=this.hasBandwidthPriority!==a;c&&(this.hasBandwidthPriority=a,this.hasBandwidthPriorityCallback(a))}updateScore(e,t,n,i,r){const o=e.calculateScore(n,i,r);this.speakerScores[n]!==o&&(this.speakerScores[n]=o,this.mostRecentUpdateTimestamp[n]=Date.now(),this.updateActiveSpeakers(e,t,n))}subscribe(e,t,n,i){const o=(n,i)=>{if(!i)return this.speakerScores[n]=0,this.mostRecentUpdateTimestamp[n]=Date.now(),void this.updateActiveSpeakers(e,t,n);this.realtimeController.realtimeSubscribeToVolumeIndicator(n,((n,i,r,o)=>{this.mostRecentUpdateTimestamp[n]=Date.now(),null!==r&&(this.speakerMuteState[n]=r),this.updateScore(e,t,n,i,r)}))};this.detectorCallbackToHandler.set(t,o);const s=new r.default(this.updateIntervalMs);if(s.start((()=>{for(const n in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[n]>this.waitIntervalMs&&this.updateScore(e,t,n,0,this.speakerMuteState[n])})),this.detectorCallbackToActivityTimer.set(t,s),n&&i){const e=new r.default(i);e.start((()=>{n(this.speakerScores)})),this.detectorCallbackToScoresTimer.set(t,e)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(o)}unsubscribe(e){const t=this.detectorCallbackToHandler.get(e);this.detectorCallbackToHandler.delete(e),t&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(t);const n=this.detectorCallbackToActivityTimer.get(e);n&&(n.stop(),this.detectorCallbackToActivityTimer.delete(e));const i=this.detectorCallbackToScoresTimer.get(e);i&&(i.stop(),this.detectorCallbackToHandler.delete(e))}destroy(){return i(this,void 0,void 0,(function*(){for(const e of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(e);for(const e of this.detectorCallbackToActivityTimer.values())e.stop();for(const e of this.detectorCallbackToScoresTimer.values())e.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()}))}}t["default"]=o},9943:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e=.9,t=.01,n=.2,i=.2){this.speakerWeight=e,this.cutoffThreshold=t,this.silenceThreshold=n,this.takeoverRate=i,this.volumes={}}calculateScore(e,t,n){(n||null===t)&&(t=0),this.volumes.hasOwnProperty(e)||(this.volumes[e]=0),t=t>this.silenceThreshold?1:0;const i=this.volumes[e]*this.speakerWeight+t*(1-this.speakerWeight);this.volumes[e]=i;for(const r in this.volumes)r!==e&&(this.volumes[r]=Math.max(this.volumes[r]-this.takeoverRate*t,0));return i<this.cutoffThreshold?0:i}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}}t["default"]=n},8738:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.appName=e,this.appVersion=t}static create(e,t){const i=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!e||e.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!i.test(e))throw new Error(`appName must satisfy ${i} regular expression`);const r=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!t||t.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!r.test(t))throw new Error("appVersion must satisfy Semantic Versioning format");return new n(e,t)}}t["default"]=n},7730:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},7994:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4380),o=n(5971);class s{constructor(e){this.logger=e,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new r.default,this.observers=new Set}bindAudioElement(e){return i(this,void 0,void 0,(function*(){if(!e)throw new Error(`Cannot bind audio element: ${e}`);return this.audioElement=e,this.audioElement.autoplay=!0,this.bindAudioMix()}))}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver((e=>{this.audioStream&&e.meetingAudioStreamBecameInactive(this.audioStream)})))}bindAudioStream(e){return i(this,void 0,void 0,(function*(){if(e){this.audioStream=e;try{yield this.bindAudioMix()}catch(t){this.logger&&this.logger.warn(`Failed to bind audio stream: ${t}`)}}}))}bindAudioDevice(e){return i(this,void 0,void 0,(function*(){if(e&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=e,this.bindAudioMix()}))}forEachObserver(e){for(const t of this.observers)o.default.nextTick((()=>{e(t)}))}bindAudioMix(){var e,t;return i(this,void 0,void 0,(function*(){if(!this.audioElement)return;const n=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),n!==this.audioStream&&this.forEachObserver((e=>{n&&e.meetingAudioStreamBecameInactive(n),this.audioStream&&e.meetingAudioStreamBecameActive(this.audioStream)}));const i=(null===(e=this.audioDevice)||void 0===e?void 0:e.deviceId)!==this.audioElement.sinkId;if(i&&"undefined"===typeof this.audioElement.sinkId)throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const r=this.audioDevice?this.audioDevice.deviceId:"",o=this.audioElement.sinkId;if(r===o)return;const s=this.audioElement,a=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(s.srcObject=null),i)try{yield s.setSinkId(r)}catch(c){throw null===(t=this.logger)||void 0===t||t.error(`Failed to set sinkId for audio element: ${c}`),c}this.browserBehavior.hasChromiumWebRTC()&&(s.srcObject=a)}))}getCurrentMeetingAudioStream(){return i(this,void 0,void 0,(function*(){return this.audioStream}))}addAudioMixObserver(e){return i(this,void 0,void 0,(function*(){this.observers.add(e)}))}removeAudioMixObserver(e){return i(this,void 0,void 0,(function*(){this.observers.delete(e)}))}audioOutputDidChange(e){return i(this,void 0,void 0,(function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(e)}))}}t["default"]=s},9842:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e=null){this.audioBitrateBps=e}static fullbandSpeechMono(){return new n(4e4)}static fullbandMusicMono(){return new n(64e3)}static fullbandMusicStereo(){return new n(128e3)}isStereo(){return 128e3===this.audioBitrateBps}}t["default"]=n},7383:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.logger=null,this.browserBehavior=null,this.signalingClient=null,this.meetingSessionConfiguration=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.audioMixController=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.videoSubscriptionLimit=25,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.meetingSupportedVideoSendCodecPreferences=void 0,this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}}t["default"]=n},6971:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8889),o=n(7994),s=n(9842),a=n(4380),c=n(6678),l=n(996),d=n(5207),u=n(7726),h=n(6126),p=n(7517),f=n(5351),m=n(4826),g=n(5971),v=n(6040),b=n(5727),S=n(4739),y=n(1735),w=n(6849),C=n(8614),k=n(1737),E=n(4059),I=n(6372),T=n(7829),x=n(1847),M=n(4975),A=n(6023),P=n(752),_=n(1535),O=n(8758),R=n(860),D=n(613),F=n(3576),N=n(4003),L=n(7296),B=n(3654),U=n(9819),V=n(5546),j=n(6145),z=n(2036),$=n(1356),W=n(2320),H=n(3341),q=n(3276),K=n(2695),G=n(7138),J=n(339),Z=n(2358),Q=n(9198),X=n(9108),Y=n(4903),ee=n(8692),te=n(5221),ne=n(3670),ie=n(4595),re=n(4933),oe=n(7816),se=n(16),ae=n(3062),ce=n(2818),le=n(5620),de=n(9663),ue=n(1183),he=n(7383);class pe{constructor(e,t,n,i,r,a){this._audioProfile=new s.default,this.connectionHealthData=new c.default,this.observerQueue=new Set,this.meetingSessionContext=new he.default,this.enableSimulcast=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.destroyed=!1,this.usePromises=!0,this._logger=t,this.sessionStateController=new v.default(this._logger),this._configuration=e,this._webSocketAdapter=n,this._realtimeController=new m.default(i),this._realtimeController.realtimeSetLocalAttendeeId(e.credentials.attendeeId,e.credentials.externalUserId),this._mediaStreamBroker=i,this._reconnectController=r,this._videoTileController=new ae.default(new ce.default,this,this._logger),this._audioMixController=new o.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=a}destroy(){return i(this,void 0,void 0,(function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0}))}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(e){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(e):null}setAudioProfile(e){this._audioProfile=e}addObserver(e){this.logger.info("adding meeting observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing meeting observer"),this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)g.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}initSignalingClient(){this.connectionHealthData.reset(),this.meetingSessionContext.signalingClient||(this.meetingSessionContext=new he.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new a.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new w.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){var e;null===(e=this.meetingSessionContext.signalingClient)||void 0===e||e.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then((()=>{const e=()=>i(this,void 0,void 0,(function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}));this.preStartObserver={handleSignalingClientEvent(t){t.type===C.default.WebSocketClosed&&e()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)})).catch((e=>{this.logger.error(`Signaling task pre-start failed: ${e}`),this.signalingTask=void 0}))}start(e){this.startReturningPromise(e).then((()=>{this.logger.info("start completed")})).catch((e=>{this.logger.error(`start failed: ${e}`)}))}startReturningPromise(e){return!0===(null===e||void 0===e?void 0:e.signalingOnly)?this.prestart():(this.activeSpeakerDetector,new Promise(((e,t)=>{this.sessionStateController.perform(b.default.Connect,(()=>{this.actionConnect(!1).then(e).catch(t)}))})))}connectWithPromises(e){const t=this.meetingSessionContext,n=(e,t)=>new G.default(this.logger,t,e);this.monitorTask=new F.default(t,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const i=this.monitorTask.once(),r=new U.default(t).once();this.receiveIndexTask=new z.default(t),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const o=new W.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new D.default(t),new $.default(t),new O.default(t),new V.default(t),this.receiveIndexTask]).once(),s=new A.default(t).once(o),a=new T.default(t).once(s,r),c=new P.default(t).once(a),l=new H.default(t).once(c),d=new _.default(t).once(l),u=new K.default(t).once(d);return new W.default(this.logger,this.wrapTaskName("AudioVideoStart"),[i,n(this.configuration.connectionTimeoutMs,new W.default(this.logger,"Peer",[u,e?new G.default(this.logger,new L.default(this.logger,"FinalizeConnection",[new J.default(t),new q.default(t)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new q.default(t)]))])}connectWithTasks(e){return this.receiveIndexTask=new z.default(this.meetingSessionContext),this.monitorTask=new F.default(this.meetingSessionContext,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData),this.receiveIndexTask.pauseIngestion(),this.monitorTask.pauseResubscribeCheck(),new W.default(this.logger,this.wrapTaskName("AudioVideoStart"),[this.monitorTask,new U.default(this.meetingSessionContext),new G.default(this.logger,new W.default(this.logger,"Media",[new W.default(this.logger,"Signaling",[new N.default(this.meetingSessionContext),new D.default(this.meetingSessionContext),new $.default(this.meetingSessionContext),new O.default(this.meetingSessionContext),new V.default(this.meetingSessionContext),this.receiveIndexTask]),new W.default(this.logger,"Peer",[new A.default(this.meetingSessionContext),new T.default(this.meetingSessionContext),new P.default(this.meetingSessionContext),new H.default(this.meetingSessionContext),new _.default(this.meetingSessionContext),new K.default(this.meetingSessionContext),e?new G.default(this.logger,new L.default(this.logger,"FinalizeConnection",[new J.default(this.meetingSessionContext),new q.default(this.meetingSessionContext)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new q.default(this.meetingSessionContext)])]),this.configuration.connectionTimeoutMs)])}actionConnect(e){var t;return i(this,void 0,void 0,(function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(new a.default).hasChromiumWebRTC();const n=!!this.configuration.urls.audioHostURL;if(n?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new p.default(this.configuration.credentials.attendeeId).hasModality(p.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Q.default(this.logger,this.meetingSessionContext.browserBehavior):this.meetingSessionContext.transceiverController=new X.default(this.logger,this.meetingSessionContext.browserBehavior)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Z.default(this.logger,this.meetingSessionContext.browserBehavior)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new Y.default(this.logger,this.meetingSessionContext.browserBehavior)),this.meetingSessionContext.volumeIndicatorAdapter=new ue.default(this.logger,this._realtimeController,pe.MIN_VOLUME_DECIBELS,pe.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.enableSimulcast){let e=this.meetingSessionContext.videoUplinkBandwidthPolicy;e||(e=new le.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=e),e.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new ie.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new se.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new oe.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new de.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new ne.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.lastKnownVideoAvailability=new h.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new te.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new re.default,this.meetingSessionContext.videosPaused=new re.default,this.meetingSessionContext.statsCollector=new I.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new l.default(this,this._realtimeController,this.connectionHealthData,new f.default(this.meetingSessionContext.signalingClient,pe.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},e||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver((e=>{ee.Maybe.of(e.audioVideoDidStartConnecting).map((t=>t.bind(e)(!1)))})),null===(t=this.eventController)||void 0===t||t.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const r=n&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;let o;this.logger.info("Needs to wait for attendee presence? "+r),o=this.usePromises?this.connectWithPromises(r):this.connectWithTasks(r);try{yield o.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(b.default.FinishConnecting,(()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()}))}catch(s){this.signalingTask=void 0;const e=new d.default(this.getMeetingStatusCode(s)||u.default.TaskFailed);if(this.logger.info(`Start failed: ${e} due to error ${s}.`),this.sessionStateController.state()===S.default.NotConnected)return void this.logger.info("Start failed and not connected. Not cleaning up.");this.sessionStateController.perform(b.default.Fail,(()=>i(this,void 0,void 0,(function*(){yield this.actionDisconnect(e,!0,s),this.handleMeetingSessionStatus(e,s)||this.notifyStop(e,s)}))))}}))}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new G.default(this.logger,new N.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=E.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver((e=>{ee.Maybe.of(e.audioVideoDidStart).map((t=>t.bind(e)()))})),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var e;return this.sessionStateController.state()===S.default.NotConnected?(null===(e=this.meetingSessionContext.signalingClient)||void 0===e||e.closeConnection(),this.meetingSessionContext.signalingClient=null,this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise(((e,t)=>{this.sessionStateController.perform(b.default.Disconnect,(()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new d.default(u.default.Left),!1,null).then(e).catch(t)}))}))}stop(){this.stopReturningPromise()}actionDisconnect(e,t,n){return i(this,void 0,void 0,(function*(){try{yield new W.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new G.default(this.logger,new R.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch(i){this.logger.info("fail to stop")}try{const e=[new G.default(this.logger,new M.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new W.default(this.logger,this.wrapTaskName("AudioVideoClean"),e).run()}catch(r){this.logger.info("fail to clean")}this.sessionStateController.perform(b.default.FinishDisconnecting,(()=>{t||(this.meetingSessionContext.signalingClient=null,this.notifyStop(e,n))}))}))}update(e={needsRenegotiation:!0}){let t=e.needsRenegotiation;if(t||(t=void 0===this.meetingSessionContext.peer),t||(t=!this.updateRemoteVideosFromLastVideosToReceive()),t||(t=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!t)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const n=this.sessionStateController.perform(b.default.Update,(()=>{this.actionUpdateWithRenegotiation(!0)}));return n===y.default.Transitioned||n===y.default.DeferredTransition}updateRemoteVideosFromLastVideosToReceive(){var e,t;const n=this.meetingSessionContext;if((null===(e=n.videosToReceive)||void 0===e?void 0:e.empty())||(null===(t=n.lastVideosToReceive)||void 0===t?void 0:t.empty()))return!1;if(!n.transceiverController||!n.transceiverController.getMidForStreamId||!n.transceiverController.setStreamIdForMid||!n.videosToReceive.forEach||!n.signalingClient.remoteVideoUpdate||!n.videoStreamIndex.overrideStreamIdMappings)return!1;let i=[];const r=new Map;let o=[];if(null===n.lastVideosToReceive)i=n.videosToReceive.array();else{const e=n.videoStreamIndex;n.videosToReceive.forEach((t=>{if(n.lastVideosToReceive.contain(t))return;let o=!1;n.lastVideosToReceive.forEach((n=>{o||e.StreamIdsInSameGroup(n,t)&&(r.set(n,t),o=!0)})),o||i.push(t)})),o=n.lastVideosToReceive.array().filter((e=>{const t=n.videosToReceive.contain(e),i=r.has(e);return!t&&!i}))}this.logger.info(`Request to update remote videos with added: ${i}, updated: ${[...r.entries()]}, removed: ${o}`);const s=[];for(const[a,c]of r.entries()){const e=new k.default;if(e.streamId=c,e.attendeeId=n.videoStreamIndex.attendeeIdForStreamId(c),e.mid=n.transceiverController.getMidForStreamId(a),void 0===e.mid)return this.logger.info(`No MID found for stream ID ${a}, cannot update stream without renegotiation`),!1;if(s.push(e),n.transceiverController.setStreamIdForMid(e.mid,c),n.videoStreamIndex.overrideStreamIdMappings(a,c),n.videoTileController.haveVideoTileForAttendeeId(e.attendeeId)){const t=n.videoTileController.getVideoTileForAttendeeId(e.attendeeId);if(!t.setStreamId)return!1;t.setStreamId(c)}}return 0!==s.length&&n.signalingClient.remoteVideoUpdate(s,[]),0===i.length&&0===o.length&&(n.videoStreamIndex.subscribeFrameSent(),!0)}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const e=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(e)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const e=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!(!e||!e.headerExtensions)&&e.headerExtensions.some((e=>"http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"===e.uri))}restartLocalVideo(e){const t=()=>i(this,void 0,void 0,(function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),e()})),n=this.sessionStateController.perform(b.default.Update,(()=>{t()}));return n===y.default.Transitioned||n===y.default.DeferredTransition}replaceLocalVideo(e){return i(this,void 0,void 0,(function*(){if(!e||e.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const t=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(t){const n=t.state(),i=e.getVideoTracks()[0].getSettings();t.bindVideoStream(n.boundAttendeeId,!0,e,i.width,i.height,n.streamId,n.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(e.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=e,this.logger.info("Local video input is updated")}))}replaceLocalAudio(e){return i(this,void 0,void 0,(function*(){if(!e||e.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime();const t=yield this.meetingSessionContext.transceiverController.replaceAudioTrack(e.getAudioTracks()[0]);if(!t)throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=e,this.logger.info("Local audio input is updated")}))}actionUpdateWithRenegotiation(e){return i(this,void 0,void 0,(function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new W.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new j.default(this.meetingSessionContext),new G.default(this.logger,new W.default(this.logger,"UpdateSession",[new T.default(this.meetingSessionContext),new P.default(this.meetingSessionContext),new H.default(this.meetingSessionContext),new _.default(this.meetingSessionContext),new K.default(this.meetingSessionContext),new q.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),e&&this.sessionStateController.perform(b.default.FinishUpdating,(()=>{this.actionFinishUpdating()}))}catch(t){this.sessionStateController.perform(b.default.FinishUpdating,(()=>{const e=new d.default(this.getMeetingStatusCode(t)||u.default.TaskFailed);e.statusCode()!==u.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(e,t)}))}}))}notifyStop(e,t){var n;if(this.forEachObserver((t=>{ee.Maybe.of(t.audioVideoDidStop).map((n=>n.bind(t)(e)))})),this.promotedToPrimaryMeeting&&t&&this.forEachObserver((e=>{this.promotedToPrimaryMeeting=!1,ee.Maybe.of(e.audioVideoWasDemotedFromPrimaryMeeting).map((t=>t.bind(e)(new d.default(u.default.SignalingInternalServerError))))})),this.eventController){const{signalingOpenDurationMs:i,poorConnectionCount:r,startTimeMs:o,iceGatheringDurationMs:s,attendeePresenceDurationMs:a,meetingStartDurationMs:c}=this.meetingSessionContext,l={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:null===o?0:Math.round(Date.now()-o),meetingStatus:u.default[e.statusCode()],signalingOpenDurationMs:i,iceGatheringDurationMs:s,attendeePresenceDurationMs:a,poorConnectionCount:r,meetingStartDurationMs:c,retryCount:this.totalRetryCount},d=t&&t.message||(null===(n=e.toString)||void 0===n?void 0:n.call(e))||"";0===l.meetingDurationMs?(l.meetingErrorMessage=d,delete l.meetingDurationMs,delete l.attendeePresenceDurationMs,delete l.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",l)):e.isFailure()||e.isAudioConnectionFailure()?(l.meetingErrorMessage=d,this.eventController.publishEvent("meetingFailed",l)):this.eventController.publishEvent("meetingEnded",l)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const e=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(e)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(e,t){const n=this._reconnectController.retryWithBackoff((()=>i(this,void 0,void 0,(function*(){this.sessionStateController.state()===S.default.NotConnected?this.sessionStateController.perform(b.default.Connect,(()=>{this.actionConnect(!0)})):this.sessionStateController.perform(b.default.Reconnect,(()=>{this.actionReconnect(e)})),this.totalRetryCount+=1}))),(()=>{this.logger.info("canceled retry")}));return n||this.sessionStateController.perform(b.default.Fail,(()=>{this.actionDisconnect(e,!1,t)})),n}actionReconnect(e){return i(this,void 0,void 0,(function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver((e=>{ee.Maybe.of(e.audioVideoDidStartConnecting).map((t=>t.bind(e)(!0)))}))),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new W.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new G.default(this.logger,new W.default(this.logger,"Media",[new x.default(this.meetingSessionContext),new W.default(this.logger,"Signaling",[new N.default(this.meetingSessionContext),new O.default(this.meetingSessionContext),new V.default(this.meetingSessionContext)]),new A.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new j.default(this.meetingSessionContext),new G.default(this.logger,new W.default(this.logger,"UpdateSession",[new T.default(this.meetingSessionContext),new P.default(this.meetingSessionContext),new H.default(this.meetingSessionContext),new _.default(this.meetingSessionContext),new K.default(this.meetingSessionContext),new q.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(b.default.FinishConnecting,(()=>{if(this.eventController){const{signalingOpenDurationMs:t,poorConnectionCount:n,startTimeMs:i,iceGatheringDurationMs:r,attendeePresenceDurationMs:o,meetingStartDurationMs:s}=this.meetingSessionContext,a={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-i),meetingStatus:u.default[e.statusCode()],signalingOpenDurationMs:t,iceGatheringDurationMs:r,attendeePresenceDurationMs:o,poorConnectionCount:n,meetingStartDurationMs:s,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",a)}this.actionFinishConnecting()}))}catch(t){this.sessionStateController.perform(b.default.FinishConnecting,(()=>{this.logger.info("failed to reconnect audio-video session");const e=new d.default(this.getMeetingStatusCode(t)||u.default.TaskFailed);this.handleMeetingSessionStatus(e,t)}))}this.connectionHealthData.setConnectionStartTime()}))}wrapTaskName(e){return`${e}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(e){const t=/the meeting status code: (\d+)/.exec(e&&e.message);return t&&t.length>1?Number.parseInt(t[1],10):null}enforceBandwidthLimitationForSender(e){return i(this,void 0,void 0,(function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(e)}))}handleMeetingSessionStatus(e,t){if(this.logger.info(`handling status: ${u.default[e.statusCode()]}`),e.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(e),e.statusCode()===u.default.IncompatibleSDP)return this.restartLocalVideo((()=>{this.logger.info("handled incompatible SDP by attempting to restart video")})),!0;if(e.statusCode()===u.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver((e=>{ee.Maybe.of(e.videoSendDidBecomeUnavailable).map((t=>t.bind(e)()))})),!1;if(e.statusCode()===u.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver((t=>{ee.Maybe.of(t.audioVideoWasDemotedFromPrimaryMeeting).map((n=>n.bind(t)(e)))})),!1;if(e.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(e.isFailure()||e.isTerminal())&&this.meetingSessionContext.reconnectController){const n=this.reconnect(e,t);return n?this.logger.warn(`will retry due to status code ${u.default[e.statusCode()]}${t?` and error: ${t.message}`:""}`):this.logger.error(`failed with status code ${u.default[e.statusCode()]}${t?` and error: ${t.message}`:""}`),n}return!1}setVideoMaxBandwidthKbps(e){if(e<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${e} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(e)),this.maxUplinkBandwidthKbps=e}handleHasBandwidthPriority(e){return i(this,void 0,void 0,(function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink)return this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(e),void(yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController());const t=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(e);const n=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();t!==n&&(this.logger.info(`video send bandwidth priority ${e} max has changed from ${t} kbps to ${n} kbps`),yield this.enforceBandwidthLimitationForSender(n))}}))}pauseReceivingStream(e){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([e])}resumeReceivingStream(e){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([e])}setVideoCodecSendPreferences(e){this.videoSendCodecPreferences=e,this.meetingSessionContext.videoSendCodecPreferences=e,this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:e}=this.meetingSessionContext;if(!e)return this.logger.info("meeting has not started"),[];const t=this.configuration.credentials.attendeeId;return e.allVideoSendingSourcesExcludingSelf(t)}encodingSimulcastLayersDidChange(e){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver((t=>{ee.Maybe.of(t.encodingSimulcastLayersDidChange).map((n=>n.bind(t)(e)))}))}promoteToPrimaryMeeting(e){return this.actionPromoteToPrimaryMeeting(e)}actionPromoteToPrimaryMeeting(e){return i(this,void 0,void 0,(function*(){let t=new d.default(u.default.SignalingRequestFailed);return yield new W.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new G.default(this.logger,new B.default(this.meetingSessionContext,e,(e=>{t=e})),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=t.statusCode()===u.default.OK,t}))}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver((e=>{ee.Maybe.of(e.audioVideoWasDemotedFromPrimaryMeeting).map((t=>t.bind(e)(new d.default(u.default.OK))))}))}videoInputDidChange(e){return i(this,void 0,void 0,(function*(){this.logger.info("Receive a video input change event"),this.meetingSessionContext&&this.meetingSessionContext.peer?this._videoTileController.hasStartedLocalVideoTile()&&(e?yield this.replaceLocalVideo(e):this._videoTileController.stopLocalVideoTile()):this.logger.info("Skip updating video input because there is no active meeting and peer connection")}))}audioInputDidChange(e){return i(this,void 0,void 0,(function*(){if(this.logger.info("Receive an audio input change event"),this.meetingSessionContext&&this.meetingSessionContext.peer){if(!e)try{e=yield this.mediaStreamBroker.acquireAudioInputStream()}catch(t){return void this.logger.error("Could not acquire audio track from mediaStreamBroker")}yield this.replaceLocalAudio(e)}else this.logger.info("Skip updating audio input because there is no active meeting and peer connection")}))}}t["default"]=pe,pe.MIN_VOLUME_DECIBELS=-42,pe.MAX_VOLUME_DECIBELS=-14,pe.PING_PONG_INTERVAL_MS=1e4},871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5605),r=n(9446),o=n(5250),s=n(5836),a=n(1241),c=n(9674),l=n(5207),d=n(7726),u=n(8155),h=n(427),p=n(9870),f=n(6971);class m extends f.default{constructor(e){const t=new a.default;t.meetingId="",t.externalMeetingId="",t.credentials=new c.default,t.credentials.attendeeId="",t.credentials.joinToken="",t.urls=new u.default,t.urls.turnControlURL="",t.urls.audioHostURL="",t.urls.signalingURL="wss://localhost/";const n=new o.default;super(e||t,n,new p.default(new o.default),new s.default,new h.default(0,new i.default(0,0,0)),new r.default(e||t,n))}setAudioProfile(e){}start(){}stop(){}promoteToPrimaryMeeting(e){return Promise.resolve(new l.default(d.default.OK))}demoteFromPrimaryMeeting(){}}t["default"]=m},4347:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(176);class o{constructor(e,t,n,i,r,o){this.audioVideoController=e,this.videoTileController=t,this.realtimeController=n,this.audioMixController=i,this.deviceController=r,this.contentShareController=o}addObserver(e){this.audioVideoController.addObserver(e),this.trace("addObserver")}removeObserver(e){this.audioVideoController.removeObserver(e),this.trace("removeObserver")}setAudioProfile(e){this.trace("setAudioProfile",e),this.audioVideoController.setAudioProfile(e)}start(e){this.audioVideoController.start(e),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(e){return this.trace("getRTCPeerConnectionStats",e?e.id:null),this.audioVideoController.getRTCPeerConnectionStats(e)}bindAudioElement(e){const t=this.audioMixController.bindAudioElement(e);return this.trace("bindAudioElement",e.id,t),t}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(e){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(e)}removeAudioMixObserver(e){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(e)}bindVideoElement(e,t){this.videoTileController.bindVideoElement(e,t),this.trace("bindVideoElement",{tileId:e,videoElementId:t.id})}unbindVideoElement(e,t=!0){this.videoTileController.unbindVideoElement(e,t),this.trace("unbindVideoElement",{tileId:e,cleanUpVideoElement:t})}startLocalVideoTile(){const e=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,e),e}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const e=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,e),e}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const e=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),e}pauseVideoTile(e){this.videoTileController.pauseVideoTile(e),this.trace("pauseVideoTile",e)}unpauseVideoTile(e){this.videoTileController.unpauseVideoTile(e),this.trace("unpauseVideoTile",e)}getVideoTile(e){const t=this.videoTileController.getVideoTile(e);return this.trace("getVideoTile",e),t}getAllRemoteVideoTiles(){const e=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),e}getAllVideoTiles(){const e=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),e}addVideoTile(){const e=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,e.state()),e}removeVideoTile(e){this.videoTileController.removeVideoTile(e),this.trace("removeVideoTile",e)}removeVideoTilesByAttendeeId(e){const t=this.videoTileController.removeVideoTilesByAttendeeId(e);return this.trace("removeVideoTilesByAttendeeId",e,t),t}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(e){const t=this.videoTileController.captureVideoTile(e);return this.trace("captureVideoTile",e),t}realtimeSubscribeToAttendeeIdPresence(e){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(e),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(e){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(e),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(e){this.realtimeController.realtimeSetCanUnmuteLocalAudio(e),this.trace("realtimeSetCanUnmuteLocalAudio",e)}realtimeSubscribeToSetCanUnmuteLocalAudio(e){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(e),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(e),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const e=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,e),e}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const e=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),e}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(e),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const e=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),e}realtimeSubscribeToVolumeIndicator(e,t){this.realtimeController.realtimeSubscribeToVolumeIndicator(e,t),this.trace("realtimeSubscribeToVolumeIndicator",e)}realtimeUnsubscribeFromVolumeIndicator(e,t){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(e,t),this.trace("realtimeUnsubscribeFromVolumeIndicator",e,t)}realtimeSubscribeToLocalSignalStrengthChange(e){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(e),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(e){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(e),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(e,t,n){this.realtimeController.realtimeSendDataMessage(e,t,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(e,t){this.realtimeController.realtimeSubscribeToReceiveDataMessage(e,t),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(e){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(e),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(e){this.realtimeController.realtimeSubscribeToFatalError(e),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(e){this.realtimeController.realtimeUnsubscribeToFatalError(e),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(e,t,n,i){this.audioVideoController.activeSpeakerDetector.subscribe(e,t,n,i),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(e){this.audioVideoController.activeSpeakerDetector.unsubscribe(e),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(e=!1){return i(this,void 0,void 0,(function*(){const t=yield this.deviceController.listAudioInputDevices(e);return this.trace("listAudioInputDevices",e,t),t}))}listVideoInputDevices(e=!1){return i(this,void 0,void 0,(function*(){const t=yield this.deviceController.listVideoInputDevices(e);return this.trace("listVideoInputDevices",e,t),t}))}listAudioOutputDevices(e=!1){return i(this,void 0,void 0,(function*(){const t=yield this.deviceController.listAudioOutputDevices(e);return this.trace("listAudioOutputDevices",e,t),t}))}startAudioInput(e){return i(this,void 0,void 0,(function*(){return this.trace("startAudioInput",e),this.deviceController.startAudioInput(e)}))}stopAudioInput(){return i(this,void 0,void 0,(function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()}))}startVideoInput(e){return i(this,void 0,void 0,(function*(){return r.isVideoTransformDevice(e)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",e),this.deviceController.startVideoInput(e)}))}stopVideoInput(){return i(this,void 0,void 0,(function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()}))}chooseAudioOutput(e){const t=this.deviceController.chooseAudioOutput(e);return this.trace("chooseAudioOutput",e),t}addDeviceChangeObserver(e){this.deviceController.addDeviceChangeObserver(e),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(e){this.deviceController.removeDeviceChangeObserver(e),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const e=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),e}startVideoPreviewForVideoInput(e){this.deviceController.startVideoPreviewForVideoInput(e),this.trace("startVideoPreviewForVideoInput",e.id)}stopVideoPreviewForVideoInput(e){this.deviceController.stopVideoPreviewForVideoInput(e),this.trace("stopVideoPreviewForVideoInput",e.id)}setDeviceLabelTrigger(e){this.deviceController.setDeviceLabelTrigger(e),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(e){const t=this.deviceController.mixIntoAudioInput(e);return this.trace("mixIntoAudioInput",e.id),t}chooseVideoInputQuality(e,t,n){this.deviceController.chooseVideoInputQuality(e,t,n),this.trace("chooseVideoInputQuality",{width:e,height:t,frameRate:n})}setVideoMaxBandwidthKbps(e){this.audioVideoController.setVideoMaxBandwidthKbps(e),this.trace("setVideoMaxBandwidthKbps",e)}setVideoCodecSendPreferences(e){this.audioVideoController.setVideoCodecSendPreferences(e),this.trace("setVideoCodecSendPreferences",e)}getVideoInputQualitySettings(){const e=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),e}setContentAudioProfile(e){this.trace("setContentAudioProfile",e),this.contentShareController.setContentAudioProfile(e)}enableSimulcastForContentShare(e,t){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(e,t)}startContentShare(e){const t=this.contentShareController.startContentShare(e);return this.trace("startContentShare"),t}startContentShareFromScreenCapture(e,t){const n=this.contentShareController.startContentShareFromScreenCapture(e,t);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(e){this.contentShareController.addContentShareObserver(e),this.trace("addContentShareObserver")}removeContentShareObserver(e){this.contentShareController.removeContentShareObserver(e),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(e){this.contentShareController.setContentShareVideoCodecPreferences(e),this.trace("setContentShareVideoCodecPreferences")}trace(e,t,n){const i=this.audioVideoController.configuration.meetingId,r=this.audioVideoController.configuration.credentials.attendeeId;let o=`API/DefaultAudioVideoFacade/${i}/${r}/${e}`;"undefined"!==typeof t&&(o+=` ${JSON.stringify(t)}`),"undefined"!==typeof n&&(o+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(o)}getRemoteVideoSources(){const e=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,e),e}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(e){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const t=this.audioVideoController.promoteToPrimaryMeeting(e);return this.trace("promoteToPrimaryMeeting",null,t),t}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(e){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}}t["default"]=o},3529:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(9846),o=n(6656);class s extends r.default{constructor(e,t){super(e,t),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}drawImageWithMask(e,t){const n=this.blurredImage,{canvasCtx:i,targetCanvas:r}=this,{width:o,height:s}=r;if(!t||!n)return void i.clearRect(0,0,o,s);const a=this.scaledCanvas.getContext("2d");a.putImageData(t,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,o,s),i.drawImage(this.scaledCanvas,0,0,o,s),i.globalCompositeOperation="source-in",i.drawImage(e,0,0,o,s),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,o,s),i.restore()}setBlurStrength(e){if(super.setBlurStrength(e),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=o.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(e){if(this.logger.info(`received initialize message: ${this.stringify(e)}`),!e.payload)return this.logger.error("failed to initialize module"),void this.initWorkerPromise.reject(new Error("failed to initialize the module"));const t=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:t.path,inputHeight:t.input.height,inputWidth:t.input.width,inputChannels:4,modelRangeMin:t.input.range[0],modelRangeMax:t.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(e){this.blurredImage=e.payload.blurOutput,super.handlePredict(e)}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});var t;return i(this,void 0,void 0,(function*(){e.destroy.call(this),null===(t=this.blurCanvas)||void 0===t||t.remove(),this.blurCanvas=void 0}))}}t["default"]=s},9846:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2263),o=n(6656),s=n(210);class a extends r.default{constructor(e,t){super("background blur",e,t,new s.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height));const n=this.scaledCanvas.getContext("2d");n.putImageData(t,0,0);const{canvasCtx:i,targetCanvas:r}=this,{width:o,height:s}=r;i.save(),i.clearRect(0,0,o,s),i.drawImage(this.scaledCanvas,0,0,o,s),i.globalCompositeOperation="source-in",i.drawImage(e,0,0,o,s),i.globalCompositeOperation="destination-over",i.filter=`blur(${this.blurAmount}px)`,i.drawImage(e,0,0,r.width,r.height),i.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=o.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return i(this,void 0,void 0,(function*(){const e=document.createElement("canvas"),t=void 0!==e.getContext("2d").filter;return e.remove(),t}))}}t["default"]=a},6656:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlurStrengthMapper=void 0;const n={LOW:7,MEDIUM:15,HIGH:30};class i{static getBlurAmount(e,t){if(e<=0)throw new Error(`invalid value for blur strength: ${e}`);return Math.round(e*t.height/this.BLUR_STRENGTH_DIVISOR)}}t.BlurStrengthMapper=i,i.BLUR_STRENGTH_DIVISOR=540,t["default"]=n},5420:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(9667),o=n(1837),s=n(664),a=n(5640),c=n(3529),l=n(9846),d=n(6656);class u extends a.default{setBlurStrength(){}loadAssets(){return i(this,void 0,void 0,(function*(){}))}addObserver(){}removeObserver(){}}class h extends r.default{static create(e,t){return i(this,void 0,void 0,(function*(){e=h.resolveSpec(e),t=h.resolveOptions(t);const{logger:n}=t,i=yield h.isSupported(e,t);if(n.info(`processor is ${i?"":"not"} supported`),!i)return n.warn("Using no-op processor because background blur is not supported"),new u;let r;return(yield l.default.isSupported())?(n.info("Using browser-provided background blur"),r=new l.default(e,t)):(n.info("Using built-in background blur"),r=new c.default(e,t)),yield r.loadAssets(),r}))}static resolveOptions(e={}){let t=Object.assign({},e);return t.blurStrength||(t.blurStrength=d.default.MEDIUM),t.logger||(t.logger=new o.default("BackgroundBlurProcessor",s.default.INFO)),t=super.resolveOptions(t),t}static isSupported(e,t){return e=h.resolveSpec(e),t=h.resolveOptions(t),super.isSupported(e,t)}}t["default"]=h},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9705);class r extends i.default{}t["default"]=r},3566:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.path=null,this.input=null,this.output=null}static builder(){return new n}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const e={height:144,width:256,range:[0,1],channels:3},t={height:144,width:256,range:[0,1],channels:1},n="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=n,this.input=e,this.output=t,this}withPath(e){return this.path=e,this}withInput(e){return this.input=e,this}withOutput(e){return this.output=e,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}}t["default"]=n},7566:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=.8;class i{constructor(e,t,n,i){this.delegate=e,this.reportingPeriodMillis=t,this.filterCPUUtilization=n,this.logger=i,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}reportEvent(e){const t=e-this.lastReportedEventTimestamp;if(t>=this.reportingPeriodMillis){const n=this.filterCount,i=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=e,0===this.framerate||0===n)return;const r=Math.round(i/n),o=Math.round(this.framerate*(t/1e3))-n,s=Math.round(100*i/t);r>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:o,avgFilterDurationMillis:r,framerate:this.framerate,periodMillis:t}),s>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:s,filterMillis:i,periodMillis:t})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*n)}frameReceived(e){e!==this.framerate&&(this.framerate=e,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const t=Date.now();this.reportEvent(t)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}}t["default"]=i},2263:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundFilterMonitor=void 0;const r=n(8097),o=n(7797),s=n(7566);class a{constructor(){this.value=void 0,this.resolve=null}whenNext(){return this.promise||(this.promise=new Promise((e=>this.resolve=e))),this.promise}next(e){this.value=e,this.resolve(e),delete this.promise}}class c{constructor(e,t,n,i){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new o.default(this.targetCanvas),this.mask$=new a,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=c.createWorkerPromise(),this.loadModelPromise=c.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=e,this.validateSpec(t),this.validateOptions(n),this.spec=t,this.logger=n.logger,this.delegate=i,this.initCPUMonitor(n)}static createWorkerPromise(){const e={resolve:null,reject:null,promise:null};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}validateSpec(e){if(!e)throw new Error("processor has null spec");if(!e.model)throw new Error("processor spec has null model");if(!e.paths)throw new Error("processor spec has null paths")}validateOptions(e){if(!e)throw new Error("processor has null options");if(!e.logger)throw new Error("processor has null options - logger");if(!e.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!e.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(e){const t=5e3,n=10,i=1;this.videoFramesPerFilterUpdate=1,this.frameCounter=new s.default(this.delegate,e.reportingPeriodMillis,e.filterCPUUtilization,this.logger),this.cpuMonitor=new l(t,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,n))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,i))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(e){return JSON.stringify(e,null,2)}handleInitialize(e){if(this.logger.info(`received initialize message: ${this.stringify(e)}`),!e.payload)return this.logger.error("failed to initialize module"),void this.initWorkerPromise.reject(new Error("failed to initialize the module"));const t=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:t.path,inputHeight:t.input.height,inputWidth:t.input.width,inputChannels:4,modelRangeMin:t.input.range[0],modelRangeMax:t.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(e){if(this.logger.info(`received load model message: ${this.stringify(e)}`),2!==e.payload)return this.logger.error("failed to load model! status: "+e.payload),void this.loadModelPromise.reject(new Error("failed to load model! status: "+e.payload));this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(e){this.mask$.next(e.payload.output)}handleWorkerEvent(e){const t=e.data;switch(t.msg){case"initialize":this.handleInitialize(t);break;case"loadModel":this.handleLoadModel(t);break;case"predict":this.handlePredict(t);break;default:this.logger.info(`unexpected event msg: ${this.stringify(t)}`);break}}loadAssets(){return i(this,void 0,void 0,(function*(){this.logger.info("start initializing the processor");try{this.worker=yield r.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",(e=>this.handleWorkerEvent(e))),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(e){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${e.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)}))}process(e){return i(this,void 0,void 0,(function*(){if(this.destroyed)return e;this.frameCounter.frameReceived(e[0].framerate),this.cpuMonitor.frameReceived();const t=e[0].asCanvasElement();if(!t)return e;if(!this.modelInitialized)return e[0]=this.canvasVideoFrameBuffer,e;const n=t.width,i=t.height;if(0===n||0===i)return e;0===this.sourceWidth&&(this.sourceWidth=n,this.sourceHeight=i,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),this.sourceWidth===n&&this.sourceHeight===i||(this.sourceWidth=n,this.sourceHeight=i,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let e=this.mask$.value;const n=this.spec.model.input.width/t.width,i=this.spec.model.input.height/t.height;void 0===this.scaledCanvas&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const r=this.scaledCanvas.getContext("2d");r.save(),r.scale(n,i),r.drawImage(t,0,0),r.restore();const o=r.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const t=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:o},[o.data.buffer]),e=yield t}this.destroyed||this.drawImageWithMask(t,e)}catch(r){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${r}`),e}finally{this.frameCounter.filterComplete(),this.frameNumber++}return e[0]=this.canvasVideoFrameBuffer,e}))}updateVideoFramesPerFilterUpdate(e){e!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=e,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var e,t,n,r;return i(this,void 0,void 0,(function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),null===(e=this.worker)||void 0===e||e.postMessage({msg:"destroy"}),null===(t=this.worker)||void 0===t||t.postMessage({msg:"stop"}),null===(n=this.targetCanvas)||void 0===n||n.remove(),this.targetCanvas=void 0,null===(r=this.scaledCanvas)||void 0===r||r.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)}))}}t["default"]=c;class l{constructor(e,t){this.monitoringPeriodMillis=e,this.observer=t,this.lastCPUChangeTimestamp=0}filterCPUUtilizationHigh(){const e=Date.now();e-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=e,this.observer.reduceCPUUtilization())}frameReceived(){const e=Date.now();e-this.lastCPUChangeTimestamp>=2*this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=e,this.observer.increaseCPUUtilization())}}t.BackgroundFilterMonitor=l},9667:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8097),o=n(3018),s=n(3566),a=n(4380),c=n(4207),l=()=>s.default.builder().withSelfieSegmentationDefaults().build(),d="https://static.sdkassets.chime.aws",u={worker:`${d}/bgblur/workers/worker.js`,wasm:`${d}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${d}/bgblur/wasm/_cwt-wasm-simd.wasm`};class h{static defaultAssetSpec(){const e=c.default.sdkVersionSemVer;return{assetGroup:`sdk-${e.major}.${e.minor}`}}static createUrlWithParams(e,t){const n=new URL(e),i=Object.keys(t);for(const r of i)void 0!==t[r]&&n.searchParams.set(r,t[r]);return n.toString()}static resolveSpec(e){const{paths:t=u,model:n=l(),assetGroup:i=this.defaultAssetSpec().assetGroup,revisionID:r=this.defaultAssetSpec().revisionID}=e||{},o={assetGroup:i,revisionID:r,sdk:encodeURIComponent(c.default.sdkVersion),ua:encodeURIComponent(c.default.sdkUserAgentLowResolution)};return t.worker=this.createUrlWithParams(t.worker,o),t.wasm=this.createUrlWithParams(t.wasm,o),t.simd=this.createUrlWithParams(t.simd,o),n.path=this.createUrlWithParams(n.path,o),{paths:t,model:n,assetGroup:i,revisionID:r}}static resolveOptions(e){e.reportingPeriodMillis||(e.reportingPeriodMillis=1e3);const t=30;return e.filterCPUUtilization?(e.filterCPUUtilization<0||e.filterCPUUtilization>100)&&(e.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${t} percent`),e.filterCPUUtilization=t):e.filterCPUUtilization=t,e}static isSupported(e,t){const{logger:n}=t;if("undefined"===typeof globalThis)return n.info("Browser does not have globalThis."),Promise.resolve(!1);const i=new a.default;return i.supportsBackgroundFilter()?o.supportsWASM(globalThis,n)?this.supportsBackgroundFilter(globalThis,e,n):(n.info("Browser does not support WASM."),Promise.resolve(!1)):(n.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(e=globalThis,t,n){return i(this,void 0,void 0,(function*(){if(!o.supportsWorker(e,n))return n.info("Browser does not support web workers."),!1;const i=t.paths.worker;try{const e=yield r.loadWorker(i,"BackgroundFilterWorker",{},null);try{e.terminate()}catch(s){n.info(`Failed to terminate worker. ${s.message}`)}return!0}catch(s){return n.info(`Failed to fetch and instantiate test worker ${s.message}`),!1}}))}}t["default"]=h},9705:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.observers=new Set}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}filterFrameDurationHigh(e){var t;for(const n of this.observers)null===(t=n.filterFrameDurationHigh)||void 0===t||t.call(n,e)}filterCPUUtilizationHigh(e){var t;for(const n of this.observers)null===(t=n.filterCPUUtilizationHigh)||void 0===t||t.call(n,e)}}t["default"]=n},2764:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2263),o=n(8261);class s extends r.default{constructor(e,t){super("background replacement",e,t,new o.default),this.replacementBlob=t.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(t)}`)}setImageBlob(e){return i(this,void 0,void 0,(function*(){this.replacementBlob=e,this.replacementImage=yield s.loadImage(this.createReplacementObjectUrl())}))}initOnFirstExecution(){}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height));const n=this.scaledCanvas.getContext("2d");n.putImageData(t,0,0);const{canvasCtx:i,targetCanvas:r}=this,{width:o,height:s}=r;i.save(),i.clearRect(0,0,o,s),i.drawImage(this.scaledCanvas,0,0,o,s),i.globalCompositeOperation="source-in",i.drawImage(e,0,0,o,s),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,r.width,r.height),i.restore()}static loadImageExecutor(e,t,n){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",(()=>{e(i)}),!1),i.addEventListener("error",(e=>{t(new Error(`Could not load replacement image ${i.src}: ${e.message}`))}),!1),i.src=n}static loadImage(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>this.loadImageExecutor(t,n,e)))}))}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const e=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return i(this,void 0,void 0,(function*(){this.replacementImage=yield s.loadImage(this.createReplacementObjectUrl()),e.loadAssets.call(this)}))}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return i(this,void 0,void 0,(function*(){e.destroy.call(this),this.revokeReplacementObjectUrl()}))}}t["default"]=s},2691:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(9667),o=n(1837),s=n(664),a=n(5640),c=n(2764);class l extends a.default{loadAssets(){return i(this,void 0,void 0,(function*(){}))}addObserver(){}removeObserver(){}setImageBlob(){return i(this,void 0,void 0,(function*(){}))}}class d extends r.default{static create(e,t){return i(this,void 0,void 0,(function*(){e=this.resolveSpec(e),t=this.resolveOptions(t),yield this.resolveOptionsAsync(t);const{logger:n}=t,i=yield d.isSupported(e,t);if(!i)return n.warn("Using no-op processor because background replacement is not supported"),new l;n.info("Using background replacement filter");const r=new c.default(e,t);return yield r.loadAssets(),r}))}static resolveOptions(e={}){const t=Object.assign({},e);return t.logger||(t.logger=new o.default("BackgroundReplacementProcessor",s.default.INFO)),super.resolveOptions(t)}static resolveOptionsAsync(e){return i(this,void 0,void 0,(function*(){if(!e.imageBlob){const t=document.createElement("canvas");t.width=100,t.height=100;const n=t.getContext("2d");n.fillStyle="blue",n.fillRect(0,0,100,100);const i=yield new Promise((e=>{t.toBlob(e)}));e.imageBlob=i}}))}static isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return i(this,void 0,void 0,(function*(){e=this.resolveSpec(e),t=this.resolveOptions(t),yield this.resolveOptionsAsync(t);const i=t.imageBlob,r=URL.createObjectURL(i);try{yield c.default.loadImage(r)}catch(o){return t.logger.info(`Failed to fetch load replacement image ${o.message}`),!1}finally{URL.revokeObjectURL(r)}return n.isSupported.call(this,e,t)}))}}t["default"]=d},8261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9705);class r extends i.default{}t["default"]=r},5605:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n){this.fixedWaitMs=e,this.shortBackoffMs=t,this.longBackoffMs=n,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}reset(){this.currentRetry=0}nextBackoffAmountMs(){const e=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,e}}t["default"]=n},4712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5605),r=n(7033);class o{constructor(e,t,n){this.fixedWaitMs=e,this.shortBackoffMs=t,this.longBackoffMs=n}create(){return new i.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(e){return new r.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,e)}}t["default"]=o},7033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5605);class r extends i.default{constructor(e,t,n,i){super(e,t,n),this.limit=i,this.attempts=0}nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}}t["default"]=r},4380:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3606),o=n(2827);class s{constructor(){this.browser=r.detect(),this.uaParserResult=navigator&&navigator.userAgent?new o.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview"]}version(){return this.browser.version}majorVersion(){return parseInt(this.version().split(".")[0])}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const e of this.chromeLike)if(e===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const e of this.webkitBrowsers)if(e===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return-1!==navigator.userAgent.indexOf("Windows")}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()||this.osMajorVersion()>=s.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return("safari"!==this.name()||15!==this.majorVersion())&&!!this.supportsCanvasCapturedStreamPlayback()}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}requiresResolutionAlignment(e,t){return this.isAndroid()&&this.isPixel3()?[64*Math.ceil(e/64),64*Math.ceil(t/64)]:[e,t]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return"chromium-webview"===this.browser.name}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name])&&("firefox"!==this.browser.name||!this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName["chrome"]} ${this.browserSupport["chrome"]}+, ${this.browserName["samsung"]} ${this.browserSupport["samsung"]}+`;const e=[];for(const t in this.browserSupport)e.push(`${this.browserName[t]} ${this.browserSupport[t]}+`);return e.join(", ")}supportedVideoCodecs(){return i(this,void 0,void 0,(function*(){const e=new RTCPeerConnection;return e.addTransceiver("video",{direction:"inactive",streams:[]}),(yield e.createOffer({offerToReceiveVideo:!0})).sdp.split("\r\n").filter((e=>e.includes("a=rtpmap:"))).map((e=>e.replace(/.* /,"").replace(/\/.*/,""))).filter(((e,t,n)=>n.indexOf(e)===t)).filter((e=>"rtx"!==e&&"red"!==e&&"ulpfec"!==e))}))}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&("15.1.0"===this.version()||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isIOSSafari(){return"ios"===this.browser.name||"ios-webview"===this.browser.name||"safari"===this.browser.name&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return"safari"===this.browser.name||this.isIOSSafari()}isFirefox(){return"firefox"===this.browser.name}isIOSFirefox(){return"fxios"===this.browser.name}isIOSChrome(){return"crios"===this.browser.name}isChrome(){return"chrome"===this.browser.name}isEdge(){return"edge-chromium"===this.browser.name}isSamsungInternet(){return"samsung"===this.browser.name}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}}t["default"]=s,s.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16},1671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4059),r=n(3511),o=n(3926),s=n(5006);class a{constructor(e,t,n){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=n,this.globalMetricReport=new s.default,this.streamMetricReports={},this.rtcStatsReport={},this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.identityValue=(e,t)=>{const n=t?this.streamMetricReports[t]:this.globalMetricReport;return Number(n.currentMetrics[e])},this.decoderLossPercent=(e,t)=>{const n=this.streamMetricReports[t],i=n.currentMetrics["concealedSamples"]-(n.previousMetrics["concealedSamples"]||0),r=n.currentMetrics["totalSamplesReceived"]-(n.previousMetrics["totalSamplesReceived"]||0);if(r<=0)return 0;const o=r-i;return o<=0?0:i/r*100},this.packetLossPercent=(e,t)=>{const n=this.streamMetricReports[t],i=n.currentMetrics[e]-(n.previousMetrics[e]||0),r=n.currentMetrics["packetsLost"]-(n.previousMetrics["packetsLost"]||0),o=i+r;return o<=0||r<=0?0:100*r/o},this.jitterBufferMs=(e,t)=>{const n=this.streamMetricReports[t],i=n.currentMetrics["jitterBufferDelay"]-(n.previousMetrics["jitterBufferDelay"]||0),r=n.currentMetrics["jitterBufferEmittedCount"]-(n.previousMetrics["jitterBufferEmittedCount"]||0);return i<=0||r<=0?0:i/r*1e3},this.countPerSecond=(e,t)=>{const n=t?this.streamMetricReports[t]:this.globalMetricReport;let i=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(i<=0)return 0;this.previousTimestampMs<=0&&(i=1);const r=n.currentMetrics[e]-(n.previousMetrics[e]||0);return r<=0?0:Math.trunc(r/i)},this.bitsPerSecond=(e,t)=>{const n=t?this.streamMetricReports[t]:this.globalMetricReport;let i=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(i<=0)return 0;this.previousTimestampMs<=0&&(i=1);const r=8*(n.currentMetrics[e]-(n.previousMetrics[e]||0));return r<=0?0:Math.trunc(r/i)},this.secondsToMilliseconds=(e,t)=>{const n=t?this.streamMetricReports[t]:this.globalMetricReport;return Number(1e3*n.currentMetrics[e])},this.averageTimeSpentPerSecondInMilliseconds=(e,t)=>{const n=t?this.streamMetricReports[t]:this.globalMetricReport;let i=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(i<=0)return 0;this.previousTimestampMs<=0&&(i=1);const r=n.currentMetrics[e]-(n.previousMetrics[e]||0);return r<=0?0:1e3*r/i},this.isHardwareImplementation=(e,t)=>{const n=this.streamMetricReports[t],i=String(n.currentStringMetrics[e]),r=i.includes("ExternalDecoder")||i.includes("ExternalEncoder")||i.includes("EncodeAccelerator")||i.includes("DecodeAccelerator"),o=i.includes("fallback from");return r&&!o?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:i.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:i.SdkMetric.Type.STUN_RTT_MS}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:i.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:i.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:i.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:i.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:i.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:i.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:i.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:i.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:i.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:i.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:i.SdkMetric.Type.RTC_SPK_BITRATE}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:i.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:i.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:i.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:i.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:i.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:i.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:i.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:i.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:i.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:i.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:i.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:i.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:i.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE}},this.streamDimensionMap={encoderImplementation:i.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:i.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:o.default.VIDEO,dir:r.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:o.default.AUDIO,dir:r.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:o.default.AUDIO,dir:r.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:o.default.AUDIO,dir:r.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:o.default.AUDIO,dir:r.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:o.default.VIDEO,dir:r.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"}}}getMetricMap(e,t){switch(e){case o.default.AUDIO:switch(t){case r.default.UPSTREAM:return this.audioUpstreamMetricMap;case r.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case o.default.VIDEO:switch(t){case r.default.UPSTREAM:return this.videoUpstreamMetricMap;case r.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){const t=this.observableMetricSpec[e],n=this.getMetricMap(t.media,t.dir),i=n[t.source],{transform:r,source:o}=i;if(!t.hasOwnProperty("media"))return r(o||t.source);for(const s in this.streamMetricReports){const e=this.streamMetricReports[s];if(e.direction===t.dir&&e.mediaType===t.media)return r(o||t.source,Number(s))}return 0}getObservableVideoMetricValue(e,t){const n=this.observableVideoMetricSpec[e],i=this.getMetricMap(n.media,n.dir),r=i[n.source],{transform:o,source:s}=r;return o(s||n.source,t)}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===o.default.VIDEO){const n={};for(const e in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[e].dir===this.streamMetricReports[t].direction){const i=this.getObservableVideoMetricValue(e,Number(t));isNaN(i)||(n[e]=i)}const i=this.streamMetricReports[t].streamId,r=i?this.videoStreamIndex.attendeeIdForStreamId(i):this.selfAttendeeId;e[r]=e[r]?e[r]:{},e[r][t]=n}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new a(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug((()=>`Client Metric Report: ${JSON.stringify(e)}`))}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}}t["default"]=a},3511:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientMetricReportDirection=void 0,function(e){e[e["UPSTREAM"]=0]="UPSTREAM",e[e["DOWNSTREAM"]=1]="DOWNSTREAM"}(n=t.ClientMetricReportDirection||(t.ClientMetricReportDirection={})),t["default"]=n},3926:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientMetricReportMediaType=void 0,function(e){e[e["AUDIO"]=0]="AUDIO",e[e["VIDEO"]=1]="VIDEO"}(n=t.ClientMetricReportMediaType||(t.ClientMetricReportMediaType={})),t["default"]=n},2465:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},5006:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={}}}t["default"]=n},4832:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={}}}t["default"]=n},983:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n){this.minHealth=e.minHealth,this.maxHealth=e.maxHealth,this.currentHealth=e.initialHealth,this.currentData=t.clone(),this.name=n}minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(e){this.currentData=e}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const e=this.health();return e!==this.currentHealth?(this.currentHealth=e,e):null}}t["default"]=n},6678:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}static isTimestampRecent(e,t){return Date.now()<e+t}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}isConnectionStartRecent(e){return n.isTimestampRecent(this.connectionStartTimestampMs,e)}isLastPacketLossRecent(e){return n.isTimestampRecent(this.lastPacketLossInboundTimestampMs,e)}isGoodSignalRecent(e){return n.isTimestampRecent(this.lastGoodSignalTimestampMs,e)}isWeakSignalRecent(e){return n.isTimestampRecent(this.lastWeakSignalTimestampMs,e)}isNoSignalRecent(e){return n.isTimestampRecent(this.lastNoSignalTimestampMs,e)}clone(){const e=new n;return e.connectionStartTimestampMs=this.connectionStartTimestampMs,e.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,e.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,e.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,e.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,e.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,e.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,e.consecutiveMissedPongs=this.consecutiveMissedPongs,e.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),e.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),e.audioSpeakerDelayMs=this.audioSpeakerDelayMs,e}setConsecutiveMissedPongs(e){this.consecutiveMissedPongs=e}setConsecutiveStatsWithNoPackets(e){this.consecutiveStatsWithNoPackets=e}setConsecutiveStatsWithNoAudioPacketsSent(e){this.consecutiveStatsWithNoAudioPacketsSent=e}setLastPacketLossInboundTimestampMs(e){this.lastPacketLossInboundTimestampMs=e}setLastNoSignalTimestampMs(e){this.lastNoSignalTimestampMs=e}setLastWeakSignalTimestampMs(e){this.lastWeakSignalTimestampMs=e}setLastGoodSignalTimestampMs(e){this.lastGoodSignalTimestampMs=e}setAudioSpeakerDelayMs(e){this.audioSpeakerDelayMs=e}}t["default"]=n},3431:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3}}t["default"]=n},2743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(983);class r extends i.default{constructor(e,t,n){super(t,n,"Reconnection Health"),this.logger=e,this.audioDelayPointsOverMaximum=0,r.CONNECTION_UNHEALTHY_THRESHOLD=t.connectionUnhealthyThreshold,r.CONNECTION_WAIT_TIME_MS=t.connectionWaitTimeMs,r.MISSED_PONGS_THRESHOLD=t.missedPongsUpperThreshold,r.MAXIMUM_AUDIO_DELAY_MS=t.maximumAudioDelayMs,r.MAXIMUM_AUDIO_DELAY_DATA_POINTS=t.maximumAudioDelayDataPoints}health(){const e=this.currentData.isConnectionStartRecent(r.CONNECTION_WAIT_TIME_MS);if(e)return 1;const t=this.currentData.consecutiveStatsWithNoPackets>=r.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=r.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>r.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const i=this.audioDelayPointsOverMaximum>r.MAXIMUM_AUDIO_DELAY_DATA_POINTS;i&&(this.audioDelayPointsOverMaximum=0);const o=t||n||i;return o?(this.logger.warn(`reconnection recommended due to: no packets received: ${t}, missed pongs: ${n}, bad audio delay: ${i}`),0):1}}t["default"]=r},5044:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(983);class r extends i.default{constructor(e,t,n){super(t,n,"Sending Audio Health"),this.logger=e,this.sendingAudioFailureSamplesToConsider=t.sendingAudioFailureSamplesToConsider>0?t.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=t.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=t.maximumTimesToWarn,this.coolDownTimeMs=t.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}isSendingAudioUnhealthy(){const e=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),t=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return e&&t}health(){if(this.isSendingAudioUnhealthy()){const e=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!e?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}}t["default"]=r},9970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(983);class r extends i.default{constructor(e,t){super(e,t,"Unusable Audio Warning"),this.coolDownTimeMs=e.cooldownTimeMs,this.pastSamplesToConsider=e.pastSamplesToConsider,this.fractionalLoss=e.fractionalLoss,this.packetsExpected=e.packetsExpected,this.maximumTimesToWarn=e.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const e=this.pastSamplesToConsider,t=e*this.packetsExpected;let n=0;for(let i=0;i<e;i++)n+=this.currentData.packetsReceivedInLastMinute[i];return Math.min(Math.max(1-n/t,0),1)}health(){const e=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;if(e)return this.currentHealth;const t=this.calculateFractionalLoss()>=this.fractionalLoss;return t?0!==this.currentHealth&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}}t["default"]=r},996:function(e,t,n){"use strict";n(541),Object.defineProperty(t,"__esModule",{value:!0});const i=n(8692);class r{constructor(e,t,n,i,r){this.audioVideoController=e,this.realtimeController=t,this.connectionHealthData=n,this.pingPong=i,this.statsCollector=r,this.isActive=!1,this.hasSeenValidPacketMetricsBefore=!1,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange((e=>{this.isActive&&this.receiveSignalStrengthChange(e)}))}start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(e){0===e?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):e<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(e,t,n){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",t),this.statsCollector.logLatency("ping_pong_clock_skew",n),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(e){let t=0,n=0;const i=e.getObservableMetrics(),r=i.audioPacketsReceived,o=i.audioPacketsReceivedFractionLoss,s=i.audioSpeakerDelayMs;"number"!==typeof s||isNaN(s)||this.connectionHealthData.setAudioSpeakerDelayMs(s),"number"===typeof r&&"number"===typeof o&&(t=r,n=o,t<0||n<0||(this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,t),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,n),t>0?(this.hasSeenValidPacketMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidPacketMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(0===t||n>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),"number"===typeof i.audioPacketsSent&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateConnectionHealth()))}updateAudioPacketsSentInConnectionHealth(e){e>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}addToMinuteWindow(e,t){e.unshift(t),e.length>60&&e.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver((e=>{i.Maybe.of(e.connectionHealthDidChange).map((t=>t.bind(e)(this.connectionHealthData.clone())))}))}}t["default"]=r},5946:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["Modality"]="#content"}(n||(n={})),t["default"]=n},5865:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4380),o=n(359);class s{constructor(e){this.logger=e}get mediaStream(){return this._mediaStream}set mediaStream(e){this._mediaStream=e}acquireAudioInputStream(){return i(this,void 0,void 0,(function*(){return 0===this._mediaStream.getAudioTracks().length?(this.logger.info("No audio stream available. Synthesizing an audio stream."),o.default.synthesizeAudioDevice(0)):this._mediaStream}))}acquireVideoInputStream(){return i(this,void 0,void 0,(function*(){return this._mediaStream}))}acquireDisplayInputStream(e){return i(this,void 0,void 0,(function*(){return e&&e.video&&e.video.mandatory&&e.video.mandatory.chromeMediaSource&&e.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(e):navigator.mediaDevices.getDisplayMedia(e)}))}acquireScreenCaptureDisplayInputStream(e,t){return i(this,void 0,void 0,(function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(e,t))}))}screenCaptureDisplayMediaConstraints(e,t){return{audio:!(e||!(new r.default).getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!e&&{frameRate:{max:t||s.defaultFrameRate}}),e&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:t||s.defaultFrameRate}})}}toggleMediaStream(e){let t=!1;if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].enabled!==e&&(this.mediaStream.getTracks()[n].enabled=e,t=!0);return t}cleanup(){if(this.mediaStream)for(let e=0;e<this.mediaStream.getTracks().length;e++){const t=this.mediaStream.getTracks()[e];t.stop()}this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(e){}removeMediaStreamBrokerObserver(e){}}t["default"]=s,s.defaultFrameRate=15},4698:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1241),o=n(9674),s=n(7517),a=n(5971),c=n(8692),l=n(5710),d=n(5946);class u{constructor(e,t,n){this.mediaStreamBroker=e,this.contentAudioVideo=t,this.attendeeAudioVideo=n,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}static createContentShareMeetingSessionConfigure(e){const t=new r.default;return t.meetingId=e.meetingId,t.externalMeetingId=e.externalMeetingId,t.urls=e.urls,t.credentials=new o.default,t.credentials.attendeeId=e.credentials.attendeeId+d.default.Modality,t.credentials.externalUserId=e.credentials.externalUserId,t.credentials.joinToken=e.credentials.joinToken+d.default.Modality,t}setContentAudioProfile(e){this.contentAudioVideo.setAudioProfile(e)}enableSimulcastForContentShare(e,t){e?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new l.default(this.contentAudioVideo.logger,t)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}startContentShare(e){return i(this,void 0,void 0,(function*(){if(e){this.mediaStreamBroker.mediaStream=e;for(let e=0;e<this.mediaStreamBroker.mediaStream.getTracks().length;e++)this.mediaStreamBroker.mediaStream.getTracks()[e].addEventListener("ended",(()=>{this.stopContentShare()}));this.contentAudioVideo.start()}}))}startContentShareFromScreenCapture(e,t){return i(this,void 0,void 0,(function*(){const n=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(e,t);return yield this.startContentShare(n),n}))}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver((e=>{c.Maybe.of(e.contentShareDidPause).map((t=>t.call(e)))}))}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver((e=>{c.Maybe.of(e.contentShareDidUnpause).map((t=>t.call(e)))}))}setContentShareVideoCodecPreferences(e){this.contentAudioVideo.setVideoCodecSendPreferences(e)}destroy(){return i(this,void 0,void 0,(function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)}))}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(e){this.observerQueue.add(e)}removeContentShareObserver(e){this.observerQueue.delete(e)}forEachContentShareObserver(e){for(const t of this.observerQueue)a.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}audioVideoDidStart(){this.mediaStreamBroker.mediaStream.getVideoTracks().length>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(e){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver((e=>{c.Maybe.of(e.contentShareDidStop).map((t=>t.call(e)))}))}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence(((e,t,n,i)=>{const r=new s.default(e).hasModality(s.default.MODALITY_CONTENT),o=new s.default(e).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!r||!o||!t||this.contentShareTile)return;const a=this.mediaStreamBroker.mediaStream;if(null===a||void 0===a?void 0:a.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const e=a.getVideoTracks()[0];let t,n;if(e.getSettings){const i=e.getSettings();t=i.width,n=i.height}else{const i=e.getCapabilities();t=i.width,n=i.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,a,t,n,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver((e=>{c.Maybe.of(e.contentShareDidStart).map((t=>t.call(e)))}))}))}}t["default"]=u},788:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{static register(){"document"in n.g&&document.addEventListener&&i.shouldRegisterCSPMonitor&&(i.added||(document.addEventListener("securitypolicyviolation",i.listener),i.added=!0))}static unregister(){"document"in n.g&&document.removeEventListener&&(document.removeEventListener("securitypolicyviolation",i.listener),i.loggers=new Set,i.added=!1)}static disable(){i.shouldRegisterCSPMonitor=!1,i.unregister()}static addLogger(e){e&&i.loggers.add(e)}static removeLogger(e){e&&i.loggers.delete(e)}}t["default"]=i,i.loggers=new Set,i.shouldRegisterCSPMonitor=!0,i.added=!1,i.listener=e=>{const t=`Security Policy Violation\nBlocked URI: ${e.blockedURI}\nViolated Directive: ${e.violatedDirective}\nOriginal Policy: ${e.originalPolicy}\nDocument URI: ${e.documentURI}\nSource File: ${e.sourceFile}\nLine No.: ${e.lineNumber}\n`;for(const n of i.loggers)n.error(t);0===i.loggers.size&&console.error(t)}},2236:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n,i,r,o){this.timestampMs=e,this.topic=t,this.data=n,this.senderAttendeeId=i,this.senderExternalUserId=r,this.throttled=!!o}text(){return(new TextDecoder).decode(this.data)}json(){return JSON.parse((new TextDecoder).decode(this.data))}}t["default"]=n},1079:function(e,t){"use strict";function n(e){return e&&"destroy"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isDestroyable=void 0,t.isDestroyable=n},6580:function(e,t){"use strict";function n(e){return!!e&&"object"===typeof e&&"mute"in e&&"stop"in e&&"intrinsicDevice"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isAudioTransformDevice=void 0,t.isAudioTransformDevice=n},359:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4380),o=n(463),s=n(5971),a=n(6258),c=n(8692),l=n(6619),d=n(6580),u=n(7904),h=n(9360),p=n(5513),f=n(7982),m=n(7681),g=n(4734),v=n(8555),b=n(5122),S=n(176);class y{constructor(e,t,n=new r.default,i){this.logger=e,this.browserBehavior=n,this.eventController=i,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new a.default,this.videoInputTaskQueue=new a.default,this.muted=!1,this.mediaStreamMuteObserver=(e,t)=>{for(const n of this.deviceChangeObservers)s.default.nextTick((()=>{this.deviceChangeObservers.has(n)&&n.audioInputMuteStateChanged&&n.audioInputMuteStateChanged(e,t)}))},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:c=!1,useMediaConstraintsFallback:l=!0}=t||{};this.useWebAudio=c,this.useMediaConstraintsFallback=l,this.videoInputQualitySettings=new b.default(y.defaultVideoWidth,y.defaultVideoHeight,y.defaultVideoFrameRate);const d=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=d[0],this.videoInputQualitySettings.videoHeight=d[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=(new o.default).create();const e=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(e)}`)}catch(u){e.error(u.message)}}isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var e;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},null===(e=this.mediaDeviceWrapper)||void 0===e||e.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var e;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),null===(e=this.mediaDeviceWrapper)||void 0===e||e.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){if(this.deviceChangeObservers.size)return!0;const e=this.activeDevices["audio"]&&null!==this.activeDevices["audio"].constraints||this.activeDevices["video"]&&null!==this.activeDevices["video"].constraints||!!this.audioOutputDeviceId;return e}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return i(this,void 0,void 0,(function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()}))}listAudioInputDevices(e=!1){return i(this,void 0,void 0,(function*(){const t=yield this.listDevicesOfKind("audioinput",e);return this.trace("listAudioInputDevices",e,t),t}))}listVideoInputDevices(e=!1){return i(this,void 0,void 0,(function*(){const t=yield this.listDevicesOfKind("videoinput",e);return this.trace("listVideoInputDevices",e,t),t}))}listAudioOutputDevices(e=!1){return i(this,void 0,void 0,(function*(){const t=yield this.listDevicesOfKind("audiooutput",e);return this.trace("listAudioOutputDevices",e,t),t}))}pushAudioMeetingStateForPermissions(e){var t;null===(t=this.eventController)||void 0===t||t.publishEvent(void 0===e?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(e){var t;null===(t=this.eventController)||void 0===t||t.publishEvent(void 0===e?"videoInputUnselected":"videoInputSelected")}startAudioInput(e){return i(this,void 0,void 0,(function*(){return yield this.audioInputTaskQueue.add((()=>this.startAudioInputTask(e)))}))}startAudioInputTask(e){var t;return i(this,void 0,void 0,(function*(){if(void 0!==e)try{return d.isAudioTransformDevice(e)?(this.logger.info(`Choosing transform input device ${e}`),yield this.chooseAudioTransformInputDevice(e)):(this.logger.info(`Choosing intrinsic audio input device ${e}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",e)),this.trace("startAudioInputDevice",e,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices["audio"].stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield null===(t=this.transform)||void 0===t?void 0:t.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices["audio"].stream),this.activeDevices["audio"].stream)}catch(n){throw n}else this.logger.error("Audio input device cannot be undefined")}))}stopAudioInput(){return i(this,void 0,void 0,(function*(){return this.audioInputTaskQueue.add((()=>this.stopAudioInputTask()))}))}stopAudioInputTask(){return i(this,void 0,void 0,(function*(){try{if(this.useWebAudio)return void this.releaseAudioTransformStream();this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}}))}chooseAudioTransformInputDevice(e){var t;return i(this,void 0,void 0,(function*(){if((null===(t=this.transform)||void 0===t?void 0:t.device)===e)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const n=y.getAudioContext();if(n instanceof OfflineAudioContext);else switch(n.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield n.resume()}let i;try{i=yield e.createAudioNode(n)}catch(o){throw this.logger.error(`Unable to create transform device node: ${o}.`),o}const r=yield e.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",r),this.logger.debug(`Got inner stream: ${r}.`),this.setTransform(e,i)}))}chooseVideoTransformInputDevice(e){var t;return i(this,void 0,void 0,(function*(){if(e===this.chosenVideoTransformDevice)return void this.logger.info("Reselecting same VideoTransformDevice");const n=this.chosenVideoTransformDevice;n&&this.logger.info("Switched from previous VideoTransformDevice");const i=!!n,r=yield e.intrinsicDevice(),o=this.isMediaStreamReusableByDeviceId(null===(t=this.activeDevices["video"])||void 0===t?void 0:t.stream,r);if(!o)return this.logger.info("video transform device needs new intrinsic device"),i&&n.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=e,this.activeDevices["video"]=null,yield this.chooseInputIntrinsicDevice("video",r),this.logger.info("apply processors to transform"),void(yield this.chosenVideoTransformDevice.transformStream(this.activeDevices["video"].stream));this.chosenVideoTransformDevice=e,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield e.transformStream(this.activeDevices["video"].stream)}))}startVideoInput(e){return i(this,void 0,void 0,(function*(){return yield this.videoInputTaskQueue.add((()=>this.startVideoInputTask(e)))}))}startVideoInputTask(e){return i(this,void 0,void 0,(function*(){if(e)try{return S.isVideoTransformDevice(e)?(this.logger.info(`Choosing video transform device ${e}`),yield this.chooseVideoTransformInputDevice(e),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",e),this.trace("startVideoInputDevice",e),this.publishVideoInputDidChangeEvent(this.activeDevices["video"].stream),this.activeDevices["video"].stream)}catch(t){throw t}else this.logger.error("Invalid video input device")}))}stopVideoInput(){return i(this,void 0,void 0,(function*(){return this.videoInputTaskQueue.add((()=>this.stopVideoInputTask()))}))}stopVideoInputTask(){return i(this,void 0,void 0,(function*(){try{if(this.chosenVideoInputIsTransformDevice())return void this.releaseVideoTransformStream();this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}}))}chooseAudioOutput(e){return i(this,void 0,void 0,(function*(){this.audioOutputDeviceId=e,this.watchForDeviceChangesIfNecessary();const t=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(t),this.trace("chooseAudioOutput",e,null)}))}addDeviceChangeObserver(e){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(e),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(e){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(e),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var e,t;if(!this.activeDevices["audio"])return null;const n=null===(t=null===(e=this.transform)||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.end;if(n){const e=n.context.createAnalyser();return e.removeOriginalInputs=()=>{try{n.disconnect(e)}catch(t){}},n.connect(e),e}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices["audio"]?this.createAnalyserNodeForStream(this.activeDevices["audio"].stream):null}createAnalyserNodeForStream(e){const t=y.getAudioContext(),n=t.createAnalyser(),i=t.createMediaStreamSource(e);return i.connect(n),this.trace("createAnalyserNodeForAudioInput"),n.removeOriginalInputs=()=>{try{i.disconnect(n)}catch(e){}},n}startVideoPreviewForVideoInput(e){if(!this.activeDevices["video"])return this.logger.warn("cannot bind video preview since video input device has not been chosen"),void this.trace("startVideoPreviewForVideoInput",e.id);l.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices["video"].stream,e,!0),this.trace("startVideoPreviewForVideoInput",e.id)}stopVideoPreviewForVideoInput(e){l.default.disconnectVideoStreamFromVideoElement(e,!1),this.trace("stopVideoPreviewForVideoInput",e.id)}setDeviceLabelTrigger(e){if(this.deviceInfoCache)for(const t of this.deviceInfoCache)if(!t.label){this.deviceInfoCache=null;break}this.deviceLabelTrigger=e,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(e){let t=null;return this.useWebAudio?(t=y.getAudioContext().createMediaStreamSource(e),t.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",e.id),t}chooseVideoInputQuality(e,t,n){const i=this.browserBehavior.requiresResolutionAlignment(e,t);this.videoInputQualitySettings=new b.default(i[0],i[1],n)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return i(this,void 0,void 0,(function*(){if(this.activeDevices["audio"]||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio){const e=this.getMediaStreamDestinationNode();return e.stream}return this.activeDevices["audio"].stream}))}acquireVideoInputStream(){return i(this,void 0,void 0,(function*(){if(!this.activeDevices["video"])throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices["video"].stream}))}acquireDisplayInputStream(e){return i(this,void 0,void 0,(function*(){throw new Error("unsupported")}))}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(e){const t=this.activeDevices[e];if(!t)return;const n=t.endedCallback,i=t.trackMuteCallback,r=t.trackUnmuteCallback;for(const o of t.stream.getTracks())o.stop(),n&&o.removeEventListener("ended",n),i&&o.removeEventListener("mute",i),r&&o.removeEventListener("unmute",r),delete t.endedCallback,delete t.trackMuteCallback,delete t.trackUnmuteCallback,delete this.activeDevices[e]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(e){var t;let n=this.activeDevices["audio"];if(this.useWebAudio&&(n=this.getMediaStreamDestinationNode()),n){for(const t of n.stream.getTracks())t.enabled!==e&&(t.enabled=e);this.muted!==!e&&(this.muted=!e,null===(t=this.transform)||void 0===t||t.device.mute(this.muted))}}static getIntrinsicDeviceId(e){if(!e)return;if("string"===typeof e)return e;if(e.id)return e.id;const t=e,n=t.deviceId;if(!n)return;if("string"===typeof n||Array.isArray(n))return n;const i=n;return"string"===typeof i.exact||Array.isArray(i.exact)?i.exact:void 0}static createEmptyAudioDevice(){return y.synthesizeAudioDevice(0)}static synthesizeAudioDevice(e){const t=y.getAudioContext(),n=t.createMediaStreamDestination();if(e){const i=t.createGain();i.gain.value=.1,i.connect(n);const r=t.createOscillator();r.frequency.value=e,r.connect(i),r.start()}else{const e=t.createBufferSource();try{e.buffer=t.createBuffer(1,5*t.sampleRate,t.sampleRate)}catch(i){if(!i||"NotSupportedError"!==i.name)throw i;e.buffer=t.createBuffer(1,5*y.defaultSampleRate,y.defaultSampleRate)}e.buffer.getChannelData(0)[0]=3e-4,e.loop=!0,e.connect(n),e.start()}return n.stream}listDevicesOfKind(e,t){return i(this,void 0,void 0,(function*(){return!t&&null!==this.deviceInfoCache&&this.isWatchingForDeviceChanges()||(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(e)}))}updateDeviceInfoCacheFromBrowser(){var e,t;return i(this,void 0,void 0,(function*(){const n="undefined"===typeof MediaDeviceInfo;if(n)return void(this.deviceInfoCache=[]);let i=yield navigator.mediaDevices.enumerateDevices(),r=!0;for(const e of i)if(!e.label){r=!1;break}if(!r)try{this.logger.info("attempting to trigger media device labels since they are hidden");const e=yield this.deviceLabelTrigger();i=yield navigator.mediaDevices.enumerateDevices();for(const t of e.getTracks())t.stop()}catch(o){this.logger.info("unable to get media device labels"),null===(e=this.eventController)||void 0===e||e.publishEvent("audioInputFailed",{audioInputErrorMessage:this.getErrorMessage(o)}),null===(t=this.eventController)||void 0===t||t.publishEvent("videoInputFailed",{videoInputErrorMessage:this.getErrorMessage(o)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(i)}`),this.deviceInfoCache=i}))}listCachedDevicesOfKind(e){const t=[];if(this.deviceInfoCache)for(const n of this.deviceInfoCache)n.kind===e&&t.push(n);return t}handleDeviceChange(){return i(this,void 0,void 0,(function*(){if(null===this.deviceInfoCache)return;if(this.alreadyHandlingDeviceChange)return void s.default.nextTick((()=>{this.handleDeviceChange()}));this.alreadyHandlingDeviceChange=!0;const e=this.listCachedDevicesOfKind("audioinput"),t=this.listCachedDevicesOfKind("videoinput"),n=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const i=this.listCachedDevicesOfKind("audioinput"),r=this.listCachedDevicesOfKind("videoinput"),o=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver((s=>{this.areDeviceListsEqual(e,i)||c.Maybe.of(s.audioInputsChanged).map((e=>e.bind(s)(i))),this.areDeviceListsEqual(t,r)||c.Maybe.of(s.videoInputsChanged).map((e=>e.bind(s)(r))),this.areDeviceListsEqual(n,o)||c.Maybe.of(s.audioOutputsChanged).map((e=>e.bind(s)(o)))})),this.alreadyHandlingDeviceChange=!1}))}handleDeviceStreamEnded(e,t){return i(this,void 0,void 0,(function*(){try{"audio"===e?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch(n){this.logger.error("Failed to choose null device after stream ended.")}"audio"===e?this.forEachObserver((e=>{c.Maybe.of(e.audioInputStreamEnded).map((n=>n.bind(e)(t)))})):this.forEachObserver((e=>{c.Maybe.of(e.videoInputStreamEnded).map((n=>n.bind(e)(t)))}))}))}forEachObserver(e){for(const t of this.deviceChangeObservers)s.default.nextTick((()=>{this.deviceChangeObservers.has(t)&&e(t)}))}forEachMediaStreamBrokerObserver(e){for(const t of this.mediaStreamBrokerObservers)e(t)}areDeviceListsEqual(e,t){return JSON.stringify(e.map((e=>JSON.stringify(e))).sort())===JSON.stringify(t.map((e=>JSON.stringify(e))).sort())}intrinsicDeviceAsMediaStream(e){return e&&e.id?e:null}hasSameMediaStreamId(e,t,n){var i,r,o,s;let a;return"audio"===e?(a=null===n||void 0===n?void 0:n.audio.streamId,!!a&&a===(null===(r=null===(i=t.constraints)||void 0===i?void 0:i.audio)||void 0===r?void 0:r.streamId)):(a=null===n||void 0===n?void 0:n.video.streamId,!!a&&a===(null===(s=null===(o=null===t||void 0===t?void 0:t.constraints)||void 0===o?void 0:o.video)||void 0===s?void 0:s.streamId))}hasSameGroupId(e,t,n){if(""===e)return!0;const i=y.getIntrinsicDeviceId(n);return this.logger.debug(`Checking deviceIds ${i} of type ${typeof i} with groupId ${e}`),"string"===typeof i&&e===this.getGroupIdFromDeviceId(t,i)}getGroupIdFromDeviceId(e,t){if(null!==this.deviceInfoCache){const n=this.listCachedDevicesOfKind(`${e}input`).find((e=>e.deviceId===t));if(n&&n.groupId)return this.logger.debug(`GroupId of deviceId ${t} found in cache is ${n.groupId}`),n.groupId}return this.logger.debug(`GroupId of deviceId ${t} found in cache is empty`),""}handleGetUserMediaError(e,t){if(!e)throw new h.default(e);switch(e.name){case"NotReadableError":case"TrackStartError":throw new f.default(e);case"NotFoundError":case"DevicesNotFoundError":throw new p.default(e);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw t&&t<y.permissionDeniedOriginDetectionThresholdMs?new g.default(e,"Permission denied by browser"):new g.default(e,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new m.default(e);case"TypeError":throw new v.default(e);case"AbortError":default:throw new h.default(e)}}matchesDeviceSelection(e,t,n,i){return!!(n&&n.stream.active&&(this.hasSameMediaStreamId(e,n,i)||null!==n.groupId&&this.hasSameGroupId(n.groupId,e,t)))&&(this.logger.debug(`Compare current device constraint ${JSON.stringify(n.constraints)} to proposed constraints ${JSON.stringify(i)}`),n.matchesConstraints(i))}chooseInputIntrinsicDevice(e,t){var n,r;return i(this,void 0,void 0,(function*(){const i=this.getMediaStreamConstraints(e,t);if(this.matchesDeviceSelection(e,t,this.activeDevices[e],i))return void this.logger.info(`reusing existing ${e} input device`);this.activeDevices[e]&&this.activeDevices[e].stream&&this.stopTracksAndRemoveCallbacks(e);const o=Date.now(),s=new u.default;try{this.logger.info(`requesting new ${e} device with constraint ${JSON.stringify(i)}`);const n=this.intrinsicDeviceAsMediaStream(t);"audio"===e&&null===t?(s.stream=y.createEmptyAudioDevice(),s.constraints=null):n?(this.logger.info(`using media stream ${n.id} for ${e} device`),s.stream=n,s.constraints=i):(s.stream=yield navigator.mediaDevices.getUserMedia(i),s.constraints=i),yield this.handleNewInputDevice(e,s)}catch(a){const l=this.getErrorMessage(a);"audio"===e?null===(n=this.eventController)||void 0===n||n.publishEvent("audioInputFailed",{audioInputErrorMessage:l}):null===(r=this.eventController)||void 0===r||r.publishEvent("videoInputFailed",{videoInputErrorMessage:l}),this.logger.error(`failed to get ${e} device for constraints ${JSON.stringify(i)}: ${l}`);let d=!0;if(a&&"constraint"in a&&(this.logger.error(`Over-constrained by constraint: ${a.constraint}`),this.useMediaConstraintsFallback)){const n=this.getMediaStreamConstraints(e,t,!0),r=JSON.stringify(n);if(r!==JSON.stringify(i)){this.logger.info(`retry requesting new ${e} device with minimal constraint ${r}`);try{s.stream=yield navigator.mediaDevices.getUserMedia(n),s.constraints=n,yield this.handleNewInputDevice(e,s),d=!1}catch(c){this.logger.error(`failed to get ${e} device for constraints ${r}: ${this.getErrorMessage(c)}`)}}}if(d){if("audio"===e){this.logger.info(`choosing null ${e} device instead`);try{s.stream=y.createEmptyAudioDevice(),s.constraints=null,yield this.handleNewInputDevice(e,s)}catch(a){this.logger.error(`failed to choose null ${e} device. ${a.name}: ${a.message}`)}}this.handleGetUserMediaError(a,Date.now()-o)}}finally{this.watchForDeviceChangesIfNecessary()}}))}getErrorMessage(e){return e?e.name&&e.message?`${e.name}: ${e.message}`:e.name?e.name:e.message?e.message:"UnknownError":"UnknownError"}handleNewInputDevice(e,t){var n;return i(this,void 0,void 0,(function*(){this.logger.info(`got ${e} device for constraints ${JSON.stringify(t.constraints)}`);const i=null===(n=this.getMediaTrackSettings(t.stream))||void 0===n?void 0:n.deviceId;t.groupId=i?this.getGroupIdFromDeviceId(e,i):"",this.activeDevices[e]=t,this.logger.debug(`Set activeDevice to ${JSON.stringify(t)}`),this.watchForDeviceChangesIfNecessary();const r=t.stream.getTracks()[0];if(r&&(t.endedCallback=()=>{this.activeDevices[e]&&this.activeDevices[e].stream===t.stream&&(this.handleDeviceStreamEnded(e,i),delete t.endedCallback)},r.addEventListener("ended",t.endedCallback,{once:!0})),"audio"===e){const e=t.stream.getAudioTracks()[0];if(e){const n=e.getSettings().deviceId||t.stream;t.trackMuteCallback=()=>{this.mediaStreamMuteObserver(n,!0)},t.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(n,!1)},e.addEventListener("mute",t.trackMuteCallback,{once:!1}),e.addEventListener("unmute",t.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),e.muted?t.trackMuteCallback():t.trackUnmuteCallback()}}}))}calculateMediaStreamConstraints(e,t,n,i){if(i&&1===this.listCachedDevicesOfKind(`${e}input`).length)return!0;const r={};if(this.browserBehavior.requiresNoExactMediaStreamConstraints()?r.deviceId=t:r.deviceId={exact:t},n&&(r.groupId=n),i)return r;if("video"===e)return r.width={ideal:this.videoInputQualitySettings.videoWidth},r.height={ideal:this.videoInputQualitySettings.videoHeight},r.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},r;this.supportSampleRateConstraint()&&(r.sampleRate={ideal:y.defaultSampleRate}),this.supportSampleSizeConstraint()&&(r.sampleSize={ideal:y.defaultSampleSize}),this.supportChannelCountConstraint()&&(r.channelCount={ideal:y.defaultChannelCount});const o=Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},r);return o}getMediaStreamConstraintsFromTrackConstraints(e,t){return"audio"===e?{audio:t}:{video:t}}getMediaStreamConstraints(e,t,n=!1){let i={};if(!t)return null;const r=this.intrinsicDeviceAsMediaStream(t);if(r)return i.streamId=r.id,this.getMediaStreamConstraintsFromTrackConstraints(e,i);if("string"===typeof t){let r="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(null!==this.deviceInfoCache?r=this.getGroupIdFromDeviceId(e,t):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),i=this.calculateMediaStreamConstraints(e,t,r,n),this.getMediaStreamConstraintsFromTrackConstraints(e,i)}return w(t)?(i=this.calculateMediaStreamConstraints(e,t.deviceId,t.groupId,n),this.getMediaStreamConstraintsFromTrackConstraints(e,i)):(i=t,this.getMediaStreamConstraintsFromTrackConstraints(e,i))}deviceInfoFromDeviceId(e,t){if(null===this.deviceInfoCache)return null;for(const n of this.deviceInfoCache)if(n.kind===e&&n.deviceId===t)return n;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(e,t){if(!e||!e.active||!t)return!1;if(t.id)return e.id===t.id;const n=this.getMediaTrackSettings(e);if(!n.deviceId)return!1;const i=y.getIntrinsicDeviceId(t);return"string"===typeof i&&n.deviceId===i}getMediaTrackSettings(e){var t;return null===(t=e.getTracks()[0])||void 0===t?void 0:t.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const e=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(e)}setTransform(e,t){var n,i;null===(i=null===(n=this.transform)||void 0===n?void 0:n.nodes)||void 0===i||i.end.disconnect(),this.transform={nodes:t,device:e};const r=null===t||void 0===t?void 0:t.end,o=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${r} to destination ${o}.`),null===r||void 0===r||r.connect(o),this.reconnectAudioInputs()}removeTransform(){var e;const t=this.transform;if(t)return null===(e=this.transform.nodes)||void 0===e||e.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),t}attachAudioInputStreamToAudioContext(e){var t;null===(t=this.audioInputSourceNode)||void 0===t||t.disconnect(),this.audioInputSourceNode=y.getAudioContext().createMediaStreamSource(e);const n=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(n)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=y.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var e,t;return(null===(t=null===(e=this.transform)||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(e){y.defaultLatencyHint=e}static getAudioContext(){if(!y.audioContext){const e={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(e.sampleRate=y.defaultSampleRate);const t=new r.default;t.requiresPlaybackLatencyHintForAudioContext()&&(e.latencyHint="playback"),y.defaultLatencyHint&&(e.latencyHint=y.defaultLatencyHint),y.audioContext=new(window.AudioContext||window.webkitAudioContext)(e)}return y.audioContext}static closeAudioContext(){if(y.audioContext)try{y.audioContext.close()}catch(e){}y.audioContext=null}addMediaStreamBrokerObserver(e){this.mediaStreamBrokerObservers.add(e)}removeMediaStreamBrokerObserver(e){this.mediaStreamBrokerObservers.delete(e)}publishVideoInputDidChangeEvent(e){this.forEachMediaStreamBrokerObserver((t=>{t.videoInputDidChange&&t.videoInputDidChange(e)})),this.pushVideoMeetingStateForPermissions(e)}publishAudioInputDidChangeEvent(e){this.forEachMediaStreamBrokerObserver((t=>{t.audioInputDidChange&&t.audioInputDidChange(e)})),this.pushAudioMeetingStateForPermissions(e)}publishAudioOutputDidChangeEvent(e){this.forEachMediaStreamBrokerObserver((t=>{t.audioOutputDidChange&&t.audioOutputDidChange(e)}))}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(e,t,n){let i=`API/DefaultDeviceController/${e}`;"undefined"!==typeof t&&(i+=` ${JSON.stringify(t)}`),"undefined"!==typeof n&&(i+=` -> ${JSON.stringify(n)}`),this.logger.info(i)}}function w(e){return"object"===typeof e&&"deviceId"in e&&"groupId"in e&&"kind"in e&&"label"in e}t["default"]=y,y.permissionDeniedOriginDetectionThresholdMs=500,y.defaultVideoWidth=960,y.defaultVideoHeight=540,y.defaultVideoFrameRate=15,y.defaultSampleRate=48e3,y.defaultSampleSize=16,y.defaultChannelCount=1,y.audioContext=null},7904:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.groupId=""}matchesConstraints(e){return JSON.stringify(this.constraints)===JSON.stringify(e)}}t["default"]=n},9360:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t){super(t||"Error fetching device."),this.cause=e,this.name="GetUserMediaError"}}t["default"]=n},4896:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NoOpDeviceControllerWithEventController=void 0;const r=n(5836);class o extends r.default{constructor(e){super(),this.destroyed=!1}destroy(){return i(this,void 0,void 0,(function*(){this.destroyed=!0}))}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,n){}getVideoInputQualitySettings(){return null}}t["default"]=o;class s extends o{constructor(e){super(),this.eventController=e}}t.NoOpDeviceControllerWithEventController=s},5513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9360);class r extends i.default{constructor(e){super(e),this.name="NotFoundError"}}t["default"]=r},7982:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9360);class r extends i.default{constructor(e){super(e),this.name="NotReadableError"}}t["default"]=r},7681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9360);class r extends i.default{constructor(e,t){super(e),this.constraint=t,this.name="OverconstrainedError"}}t["default"]=r},4734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9360);class r extends i.default{constructor(e,t){super(e,t),this.name="PermissionDeniedError"}}t["default"]=r},5502:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.inner=e}mute(e){return n(this,void 0,void 0,(function*(){}))}stop(){var e;return n(this,void 0,void 0,(function*(){null===(e=this.node)||void 0===e||e.disconnect()}))}intrinsicDevice(){return n(this,void 0,void 0,(function*(){return this.inner}))}createAudioNode(e){var t;return n(this,void 0,void 0,(function*(){return null===(t=this.node)||void 0===t||t.disconnect(),this.node=yield this.createSingleAudioNode(e),{start:this.node,end:this.node}}))}}t["default"]=i},8555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9360);class r extends i.default{constructor(e){super(e),this.name="TypeError"}}t["default"]=r},5122:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n){this.videoWidth=e,this.videoHeight=t,this.videoFrameRate=n}}t["default"]=n},176:function(e,t){"use strict";function n(e){return!!e&&"object"===typeof e&&"transformStream"in e&&"stop"in e&&"intrinsicDevice"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoTransformDevice=void 0,t.isVideoTransformDevice=n},9257:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){if(this.devicePixelRatioSource=e,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach((e=>{e.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}))},"undefined"===typeof window)return;const n=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);"function"===typeof n.addEventListener?(n.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=n):"function"===typeof n.addListener?(n.addListener(this.mediaQueryListener),this.mediaQueryList=n):t.warn("ignoring DefaultDevicePixelRatioMonitor")}destroy(){return n(this,void 0,void 0,(function*(){this.mediaQueryList&&("function"===typeof this.mediaQueryList.addEventListener?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()}))}registerObserver(e){this.observerQueue.add(e),e.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(e){this.observerQueue.delete(e)}}t["default"]=i},6054:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{devicePixelRatio(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio:1}}t["default"]=n},2659:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5605),s=n(8389),a=n(6370),c=n(6843);class l{constructor(e,t,n,o,s){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=e=>{const t={type:e.type,v:e.v,payloads:[...e.payloads]};return t},this.sendEvents=()=>i(this,void 0,void 0,(function*(){if(this.lock)return;const e=this.getItems(this.flushSize);if(0===e.length)return;this.lock=!0;const t=this.makeRequestBody(e);let n=!1;const i=Date.now();"firefox"===this.metadata.browserName.toLowerCase()&&this.cancellableEvents.set(i,e);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${t}`);const e=yield this.send(t);if(this.cancellableEvents.delete(i),e.ok)try{const n=yield e.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${t} message: ${JSON.stringify(n)}`)}catch(r){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${r} for events ${t}`)}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${t} with response status ${e.status}`),n=!0}catch(o){n=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${t} to the ingestion endpoint ${o}`)}finally{this.lock=!1}n&&(this.cancellableEvents.delete(i),this.failedIngestionEvents.push(...e))}));const c=new a.default(s).getParserResult(),{browserMajorVersion:l}=c,d=r(c,["browserMajorVersion"]),u=t.toJSON(),{type:h,v:p}=u,f=r(u,["type","v"]);this.authenticationToken=t.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},d),f),Object.keys(this.metadata).forEach((e=>this.attributesToFilter.push(e))),this.type=h,this.v=p,this.ingestionURL=n,this.logger=s,this.importantEvents=new Set(o);const{maxBufferCapacityKb:m,totalBufferItems:g,flushSize:v,flushIntervalMs:b,retryCountLimit:S}=e;this.maxBufferCapacityBytes=1024*m,this.totalBufferItems=g,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/g),this.flushIntervalMs=b,this.flushSize=v,this.retryCountLimit=S,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=e=>this.beaconEventHandler(e),this.addEventListeners()}addEventListeners(){this.beaconEventListener&&"window"in n.g&&window.addEventListener&&"document"in n.g&&document.addEventListener&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(e){("visibilitychange"===e.type&&"hidden"===document.visibilityState||"pagehide"===e.type)&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){this.beaconEventListener&&"window"in n.g&&window.removeEventListener&&"document"in n.g&&document.removeEventListener&&(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var e;this.removeEventListeners(),this.addEventListeners(),null===(e=this.intervalScheduler)||void 0===e||e.stop(),this.intervalScheduler=new s.default(this.flushIntervalMs),this.intervalScheduler.start((()=>this.sendEvents()))}stop(){var e;null===(e=this.intervalScheduler)||void 0===e||e.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(e){return i(this,void 0,void 0,(function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(e)}`);const{name:t,ts:n,attributes:i}=e,r=i&&this.filterAttributes(i,this.attributesToFilter),o=Object.assign({name:t,ts:n},r);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(o)}`);const s=this.getSize(o);if(s>l.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${s} bytes. Item cannot exceed max item size allowed of ${l.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(t))return this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(o)}`),void this.sendEventImmediately({name:t,ts:n,attributes:r});if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(o),this.ingestionEventSize+=s,this.bufferItemThresholdReached(s)){const e=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(e),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}}))}filterAttributes(e,t){const n=new Set(t),i=Object.keys(e).filter((e=>n.has(e)));return i.forEach((t=>delete e[t])),e}initializeAndGetCurrentIngestionEvent(){const e={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(e),e}bufferItemThresholdReached(e){return e+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===l.MAX_PAYLOAD_ITEMS}getSize(e){let t=0;if("object"===typeof e)for(const[n,i]of Object.entries(e))t+=this.getPrimitiveSize(n),t+=this.getSize(i);else t+=this.getPrimitiveSize(e);return t}getPrimitiveSize(e){let t=0;return"string"===typeof e?t+=2*e.length:"number"===typeof e&&(t+=8),t}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return 0===this.buffer.length||0===this.bufferSize}getItems(e,t=0){if(this.isEmpty())return[];e=Math.min(this.buffer.length,e+1);const n=this.buffer.splice(t,e);return n}makeBeaconRequestBody(e){const t={metadata:this.metadata,events:e,authorization:this.authenticationToken};return JSON.stringify(t)}makeRequestBody(e){const t={metadata:this.metadata,events:e};return JSON.stringify(t)}sendEventImmediately(e){return i(this,void 0,void 0,(function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(e)}`);const{name:t,ts:n,attributes:i}=e,r={type:this.type,v:this.v,payloads:[Object.assign({name:t,ts:n},i)]};let o=!1,s=null;const a=this.makeRequestBody([r]);try{if(s=yield this.send(a),s.ok){try{const e=yield s.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${a}, message: ${JSON.stringify(e)}`)}catch(c){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${c} for event ${a}`)}return}this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${a} with response status ${s.status}`),o=!0}catch(l){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${a} to the ingestion endpoint ${l}.`),o=!0;try{if("firefox"===this.metadata.browserName.toLowerCase()){const e=this.makeBeaconRequestBody([r]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${e}`),o=!navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,e)}}catch(l){this.logger.warn(`Event Reporting - Error sending beacon for an important event ${a}`),o=!0}}o&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${a}`),this.failedIngestionEvents.push(r))}))}send(e){return i(this,void 0,void 0,(function*(){const t=new o.default(l.RETRY_FIXED_BACKOFF_WAIT_MS,l.RETRY_SHORT_BACKOFF_MS,l.RETRY_LONG_BACKOFF_MS);try{let n=0;while(n<this.retryCountLimit){const i=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:e});if(i.ok||!l.SENDING_FAILURE_CODES.has(i.status))return i;if(this.logger.warn(`Will retry sending failure for ${e} due to status code ${i.status}.`),n++,n<this.retryCountLimit){const e=t.nextBackoffAmountMs();yield c.wait(e)}}if(n===this.retryCountLimit)throw new Error(`Retry count limit reached for ${e}`)}catch(n){throw n}}))}sendBeacon(){return i(this,void 0,void 0,(function*(){const e=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(e)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const t=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);e.push(t),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(t)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const t=this.failedIngestionEvents.map((e=>this.deepCopyCurrentIngestionEvent(e)));e.push(...t),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(t)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach((t=>{e.push(...t),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(t)}`)})),this.cancellableEvents.clear()),0===e.length)return;const t=this.makeBeaconRequestBody(e);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${t}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,t)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${t}`)}catch(n){this.logger.warn(`Event Reporting - Sending beacon data ${t} failed with error ${n}`)}}))}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return i(this,void 0,void 0,(function*(){this.stop(),this.reset()}))}}t["default"]=l,l.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),l.RETRY_FIXED_BACKOFF_WAIT_MS=0,l.RETRY_SHORT_BACKOFF_MS=1e3,l.RETRY_LONG_BACKOFF_MS=15e3,l.MAX_PAYLOAD_ITEMS=2,l.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},8267:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e=5e3,t=2,n=64,i=100,r=15){this.flushIntervalMs=e,this.flushSize=t,this.maxBufferCapacityKb=n,this.totalBufferItems=i,this.retryCountLimit=r}}t["default"]=n},9446:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2827),o=n(1079),s=n(2631),a=n(7966),c=n(7479),l=n(5971),d=n(4207),u=n(7914);class h{constructor(e,t,n){var i,o,s,a,c,l,d;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=t,this.configuration=e,this.setupEventReporter(e,t,n);try{this.parserResult=navigator&&navigator.userAgent?new r.UAParser(navigator.userAgent).getResult():null}catch(u){this.logger.error(u.message)}this.browserMajorVersion=(null===(s=null===(o=null===(i=this.parserResult)||void 0===i?void 0:i.browser)||void 0===o?void 0:o.version)||void 0===s?void 0:s.split(".")[0])||h.UNAVAILABLE,this.browserName=(null===(a=this.parserResult)||void 0===a?void 0:a.browser.name)||h.UNAVAILABLE,this.browserVersion=(null===(c=this.parserResult)||void 0===c?void 0:c.browser.version)||h.UNAVAILABLE,this.deviceName=[(null===(l=this.parserResult)||void 0===l?void 0:l.device.vendor)||"",(null===(d=this.parserResult)||void 0===d?void 0:d.device.model)||""].join(" ").trim()||h.UNAVAILABLE}addObserver(e){this.observerSet.add(e)}removeObserver(e){this.observerSet.delete(e)}forEachObserver(e){for(const t of this.observerSet)l.default.nextTick((()=>{this.observerSet.has(t)&&e(t)}))}publishEvent(e,t){return i(this,void 0,void 0,(function*(){const n=Date.now();this.meetingHistoryStates.push({name:e,timestampMs:n});const i=Object.freeze(Object.assign(this.getAttributes(n),t));this.forEachObserver((t=>{t.eventDidReceive(e,i)})),this.reportEvent(e,n,t)}))}reportEvent(e,t,n){var r;return i(this,void 0,void 0,(function*(){let i;try{n&&(i=u.default(n)),yield null===(r=this.eventReporter)||void 0===r?void 0:r.reportEvent(t,e,i)}catch(o){this.logger.error(`Error reporting event ${o}`)}}))}setupEventReporter(e,t,n){if(n)this._eventReporter=n;else if(e.urls){const n=e.urls.eventIngestionURL;if(n){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:i,credentials:{attendeeId:r,joinToken:o}}=e,l=new c.default(i,r,o),d=new s.default(l,n);this._eventReporter=new a.default(d,t)}}}getAttributes(e){var t,n;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:"string"===typeof this.configuration.externalMeetingId?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:(null===(t=this.parserResult)||void 0===t?void 0:t.os.name)||h.UNAVAILABLE,osVersion:(null===(n=this.parserResult)||void 0===n?void 0:n.os.version)||h.UNAVAILABLE,sdkVersion:d.default.sdkVersion,sdkName:d.default.sdkName,timestampMs:e}}get eventReporter(){return this._eventReporter}destroy(){return i(this,void 0,void 0,(function*(){o.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0}))}}t["default"]=h,h.UNAVAILABLE="Unavailable"},7914:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e=>{const t={};for(const[n,i]of Object.entries(e))if(null!==i&&void 0!==i&&""!==i){if("number"!==typeof i&&"string"!==typeof i)throw new TypeError("Unhandled type received while flattening attributes.");t[n]=i}return t};t["default"]=n},2631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8267);class r{constructor(e,t,n=new i.default){this.eventsClientConfiguration=e,this.ingestionURL=t,this.eventBufferConfiguration=n}}t["default"]=r},7966:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1079),o=n(2659);class s{constructor(e,t){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded"],this.destroyed=!1;const{eventsClientConfiguration:n,ingestionURL:i,eventBufferConfiguration:r}=e,{eventsToIgnore:s}=n;this.eventBuffer=new o.default(r,n,i,this.importantEvents,t),this.logger=t,this.eventsToIgnore=s,this.start()}start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(e){this.logger.error(`Event Reporting - Error starting the event buffer ${e}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(e){this.logger.error(`Event Reporting - Error stopping the event buffer ${e}`)}}reportEvent(e,t,n){return i(this,void 0,void 0,(function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${e}, ${t}, ${JSON.stringify(n)}`),this.eventsToIgnore.includes(t))this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${t} event will be ignored as it is in events to ignore`);else try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:e,name:t,attributes:n})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}}))}destroy(){return i(this,void 0,void 0,(function*(){this.destroyed=!0,this.stop(),r.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0}))}}t["default"]=s},2862:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){}reportEvent(e,t,n){}start(){}stop(){}}t["default"]=n},7479:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n,i=[]){this.type="Meet",this.v=1,this.meetingId=e,this.attendeeId=t,this.eventsToIgnore=i,this.authenticationToken=n}getAuthenticationToken(){return this.authenticationToken}toJSON(){const e={};return e.type=this.type,e.v=this.v,e.meetingId=this.meetingId,e.attendeeId=this.attendeeId,e}}t["default"]=n},3958:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEventController=t.DefaultDevicePixelRatioMonitor=t.DefaultDeviceController=t.DefaultContentShareController=t.DefaultBrowserBehavior=t.DefaultAudioVideoFacade=t.DefaultAudioVideoController=t.DefaultAudioMixController=t.DefaultActiveSpeakerPolicy=t.DefaultActiveSpeakerDetector=t.DataMessage=t.CreateSDPTask=t.CreatePeerConnectionTask=t.ContentShareMediaStreamBroker=t.ContentShareConstants=t.ConsoleLogger=t.ConnectionHealthPolicyConfiguration=t.ConnectionHealthData=t.ClientVideoStreamReceivingReport=t.ClientMetricReportMediaType=t.ClientMetricReportDirection=t.ClientMetricReport=t.CleanStoppedSessionTask=t.CleanRestartedSessionTask=t.CheckVideoInputFeedback=t.CheckVideoConnectivityFeedback=t.CheckNetworkUDPConnectivityFeedback=t.CheckNetworkTCPConnectivityFeedback=t.CheckContentShareConnectivityFeedback=t.CheckCameraResolutionFeedback=t.CheckAudioOutputFeedback=t.CheckAudioInputFeedback=t.CheckAudioConnectivityFeedback=t.CanvasVideoFrameBuffer=t.CSPMonitor=t.BitrateParameters=t.BaseTask=t.BaseConnectionHealthPolicy=t.BackgroundReplacementVideoFrameProcessor=t.BackgroundFilterVideoFrameProcessor=t.BackgroundBlurVideoFrameProcessor=t.BackgroundBlurStrength=t.AudioVideoControllerState=t.AudioProfile=t.AudioLogEvent=t.Attendee=t.AttachMediaInputTask=t.AsyncScheduler=t.ApplicationMetadata=t.AllHighestVideoBandwidthPolicy=void 0,t.MeetingSessionCredentials=t.MeetingSessionConfiguration=t.MeetingReadinessCheckerConfiguration=t.MeetingEventsClientConfiguration=t.MediaDeviceProxyHandler=t.Maybe=t.LogLevel=t.Log=t.ListenForVolumeIndicatorsTask=t.LeaveAndReceiveLeaveAckTask=t.JoinAndReceiveIndexTask=t.IntervalScheduler=t.InMemoryJSONEventBuffer=t.GlobalMetricReport=t.GetUserMediaError=t.FullJitterLimitedBackoff=t.FullJitterBackoffFactory=t.FullJitterBackoff=t.FinishGatheringICECandidatesTask=t.EventIngestionConfiguration=t.EventBufferConfiguration=t.DeviceSelection=t.DevicePixelRatioWindowSource=t.DefaultWebSocketAdapter=t.DefaultVolumeIndicatorAdapter=t.DefaultVideoTransformDevice=t.DefaultVideoTileFactory=t.DefaultVideoTileController=t.DefaultVideoTile=t.DefaultVideoStreamIndex=t.DefaultVideoStreamIdSet=t.DefaultVideoFrameProcessorPipeline=t.DefaultVideoCaptureAndEncodeParameter=t.DefaultUserAgentParser=t.DefaultTranscriptionController=t.DefaultTransceiverController=t.DefaultSimulcastUplinkPolicyForContentShare=t.DefaultSimulcastUplinkPolicy=t.DefaultSignalingClient=t.DefaultSigV4=t.DefaultSessionStateController=t.DefaultReconnectController=t.DefaultRealtimeController=t.DefaultPingPong=t.DefaultModality=t.DefaultMessagingSession=t.DefaultMeetingSession=t.DefaultMeetingReadinessChecker=t.DefaultMeetingEventReporter=t.DefaultMediaDeviceFactory=void 0,t.SDPMediaSection=t.SDPCandidateType=t.SDP=t.RunnableTask=t.ReconnectionHealthPolicy=t.ReceiveVideoStreamIndexTask=t.ReceiveVideoInputTask=t.ReceiveTURNCredentialsTask=t.ReceiveAudioInputTask=t.RealtimeVolumeIndicator=t.RealtimeState=t.RealtimeAttendeePositionInFrame=t.PromoteToPrimaryMeetingTask=t.PromiseQueue=t.PrefetchSortBy=t.PrefetchOn=t.PermissionDeniedError=t.ParallelGroupTask=t.POSTLogger=t.OverconstrainedError=t.OpenSignalingConnectionTask=t.OnceTask=t.NotReadableError=t.NotFoundError=t.None=t.NoVideoUplinkBandwidthPolicy=t.NoVideoDownlinkBandwidthPolicy=t.NoOpVideoFrameProcessor=t.NoOpVideoElementFactory=t.NoOpTask=t.NoOpMediaStreamBroker=t.NoOpLogger=t.NoOpEventReporter=t.NoOpDeviceController=t.NoOpDebugLogger=t.NoOpAudioVideoController=t.NScaleVideoUplinkBandwidthPolicy=t.MutableVideoPreferences=t.MultiLogger=t.MonitorTask=t.ModelSpecBuilder=t.MessagingSessionConfiguration=t.Message=t.MeetingSessionVideoAvailability=t.MeetingSessionURLs=t.MeetingSessionTURNCredentials=t.MeetingSessionStatusCode=t.MeetingSessionStatus=t.MeetingSessionLifecycleEventCondition=t.MeetingSessionLifecycleEvent=void 0,t.VideoQualitySettings=t.VideoPriorityBasedPolicyConfig=t.VideoPriorityBasedPolicy=t.VideoPreferences=t.VideoPreference=t.VideoOnlyTransceiverController=t.VideoLogEvent=t.VideoCodecCapability=t.VideoAdaptiveProbePolicy=t.Versioning=t.UnusableAudioWarningConnectionHealthPolicy=t.TypeError=t.TranscriptionStatusType=t.TranscriptionStatus=t.TranscriptResult=t.TranscriptLanguageWithScore=t.TranscriptItemType=t.TranscriptItem=t.TranscriptEntity=t.TranscriptAlternative=t.Transcript=t.TimeoutTask=t.TimeoutScheduler=t.TaskStatus=t.TargetDisplaySize=t.SubscribeAndReceiveSubscribeAckTask=t.StreamMetricReport=t.Some=t.SingleNodeAudioTransformDevice=t.SimulcastVideoStreamIndex=t.SimulcastTransceiverController=t.SimulcastLayers=t.SimulcastContentShareTransceiverController=t.SignalingClientVideoSubscriptionConfiguration=t.SignalingClientSubscribe=t.SignalingClientJoin=t.SignalingClientEventType=t.SignalingClientEvent=t.SignalingClientConnectionRequest=t.SignalingAndMetricsConnectionMonitor=t.SetRemoteDescriptionTask=t.SetLocalDescriptionTask=t.SessionStateControllerTransitionResult=t.SessionStateControllerState=t.SessionStateControllerDeferPriority=t.SessionStateControllerAction=t.ServerSideNetworkAdaption=t.SerialGroupTask=t.SendingAudioFailureConnectionHealthPolicy=t.SendAndReceiveDataMessagesTask=void 0,t.isVideoTransformDevice=t.isDestroyable=t.isAudioTransformDevice=t.ZLIBTextCompressor=t.WebSocketReadyState=t.WaitForAttendeePresenceTask=t.VoiceFocusTransformDevice=t.VoiceFocusDeviceTransformer=t.VideoTileState=t.VideoStreamDescription=t.VideoSource=void 0;const i=n(3670);t.AllHighestVideoBandwidthPolicy=i.default;const r=n(8738);t.ApplicationMetadata=r.default;const o=n(5971);t.AsyncScheduler=o.default;const s=n(7829);t.AttachMediaInputTask=s.default;const a=n(7730);t.Attendee=a.default;const c=n(2861);t.AudioLogEvent=c.default;const l=n(9842);t.AudioProfile=l.default;const d=n(7383);t.AudioVideoControllerState=d.default;const u=n(6656);t.BackgroundBlurStrength=u.default;const h=n(5420);t.BackgroundBlurVideoFrameProcessor=h.default;const p=n(9667);t.BackgroundFilterVideoFrameProcessor=p.default;const f=n(2691);t.BackgroundReplacementVideoFrameProcessor=f.default;const m=n(983);t.BaseConnectionHealthPolicy=m.default;const g=n(5375);t.BaseTask=g.default;const v=n(4849);t.BitrateParameters=v.default;const b=n(788);t.CSPMonitor=b.default;const S=n(7797);t.CanvasVideoFrameBuffer=S.default;const y=n(535);t.CheckAudioConnectivityFeedback=y.default;const w=n(4211);t.CheckAudioInputFeedback=w.default;const C=n(1470);t.CheckAudioOutputFeedback=C.default;const k=n(9774);t.CheckCameraResolutionFeedback=k.default;const E=n(1780);t.CheckContentShareConnectivityFeedback=E.default;const I=n(2700);t.CheckNetworkTCPConnectivityFeedback=I.default;const T=n(9097);t.CheckNetworkUDPConnectivityFeedback=T.default;const x=n(688);t.CheckVideoConnectivityFeedback=x.default;const M=n(6723);t.CheckVideoInputFeedback=M.default;const A=n(1847);t.CleanRestartedSessionTask=A.default;const P=n(4975);t.CleanStoppedSessionTask=P.default;const _=n(1671);t.ClientMetricReport=_.default;const O=n(3511);t.ClientMetricReportDirection=O.default;const R=n(3926);t.ClientMetricReportMediaType=R.default;const D=n(2465);t.ClientVideoStreamReceivingReport=D.default;const F=n(6678);t.ConnectionHealthData=F.default;const N=n(3431);t.ConnectionHealthPolicyConfiguration=N.default;const L=n(1837);t.ConsoleLogger=L.default;const B=n(5946);t.ContentShareConstants=B.default;const U=n(5865);t.ContentShareMediaStreamBroker=U.default;const V=n(6023);t.CreatePeerConnectionTask=V.default;const j=n(752);t.CreateSDPTask=j.default;const z=n(2236);t.DataMessage=z.default;const $=n(8889);t.DefaultActiveSpeakerDetector=$.default;const W=n(9943);t.DefaultActiveSpeakerPolicy=W.default;const H=n(7994);t.DefaultAudioMixController=H.default;const q=n(6971);t.DefaultAudioVideoController=q.default;const K=n(4347);t.DefaultAudioVideoFacade=K.default;const G=n(4380);t.DefaultBrowserBehavior=G.default;const J=n(4698);t.DefaultContentShareController=J.default;const Z=n(359);t.DefaultDeviceController=Z.default;const Q=n(9257);t.DefaultDevicePixelRatioMonitor=Q.default;const X=n(9446);t.DefaultEventController=X.default;const Y=n(463);t.DefaultMediaDeviceFactory=Y.default;const ee=n(7966);t.DefaultMeetingEventReporter=ee.default;const te=n(2265);t.DefaultMeetingReadinessChecker=te.default;const ne=n(5674);t.DefaultMeetingSession=ne.default;const ie=n(4699);t.DefaultMessagingSession=ie.default;const re=n(7517);t.DefaultModality=re.default;const oe=n(5351);t.DefaultPingPong=oe.default;const se=n(4826);t.DefaultRealtimeController=se.default;const ae=n(427);t.DefaultReconnectController=ae.default;const ce=n(6040);t.DefaultSessionStateController=ce.default;const le=n(1270);t.DefaultSigV4=le.default;const de=n(6849);t.DefaultSignalingClient=de.default;const ue=n(5620);t.DefaultSimulcastUplinkPolicy=ue.default;const he=n(5710);t.DefaultSimulcastUplinkPolicyForContentShare=he.default;const pe=n(2358);t.DefaultTransceiverController=pe.default;const fe=n(3522);t.DefaultTranscriptionController=fe.default;const me=n(6370);t.DefaultUserAgentParser=me.default;const ge=n(5221);t.DefaultVideoCaptureAndEncodeParameter=ge.default;const ve=n(8047);t.DefaultVideoFrameProcessorPipeline=ve.default;const be=n(4933);t.DefaultVideoStreamIdSet=be.default;const Se=n(7816);t.DefaultVideoStreamIndex=Se.default;const ye=n(6619);t.DefaultVideoTile=ye.default;const we=n(3062);t.DefaultVideoTileController=we.default;const Ce=n(2818);t.DefaultVideoTileFactory=Ce.default;const ke=n(1261);t.DefaultVideoTransformDevice=ke.default;const Ee=n(1183);t.DefaultVolumeIndicatorAdapter=Ee.default;const Ie=n(9870);t.DefaultWebSocketAdapter=Ie.default;const Te=n(6054);t.DevicePixelRatioWindowSource=Te.default;const xe=n(7904);t.DeviceSelection=xe.default;const Me=n(8267);t.EventBufferConfiguration=Me.default;const Ae=n(2631);t.EventIngestionConfiguration=Ae.default;const Pe=n(1535);t.FinishGatheringICECandidatesTask=Pe.default;const _e=n(5605);t.FullJitterBackoff=_e.default;const Oe=n(4712);t.FullJitterBackoffFactory=Oe.default;const Re=n(7033);t.FullJitterLimitedBackoff=Re.default;const De=n(9360);t.GetUserMediaError=De.default;const Fe=n(5006);t.GlobalMetricReport=Fe.default;const Ne=n(2659);t.InMemoryJSONEventBuffer=Ne.default;const Le=n(8389);t.IntervalScheduler=Le.default;const Be=n(8758);t.JoinAndReceiveIndexTask=Be.default;const Ue=n(860);t.LeaveAndReceiveLeaveAckTask=Ue.default;const Ve=n(613);t.ListenForVolumeIndicatorsTask=Ve.default;const je=n(1703);t.Log=je.default;const ze=n(664);t.LogLevel=ze.default;const $e=n(7676);t.MediaDeviceProxyHandler=$e.default;const We=n(7479);t.MeetingEventsClientConfiguration=We.default;const He=n(2893);t.MeetingReadinessCheckerConfiguration=He.default;const qe=n(1241);t.MeetingSessionConfiguration=qe.default;const Ke=n(9674);t.MeetingSessionCredentials=Ke.default;const Ge=n(1204);t.MeetingSessionLifecycleEvent=Ge.default;const Je=n(2513);t.MeetingSessionLifecycleEventCondition=Je.default;const Ze=n(5207);t.MeetingSessionStatus=Ze.default;const Qe=n(7726);t.MeetingSessionStatusCode=Qe.default;const Xe=n(9729);t.MeetingSessionTURNCredentials=Xe.default;const Ye=n(8155);t.MeetingSessionURLs=Ye.default;const et=n(6126);t.MeetingSessionVideoAvailability=et.default;const tt=n(4862);t.Message=tt.default;const nt=n(5436);t.MessagingSessionConfiguration=nt.default;const it=n(3566);t.ModelSpecBuilder=it.default;const rt=n(3576);t.MonitorTask=rt.default;const ot=n(6006);t.MultiLogger=ot.default;const st=n(9663);t.NScaleVideoUplinkBandwidthPolicy=st.default;const at=n(871);t.NoOpAudioVideoController=at.default;const ct=n(5250);t.NoOpDebugLogger=ct.default;const lt=n(4896);t.NoOpDeviceController=lt.default;const dt=n(2862);t.NoOpEventReporter=dt.default;const ut=n(8847);t.NoOpLogger=ut.default;const ht=n(5836);t.NoOpMediaStreamBroker=ht.default;const pt=n(6733);t.NoOpTask=pt.default;const ft=n(9742);t.NoOpVideoElementFactory=ft.default;const mt=n(5640);t.NoOpVideoFrameProcessor=mt.default;const gt=n(5554);t.NoVideoDownlinkBandwidthPolicy=gt.default;const vt=n(4271);t.NoVideoUplinkBandwidthPolicy=vt.default;const bt=n(5513);t.NotFoundError=bt.default;const St=n(7982);t.NotReadableError=St.default;const yt=n(8241);t.OnceTask=yt.default;const wt=n(4003);t.OpenSignalingConnectionTask=wt.default;const Ct=n(7681);t.OverconstrainedError=Ct.default;const kt=n(6994);t.POSTLogger=kt.default;const Et=n(7296);t.ParallelGroupTask=Et.default;const It=n(4734);t.PermissionDeniedError=It.default;const Tt=n(454);t.PrefetchOn=Tt.default;const xt=n(2754);t.PrefetchSortBy=xt.default;const Mt=n(6258);t.PromiseQueue=Mt.default;const At=n(3654);t.PromoteToPrimaryMeetingTask=At.default;const Pt=n(5036);t.RealtimeAttendeePositionInFrame=Pt.default;const _t=n(1341);t.RealtimeState=_t.default;const Ot=n(1406);t.RealtimeVolumeIndicator=Ot.default;const Rt=n(9819);t.ReceiveAudioInputTask=Rt.default;const Dt=n(5546);t.ReceiveTURNCredentialsTask=Dt.default;const Ft=n(6145);t.ReceiveVideoInputTask=Ft.default;const Nt=n(2036);t.ReceiveVideoStreamIndexTask=Nt.default;const Lt=n(2743);t.ReconnectionHealthPolicy=Lt.default;const Bt=n(6852);t.RunnableTask=Bt.default;const Ut=n(8833);t.SDP=Ut.default;const Vt=n(8509);t.SDPCandidateType=Vt.default;const jt=n(8042);t.SDPMediaSection=jt.default;const zt=n(1356);t.SendAndReceiveDataMessagesTask=zt.default;const $t=n(5044);t.SendingAudioFailureConnectionHealthPolicy=$t.default;const Wt=n(2320);t.SerialGroupTask=Wt.default;const Ht=n(4694);t.ServerSideNetworkAdaption=Ht.default;const qt=n(5727);t.SessionStateControllerAction=qt.default;const Kt=n(7905);t.SessionStateControllerDeferPriority=Kt.default;const Gt=n(4739);t.SessionStateControllerState=Gt.default;const Jt=n(1735);t.SessionStateControllerTransitionResult=Jt.default;const Zt=n(3341);t.SetLocalDescriptionTask=Zt.default;const Qt=n(3276);t.SetRemoteDescriptionTask=Qt.default;const Xt=n(996);t.SignalingAndMetricsConnectionMonitor=Xt.default;const Yt=n(687);t.SignalingClientConnectionRequest=Yt.default;const en=n(6387);t.SignalingClientEvent=en.default;const tn=n(8614);t.SignalingClientEventType=tn.default;const nn=n(8586);t.SignalingClientJoin=nn.default;const rn=n(1788);t.SignalingClientSubscribe=rn.default;const on=n(1737);t.SignalingClientVideoSubscriptionConfiguration=on.default;const sn=n(9198);t.SimulcastContentShareTransceiverController=sn.default;const an=n(8718);t.SimulcastLayers=an.default;const cn=n(9108);t.SimulcastTransceiverController=cn.default;const ln=n(16);t.SimulcastVideoStreamIndex=ln.default;const dn=n(5502);t.SingleNodeAudioTransformDevice=dn.default;const un=n(4832);t.StreamMetricReport=un.default;const hn=n(2695);t.SubscribeAndReceiveSubscribeAckTask=hn.default;const pn=n(8365);t.TargetDisplaySize=pn.default;const fn=n(4631);t.TaskStatus=fn.default;const mn=n(7230);t.TimeoutScheduler=mn.default;const gn=n(7138);t.TimeoutTask=gn.default;const vn=n(474);t.Transcript=vn.default;const bn=n(8311);t.TranscriptAlternative=bn.default;const Sn=n(307);t.TranscriptEntity=Sn.default;const yn=n(7260);t.TranscriptItem=yn.default;const wn=n(5809);t.TranscriptItemType=wn.default;const Cn=n(2017);t.TranscriptLanguageWithScore=Cn.default;const kn=n(1641);t.TranscriptResult=kn.default;const En=n(4627);t.TranscriptionStatus=En.default;const In=n(9122);t.TranscriptionStatusType=In.default;const Tn=n(8555);t.TypeError=Tn.default;const xn=n(9970);t.UnusableAudioWarningConnectionHealthPolicy=xn.default;const Mn=n(4207);t.Versioning=Mn.default;const An=n(4595);t.VideoAdaptiveProbePolicy=An.default;const Pn=n(1420);t.VideoCodecCapability=Pn.default;const _n=n(1660);t.VideoLogEvent=_n.default;const On=n(4903);t.VideoOnlyTransceiverController=On.default;const Rn=n(5010);t.VideoPreference=Rn.default;const Dn=n(9269);t.VideoPreferences=Dn.default;const Fn=n(4766);t.VideoPriorityBasedPolicy=Fn.default;const Nn=n(7570);t.VideoPriorityBasedPolicyConfig=Nn.default;const Ln=n(5122);t.VideoQualitySettings=Ln.default;const Bn=n(2361);t.VideoSource=Bn.default;const Un=n(4645);t.VideoStreamDescription=Un.default;const Vn=n(6744);t.VideoTileState=Vn.default;const jn=n(958);t.VoiceFocusDeviceTransformer=jn.default;const zn=n(2902);t.VoiceFocusTransformDevice=zn.default;const $n=n(339);t.WaitForAttendeePresenceTask=$n.default;const Wn=n(6032);t.WebSocketReadyState=Wn.default;const Hn=n(2484);t.ZLIBTextCompressor=Hn.default;const qn=n(9269);Object.defineProperty(t,"MutableVideoPreferences",{enumerable:!0,get:function(){return qn.MutableVideoPreferences}});const Kn=n(8692);Object.defineProperty(t,"Some",{enumerable:!0,get:function(){return Kn.Some}}),Object.defineProperty(t,"None",{enumerable:!0,get:function(){return Kn.None}}),Object.defineProperty(t,"Maybe",{enumerable:!0,get:function(){return Kn.Maybe}});const Gn=n(6580);Object.defineProperty(t,"isAudioTransformDevice",{enumerable:!0,get:function(){return Gn.isAudioTransformDevice}});const Jn=n(1079);Object.defineProperty(t,"isDestroyable",{enumerable:!0,get:function(){return Jn.isDestroyable}});const Zn=n(176);Object.defineProperty(t,"isVideoTransformDevice",{enumerable:!0,get:function(){return Zn.isVideoTransformDevice}})},1837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(664);class r{constructor(e,t=i.default.WARN){this.name=e,this.level=t}info(e){this.log(i.default.INFO,e)}warn(e){this.log(i.default.WARN,e)}error(e){this.log(i.default.ERROR,e)}debug(e){i.default.DEBUG<this.level||("string"===typeof e?this.log(i.default.DEBUG,e):e?this.log(i.default.DEBUG,e()):this.log(i.default.DEBUG,""+e))}setLogLevel(e){this.level=e}getLogLevel(){return this.level}log(e,t){if(e<this.level)return;const n=(new Date).toISOString(),r=`${n} [${i.default[e]}] ${this.name} - ${t}`;switch(e){case i.default.ERROR:console.error(r);break;case i.default.WARN:console.warn(r);break;case i.default.DEBUG:console.debug(r.replace(/\\r\\n/g,"\n"));break;case i.default.INFO:console.info(r);break}}}t["default"]=r},1703:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n,i){this.sequenceNumber=e,this.message=t,this.timestampMs=n,this.logLevel=i}}t["default"]=n},664:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e["DEBUG"]=0]="DEBUG",e[e["INFO"]=1]="INFO",e[e["WARN"]=2]="WARN",e[e["ERROR"]=3]="ERROR",e[e["OFF"]=4]="OFF"}(n=t.LogLevel||(t.LogLevel={})),t["default"]=n},6006:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(664);class r{constructor(...e){this._loggers=e}info(e){for(const t of this._loggers)t.info(e)}warn(e){for(const t of this._loggers)t.warn(e)}error(e){for(const t of this._loggers)t.error(e)}debug(e){let t,n;n="string"===typeof e?e:e?()=>(t||(t=e()),t):""+e;for(const i of this._loggers)i.debug(n)}setLogLevel(e){for(const t of this._loggers)t.setLogLevel(e)}getLogLevel(){for(const e of this._loggers)return e.getLogLevel();return i.default.OFF}}t["default"]=r},5250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(664),r=n(8847);class o extends r.default{constructor(){super(i.default.DEBUG)}}t["default"]=o},8847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(664);class r{constructor(e=i.default.OFF){this.level=e}info(e){}warn(e){}error(e){}debug(e){i.default.DEBUG<this.level||"string"!==typeof e&&e()}setLogLevel(e){this.level=e}getLogLevel(){return this.level}}t["default"]=r},6994:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8389),o=n(1703),s=n(664);class a{constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:n=a.BATCH_SIZE,intervalMs:i=a.INTERVAL_MS,logLevel:r=s.default.WARN,metadata:o,headers:c}=e;this.url=t,this.batchSize=n,this.intervalMs=i,this.logLevel=r,this.metadata=o,this.headers=c,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}addEventListener(){this.eventListener&&"window"in n.g&&window.addEventListener&&window.addEventListener("unload",this.eventListener)}removeEventListener(){this.eventListener&&"window"in n.g&&window.removeEventListener&&window.removeEventListener("unload",this.eventListener)}debug(e){s.default.DEBUG<this.logLevel||("string"===typeof e?this.log(s.default.DEBUG,e):e?this.log(s.default.DEBUG,e()):this.log(s.default.DEBUG,""+e))}info(e){this.log(s.default.INFO,e)}warn(e){this.log(s.default.WARN,e)}error(e){this.log(s.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new r.default(this.intervalMs),this.intervalScheduler.start((()=>i(this,void 0,void 0,(function*(){if(!0===this.lock||0===this.getLogCaptureSize())return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{const n=yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}));200===n.status&&(this.logCapture=this.logCapture.slice(e.length))}catch(n){console.warn("[POSTLogger] "+n.message)}finally{this.lock=!1}}))))}stop(){var e;null===(e=this.intervalScheduler)||void 0===e||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return i(this,void 0,void 0,(function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0}))}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const n=Date.now();this.logCapture.push(new o.default(this.sequenceNumber,t,n,s.default[e])),this.sequenceNumber+=1}}t["default"]=a,a.BATCH_SIZE=85,a.INTERVAL_MS=2e3},463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7676);class r{constructor(){this.isMediaDevicesSupported="undefined"!==typeof navigator&&!!navigator.mediaDevices}create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new i.default);throw new Error("navigator.mediaDevices is not supported")}}t["default"]=r},7676:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5971),o=n(8389);class s{constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(e,t,n)=>{if(!Reflect.has(e,t))return;if(!("ondevicechange"in navigator.mediaDevices)){if("addEventListener"===t)return this.patchAddEventListener(e,t,n);if("removeEventListener"===t)return this.patchRemoveEventListener(e,t,n)}const i=Reflect.get(e,t,n);return"function"===typeof i?i.bind(e):i},this.patchAddEventListener=(e,t,n)=>{const i=Reflect.get(e,t,n);return(t,n,r)=>{if("devicechange"!==t)return Reflect.apply(i,e,[t,n,r]);this.deviceChangeListeners.add(n),this.scheduler||(this.scheduler=new o.default(s.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists))}},this.patchRemoveEventListener=(e,t,n)=>{const i=Reflect.get(e,t,n);return(t,n,r)=>{if("devicechange"!==t)return Reflect.apply(i,e,[t,n,r]);this.deviceChangeListeners.delete(n),0===this.deviceChangeListeners.size&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null)}},this.pollDeviceLists=()=>i(this,void 0,void 0,(function*(){const e=yield this.sortedDeviceList();if(this.devices){const t=e.length!==this.devices.length||e.some(((e,t)=>e.deviceId!==this.devices[t].deviceId));t&&this.handleDeviceChangeEvent()}this.devices=e}))}sortedDeviceList(){return i(this,void 0,void 0,(function*(){const e=yield navigator.mediaDevices.enumerateDevices();return e.sort(((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0))}))}handleDeviceChangeEvent(){for(const e of this.deviceChangeListeners)r.default.nextTick((()=>{if(this.deviceChangeListeners.has(e)){const t=new Event("devicechange");"function"===typeof e?e(t):e.handleEvent(t)}}))}}t["default"]=s,s.INTERVAL_MS=1e3},5836:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(e){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(e){}removeMediaStreamBrokerObserver(e){}}t["default"]=n},535:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAudioConnectivityFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["AudioInputRequestFailed"]=1]="AudioInputRequestFailed",e[e["AudioInputPermissionDenied"]=2]="AudioInputPermissionDenied",e[e["ConnectionFailed"]=3]="ConnectionFailed",e[e["AudioNotReceived"]=4]="AudioNotReceived"}(n=t.CheckAudioConnectivityFeedback||(t.CheckAudioConnectivityFeedback={})),t["default"]=n},4211:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAudioInputFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["Failed"]=1]="Failed",e[e["PermissionDenied"]=2]="PermissionDenied"}(n=t.CheckAudioInputFeedback||(t.CheckAudioInputFeedback={})),t["default"]=n},1470:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAudioOutputFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["Failed"]=1]="Failed"}(n=t.CheckAudioOutputFeedback||(t.CheckAudioOutputFeedback={})),t["default"]=n},9774:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckCameraResolutionFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["Failed"]=1]="Failed",e[e["ResolutionNotSupported"]=2]="ResolutionNotSupported",e[e["PermissionDenied"]=3]="PermissionDenied"}(n=t.CheckCameraResolutionFeedback||(t.CheckCameraResolutionFeedback={})),t["default"]=n},1780:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckContentShareConnectivityFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["Failed"]=1]="Failed",e[e["PermissionDenied"]=2]="PermissionDenied",e[e["TimedOut"]=3]="TimedOut",e[e["ConnectionFailed"]=4]="ConnectionFailed"}(n=t.CheckContentShareConnectivityFeedback||(t.CheckContentShareConnectivityFeedback={})),t["default"]=n},2700:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckNetworkTCPConnectivityFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["MeetingSessionURLsNotInitialized"]=1]="MeetingSessionURLsNotInitialized",e[e["ConnectionFailed"]=2]="ConnectionFailed",e[e["ICENegotiationFailed"]=3]="ICENegotiationFailed"}(n=t.CheckNetworkTCPConnectivityFeedback||(t.CheckNetworkTCPConnectivityFeedback={})),t["default"]=n},9097:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckNetworkUDPConnectivityFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["MeetingSessionURLsNotInitialized"]=1]="MeetingSessionURLsNotInitialized",e[e["ConnectionFailed"]=2]="ConnectionFailed",e[e["ICENegotiationFailed"]=3]="ICENegotiationFailed"}(n=t.CheckNetworkUDPConnectivityFeedback||(t.CheckNetworkUDPConnectivityFeedback={})),t["default"]=n},688:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckVideoConnectivityFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["VideoInputRequestFailed"]=1]="VideoInputRequestFailed",e[e["VideoInputPermissionDenied"]=2]="VideoInputPermissionDenied",e[e["ConnectionFailed"]=3]="ConnectionFailed",e[e["VideoNotSent"]=4]="VideoNotSent"}(n=t.CheckVideoConnectivityFeedback||(t.CheckVideoConnectivityFeedback={})),t["default"]=n},6723:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckVideoInputFeedback=void 0,function(e){e[e["Succeeded"]=0]="Succeeded",e[e["Failed"]=1]="Failed",e[e["PermissionDenied"]=2]="PermissionDenied"}(n=t.CheckVideoInputFeedback||(t.CheckVideoInputFeedback={})),t["default"]=n},2265:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7994),o=n(4380),s=n(359),a=n(4734),c=n(5375),l=n(7138),d=n(535),u=n(4211),h=n(1470),p=n(9774),f=n(1780),m=n(2700),g=n(9097),v=n(688),b=n(6723),S=n(2893);class y{constructor(e,t,n=new S.default){this.logger=e,this.meetingSession=t,this.configuration=n,this.browserBehavior=new o.default}static delay(e){return i(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}checkAudioInput(e){return i(this,void 0,void 0,(function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(e),yield this.meetingSession.audioVideo.stopAudioInput(),u.default.Succeeded}catch(t){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${t}`),t instanceof a.default?u.default.PermissionDenied:u.default.Failed}}))}checkAudioOutput(e,t,n=null){return i(this,void 0,void 0,(function*(){try{const i=e?s.default.getIntrinsicDeviceId(e):"";yield this.playTone(i,this.configuration.audioOutputFrequency,n);const r=yield t();return r?h.default.Succeeded:h.default.Failed}catch(i){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${i}`),h.default.Failed}finally{this.stopTone()}}))}playTone(e,t,n){return i(this,void 0,void 0,(function*(){const i=.1,o=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=s.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=t,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const a=this.audioContext.currentTime,c=a+.1;this.gainNode.gain.linearRampToValueAtTime(0,c),this.gainNode.gain.linearRampToValueAtTime(o,c+i),this.oscillatorNode.start();const l=new r.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield l.bindAudioDevice({deviceId:e}))}catch(d){this.logger.error(`Failed to bind audio device: ${d}`)}try{yield l.bindAudioElement(n||new Audio)}catch(d){this.logger.error(`Failed to bind audio element: ${d}`)}yield l.bindAudioStream(this.destinationStream.stream)}))}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const e=1,t=.1,n=this.configuration.audioOutputGain,i=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(n,i+t+e),this.gainNode.gain.linearRampToValueAtTime(0,i+2*t+e),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(e){return i(this,void 0,void 0,(function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(e),yield this.meetingSession.audioVideo.stopVideoInput(),b.default.Succeeded}catch(t){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${t}`),t instanceof a.default?b.default.PermissionDenied:b.default.Failed}}))}checkCameraResolution(e,t,n){return i(this,void 0,void 0,(function*(){let i;try{const r=s.default.getIntrinsicDeviceId(e),o={video:this.calculateVideoConstraint(r,t,n)};i=yield navigator.mediaDevices.getUserMedia(o)}catch(r){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${t} height ${n} failed with error ${r}`),r&&"OverconstrainedError"===r.name?p.default.ResolutionNotSupported:r&&"NotAllowedError"===r.name?p.default.PermissionDenied:p.default.Failed}finally{i&&i.getTracks().forEach((function(e){e.stop()}))}return p.default.Succeeded}))}calculateVideoConstraint(e,t,n){const i=this.browserBehavior.requiresResolutionAlignment(t,n),r={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(r.deviceId=e,r.width=t,r.height=n):(r.deviceId={exact:e},r.width={exact:i[0]},r.height={exact:i[1]}),r}checkContentShareConnectivity(e){return i(this,void 0,void 0,(function*(){let t=!1,n=!1;const r={contentShareDidStart:()=>{t=!0}},o={audioVideoDidStart:()=>{n=!0}};try{return this.meetingSession.audioVideo.addObserver(o),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(r),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(e),yield this.executeTimeoutTask((()=>i(this,void 0,void 0,(function*(){return n&&t})))),n?(yield this.stopMeeting(),t?f.default.Succeeded:f.default.TimedOut):f.default.ConnectionFailed}catch(s){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${s}`),"NotAllowedError"===s.name?f.default.PermissionDenied:f.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(o),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(r)}}))}checkAudioConnectivity(e){return i(this,void 0,void 0,(function*(){let t=!1;const n=this.meetingSession.audioVideo,r=(e,n,i,r)=>{e===this.meetingSession.configuration.credentials.attendeeId&&n&&(t=!0)};try{yield n.startAudioInput(e)}catch(o){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${o}`),o instanceof a.default?d.default.AudioInputPermissionDenied:d.default.AudioInputRequestFailed}return n.realtimeSubscribeToAttendeeIdPresence(r),(yield this.startMeeting())?(yield this.executeTimeoutTask((()=>i(this,void 0,void 0,(function*(){return t})))),n.realtimeUnsubscribeToAttendeeIdPresence(r),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),t?d.default.Succeeded:d.default.AudioNotReceived):(n.realtimeUnsubscribeToAttendeeIdPresence(r),yield this.meetingSession.audioVideo.stopAudioInput(),d.default.ConnectionFailed)}))}checkVideoConnectivity(e){return i(this,void 0,void 0,(function*(){const t=this.meetingSession.audioVideo;let n=0;const r={metricsDidReceive(e){const t=e.getRTCStatsReport();t.forEach((e=>{"outbound-rtp"===e.type&&"video"===e.mediaType&&(n=e.packetsSent)}))}};try{yield t.startVideoInput(e)}catch(o){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${o}`),o instanceof a.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return t.addObserver(r),(yield this.startMeeting())?(t.startLocalVideoTile(),yield this.executeTimeoutTask((()=>i(this,void 0,void 0,(function*(){return n>0})))),yield t.stopVideoInput(),yield this.stopMeeting(),t.removeObserver(r),n<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed}))}checkNetworkUDPConnectivity(){return i(this,void 0,void 0,(function*(){let e=!1;const t={metricsDidReceive(t){const n=t.getRTCStatsReport();n.forEach((t=>{"candidate-pair"===t.type&&"succeeded"===t.state&&(e=!0)}))}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(r){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${r}`),g.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=e=>{const t=this.originalURLRewriter(e);return t.includes("transport=tcp")?"":t};const n=this.meetingSession.audioVideo;return n.addObserver(t),(yield this.startMeeting())?(yield this.executeTimeoutTask((()=>i(this,void 0,void 0,(function*(){return e})))),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),n.removeObserver(t),e?g.default.Succeeded:g.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,g.default.ConnectionFailed)}))}checkNetworkTCPConnectivity(){return i(this,void 0,void 0,(function*(){let e=!1;const t={metricsDidReceive(t){const n=t.getRTCStatsReport();n.forEach((t=>{"candidate-pair"===t.type&&"succeeded"===t.state&&(e=!0)}))}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(r){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${r}`),m.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=e=>{const t=this.originalURLRewriter(e);return t.includes("transport=udp")?"":t};const n=this.meetingSession.audioVideo;return n.addObserver(t),(yield this.startMeeting())?(yield this.executeTimeoutTask((()=>i(this,void 0,void 0,(function*(){return e})))),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),n.removeObserver(t),e?m.default.Succeeded:m.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,m.default.ConnectionFailed)}))}startMeeting(){return i(this,void 0,void 0,(function*(){let e=!1;const t={audioVideoDidStart:()=>{e=!0}};return this.meetingSession.audioVideo.addObserver(t),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask((()=>i(this,void 0,void 0,(function*(){return e})))),this.meetingSession.audioVideo.removeObserver(t),e}))}stopMeeting(){return i(this,void 0,void 0,(function*(){let e=!1;const t={audioVideoDidStop:t=>{e=!0}};return this.meetingSession.audioVideo.addObserver(t),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask((()=>i(this,void 0,void 0,(function*(){return e})))),this.meetingSession.audioVideo.removeObserver(t),e}))}executeTimeoutTask(e){return i(this,void 0,void 0,(function*(){let t=!1;class n extends c.default{constructor(e,t){super(e),this.waitDurationMs=t,this.isCancelled=!1}cancel(){this.isCancelled=!0}run(){return i(this,void 0,void 0,(function*(){while(!this.isCancelled){if(yield e()){t=!0;break}yield y.delay(this.waitDurationMs)}}))}}const r=new l.default(this.logger,new n(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs);return yield r.run(),t}))}}t["default"]=y},2893:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}}t["default"]=n},5674:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(6971),o=n(4347),s=n(5605),a=n(4380),c=n(5865),l=n(4698),d=n(788),u=n(1079),h=n(9446),p=n(427),f=n(9870);class m{constructor(e,t,n,i){this._eventController=i,this._configuration=e,this._logger=t,this.checkBrowserSupportAndFeatureConfiguration(),d.default.addLogger(this._logger),d.default.register(),this._eventController||(this._eventController=new h.default(e,t)),n.eventController||(n.eventController=this.eventController),this.audioVideoController=new r.default(this._configuration,this._logger,new f.default(this._logger),n,new p.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=n;const a=new c.default(this._logger);this.contentShareController=new l.default(a,new r.default(l.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new f.default(this._logger),a,new p.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new o.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return i(this,void 0,void 0,(function*(){u.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),u.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),u.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),d.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0}))}checkBrowserSupportAndFeatureConfiguration(){const e=new a.default,t=`${e.name()} ${e.majorVersion()} (${e.version()})`;if(this.logger.info(`browser is ${t}`),e.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${e.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!e.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(e.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${e.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")))}isSimulcastUplinkPolicy(e){return!(!e||!e.addObserver)}}t["default"]=m},1241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3431),r=n(6843),o=n(9674),s=n(8155);class a{constructor(e,t){this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new i.default,this.reconnectTimeoutMs=12e4,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1e3,this.reconnectLongBackOffMs=5e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,e&&(e=r.toLowerCasePropertyNames(e),e.meeting&&(e=e.meeting),this.meetingId=e.meetingid,this.externalMeetingId=e.externalmeetingid,this.urls=new s.default,this.urls.audioHostURL=e.mediaplacement.audiohosturl,this.urls.signalingURL=e.mediaplacement.signalingurl,this.urls.turnControlURL=e.mediaplacement.turncontrolurl,e.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=e.mediaplacement.eventingestionurl)),t&&(t=r.toLowerCasePropertyNames(t),t.attendee&&(t=t.attendee),this.credentials=new o.default,this.credentials.attendeeId=t.attendeeid,this.credentials.externalUserId=t.externaluserid,this.credentials.joinToken=t.jointoken)}}t["default"]=a},9674:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}toJSON(){return{attendeeId:this.attendeeId,joinToken:null===this.joinToken?null:"<redacted>"}}}t["default"]=n},1204:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingSessionLifecycleEvent=void 0,function(e){e[e["Connecting"]=0]="Connecting",e[e["Started"]=1]="Started",e[e["Stopped"]=2]="Stopped"}(n=t.MeetingSessionLifecycleEvent||(t.MeetingSessionLifecycleEvent={})),t["default"]=n},2513:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingSessionLifecycleEventCondition=void 0,function(e){e[e["ConnectingNew"]=0]="ConnectingNew",e[e["ReconnectingExisting"]=1]="ReconnectingExisting",e[e["StartedNew"]=2]="StartedNew",e[e["StartedExisting"]=3]="StartedExisting",e[e["StartedAfterReconnect"]=4]="StartedAfterReconnect",e[e["StoppedCleanly"]=5]="StoppedCleanly",e[e["StoppedWithFailure"]=6]="StoppedWithFailure"}(n=t.MeetingSessionLifecycleEventCondition||(t.MeetingSessionLifecycleEventCondition={})),t["default"]=n},5207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4059),r=n(7726);class o{constructor(e){this._statusCode=e}statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case r.default.AudioAuthenticationRejected:case r.default.AudioCallAtCapacity:case r.default.AudioInternalServerError:case r.default.AudioServiceUnavailable:case r.default.AudioDisconnected:case r.default.VideoCallAtSourceCapacity:case r.default.SignalingBadRequest:case r.default.SignalingInternalServerError:case r.default.SignalingRequestFailed:case r.default.ICEGatheringTimeoutWorkaround:case r.default.ConnectionHealthReconnect:case r.default.RealtimeApiFailed:case r.default.TaskFailed:case r.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case r.default.Left:case r.default.AudioJoinedFromAnotherDevice:case r.default.AudioAuthenticationRejected:case r.default.AudioCallAtCapacity:case r.default.MeetingEnded:case r.default.AudioDisconnected:case r.default.TURNCredentialsForbidden:case r.default.SignalingBadRequest:case r.default.SignalingRequestFailed:case r.default.VideoCallAtSourceCapacity:case r.default.RealtimeApiFailed:case r.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case r.default.AudioAuthenticationRejected:case r.default.AudioInternalServerError:case r.default.AudioServiceUnavailable:case r.default.ICEGatheringTimeoutWorkaround:case r.default.SignalingBadRequest:case r.default.SignalingInternalServerError:case r.default.SignalingRequestFailed:case r.default.RealtimeApiFailed:case r.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case r.default.OK:return"Everything is OK so far.";case r.default.Left:return"The attendee left the meeting.";case r.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case r.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case r.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case r.default.MeetingEnded:return"The meeting ended.";case r.default.AudioInternalServerError:case r.default.AudioServiceUnavailable:case r.default.AudioDisconnected:return"The audio connection failed.";case r.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case r.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case r.default.SignalingBadRequest:case r.default.SignalingInternalServerError:case r.default.SignalingRequestFailed:return"The signaling connection failed.";case r.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case r.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case r.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case r.default.TaskFailed:return"The connection failed. See the error message for more details.";case r.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case r.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case r.default.NoAttendeePresent:return"The attendee was not present.";case r.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case r.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case r.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const e=this._statusCode;throw new Error(`Unhandled case: ${e}`)}}}static fromSignalFrame(e){return e.error&&e.error.status?this.fromSignalingStatus(e.error.status):e.type===i.SdkSignalFrame.Type.AUDIO_STATUS?e.audioStatus?this.fromAudioStatus(e.audioStatus.audioStatus):new o(r.default.SignalingRequestFailed):e.type===i.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new o(r.default.AudioVideoWasRemovedFromPrimaryMeeting):new o(r.default.OK)}static fromAudioStatus(e){switch(e){case 200:return new o(r.default.OK);case 301:return new o(r.default.AudioJoinedFromAnotherDevice);case 302:return new o(r.default.AudioDisconnectAudio);case 403:return new o(r.default.AudioAuthenticationRejected);case 409:return new o(r.default.AudioCallAtCapacity);case 410:return new o(r.default.MeetingEnded);case 411:return new o(r.default.AudioAttendeeRemoved);case 500:return new o(r.default.AudioInternalServerError);case 503:return new o(r.default.AudioServiceUnavailable);default:switch(Math.floor(e/100)){case 2:return new o(r.default.OK);default:return new o(r.default.AudioDisconnected)}}}static fromSignalingStatus(e){switch(e){case 206:return new o(r.default.VideoCallSwitchToViewOnly);case 509:return new o(r.default.VideoCallAtSourceCapacity);case 403:return new o(r.default.AudioAuthenticationRejected);case 409:return new o(r.default.AudioCallAtCapacity);default:switch(Math.floor(e/100)){case 2:return new o(r.default.OK);case 4:return new o(r.default.SignalingBadRequest);case 5:return new o(r.default.SignalingInternalServerError);default:return new o(r.default.SignalingRequestFailed)}}}}t["default"]=o},7726:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingSessionStatusCode=void 0,function(e){e[e["OK"]=0]="OK",e[e["Left"]=1]="Left",e[e["AudioJoinedFromAnotherDevice"]=2]="AudioJoinedFromAnotherDevice",e[e["AudioAuthenticationRejected"]=3]="AudioAuthenticationRejected",e[e["AudioCallAtCapacity"]=4]="AudioCallAtCapacity",e[e["MeetingEnded"]=5]="MeetingEnded",e[e["AudioInternalServerError"]=6]="AudioInternalServerError",e[e["AudioServiceUnavailable"]=7]="AudioServiceUnavailable",e[e["AudioDisconnected"]=8]="AudioDisconnected",e[e["VideoCallSwitchToViewOnly"]=9]="VideoCallSwitchToViewOnly",e[e["VideoCallAtSourceCapacity"]=10]="VideoCallAtSourceCapacity",e[e["SignalingBadRequest"]=11]="SignalingBadRequest",e[e["SignalingInternalServerError"]=12]="SignalingInternalServerError",e[e["SignalingRequestFailed"]=13]="SignalingRequestFailed",e[e["ICEGatheringTimeoutWorkaround"]=14]="ICEGatheringTimeoutWorkaround",e[e["ConnectionHealthReconnect"]=15]="ConnectionHealthReconnect",e[e["RealtimeApiFailed"]=16]="RealtimeApiFailed",e[e["TaskFailed"]=17]="TaskFailed",e[e["IncompatibleSDP"]=18]="IncompatibleSDP",e[e["TURNCredentialsForbidden"]=19]="TURNCredentialsForbidden",e[e["NoAttendeePresent"]=20]="NoAttendeePresent",e[e["AudioAttendeeRemoved"]=21]="AudioAttendeeRemoved",e[e["AudioVideoWasRemovedFromPrimaryMeeting"]=22]="AudioVideoWasRemovedFromPrimaryMeeting",e[e["AudioDisconnectAudio"]=23]="AudioDisconnectAudio"}(n=t.MeetingSessionStatusCode||(t.MeetingSessionStatusCode={})),t["default"]=n},9729:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}}t["default"]=n},8155:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=e=>e}get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(e){this._audioHostURL=e}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(e){this._signalingURL=e}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(e){this._turnControlURL=e}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(e){this._eventIngestionURL=e}}t["default"]=n},6126:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}equal(e){return this.remoteVideoAvailable===e.remoteVideoAvailable&&this.canStartLocalVideo===e.canStartLocalVideo}clone(){const e=new n;return e.remoteVideoAvailable=this.remoteVideoAvailable,e.canStartLocalVideo=this.canStartLocalVideo,e}}t["default"]=n},4862:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n){this.type=e,this.headers=t,this.payload=n}}t["default"]=n},4699:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(362),o=n(5605),s=n(788),a=n(4862),c=n(427),l=n(5971),d=n(1270),u=n(9870),h=n(6032),p=n(454);class f{constructor(e,t,n,i,r){this.configuration=e,this.logger=t,this.webSocket=n,this.reconnectController=i,this.sigV4=r,this.observerQueue=new Set,this.webSocket||(this.webSocket=new u.default(this.logger)),this.reconnectController||(this.reconnectController=new c.default(e.reconnectTimeoutMs,new o.default(e.reconnectFixedWaitMs,e.reconnectShortBackoffMs,e.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new d.default(this.configuration.chimeClient)),s.default.addLogger(this.logger),s.default.register(),this.preBootstrapMessages=[]}addObserver(e){this.logger.info("adding messaging observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing messaging observer"),this.observerQueue.delete(e)}start(){return i(this,void 0,void 0,(function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")}))}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),s.default.removeLogger(this.logger))}forEachObserver(e){for(const t of this.observerQueue)l.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}setUpEventListeners(){this.webSocket.addEventListener("open",(()=>{this.openEventHandler()})),this.webSocket.addEventListener("message",(e=>{this.receiveMessageHandler(e.data)})),this.webSocket.addEventListener("close",(e=>{this.closeEventHandler(e)})),this.webSocket.addEventListener("error",(()=>{this.logger.error("WebSocket error")}))}startConnecting(e){return i(this,void 0,void 0,(function*(){return yield this.startConnectingInternal(e),yield new Promise(((e,t)=>{this.bootstrapResolved=e,this.bootstrapRejected=t}))}))}startConnectingInternal(e){var t;return i(this,void 0,void 0,(function*(){let n=this.configuration.endpointUrl;if(e||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),e||void 0===n)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const e=yield this.configuration.chimeClient.getMessagingSessionEndpoint();if(null===(t=e.Endpoint)||void 0===t?void 0:t.Url)n=e.Endpoint.Url;else{const e=yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise();n=e.Endpoint.Url}}else n=(yield this.configuration.chimeClient.send(new r.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${n}`)}catch(o){this.logger.error(`Messaging Session failed to resolve endpoint: ${o}`);const e=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});return void this.closeEventHandler(e)}const i=yield this.prepareWebSocketUrl(n);this.logger.info(`opening connection to ${i}`),e||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(i,[],!0),this.forEachObserver((t=>{t.messagingSessionDidStartConnecting&&t.messagingSessionDidStartConnecting(e)})),this.setUpEventListeners()}))}prepareWebSocketUrl(e){return i(this,void 0,void 0,(function*(){const t=new Map;return t.set("userArn",[this.configuration.userArn]),t.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===p.default.Connect&&t.set("prefetch-on",[p.default.Connect]),this.configuration.prefetchSortBy&&t.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",e,"/connect","",t)}))}isClosed(){return this.webSocket.readyState()===h.default.None||this.webSocket.readyState()===h.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(e){try{const t=JSON.parse(e),n=t.Headers["x-amz-chime-event-type"],i=new a.default(n,t.Headers,t.Payload||null);if(this.isSessionEstablished||"SESSION_ESTABLISHED"!==n){if(!this.isSessionEstablished)return void this.preBootstrapMessages.push(i)}else{this.forEachObserver((e=>{e.messagingSessionDidStart&&e.messagingSessionDidStart()})),this.bootstrapResolved(),this.isSessionEstablished=!0;const e=this.preBootstrapMessages.length;for(let t=0;t<e;t++){const e=this.preBootstrapMessages.shift();this.forEachObserver((t=>{this.sendMessageToObserver(t,e)}))}}this.forEachObserver((e=>{this.sendMessageToObserver(e,i)}))}catch(t){this.logger.error(`Messaging parsing failed: ${t}`)}}sendMessageToObserver(e,t){e.messagingSessionDidReceiveMessage&&e.messagingSessionDidReceiveMessage(t)}retryConnection(){return this.reconnectController.retryWithBackoff((()=>i(this,void 0,void 0,(function*(){yield this.startConnecting(!0)}))),null)}closeEventHandler(e){this.logger.info(`WebSocket close: ${e.code} ${e.reason}`),4999!==e.code&&this.webSocket.destroy(),!this.isClosing&&this.canReconnect(e.code)&&this.retryConnection()||(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver((t=>{t.messagingSessionDidStop&&t.messagingSessionDidStop(e)})):this.bootstrapRejected(e))}canReconnect(e){return 1001===e||1006===e||e>=1011&&e<=1014||e>4e3&&4002!==e&&4003!==e&&4401!==e}}t["default"]=f},5436:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n,i){this.userArn=e,this.messagingSessionId=t,this.endpointUrl=n,this.chimeClient=i,this.reconnectTimeoutMs=1e4,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1e3,this.reconnectLongBackoffMs=5e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}generateSessionId(){const e=new Uint32Array(1),t=window.crypto.getRandomValues(e);return t[0].toString()}}t["default"]=n},454:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["Connect"]="connect"}(n||(n={})),t["default"]=n},2754:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["Unread"]="unread",e["LastMessageTimestamp"]="last-message-timestamp"}(n||(n={})),t["default"]=n},7517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5946);class r{constructor(e){this._id=e}id(){return this._id}base(){return this._id?this._id.split(r.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const e=this._id.split(r.MODALITY_SEPARATOR);return 2===e.length?e[1]:""}hasModality(e){return""!==e&&this.modality()===e}withModality(e){const t=new r(this.base()+r.MODALITY_SEPARATOR+e);return""===e||""===this.base()||new r(t._id).modality()!==e?new r(this.base()):t}}t["default"]=r,r.MODALITY_SEPARATOR=i.default.Modality[0],r.MODALITY_CONTENT=i.default.Modality.substr(1)},5351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5971),r=n(8389),o=n(8614),s=n(4059),a=n(8692);class c{constructor(e,t,n){this.signalingClient=e,this.intervalMs=t,this.logger=n,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new r.default(this.intervalMs),this.pingId=0}addObserver(e){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)i.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start((()=>{this.ping()})),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver((e=>{a.Maybe.of(e.didMissPongs).map((t=>t.bind(e)(this.consecutivePongsUnaccountedFor)))}))),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const e=s.SdkPingPongFrame.create();e.pingId=this.pingId,e.type=s.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(e),this.logger.debug((()=>`sent ping ${this.pingId}`))}pong(e){const t=s.SdkPingPongFrame.create();t.pingId=e,t.type=s.SdkPingPongType.PONG,this.signalingClient.pingPong(t)}handleSignalingClientEvent(e){switch(e.type){case o.default.WebSocketOpen:this.startPingInterval();break;case o.default.WebSocketFailed:case o.default.WebSocketError:this.logger.warn(`stopped pinging (${o.default[e.type]})`),this.stopPingInterval();break;case o.default.WebSocketClosing:case o.default.WebSocketClosed:this.logger.info(`stopped pinging (${o.default[e.type]})`),this.stopPingInterval();break;case o.default.ReceivedSignalFrame:if(e.message.type!==s.SdkSignalFrame.Type.PING_PONG)break;if(e.message.pingPong.type===s.SdkPingPongType.PONG){const t=e.message.pingPong.pingId;if(t!==this.pingId){this.logger.warn(`unexpected ping id ${t} (expected ${this.pingId})`);break}let n;if(this.consecutivePongsUnaccountedFor=0,"number"!==typeof e.message.timestampMs)break;n=e.message.timestampMs,this.logger.debug((()=>`received pong ${t} with timestamp ${n}`));const i=e.timestampMs,r=i-this.pingTimestampLocalMs,o=Math.round(n-r/2),s=this.pingTimestampLocalMs-o;this.logger.info(`local clock skew estimate=${s}ms from ping-pong time=${r}ms`),this.forEachObserver((e=>{a.Maybe.of(e.didReceivePong).map((n=>n.bind(e)(t,s,r)))}))}else this.pong(e.message.pingPong.pingId);break}}}t["default"]=c},4826:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0});const i=n(3522),r=n(1341),o=n(1406);class s{constructor(e,t){this.mediaStreamBroker=e,this.state=new r.default,this._transcriptionController=t||new i.default(this)}realtimeSetLocalAttendeeId(e,t){this.state.localAttendeeId=e,this.state.localExternalUserId=t}realtimeSetAttendeeIdPresence(e,t,n,i,r){try{t&&(this.state.attendeeIdToExternalUserId[e]=n);for(const o of this.state.attendeeIdChangesCallbacks)o(e,t,n,i,r)}catch(o){this.onError(o)}}realtimeSubscribeToAttendeeIdPresence(e){try{this.state.attendeeIdChangesCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToAttendeeIdPresence(e){try{const t=this.state.attendeeIdChangesCallbacks.indexOf(e);-1!==t&&this.state.attendeeIdChangesCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSetCanUnmuteLocalAudio(e){try{if(this.state.canUnmute===e)return;this.state.canUnmute=e;for(const t of this.state.setCanUnmuteLocalAudioCallbacks)t(e)}catch(t){this.onError(t)}}realtimeSubscribeToSetCanUnmuteLocalAudio(e){try{this.state.setCanUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){try{const t=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(e);-1!==t&&this.state.setCanUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!0)}catch(e){this.onError(e)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!1);return!0}catch(e){return this.onError(e),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){try{const t=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(e);-1!==t&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(e,t){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(e)||(this.state.volumeIndicatorCallbacks[e]=[]),this.state.volumeIndicatorCallbacks[e].push(t),this.sendVolumeIndicatorChange(e,!0,!0,!0,this.state.attendeeIdToExternalUserId[e])}catch(n){this.onError(n)}}realtimeUnsubscribeFromVolumeIndicator(e,t){const n=this.state.volumeIndicatorCallbacks[e];if(n)if(t){const n=this.state.volumeIndicatorCallbacks[e].indexOf(t);n>=0&&this.state.volumeIndicatorCallbacks[e].splice(n,1)}else delete this.state.volumeIndicatorCallbacks[e]}realtimeUpdateVolumeIndicator(e,t,n,i,r){try{n=this.applyLocalMuteOverride(e,n);const o=this.getVolumeIndicatorState(e);let s=!1,a=!1,c=!1;null!==n&&o.muted!==n&&(o.muted=n,a=!0,o.muted&&0!==o.volume&&(o.volume=0,s=!0)),o.muted||null===t||(o.volume!==t&&(o.volume=t,s=!0),null===o.muted&&(o.muted=!1,a=!0)),null!==i&&o.signalStrength!==i&&(o.signalStrength=i,c=!0),this.sendVolumeIndicatorChange(e,s,a,c,r)}catch(o){this.onError(o)}}realtimeSubscribeToLocalSignalStrengthChange(e){try{if(this.state.localSignalStrengthChangeCallbacks.push(e),null===this.state.localAttendeeId)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(t){this.onError(t)}}realtimeUnsubscribeToLocalSignalStrengthChange(e){try{const t=this.state.localSignalStrengthChangeCallbacks.indexOf(e);-1!==t&&this.state.localSignalStrengthChangeCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSubscribeToSendDataMessage(e){try{this.state.sendDataMessageCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeFromSendDataMessage(e){try{const t=this.state.sendDataMessageCallbacks.indexOf(e);-1!==t&&this.state.sendDataMessageCallbacks.splice(t,1)}catch(t){this.onError(t)}}realtimeSendDataMessage(e,t,n){try{for(const i of this.state.sendDataMessageCallbacks)i(e,t,n)}catch(i){this.onError(i)}}realtimeSubscribeToReceiveDataMessage(e,t){try{this.state.receiveDataMessageCallbacks.has(e)?this.state.receiveDataMessageCallbacks.get(e).push(t):this.state.receiveDataMessageCallbacks.set(e,[t])}catch(n){this.onError(n)}}realtimeUnsubscribeFromReceiveDataMessage(e){try{this.state.receiveDataMessageCallbacks.delete(e)}catch(t){this.onError(t)}}realtimeReceiveDataMessage(e){try{if(this.state.receiveDataMessageCallbacks.has(e.topic))for(const t of this.state.receiveDataMessageCallbacks.get(e.topic))t(e)}catch(t){this.onError(t)}}realtimeSubscribeToFatalError(e){try{this.state.fatalErrorCallbacks.push(e)}catch(t){this.onError(t)}}realtimeUnsubscribeToFatalError(e){try{const t=this.state.fatalErrorCallbacks.indexOf(e);-1!==t&&this.state.fatalErrorCallbacks.splice(t,1)}catch(t){this.onError(t)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(e){e?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(e,t){const n=this.state.localAttendeeId,i=this.state.muted;return e!==n?t:"activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices["audio"]?i:t}sendVolumeIndicatorChange(e,t,n,i,r){if(this.sendLocalSignalStrengthChange(e,i),!this.state.volumeIndicatorCallbacks.hasOwnProperty(e))return;const s=this.getVolumeIndicatorState(e),a=new o.default;if(t&&(a.volume=s.volume),n&&(a.muted=s.muted),i&&(a.signalStrength=s.signalStrength),!this.stateIsEmpty(a))for(const o of this.state.volumeIndicatorCallbacks[e])o(e,a.volume,a.muted,a.signalStrength,r)}sendLocalSignalStrengthChange(e,t){if(!t)return;if(e!==this.state.localAttendeeId)return;const n=this.getVolumeIndicatorState(e),i=n.signalStrength;if(null!==i)for(const r of this.state.localSignalStrengthChangeCallbacks)r(i)}getVolumeIndicatorState(e){return this.state.volumeIndicatorState.hasOwnProperty(e)||(this.state.volumeIndicatorState[e]=new o.default),this.state.volumeIndicatorState[e]}stateIsEmpty(e){return null===e.volume&&null===e.muted&&null===e.signalStrength}onError(e){try{for(const t of this.state.fatalErrorCallbacks)t(e)}catch(t){try{console.error(e),console.error(t)}catch(n){}}}}t["default"]=s},5036:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}}t["default"]=n},1341:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}}t["default"]=n},1406:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}}t["default"]=n},427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7230);class r{constructor(e,t){this.reconnectTimeoutMs=e,this.backoffPolicy=t,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs||this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(e){this._isFirstConnection=e,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(e,t){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=t,this.backoffTimer=new i.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start((()=>{this.backoffCancel=null,e()}))),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new r(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(e){this.lastActiveTimestampMs=e}}t["default"]=r},5971:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7230);class r extends i.default{constructor(){super(0)}static nextTick(e){setTimeout(e,0)}}t["default"]=r},8389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.intervalMs=e}start(e){this.stop(),this.timer=setInterval(e,this.intervalMs)}stop(){void 0!==this.timer&&(clearInterval(this.timer),this.timer=void 0)}running(){return void 0!==this.timer}}t["default"]=n},7230:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.timeoutMs=e,this.timer=null}start(e){this.stop(),this.timer=setTimeout((()=>{clearTimeout(this.timer),e()}),this.timeoutMs)}stop(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}}t["default"]=n},8833:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0});const i=n(8509),r=n(8042),o=n(1420);class s{constructor(e){this.sdp=e}clone(){return new s(this.sdp)}static isRTPCandidate(e){const t=/candidate[:](\S+) (\d+)/g.exec(e);return null!==t&&"1"===t[2]}static linesToSDP(e){return new s(e.join(s.CRLF))}static candidateTypeFromString(e){switch(e){case i.default.Host:return i.default.Host;case i.default.ServerReflexive:return i.default.ServerReflexive;case i.default.PeerReflexive:return i.default.PeerReflexive;case i.default.Relay:return i.default.Relay}return null}static candidateType(e){const t=/a[=]candidate[:].* typ ([a-z]+) /g.exec(e);return null===t?null:s.candidateTypeFromString(t[1])}static mediaType(e){const t=/m=(audio|video)/g.exec(e);if(null!==t)return t[1]}static mid(e){if(e.includes("a=mid:"))return e.replace(/^(a=mid:)/,"")}static direction(e){const t=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(e);if(null!==t)return t[1]}static splitLines(e){return e.trim().split("\n").map((e=>e.trim()))}static splitSections(e){const t=e.split("\nm=");return t.map(((e,t)=>(t>0?"m="+e:e).trim()+s.CRLF))}static findActiveCameraSection(e){let t=0,n=!1;for(const i of e){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||-1===i.indexOf("sendonly")&&-1===i.indexOf("recvonly")&&-1===i.indexOf("inactive"))){n=!0;break}t++}return!1===n&&(t=-1),t}static extractSSRCsFromFIDGroupLine(e){const t=/^a=ssrc-group:FID\s(.+)/.exec(e);return t[1]}static matchPrefix(e,t){return s.splitLines(e).filter((e=>0===e.indexOf(t)))}lines(){return this.sdp.split(s.CRLF)}hasVideo(){return null!==/^m=video/gm.exec(this.sdp)}hasCandidates(){const e=/a[=]candidate[:]/g.exec(this.sdp);return null!==e}hasCandidatesForAllMLines(){const e=this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1,t=!e;return t}withoutCandidateType(e){return s.linesToSDP(this.lines().filter((t=>s.candidateType(t)!==e)))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(i.default.ServerReflexive)}withAudioMaxAverageBitrate(e){if(!e)return this.clone();e=Math.trunc(Math.min(Math.max(e,s.rfc7587LowestBitrate),s.rfc7587HighestBitrate));const t=this.lines(),n=s.findOpusFmtpAttributes(t),i=s.updateOpusFmtpAttributes(t,n,[`maxaveragebitrate=${e}`]);return s.linesToSDP(i)}withStereoAudio(){const e=this.lines(),t=s.findOpusFmtpAttributes(e),n=s.updateOpusFmtpAttributes(e,t,["stereo=1","sprop-stereo=1"]);return s.linesToSDP(n)}static findOpusFmtpAttributes(e){const t=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let n=!1;const i=[];for(const r of e)if(r.startsWith("m=audio")&&(i.push(null),n=!0),r.startsWith("m=video")&&(n=!1),n){const e=t.exec(r);null!==e&&(i[i.length-1]=`a=fmtp:${e[1]} `)}return i}static updateOpusFmtpAttributes(e,t,n){const i=[];let r=0,o=null;for(const s of e)if(s.startsWith("m=audio")&&(o=t[r],r++),s.startsWith("m=video")&&(o=null),o&&s.startsWith(o)){const e=s.slice(o.length).split(";"),t=[];for(const i of e){const e=n.findIndex((e=>e.startsWith(i.split("=")[0])));e<0&&t.push(i)}for(const i of n)t.push(i);i.push(o+t.join(";"))}else i.push(s);return i}withUnifiedPlanFormat(){let e=this.sdp;return e.includes("mozilla")?this.clone():(e=e.replace("o=-","o=mozilla-chrome"),new s(e))}getUniqueRtpHeaderExtensionId(e){const t=[];for(const i of e)if(/^a=extmap:/.test(i.trim())){const e=i.split("a=extmap:")[1].split(" "),n=+e[0];t.includes(n)||t.push(n)}t.sort(((e,t)=>e-t));let n=0;for(const i of t){if(i-n>1)return n+1;n=i}return 14===n?-1:n+1}withVideoLayersAllocationRtpHeaderExtension(e){const t="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00",n=e?e.getRtpHeaderExtensionId(t):-1,i=-1===n?this.getUniqueRtpHeaderExtensionId(s.splitLines(this.sdp)):n,r=s.splitSections(this.sdp),o=[];for(let c of r){if(/^m=video/.test(c)&&-1===s.getRtpHeaderExtensionIdInSection(c,t)){const e=s.splitLines(c),n=[];if(-1===i||this.hasRtpHeaderExtensionId(i)){o.push(c);continue}for(const r of e)if(n.push(r),/^a=sendrecv/.test(r.trim())){const e="a=extmap:"+i+" "+t;n.push(e)}c=n.join(s.CRLF)+s.CRLF}else if(-1!==n&&/^m=video/.test(c)&&s.getRtpHeaderExtensionIdInSection(c,t)!==n){const e=s.splitLines(c),i=[];for(const r of e){if(/^a=extmap:/.test(r.trim())){const e=r.split("a=extmap:")[1].split(" ");if(e[1]===t){if(!this.hasRtpHeaderExtensionId(n)){const e="a=extmap:"+n+" "+t;i.push(e)}continue}}i.push(r)}c=i.join(s.CRLF)+s.CRLF}o.push(c)}const a=o.join("");return new s(a)}ssrcForVideoSendingSection(){const e=this.sdp,t=s.splitSections(e);if(t.length<2)return"";const n=s.findActiveCameraSection(t);if(-1===n)return"";const i=s.matchPrefix(t[n],"a=ssrc-group:FID ");if(i.length<1)return"";const r=s.extractSSRCsFromFIDGroupLine(i[0]),[o]=r.split(" ").map((e=>parseInt(e,10)));return o.toString()}videoSendSectionHasDifferentSSRC(e){const t=this.ssrcForVideoSendingSection(),n=e.ssrcForVideoSendingSection();if(""===t||""===n)return!1;const i=parseInt(t,10),r=parseInt(n,10);return i!==r}removeH264SupportFromSendSection(){const e=this.sdp,t=s.splitSections(e),n=s.findActiveCameraSection(t);if(-1===n)return new s(this.sdp);const i=t[n],r=s.splitLines(i),o=[],a=new Map;r.forEach((e=>{if(/^a=rtpmap:/.test(e)){const t=/^a=rtpmap:([0-9]+)\s/.exec(e);t&&e.toLowerCase().includes("h264")&&o.push(parseInt(t[1],10))}if(/^a=fmtp:/.test(e)){const t=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(e);if(t&&3===t.length){const e=parseInt(t[1],10),n=parseInt(t[2],10);a.has(n)?a.get(n).push(e):a.set(n,[e])}}}));const c=new Set;for(const s of o){c.add(s);const e=a.get(s);if(e)for(const t of e)c.add(t)}if(o.length>0){const e=r[0].split(" ");r[0]=e.filter((e=>!c.has(parseInt(e)))).join(" ")}const l=r.filter((e=>{if(!e.includes("rtpmap")&&!e.includes("rtcp-fb")&&!e.includes("fmtp"))return!0;for(const t of c)if(e.includes(t.toString()))return!1;return!0}));t[n]=l.join(s.CRLF)+s.CRLF;const d=t.join("");return new s(d)}mediaSections(){const e=s.splitSections(this.sdp);if(e.length<2)return[];const t=[];for(let n=1;n<e.length;n++){const i=new r.default,o=s.splitLines(e[n]);for(const e of o){const t=s.mediaType(e);if(void 0!==t){i.mediaType=t;continue}const n=s.direction(e);if(void 0!==n){i.direction=n;continue}const r=s.mid(e);void 0===r||(i.mid=r)}t.push(i)}return t}static getRtpHeaderExtensionIdInSection(e,t){const n=s.splitLines(e);for(const i of n)if(/^a=extmap:/.test(i.trim())){const e=i.split("a=extmap:")[1].split(" "),n=+e[0];if(e[1]===t)return n}return-1}getRtpHeaderExtensionId(e){const t=s.splitSections(this.sdp);for(const n of t)if(/^m=video/.test(n)){const t=s.getRtpHeaderExtensionIdInSection(n,e);if(-1!==t)return t}return-1}hasRtpHeaderExtensionId(e){const t=s.splitLines(this.sdp);for(const n of t)if(/^a=extmap:/.test(n.trim())){const t=n.split("a=extmap:")[1].split(" "),i=+t[0];if(i===e)return!0}return!1}withVideoSendCodecPreferences(e){const t=this.sdp,n=s.splitSections(t),i=s.findActiveCameraSection(n);if(-1===i)return new s(this.sdp);n[i]=this.sectionWithCodecPreferences(n[i],e);const r=n.join("");return new s(r)}sectionWithCodecPreferences(e,t){const n=new Map,i=s.splitLines(e);i.forEach((e=>{if(/^a=rtpmap:/.test(e))for(const r of t){if(!e.includes(`${r.codecName}/${r.codecCapability.clockRate}`))continue;const t=/^a=rtpmap:([0-9]+)\s/.exec(e);let o=!1;if(void 0!==r.codecCapability.sdpFmtpLine){for(const e of i)if(e.startsWith(`a=fmtp:${t[1]} ${r.codecCapability.sdpFmtpLine}`)){o=!0;break}}else o=!0;if(o){n.set(r.codecName,t[1]);break}}}));const r=new Set(n.values()),o=i[0].split(" ").filter((e=>!r.has(e))),a=Array.from(n.values()).sort(((e,i)=>{const r=t.findIndex((t=>n.get(t.codecName)===e)),o=t.findIndex((e=>n.get(e.codecName)===i));return r-o}));return o.splice(3,0,...a.values()),i[0]=o.join(" "),i.join(s.CRLF)+s.CRLF}highestPriorityVideoSendCodec(){const e=this.sdp,t=s.splitSections(e),n=s.findActiveCameraSection(t);if(-1===n)return;const i=s.splitLines(t[n]),r=i[0].split(" ");if(r.length<4)return;const a=r[3];let c,l,d;for(const o of i){const e=/^a=rtpmap:([0-9]+)\s/.exec(o);if(null===e||e.length<2||e[1]!==a)continue;const t=o.split(" "),n=t[1].split("/");if(!(void 0===n||n.length<2)){c=n[0],l=n[1];for(const e of i)if(e.startsWith(`a=fmtp:${a}`)){const t=e.split(" ");if(void 0===t||t.length<2)return;d=t[1]}else;break}}return void 0!==c?new o.default(c,{clockRate:parseInt(l),mimeType:`video/${c}`,sdpFmtpLine:d}):void 0}}t["default"]=s,s.CRLF="\r\n",s.rfc7587LowestBitrate=6e3,s.rfc7587HighestBitrate=51e4},8509:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SDPCandidateType=void 0,function(e){e["Host"]="host",e["ServerReflexive"]="srflx",e["PeerReflexive"]="prflx",e["Relay"]="relay"}(n=t.SDPCandidateType||(t.SDPCandidateType={})),t["default"]=n},8042:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},1420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4059);class r{constructor(e,t){this.codecName=e,this.codecCapability=t}equals(e){return void 0!==e&&this.codecName===e.codecName&&this.codecCapability.mimeType===e.codecCapability.mimeType&&this.codecCapability.clockRate===e.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===e.codecCapability.sdpFmtpLine}static vp8(){return new r("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264ConstrainedBaselineProfile(){return new r("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264(){return this.h264ConstrainedBaselineProfile()}static fromSignaled(e){switch(e){case i.SdkVideoCodecCapability.VP8:return this.vp8();case i.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return this.h264ConstrainedBaselineProfile();default:return}}}t["default"]=r},2484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(524);class r{constructor(e){this.logger=e}compress(e,t){if(t.length>0){const e=Math.min(t.length,r.MAX_DICTIONARY_SIZE);t=t.slice(0,e)}const n={memLevel:r.Z_MEM_LEVEL,dictionary:t},o=i.deflateRaw(e,n);return o}decompress(e,t){if(t.length>0){const e=Math.min(t.length,r.MAX_DICTIONARY_SIZE);t=t.slice(0,e)}const n={to:"string",dictionary:t,chunkSize:4096};let o="";try{o=i.inflateRaw(e,n)}catch(s){this.logger.error(`failed to decompress the string with error: [${s}]`)}return o}}t["default"]=r,r.Z_MEM_LEVEL=9,r.MAX_DICTIONARY_SIZE=31744},6040:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5727),r=n(7905),o=n(4739),s=n(1735);class a{constructor(e){this.logger=e,this.currentState=o.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}perform(e,t){const n=this.currentState;if(n===o.SessionStateControllerState.NotConnected&&e===i.SessionStateControllerAction.Connect)this.transition(o.SessionStateControllerState.Connecting,e);else if(n===o.SessionStateControllerState.Connecting&&e===i.SessionStateControllerAction.Fail)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(n===o.SessionStateControllerState.Connecting&&e===i.SessionStateControllerAction.FinishConnecting)this.transition(o.SessionStateControllerState.Connected,e);else if(n===o.SessionStateControllerState.Connected&&e===i.SessionStateControllerAction.Disconnect)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(n===o.SessionStateControllerState.Connected&&e===i.SessionStateControllerAction.Reconnect)this.transition(o.SessionStateControllerState.Connecting,e);else if(n===o.SessionStateControllerState.Connected&&e===i.SessionStateControllerAction.Fail)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(n===o.SessionStateControllerState.Connected&&e===i.SessionStateControllerAction.Update)this.transition(o.SessionStateControllerState.Updating,e);else if(n===o.SessionStateControllerState.Updating&&e===i.SessionStateControllerAction.Fail)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(n===o.SessionStateControllerState.Updating&&e===i.SessionStateControllerAction.FinishUpdating)this.transition(o.SessionStateControllerState.Connected,e);else{if(n!==o.SessionStateControllerState.Disconnecting||e!==i.SessionStateControllerAction.FinishDisconnecting)return this.canDefer(e)?(this.logger.info(`deferring transition from ${o.SessionStateControllerState[this.currentState]} with ${i.SessionStateControllerAction[e]}`),this.deferAction(e,t),s.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${o.SessionStateControllerState[this.currentState]} with ${i.SessionStateControllerAction[e]}`),s.SessionStateControllerTransitionResult.NoTransitionAvailable);this.transition(o.SessionStateControllerState.NotConnected,e)}try{t()}catch(r){return this.logger.error(`error during state ${o.SessionStateControllerState[this.currentState]} with action ${i.SessionStateControllerAction[e]}: ${r}`),this.logger.info(`rolling back transition to ${o.SessionStateControllerState[n]}`),this.currentState=n,s.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),s.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(e,t){this.logger.info(`transitioning from ${o.SessionStateControllerState[this.currentState]} to ${o.SessionStateControllerState[e]} with ${i.SessionStateControllerAction[t]}`),this.currentState=e}deferPriority(e){switch(e){case i.SessionStateControllerAction.Disconnect:return r.SessionStateControllerDeferPriority.VeryHigh;case i.SessionStateControllerAction.Fail:return r.SessionStateControllerDeferPriority.High;case i.SessionStateControllerAction.Reconnect:return r.SessionStateControllerDeferPriority.Medium;case i.SessionStateControllerAction.Update:return r.SessionStateControllerDeferPriority.Low;default:return r.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(e,t){null!==this.deferredAction&&this.deferPriority(this.deferredAction)>this.deferPriority(e)||(this.deferredAction=e,this.deferredWork=t)}canDefer(e){return this.deferPriority(e)!==r.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===o.SessionStateControllerState.Connecting||this.currentState===o.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const e=this.deferredAction,t=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${i.SessionStateControllerAction[e]}`),this.perform(e,t)!==s.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${i.SessionStateControllerAction[e]} in state ${o.SessionStateControllerState[this.currentState]}`)}}t["default"]=a},5727:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerAction=void 0,function(e){e[e["Connect"]=0]="Connect",e[e["FinishConnecting"]=1]="FinishConnecting",e[e["Update"]=2]="Update",e[e["FinishUpdating"]=3]="FinishUpdating",e[e["Reconnect"]=4]="Reconnect",e[e["Disconnect"]=5]="Disconnect",e[e["Fail"]=6]="Fail",e[e["FinishDisconnecting"]=7]="FinishDisconnecting"}(n=t.SessionStateControllerAction||(t.SessionStateControllerAction={})),t["default"]=n},7905:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerDeferPriority=void 0,function(e){e[e["DoNotDefer"]=0]="DoNotDefer",e[e["Low"]=1]="Low",e[e["Medium"]=2]="Medium",e[e["High"]=3]="High",e[e["VeryHigh"]=4]="VeryHigh"}(n=t.SessionStateControllerDeferPriority||(t.SessionStateControllerDeferPriority={})),t["default"]=n},4739:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerState=void 0,function(e){e[e["NotConnected"]=0]="NotConnected",e[e["Connecting"]=1]="Connecting",e[e["Connected"]=2]="Connected",e[e["Updating"]=3]="Updating",e[e["Disconnecting"]=4]="Disconnecting"}(n=t.SessionStateControllerState||(t.SessionStateControllerState={})),t["default"]=n},1735:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerTransitionResult=void 0,function(e){e[e["Transitioned"]=0]="Transitioned",e[e["NoTransitionAvailable"]=1]="NoTransitionAvailable",e[e["DeferredTransition"]=2]="DeferredTransition",e[e["TransitionFailed"]=3]="TransitionFailed"}(n=t.SessionStateControllerTransitionResult||(t.SessionStateControllerTransitionResult={})),t["default"]=n},6849:function(e,t,n){"use strict";n(7658),n(2087),Object.defineProperty(t,"__esModule",{value:!0});const i=n(4380),r=n(7230),o=n(4059),s=n(4207),a=n(6032),c=n(4694),l=n(6387),d=n(8614);class u{constructor(e,t){this.webSocket=e,this.logger=t,this.unloadHandler=null,this.closeEventHandler=e=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new l.default(this,d.default.WebSocketClosed,null,e.code,e.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug((()=>"signaling client init")),this.audioSessionId=this.generateNewAudioSessionId()}registerObserver(e){this.logger.debug((()=>"registering signaling client observer")),this.observerQueue.add(e)}removeObserver(e){this.logger.debug((()=>"removing signaling client observer")),this.observerQueue.delete(e)}openConnection(e){this.logger.info("adding connection request to queue: "+e.url()),this.connectionRequestQueue.push(e),this.closeConnection()}pingPong(e){this.logger.debug((()=>"sending ping"));const t=o.SdkSignalFrame.create();return t.type=o.SdkSignalFrame.Type.PING_PONG,t.pingPong=e,this.sendMessage(t),t.timestampMs}join(e){this.logger.info("sending join");const t=o.SdkJoinFrame.create();t.protocolVersion=2,t.flags=o.SdkJoinFlags.HAS_STREAM_UPDATE;const n=new i.default,r={platformName:n.name(),platformVersion:n.version(),clientSource:s.default.sdkName,chimeSdkVersion:s.default.sdkVersion};if(e.applicationMetadata){const{appName:t,appVersion:n}=e.applicationMetadata;r.appName=t,r.appVersion=n}t.clientDetails=o.SdkClientDetails.create(r),t.audioSessionId=this.audioSessionId,t.wantsCompressedSdp=u.CLIENT_SUPPORTS_COMPRESSION,t.serverSideNetworkAdaption=c.convertServerSideNetworkAdaptionEnumToSignaled(e.serverSideNetworkAdaption),e.serverSideNetworkAdaption===c.default.BandwidthProbing&&(t.wantsServerSideNetworkProbingOnReceiveSideEstimator=!0),t.supportedServerSideNetworkAdaptions=e.supportedServerSideNetworkAdaptions.map(c.convertServerSideNetworkAdaptionEnumToSignaled);const a=o.SdkSignalFrame.create();a.type=o.SdkSignalFrame.Type.JOIN,a.join=t,this.sendMessage(a)}subscribe(e){const t=o.SdkSubscribeFrame.create();if(t.sendStreams=[],t.sdpOffer=e.sdpOffer,e.connectionTypeHasVideo&&(t.receiveStreamIds=e.receiveStreamIds),e.audioHost&&(t.audioCheckin=e.audioCheckin,t.audioHost=e.audioHost,t.audioMuted=e.audioMuted,!e.audioCheckin)){const n=o.SdkStreamDescriptor.create();n.mediaType=o.SdkStreamMediaType.AUDIO,n.trackLabel="AmazonChimeExpressAudio",n.attendeeId=e.attendeeId,n.streamId=1,n.groupId=1,n.framerate=15,n.maxBitrateKbps=600,n.avgBitrateBps=4e5,t.sendStreams.push(n)}if(t.compressedSdpOffer=e.compressedSdpOffer,t.duplex=o.SdkStreamServiceType.RX,e.localVideoEnabled){t.duplex=o.SdkStreamServiceType.DUPLEX;for(let n=0;n<e.videoStreamDescriptions.length;n++){const i=e.videoStreamDescriptions[n].clone();i.attendeeId=e.attendeeId,t.sendStreams.push(i.toStreamDescriptor())}}e.videoSubscriptionConfiguration.length>0&&(t.videoSubscriptionConfiguration=e.videoSubscriptionConfiguration.map(this.convertVideoSubscriptionConfiguration));const n=o.SdkSignalFrame.create();n.type=o.SdkSignalFrame.Type.SUBSCRIBE,n.sub=t,this.sendMessage(n)}remoteVideoUpdate(e,t){const n=o.SdkRemoteVideoUpdateFrame.create();n.addedOrUpdatedVideoSubscriptions=e.map(this.convertVideoSubscriptionConfiguration),n.removedVideoSubscriptionMids=t;const i=o.SdkSignalFrame.create();i.type=o.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,i.remoteVideoUpdate=n,this.sendMessage(i)}convertVideoSubscriptionConfiguration(e){const t=new o.SdkVideoSubscriptionConfiguration;return t.mid=e.mid,t.attendeeId=e.attendeeId,t.streamId=e.streamId,t.groupId=e.groupId,t.priority=e.priority,t.targetBitrateKbps=e.targetBitrateKbps,t}leave(){const e=o.SdkSignalFrame.create();e.type=o.SdkSignalFrame.Type.LEAVE,e.leave=o.SdkLeaveFrame.create(),this.sendMessage(e),this.logger.debug((()=>"sent leave"))}sendClientMetrics(e){const t=o.SdkSignalFrame.create();t.type=o.SdkSignalFrame.Type.CLIENT_METRIC,t.clientMetric=e,this.sendMessage(t)}sendDataMessage(e){const t=o.SdkSignalFrame.create();t.type=o.SdkSignalFrame.Type.DATA_MESSAGE,t.dataMessage=e,this.sendMessage(t)}closeConnection(){var e,t;if(this.webSocket.readyState()!==a.default.None&&this.webSocket.readyState()!==a.default.Closed){this.isClosing=!0,this.sendEvent(new l.default(this,d.default.WebSocketClosing,null));const n=new r.default(u.CLOSE_EVENT_TIMEOUT_MS),i=e=>{var t,r;null===(r=(t=this.webSocket).removeEventListener)||void 0===r||r.call(t,"close",i),n.stop(),this.closeEventHandler(e)};null===(t=(e=this.webSocket).removeEventListener)||void 0===t||t.call(e,"close",this.closeEventHandler),this.webSocket.addEventListener("close",i),n.start((()=>{i(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))})),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===a.default.Open&&!this.isClosing&&this.wasOpened}mute(e){const t=o.SdkSignalFrame.create();t.type=o.SdkSignalFrame.Type.AUDIO_CONTROL;const n=o.SdkAudioControlFrame.create();n.muted=e,t.audioControl=n,this.sendMessage(t)}pause(e){const t=o.SdkSignalFrame.create();t.type=o.SdkSignalFrame.Type.PAUSE,t.pause=o.SdkPauseResumeFrame.create(),t.pause.streamIds=e,this.sendMessage(t)}resume(e){const t=o.SdkSignalFrame.create();t.type=o.SdkSignalFrame.Type.RESUME,t.pause=o.SdkPauseResumeFrame.create(),t.pause.streamIds=e,this.sendMessage(t)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(e){e.timestampMs=Date.now(),this.logger.debug((()=>`sending: ${JSON.stringify(e)}`));const t=this.prependWithFrameTypeRTC(o.SdkSignalFrame.encode(e).finish());if(this.ready()){if(!this.webSocket.send(t))return void this.sendEvent(new l.default(this,d.default.WebSocketSendMessageFailure,null));this.sendEvent(new l.default(this,d.default.WebSocketSentMessage,null))}else this.sendEvent(new l.default(this,d.default.WebSocketSkippedMessage,null))}receiveMessage(e){let t;try{t=o.SdkSignalFrame.decode(e)}catch(n){return this.logger.info(`failed to decode: ${e}`),void this.sendEvent(new l.default(this,d.default.ProtocolDecodeFailure,null))}this.logger.debug((()=>`received: ${JSON.stringify(t)}`)),this.webSocket.readyState()===a.default.Open?this.sendEvent(new l.default(this,d.default.ReceivedSignalFrame,t)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(t)}`)}stripFrameTypeRTC(e){const t=e[0];return t!==u.FRAME_TYPE_RTC&&2!==t&&this.logger.warn(`expected FrameTypeRTC for message but got ${t}`),e.slice(1)}prependWithFrameTypeRTC(e){const t=new Uint8Array(e.length+1);return t[0]=u.FRAME_TYPE_RTC,t.set(e,1),t}serviceConnectionRequestQueue(){if(0===this.connectionRequestQueue.length)return void this.logger.info("no connection requests to service");const e=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${e.url()}`),this.isClosing=!1,this.webSocket.create(e.url(),e.protocols()),this.setUpEventListeners(),this.sendEvent(new l.default(this,d.default.WebSocketConnecting,null))}sendEvent(e){switch(e.type){case d.default.WebSocketMessage:case d.default.ReceivedSignalFrame:case d.default.WebSocketSentMessage:this.logger.debug((()=>`notifying event: ${d.default[e.type]}`));break;case d.default.WebSocketSkippedMessage:this.logger.debug((()=>`notifying event: ${d.default[e.type]}, websocket state=${a.default[this.webSocket.readyState()]}`));break;default:this.logger.info(`notifying event: ${d.default[e.type]}`);break}for(const t of this.observerQueue)t.handleSignalingClientEvent(e)}setUpEventListeners(){this.webSocket.addEventListener("open",(()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new l.default(this,d.default.WebSocketOpen,null))})),this.webSocket.addEventListener("message",(e=>{this.sendEvent(new l.default(this,d.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(e.data)))})),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",(()=>{!this.isClosing||this.wasOpened?this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new l.default(this,d.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new l.default(this,d.default.WebSocketFailed,null))):this.logger.info("ignoring error closing signaling while connecting")}))}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const e=n.g;e["window"]&&e["window"]["addEventListener"]&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const e=n.g;e["window"]&&e["window"]["removeEventListener"]&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const e=new Uint32Array(1),t=window.crypto.getRandomValues(e);return t[0]}promoteToPrimaryMeeting(e){const t=o.SdkMeetingSessionCredentials.create();t.attendeeId=e.attendeeId,t.externalUserId=e.externalUserId,t.joinToken=e.joinToken;const n=o.SdkPrimaryMeetingJoinFrame.create();n.credentials=t;const i=o.SdkSignalFrame.create();i.type=o.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,i.primaryMeetingJoin=n,this.sendMessage(i)}demoteFromPrimaryMeeting(){const e=o.SdkPrimaryMeetingLeaveFrame.create(),t=o.SdkSignalFrame.create();t.type=o.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,t.primaryMeetingLeave=e,this.sendMessage(t)}}t["default"]=u,u.FRAME_TYPE_RTC=5,u.CLOSE_EVENT_TIMEOUT_MS=2e3,u.CLIENT_SUPPORTS_COMPRESSION=!0},4694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertServerSideNetworkAdaptionEnumToSignaled=t.convertServerSideNetworkAdaptionEnumFromSignaled=t.ServerSideNetworkAdaption=void 0;const i=n(4059);var r;function o(e){switch(e){case i.SdkServerSideNetworkAdaption.DEFAULT:return r.Default;case i.SdkServerSideNetworkAdaption.NONE:return r.None;case i.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return r.BandwidthProbing}}function s(e){switch(e){case r.Default:return i.SdkServerSideNetworkAdaption.DEFAULT;case r.None:return i.SdkServerSideNetworkAdaption.NONE;case r.BandwidthProbing:return i.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING}}(function(e){e[e["Default"]=0]="Default",e[e["None"]=1]="None",e[e["BandwidthProbing"]=2]="BandwidthProbing"})(r=t.ServerSideNetworkAdaption||(t.ServerSideNetworkAdaption={})),t["default"]=r,t.convertServerSideNetworkAdaptionEnumFromSignaled=o,t.convertServerSideNetworkAdaptionEnumToSignaled=s},687:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.signalingURL=e,this.joinToken=t}url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}}t["default"]=n},6387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8614);class r{constructor(e,t,n,i,r){this.client=e,this.type=t,this.message=n,this.closeCode=i,this.closeReason=r,this.timestampMs=Date.now()}isConnectionTerminated(){switch(this.type){case i.default.WebSocketFailed:case i.default.WebSocketError:case i.default.WebSocketClosing:case i.default.WebSocketClosed:return!0;default:return!1}}}t["default"]=r},8614:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SignalingClientEventType=void 0,function(e){e[e["WebSocketConnecting"]=0]="WebSocketConnecting",e[e["WebSocketOpen"]=1]="WebSocketOpen",e[e["WebSocketError"]=2]="WebSocketError",e[e["WebSocketClosing"]=3]="WebSocketClosing",e[e["WebSocketClosed"]=4]="WebSocketClosed",e[e["WebSocketFailed"]=5]="WebSocketFailed",e[e["WebSocketMessage"]=6]="WebSocketMessage",e[e["WebSocketSendMessageFailure"]=7]="WebSocketSendMessageFailure",e[e["WebSocketSentMessage"]=8]="WebSocketSentMessage",e[e["ProtocolDecodeFailure"]=9]="ProtocolDecodeFailure",e[e["ReceivedSignalFrame"]=10]="ReceivedSignalFrame",e[e["WebSocketSkippedMessage"]=11]="WebSocketSkippedMessage"}(n=t.SignalingClientEventType||(t.SignalingClientEventType={})),t["default"]=n},8586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4694);class r{constructor(e){this.applicationMetadata=e,this.serverSideNetworkAdaption=i.default.Default,this.supportedServerSideNetworkAdaptions=[]}}t["default"]=r},1788:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n,i,r,o,s,a,c,l){this.attendeeId=e,this.sdpOffer=t,this.audioHost=n,this.audioMuted=i,this.audioCheckin=r,this.receiveStreamIds=o,this.localVideoEnabled=s,this.videoStreamDescriptions=a,this.connectionTypeHasVideo=c,this.compressedSdpOffer=l,this.videoSubscriptionConfiguration=[]}}t["default"]=n},1737:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},4059:function(e,t,n){"use strict";n(2087),n(7658);var i=n(6425),r=i.Reader,o=i.Writer,s=i.util,a=i.roots["default"]||(i.roots["default"]={});a.SdkSignalFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.timestampMs=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.type=1,e.prototype.error=null,e.prototype.join=null,e.prototype.joinack=null,e.prototype.sub=null,e.prototype.suback=null,e.prototype.index=null,e.prototype.pause=null,e.prototype.leave=null,e.prototype.leaveAck=null,e.prototype.bitrates=null,e.prototype.audioControl=null,e.prototype.audioMetadata=null,e.prototype.audioStreamIdInfo=null,e.prototype.pingPong=null,e.prototype.audioStatus=null,e.prototype.clientMetric=null,e.prototype.dataMessage=null,e.prototype.remoteVideoUpdate=null,e.prototype.primaryMeetingJoin=null,e.prototype.primaryMeetingJoinAck=null,e.prototype.primaryMeetingLeave=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),null!=e.join&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),null!=e.joinack&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),null!=e.sub&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),null!=e.suback&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),null!=e.pause&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),null!=e.leave&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),null!=e.leaveAck&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),null!=e.bitrates&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),null!=e.audioControl&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),null!=e.audioMetadata&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),null!=e.audioStreamIdInfo&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),null!=e.pingPong&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),null!=e.audioStatus&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),null!=e.clientMetric&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),null!=e.dataMessage&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),null!=e.remoteVideoUpdate&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),null!=e.primaryMeetingJoin&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),null!=e.primaryMeetingJoinAck&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),null!=e.primaryMeetingLeave&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkSignalFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.timestampMs=e.uint64();break;case 2:i.type=e.int32();break;case 3:i.error=a.SdkErrorFrame.decode(e,e.uint32());break;case 4:i.join=a.SdkJoinFrame.decode(e,e.uint32());break;case 5:i.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break;case 6:i.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break;case 7:i.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break;case 8:i.index=a.SdkIndexFrame.decode(e,e.uint32());break;case 10:i.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break;case 11:i.leave=a.SdkLeaveFrame.decode(e,e.uint32());break;case 12:i.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break;case 14:i.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break;case 17:i.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break;case 18:i.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break;case 19:i.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break;case 20:i.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break;case 21:i.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break;case 22:i.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break;case 23:i.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break;case 25:i.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break;case 26:i.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break;case 27:i.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break;case 28:i.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break;default:e.skipType(7&o);break}}if(!i.hasOwnProperty("timestampMs"))throw s.ProtocolError("missing required 'timestampMs'",{instance:i});if(!i.hasOwnProperty("type"))throw s.ProtocolError("missing required 'type'",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(!s.isInteger(e.timestampMs)&&!(e.timestampMs&&s.isInteger(e.timestampMs.low)&&s.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:break}if(null!=e.error&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(null!=e.join&&e.hasOwnProperty("join")){t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(null!=e.joinack&&e.hasOwnProperty("joinack")){t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(null!=e.sub&&e.hasOwnProperty("sub")){t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(null!=e.suback&&e.hasOwnProperty("suback")){t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(null!=e.index&&e.hasOwnProperty("index")){t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(null!=e.pause&&e.hasOwnProperty("pause")){t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(null!=e.leave&&e.hasOwnProperty("leave")){t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(null!=e.leaveAck&&e.hasOwnProperty("leaveAck")){t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(null!=e.bitrates&&e.hasOwnProperty("bitrates")){t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(null!=e.audioControl&&e.hasOwnProperty("audioControl")){t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(null!=e.audioMetadata&&e.hasOwnProperty("audioMetadata")){t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(null!=e.audioStreamIdInfo&&e.hasOwnProperty("audioStreamIdInfo")){t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(null!=e.pingPong&&e.hasOwnProperty("pingPong")){t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(null!=e.audioStatus&&e.hasOwnProperty("audioStatus")){t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(null!=e.clientMetric&&e.hasOwnProperty("clientMetric")){t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(null!=e.dataMessage&&e.hasOwnProperty("dataMessage")){t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(null!=e.remoteVideoUpdate&&e.hasOwnProperty("remoteVideoUpdate")){t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(null!=e.primaryMeetingJoin&&e.hasOwnProperty("primaryMeetingJoin")){t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(null!=e.primaryMeetingJoinAck&&e.hasOwnProperty("primaryMeetingJoinAck")){t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(null!=e.primaryMeetingLeave&&e.hasOwnProperty("primaryMeetingLeave")){t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}return null},e.fromObject=function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(null!=e.timestampMs&&(s.Long?(t.timestampMs=s.Long.fromValue(e.timestampMs)).unsigned=!0:"string"===typeof e.timestampMs?t.timestampMs=parseInt(e.timestampMs,10):"number"===typeof e.timestampMs?t.timestampMs=e.timestampMs:"object"===typeof e.timestampMs&&(t.timestampMs=new s.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break}if(null!=e.error){if("object"!==typeof e.error)throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(null!=e.join){if("object"!==typeof e.join)throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(null!=e.joinack){if("object"!==typeof e.joinack)throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(null!=e.sub){if("object"!==typeof e.sub)throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(null!=e.suback){if("object"!==typeof e.suback)throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(null!=e.index){if("object"!==typeof e.index)throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(null!=e.pause){if("object"!==typeof e.pause)throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(null!=e.leave){if("object"!==typeof e.leave)throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(null!=e.leaveAck){if("object"!==typeof e.leaveAck)throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(null!=e.bitrates){if("object"!==typeof e.bitrates)throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(null!=e.audioControl){if("object"!==typeof e.audioControl)throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(null!=e.audioMetadata){if("object"!==typeof e.audioMetadata)throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(null!=e.audioStreamIdInfo){if("object"!==typeof e.audioStreamIdInfo)throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(null!=e.pingPong){if("object"!==typeof e.pingPong)throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(null!=e.audioStatus){if("object"!==typeof e.audioStatus)throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(null!=e.clientMetric){if("object"!==typeof e.clientMetric)throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(null!=e.dataMessage){if("object"!==typeof e.dataMessage)throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(null!=e.remoteVideoUpdate){if("object"!==typeof e.remoteVideoUpdate)throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(null!=e.primaryMeetingJoin){if("object"!==typeof e.primaryMeetingJoin)throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(null!=e.primaryMeetingJoinAck){if("object"!==typeof e.primaryMeetingJoinAck)throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(null!=e.primaryMeetingLeave){if("object"!==typeof e.primaryMeetingLeave)throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}return t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(s.Long){var i=new s.Long(0,0,!0);n.timestampMs=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.timestampMs=t.longs===String?"0":0;n.type=t.enums===String?"JOIN":1,n.error=null,n.join=null,n.joinack=null,n.sub=null,n.suback=null,n.index=null,n.pause=null,n.leave=null,n.leaveAck=null,n.bitrates=null,n.audioControl=null,n.audioMetadata=null,n.audioStreamIdInfo=null,n.pingPong=null,n.audioStatus=null,n.clientMetric=null,n.dataMessage=null,n.remoteVideoUpdate=null,n.primaryMeetingJoin=null,n.primaryMeetingJoinAck=null,n.primaryMeetingLeave=null}return null!=e.timestampMs&&e.hasOwnProperty("timestampMs")&&("number"===typeof e.timestampMs?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?s.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new s.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkSignalFrame.Type[e.type]:e.type),null!=e.error&&e.hasOwnProperty("error")&&(n.error=a.SdkErrorFrame.toObject(e.error,t)),null!=e.join&&e.hasOwnProperty("join")&&(n.join=a.SdkJoinFrame.toObject(e.join,t)),null!=e.joinack&&e.hasOwnProperty("joinack")&&(n.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),null!=e.sub&&e.hasOwnProperty("sub")&&(n.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),null!=e.suback&&e.hasOwnProperty("suback")&&(n.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),null!=e.index&&e.hasOwnProperty("index")&&(n.index=a.SdkIndexFrame.toObject(e.index,t)),null!=e.pause&&e.hasOwnProperty("pause")&&(n.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),null!=e.leave&&e.hasOwnProperty("leave")&&(n.leave=a.SdkLeaveFrame.toObject(e.leave,t)),null!=e.leaveAck&&e.hasOwnProperty("leaveAck")&&(n.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),null!=e.bitrates&&e.hasOwnProperty("bitrates")&&(n.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),null!=e.audioControl&&e.hasOwnProperty("audioControl")&&(n.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),null!=e.audioMetadata&&e.hasOwnProperty("audioMetadata")&&(n.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),null!=e.audioStreamIdInfo&&e.hasOwnProperty("audioStreamIdInfo")&&(n.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),null!=e.pingPong&&e.hasOwnProperty("pingPong")&&(n.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),null!=e.clientMetric&&e.hasOwnProperty("clientMetric")&&(n.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),null!=e.dataMessage&&e.hasOwnProperty("dataMessage")&&(n.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),null!=e.remoteVideoUpdate&&e.hasOwnProperty("remoteVideoUpdate")&&(n.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),null!=e.primaryMeetingJoin&&e.hasOwnProperty("primaryMeetingJoin")&&(n.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),null!=e.primaryMeetingJoinAck&&e.hasOwnProperty("primaryMeetingJoinAck")&&(n.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),null!=e.primaryMeetingLeave&&e.hasOwnProperty("primaryMeetingLeave")&&(n.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[1]="JOIN"]=1,t[e[2]="JOIN_ACK"]=2,t[e[3]="SUBSCRIBE"]=3,t[e[4]="SUBSCRIBE_ACK"]=4,t[e[5]="INDEX"]=5,t[e[7]="PAUSE"]=7,t[e[8]="RESUME"]=8,t[e[9]="LEAVE"]=9,t[e[10]="LEAVE_ACK"]=10,t[e[13]="BITRATES"]=13,t[e[16]="AUDIO_CONTROL"]=16,t[e[17]="AUDIO_METADATA"]=17,t[e[18]="AUDIO_STREAM_ID_INFO"]=18,t[e[19]="PING_PONG"]=19,t[e[20]="AUDIO_STATUS"]=20,t[e[21]="CLIENT_METRIC"]=21,t[e[22]="DATA_MESSAGE"]=22,t[e[24]="REMOTE_VIDEO_UPDATE"]=24,t[e[25]="PRIMARY_MEETING_JOIN"]=25,t[e[26]="PRIMARY_MEETING_JOIN_ACK"]=26,t[e[27]="PRIMARY_MEETING_LEAVE"]=27,t}(),e}(),a.SdkErrorFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.description="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkErrorFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.status=e.uint32();break;case 2:i.description=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.status&&e.hasOwnProperty("status")&&!s.isInteger(e.status)?"status: integer expected":null!=e.description&&e.hasOwnProperty("description")&&!s.isString(e.description)?"description: string expected":null},e.fromObject=function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return null!=e.status&&(t.status=e.status>>>0),null!=e.description&&(t.description=String(e.description)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.status=0,n.description=""),null!=e.status&&e.hasOwnProperty("status")&&(n.status=e.status),null!=e.description&&e.hasOwnProperty("description")&&(n.description=e.description),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkJoinFlags=function(){var e={},t=Object.create(e);return t[e[2]="HAS_STREAM_UPDATE"]=2,t[e[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,t[e[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,t}(),a.SdkClientDetails=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.appName="",e.prototype.appVersion="",e.prototype.deviceModel="",e.prototype.deviceMake="",e.prototype.platformName="",e.prototype.platformVersion="",e.prototype.clientSource="",e.prototype.chimeSdkVersion="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.appName&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),null!=e.appVersion&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),null!=e.deviceModel&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),null!=e.deviceMake&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),null!=e.platformName&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),null!=e.platformVersion&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),null!=e.clientSource&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),null!=e.chimeSdkVersion&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkClientDetails;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.appName=e.string();break;case 2:i.appVersion=e.string();break;case 3:i.deviceModel=e.string();break;case 4:i.deviceMake=e.string();break;case 5:i.platformName=e.string();break;case 6:i.platformVersion=e.string();break;case 7:i.clientSource=e.string();break;case 8:i.chimeSdkVersion=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.appName&&e.hasOwnProperty("appName")&&!s.isString(e.appName)?"appName: string expected":null!=e.appVersion&&e.hasOwnProperty("appVersion")&&!s.isString(e.appVersion)?"appVersion: string expected":null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&!s.isString(e.deviceModel)?"deviceModel: string expected":null!=e.deviceMake&&e.hasOwnProperty("deviceMake")&&!s.isString(e.deviceMake)?"deviceMake: string expected":null!=e.platformName&&e.hasOwnProperty("platformName")&&!s.isString(e.platformName)?"platformName: string expected":null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&!s.isString(e.platformVersion)?"platformVersion: string expected":null!=e.clientSource&&e.hasOwnProperty("clientSource")&&!s.isString(e.clientSource)?"clientSource: string expected":null!=e.chimeSdkVersion&&e.hasOwnProperty("chimeSdkVersion")&&!s.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":null},e.fromObject=function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return null!=e.appName&&(t.appName=String(e.appName)),null!=e.appVersion&&(t.appVersion=String(e.appVersion)),null!=e.deviceModel&&(t.deviceModel=String(e.deviceModel)),null!=e.deviceMake&&(t.deviceMake=String(e.deviceMake)),null!=e.platformName&&(t.platformName=String(e.platformName)),null!=e.platformVersion&&(t.platformVersion=String(e.platformVersion)),null!=e.clientSource&&(t.clientSource=String(e.clientSource)),null!=e.chimeSdkVersion&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.appName="",n.appVersion="",n.deviceModel="",n.deviceMake="",n.platformName="",n.platformVersion="",n.clientSource="",n.chimeSdkVersion=""),null!=e.appName&&e.hasOwnProperty("appName")&&(n.appName=e.appName),null!=e.appVersion&&e.hasOwnProperty("appVersion")&&(n.appVersion=e.appVersion),null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),null!=e.deviceMake&&e.hasOwnProperty("deviceMake")&&(n.deviceMake=e.deviceMake),null!=e.platformName&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),null!=e.clientSource&&e.hasOwnProperty("clientSource")&&(n.clientSource=e.clientSource),null!=e.chimeSdkVersion&&e.hasOwnProperty("chimeSdkVersion")&&(n.chimeSdkVersion=e.chimeSdkVersion),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkServerSideNetworkAdaption=function(){var e={},t=Object.create(e);return t[e[1]="DEFAULT"]=1,t[e[2]="NONE"]=2,t[e[3]="BANDWIDTH_PROBING"]=3,t}(),a.SdkJoinFrame=function(){function e(e){if(this.supportedServerSideNetworkAdaptions=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.protocolVersion=2,e.prototype.maxNumOfVideos=0,e.prototype.flags=0,e.prototype.clientDetails=null,e.prototype.audioSessionId=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.wantsCompressedSdp=!1,e.prototype.wantsServerSideNetworkProbingOnReceiveSideEstimator=!1,e.prototype.serverSideNetworkAdaption=1,e.prototype.supportedServerSideNetworkAdaptions=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.protocolVersion&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),null!=e.maxNumOfVideos&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),null!=e.clientDetails&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),null!=e.audioSessionId&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),null!=e.wantsCompressedSdp&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),null!=e.wantsServerSideNetworkProbingOnReceiveSideEstimator&&Object.hasOwnProperty.call(e,"wantsServerSideNetworkProbingOnReceiveSideEstimator")&&t.uint32(64).bool(e.wantsServerSideNetworkProbingOnReceiveSideEstimator),null!=e.serverSideNetworkAdaption&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),null!=e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length)for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkJoinFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.protocolVersion=e.uint32();break;case 2:i.maxNumOfVideos=e.uint32();break;case 3:i.flags=e.uint32();break;case 4:i.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break;case 6:i.audioSessionId=e.uint64();break;case 7:i.wantsCompressedSdp=e.bool();break;case 8:i.wantsServerSideNetworkProbingOnReceiveSideEstimator=e.bool();break;case 10:i.serverSideNetworkAdaption=e.int32();break;case 11:if(i.supportedServerSideNetworkAdaptions&&i.supportedServerSideNetworkAdaptions.length||(i.supportedServerSideNetworkAdaptions=[]),2===(7&o)){var s=e.uint32()+e.pos;while(e.pos<s)i.supportedServerSideNetworkAdaptions.push(e.int32())}else i.supportedServerSideNetworkAdaptions.push(e.int32());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.protocolVersion&&e.hasOwnProperty("protocolVersion")&&!s.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(null!=e.maxNumOfVideos&&e.hasOwnProperty("maxNumOfVideos")&&!s.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(null!=e.flags&&e.hasOwnProperty("flags")&&!s.isInteger(e.flags))return"flags: integer expected";if(null!=e.clientDetails&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(null!=e.audioSessionId&&e.hasOwnProperty("audioSessionId")&&!s.isInteger(e.audioSessionId)&&!(e.audioSessionId&&s.isInteger(e.audioSessionId.low)&&s.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(null!=e.wantsCompressedSdp&&e.hasOwnProperty("wantsCompressedSdp")&&"boolean"!==typeof e.wantsCompressedSdp)return"wantsCompressedSdp: boolean expected";if(null!=e.wantsServerSideNetworkProbingOnReceiveSideEstimator&&e.hasOwnProperty("wantsServerSideNetworkProbingOnReceiveSideEstimator")&&"boolean"!==typeof e.wantsServerSideNetworkProbingOnReceiveSideEstimator)return"wantsServerSideNetworkProbingOnReceiveSideEstimator: boolean expected";if(null!=e.serverSideNetworkAdaption&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:break}if(null!=e.supportedServerSideNetworkAdaptions&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:break}}return null},e.fromObject=function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(null!=e.protocolVersion&&(t.protocolVersion=e.protocolVersion>>>0),null!=e.maxNumOfVideos&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),null!=e.flags&&(t.flags=e.flags>>>0),null!=e.clientDetails){if("object"!==typeof e.clientDetails)throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(null!=e.audioSessionId&&(s.Long?(t.audioSessionId=s.Long.fromValue(e.audioSessionId)).unsigned=!0:"string"===typeof e.audioSessionId?t.audioSessionId=parseInt(e.audioSessionId,10):"number"===typeof e.audioSessionId?t.audioSessionId=e.audioSessionId:"object"===typeof e.audioSessionId&&(t.audioSessionId=new s.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),null!=e.wantsCompressedSdp&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),null!=e.wantsServerSideNetworkProbingOnReceiveSideEstimator&&(t.wantsServerSideNetworkProbingOnReceiveSideEstimator=Boolean(e.wantsServerSideNetworkProbingOnReceiveSideEstimator)),e.serverSideNetworkAdaption){case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[n]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[n]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[n]=3;break}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.supportedServerSideNetworkAdaptions=[]),t.defaults){if(n.protocolVersion=2,n.maxNumOfVideos=0,n.flags=0,n.clientDetails=null,s.Long){var i=new s.Long(0,0,!0);n.audioSessionId=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.audioSessionId=t.longs===String?"0":0;n.wantsCompressedSdp=!1,n.wantsServerSideNetworkProbingOnReceiveSideEstimator=!1,n.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1}if(null!=e.protocolVersion&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),null!=e.maxNumOfVideos&&e.hasOwnProperty("maxNumOfVideos")&&(n.maxNumOfVideos=e.maxNumOfVideos),null!=e.flags&&e.hasOwnProperty("flags")&&(n.flags=e.flags),null!=e.clientDetails&&e.hasOwnProperty("clientDetails")&&(n.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),null!=e.audioSessionId&&e.hasOwnProperty("audioSessionId")&&("number"===typeof e.audioSessionId?n.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:n.audioSessionId=t.longs===String?s.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new s.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),null!=e.wantsCompressedSdp&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),null!=e.wantsServerSideNetworkProbingOnReceiveSideEstimator&&e.hasOwnProperty("wantsServerSideNetworkProbingOnReceiveSideEstimator")&&(n.wantsServerSideNetworkProbingOnReceiveSideEstimator=e.wantsServerSideNetworkProbingOnReceiveSideEstimator),null!=e.serverSideNetworkAdaption&&e.hasOwnProperty("serverSideNetworkAdaption")&&(n.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){n.supportedServerSideNetworkAdaptions=[];for(var r=0;r<e.supportedServerSideNetworkAdaptions.length;++r)n.supportedServerSideNetworkAdaptions[r]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[r]]:e.supportedServerSideNetworkAdaptions[r]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkJoinAckFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.turnCredentials=null,e.prototype.videoSubscriptionLimit=0,e.prototype.wantsCompressedSdp=!1,e.prototype.defaultServerSideNetworkAdaption=1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.turnCredentials&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),null!=e.videoSubscriptionLimit&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),null!=e.wantsCompressedSdp&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),null!=e.defaultServerSideNetworkAdaption&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkJoinAckFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break;case 2:i.videoSubscriptionLimit=e.uint32();break;case 3:i.wantsCompressedSdp=e.bool();break;case 4:i.defaultServerSideNetworkAdaption=e.int32();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.turnCredentials&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(null!=e.videoSubscriptionLimit&&e.hasOwnProperty("videoSubscriptionLimit")&&!s.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(null!=e.wantsCompressedSdp&&e.hasOwnProperty("wantsCompressedSdp")&&"boolean"!==typeof e.wantsCompressedSdp)return"wantsCompressedSdp: boolean expected";if(null!=e.defaultServerSideNetworkAdaption&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:break}return null},e.fromObject=function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(null!=e.turnCredentials){if("object"!==typeof e.turnCredentials)throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(null!=e.videoSubscriptionLimit&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),null!=e.wantsCompressedSdp&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.turnCredentials=null,n.videoSubscriptionLimit=0,n.wantsCompressedSdp=!1,n.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),null!=e.turnCredentials&&e.hasOwnProperty("turnCredentials")&&(n.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),null!=e.videoSubscriptionLimit&&e.hasOwnProperty("videoSubscriptionLimit")&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),null!=e.wantsCompressedSdp&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),null!=e.defaultServerSideNetworkAdaption&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(n.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkLeaveFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkLeaveFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkLeaveAckFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkLeaveAckFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkStreamServiceType=function(){var e={},t=Object.create(e);return t[e[1]="RX"]=1,t[e[2]="TX"]=2,t[e[3]="DUPLEX"]=3,t}(),a.SdkStreamMediaType=function(){var e={},t=Object.create(e);return t[e[1]="AUDIO"]=1,t[e[2]="VIDEO"]=2,t}(),a.SdkSubscribeFrame=function(){function e(e){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.duplex=1,e.prototype.sendStreams=s.emptyArray,e.prototype.receiveStreamIds=s.emptyArray,e.prototype.sdpOffer="",e.prototype.audioHost="",e.prototype.audioCheckin=!1,e.prototype.audioMuted=!1,e.prototype.compressedSdpOffer=s.newBuffer([]),e.prototype.videoSubscriptionConfiguration=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.duplex&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),null!=e.sendStreams&&e.sendStreams.length)for(var n=0;n<e.sendStreams.length;++n)a.SdkStreamDescriptor.encode(e.sendStreams[n],t.uint32(18).fork()).ldelim();if(null!=e.receiveStreamIds&&e.receiveStreamIds.length)for(n=0;n<e.receiveStreamIds.length;++n)t.uint32(24).uint32(e.receiveStreamIds[n]);if(null!=e.sdpOffer&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),null!=e.audioHost&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),null!=e.audioCheckin&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),null!=e.audioMuted&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),null!=e.compressedSdpOffer&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),null!=e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length)for(n=0;n<e.videoSubscriptionConfiguration.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[n],t.uint32(74).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkSubscribeFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.duplex=e.int32();break;case 2:i.sendStreams&&i.sendStreams.length||(i.sendStreams=[]),i.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(i.receiveStreamIds&&i.receiveStreamIds.length||(i.receiveStreamIds=[]),2===(7&o)){var s=e.uint32()+e.pos;while(e.pos<s)i.receiveStreamIds.push(e.uint32())}else i.receiveStreamIds.push(e.uint32());break;case 4:i.sdpOffer=e.string();break;case 5:i.audioHost=e.string();break;case 6:i.audioCheckin=e.bool();break;case 7:i.audioMuted=e.bool();break;case 8:i.compressedSdpOffer=e.bytes();break;case 9:i.videoSubscriptionConfiguration&&i.videoSubscriptionConfiguration.length||(i.videoSubscriptionConfiguration=[]),i.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.duplex&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(null!=e.sendStreams&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var n=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(n)return"sendStreams."+n}}if(null!=e.receiveStreamIds&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(t=0;t<e.receiveStreamIds.length;++t)if(!s.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(null!=e.sdpOffer&&e.hasOwnProperty("sdpOffer")&&!s.isString(e.sdpOffer))return"sdpOffer: string expected";if(null!=e.audioHost&&e.hasOwnProperty("audioHost")&&!s.isString(e.audioHost))return"audioHost: string expected";if(null!=e.audioCheckin&&e.hasOwnProperty("audioCheckin")&&"boolean"!==typeof e.audioCheckin)return"audioCheckin: boolean expected";if(null!=e.audioMuted&&e.hasOwnProperty("audioMuted")&&"boolean"!==typeof e.audioMuted)return"audioMuted: boolean expected";if(null!=e.compressedSdpOffer&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&"number"===typeof e.compressedSdpOffer.length||s.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(null!=e.videoSubscriptionConfiguration&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(t=0;t<e.videoSubscriptionConfiguration.length;++t){n=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(n)return"videoSubscriptionConfiguration."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n){if("object"!==typeof e.sendStreams[n])throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[n]=a.SdkStreamDescriptor.fromObject(e.sendStreams[n])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(n=0;n<e.receiveStreamIds.length;++n)t.receiveStreamIds[n]=e.receiveStreamIds[n]>>>0}if(null!=e.sdpOffer&&(t.sdpOffer=String(e.sdpOffer)),null!=e.audioHost&&(t.audioHost=String(e.audioHost)),null!=e.audioCheckin&&(t.audioCheckin=Boolean(e.audioCheckin)),null!=e.audioMuted&&(t.audioMuted=Boolean(e.audioMuted)),null!=e.compressedSdpOffer&&("string"===typeof e.compressedSdpOffer?s.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=s.newBuffer(s.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(n=0;n<e.videoSubscriptionConfiguration.length;++n){if("object"!==typeof e.videoSubscriptionConfiguration[n])throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sendStreams=[],n.receiveStreamIds=[],n.videoSubscriptionConfiguration=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpOffer="",n.audioHost="",n.audioCheckin=!1,n.audioMuted=!1,t.bytes===String?n.compressedSdpOffer="":(n.compressedSdpOffer=[],t.bytes!==Array&&(n.compressedSdpOffer=s.newBuffer(n.compressedSdpOffer)))),null!=e.duplex&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){n.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i)n.sendStreams[i]=a.SdkStreamDescriptor.toObject(e.sendStreams[i],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){n.receiveStreamIds=[];for(i=0;i<e.receiveStreamIds.length;++i)n.receiveStreamIds[i]=e.receiveStreamIds[i]}if(null!=e.sdpOffer&&e.hasOwnProperty("sdpOffer")&&(n.sdpOffer=e.sdpOffer),null!=e.audioHost&&e.hasOwnProperty("audioHost")&&(n.audioHost=e.audioHost),null!=e.audioCheckin&&e.hasOwnProperty("audioCheckin")&&(n.audioCheckin=e.audioCheckin),null!=e.audioMuted&&e.hasOwnProperty("audioMuted")&&(n.audioMuted=e.audioMuted),null!=e.compressedSdpOffer&&e.hasOwnProperty("compressedSdpOffer")&&(n.compressedSdpOffer=t.bytes===String?s.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){n.videoSubscriptionConfiguration=[];for(i=0;i<e.videoSubscriptionConfiguration.length;++i)n.videoSubscriptionConfiguration[i]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkSubscribeAckFrame=function(){function e(e){if(this.allocations=[],this.tracks=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.duplex=1,e.prototype.allocations=s.emptyArray,e.prototype.sdpAnswer="",e.prototype.tracks=s.emptyArray,e.prototype.compressedSdpAnswer=s.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.duplex&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),null!=e.allocations&&e.allocations.length)for(var n=0;n<e.allocations.length;++n)a.SdkStreamAllocation.encode(e.allocations[n],t.uint32(18).fork()).ldelim();if(null!=e.sdpAnswer&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),null!=e.tracks&&e.tracks.length)for(n=0;n<e.tracks.length;++n)a.SdkTrackMapping.encode(e.tracks[n],t.uint32(34).fork()).ldelim();return null!=e.compressedSdpAnswer&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkSubscribeAckFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.duplex=e.int32();break;case 2:i.allocations&&i.allocations.length||(i.allocations=[]),i.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break;case 3:i.sdpAnswer=e.string();break;case 4:i.tracks&&i.tracks.length||(i.tracks=[]),i.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break;case 5:i.compressedSdpAnswer=e.bytes();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.duplex&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(null!=e.allocations&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var n=a.SdkStreamAllocation.verify(e.allocations[t]);if(n)return"allocations."+n}}if(null!=e.sdpAnswer&&e.hasOwnProperty("sdpAnswer")&&!s.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(null!=e.tracks&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(t=0;t<e.tracks.length;++t){n=a.SdkTrackMapping.verify(e.tracks[t]);if(n)return"tracks."+n}}return null!=e.compressedSdpAnswer&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&"number"===typeof e.compressedSdpAnswer.length||s.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},e.fromObject=function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var n=0;n<e.allocations.length;++n){if("object"!==typeof e.allocations[n])throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[n]=a.SdkStreamAllocation.fromObject(e.allocations[n])}}if(null!=e.sdpAnswer&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(n=0;n<e.tracks.length;++n){if("object"!==typeof e.tracks[n])throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[n]=a.SdkTrackMapping.fromObject(e.tracks[n])}}return null!=e.compressedSdpAnswer&&("string"===typeof e.compressedSdpAnswer?s.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=s.newBuffer(s.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.allocations=[],n.tracks=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpAnswer="",t.bytes===String?n.compressedSdpAnswer="":(n.compressedSdpAnswer=[],t.bytes!==Array&&(n.compressedSdpAnswer=s.newBuffer(n.compressedSdpAnswer)))),null!=e.duplex&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){n.allocations=[];for(var i=0;i<e.allocations.length;++i)n.allocations[i]=a.SdkStreamAllocation.toObject(e.allocations[i],t)}if(null!=e.sdpAnswer&&e.hasOwnProperty("sdpAnswer")&&(n.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){n.tracks=[];for(i=0;i<e.tracks.length;++i)n.tracks[i]=a.SdkTrackMapping.toObject(e.tracks[i],t)}return null!=e.compressedSdpAnswer&&e.hasOwnProperty("compressedSdpAnswer")&&(n.compressedSdpAnswer=t.bytes===String?s.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkIndexFrame=function(){function e(e){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.atCapacity=!1,e.prototype.sources=s.emptyArray,e.prototype.pausedAtSourceIds=s.emptyArray,e.prototype.numParticipants=0,e.prototype.supportedReceiveCodecIntersection=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.atCapacity&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),null!=e.sources&&e.sources.length)for(var n=0;n<e.sources.length;++n)a.SdkStreamDescriptor.encode(e.sources[n],t.uint32(18).fork()).ldelim();if(null!=e.pausedAtSourceIds&&e.pausedAtSourceIds.length)for(n=0;n<e.pausedAtSourceIds.length;++n)t.uint32(24).uint32(e.pausedAtSourceIds[n]);if(null!=e.numParticipants&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),null!=e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length)for(n=0;n<e.supportedReceiveCodecIntersection.length;++n)t.uint32(40).int32(e.supportedReceiveCodecIntersection[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkIndexFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.atCapacity=e.bool();break;case 2:i.sources&&i.sources.length||(i.sources=[]),i.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(i.pausedAtSourceIds&&i.pausedAtSourceIds.length||(i.pausedAtSourceIds=[]),2===(7&o)){var s=e.uint32()+e.pos;while(e.pos<s)i.pausedAtSourceIds.push(e.uint32())}else i.pausedAtSourceIds.push(e.uint32());break;case 4:i.numParticipants=e.uint32();break;case 5:if(i.supportedReceiveCodecIntersection&&i.supportedReceiveCodecIntersection.length||(i.supportedReceiveCodecIntersection=[]),2===(7&o)){s=e.uint32()+e.pos;while(e.pos<s)i.supportedReceiveCodecIntersection.push(e.int32())}else i.supportedReceiveCodecIntersection.push(e.int32());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.atCapacity&&e.hasOwnProperty("atCapacity")&&"boolean"!==typeof e.atCapacity)return"atCapacity: boolean expected";if(null!=e.sources&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var n=a.SdkStreamDescriptor.verify(e.sources[t]);if(n)return"sources."+n}}if(null!=e.pausedAtSourceIds&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(t=0;t<e.pausedAtSourceIds.length;++t)if(!s.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(null!=e.numParticipants&&e.hasOwnProperty("numParticipants")&&!s.isInteger(e.numParticipants))return"numParticipants: integer expected";if(null!=e.supportedReceiveCodecIntersection&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 3:break}}return null},e.fromObject=function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(null!=e.atCapacity&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var n=0;n<e.sources.length;++n){if("object"!==typeof e.sources[n])throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[n]=a.SdkStreamDescriptor.fromObject(e.sources[n])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(n=0;n<e.pausedAtSourceIds.length;++n)t.pausedAtSourceIds[n]=e.pausedAtSourceIds[n]>>>0}if(null!=e.numParticipants&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(n=0;n<e.supportedReceiveCodecIntersection.length;++n)switch(e.supportedReceiveCodecIntersection[n]){default:case"VP8":case 1:t.supportedReceiveCodecIntersection[n]=1;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[n]=3;break}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sources=[],n.pausedAtSourceIds=[],n.supportedReceiveCodecIntersection=[]),t.defaults&&(n.atCapacity=!1,n.numParticipants=0),null!=e.atCapacity&&e.hasOwnProperty("atCapacity")&&(n.atCapacity=e.atCapacity),e.sources&&e.sources.length){n.sources=[];for(var i=0;i<e.sources.length;++i)n.sources[i]=a.SdkStreamDescriptor.toObject(e.sources[i],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){n.pausedAtSourceIds=[];for(i=0;i<e.pausedAtSourceIds.length;++i)n.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]}if(null!=e.numParticipants&&e.hasOwnProperty("numParticipants")&&(n.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){n.supportedReceiveCodecIntersection=[];for(i=0;i<e.supportedReceiveCodecIntersection.length;++i)n.supportedReceiveCodecIntersection[i]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[i]]:e.supportedReceiveCodecIntersection[i]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkPauseResumeFrame=function(){function e(e){if(this.streamIds=[],this.groupIds=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.streamIds=s.emptyArray,e.prototype.groupIds=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.streamIds&&e.streamIds.length)for(var n=0;n<e.streamIds.length;++n)t.uint32(8).uint32(e.streamIds[n]);if(null!=e.groupIds&&e.groupIds.length)for(n=0;n<e.groupIds.length;++n)t.uint32(16).uint32(e.groupIds[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkPauseResumeFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:if(i.streamIds&&i.streamIds.length||(i.streamIds=[]),2===(7&o)){var s=e.uint32()+e.pos;while(e.pos<s)i.streamIds.push(e.uint32())}else i.streamIds.push(e.uint32());break;case 2:if(i.groupIds&&i.groupIds.length||(i.groupIds=[]),2===(7&o)){s=e.uint32()+e.pos;while(e.pos<s)i.groupIds.push(e.uint32())}else i.groupIds.push(e.uint32());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.streamIds&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!s.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(null!=e.groupIds&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(t=0;t<e.groupIds.length;++t)if(!s.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},e.fromObject=function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var n=0;n<e.streamIds.length;++n)t.streamIds[n]=e.streamIds[n]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(n=0;n<e.groupIds.length;++n)t.groupIds[n]=e.groupIds[n]>>>0}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streamIds=[],n.groupIds=[]),e.streamIds&&e.streamIds.length){n.streamIds=[];for(var i=0;i<e.streamIds.length;++i)n.streamIds[i]=e.streamIds[i]}if(e.groupIds&&e.groupIds.length){n.groupIds=[];for(i=0;i<e.groupIds.length;++i)n.groupIds[i]=e.groupIds[i]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkBitrateFrame=function(){function e(e){if(this.bitrates=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.bitrates=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.bitrates&&e.bitrates.length)for(var n=0;n<e.bitrates.length;++n)a.SdkBitrate.encode(e.bitrates[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkBitrateFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.bitrates&&i.bitrates.length||(i.bitrates=[]),i.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.bitrates&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var n=a.SdkBitrate.verify(e.bitrates[t]);if(n)return"bitrates."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var n=0;n<e.bitrates.length;++n){if("object"!==typeof e.bitrates[n])throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[n]=a.SdkBitrate.fromObject(e.bitrates[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.bitrates=[]),e.bitrates&&e.bitrates.length){n.bitrates=[];for(var i=0;i<e.bitrates.length;++i)n.bitrates[i]=a.SdkBitrate.toObject(e.bitrates[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkStreamDescriptor=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.streamId=0,e.prototype.framerate=0,e.prototype.maxBitrateKbps=0,e.prototype.trackLabel="",e.prototype.groupId=0,e.prototype.avgBitrateBps=0,e.prototype.attendeeId="",e.prototype.mediaType=1,e.prototype.externalUserId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.streamId&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),null!=e.framerate&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),null!=e.maxBitrateKbps&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),null!=e.trackLabel&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),null!=e.groupId&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),null!=e.avgBitrateBps&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),null!=e.attendeeId&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),null!=e.mediaType&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),null!=e.externalUserId&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkStreamDescriptor;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.streamId=e.uint32();break;case 2:i.framerate=e.uint32();break;case 3:i.maxBitrateKbps=e.uint32();break;case 4:i.trackLabel=e.string();break;case 6:i.groupId=e.uint32();break;case 7:i.avgBitrateBps=e.uint32();break;case 8:i.attendeeId=e.string();break;case 9:i.mediaType=e.int32();break;case 10:i.externalUserId=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.streamId&&e.hasOwnProperty("streamId")&&!s.isInteger(e.streamId))return"streamId: integer expected";if(null!=e.framerate&&e.hasOwnProperty("framerate")&&!s.isInteger(e.framerate))return"framerate: integer expected";if(null!=e.maxBitrateKbps&&e.hasOwnProperty("maxBitrateKbps")&&!s.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&!s.isString(e.trackLabel))return"trackLabel: string expected";if(null!=e.groupId&&e.hasOwnProperty("groupId")&&!s.isInteger(e.groupId))return"groupId: integer expected";if(null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&!s.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&!s.isString(e.attendeeId))return"attendeeId: string expected";if(null!=e.mediaType&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&!s.isString(e.externalUserId)?"externalUserId: string expected":null},e.fromObject=function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.framerate&&(t.framerate=e.framerate>>>0),null!=e.maxBitrateKbps&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),null!=e.trackLabel&&(t.trackLabel=String(e.trackLabel)),null!=e.groupId&&(t.groupId=e.groupId>>>0),null!=e.avgBitrateBps&&(t.avgBitrateBps=e.avgBitrateBps>>>0),null!=e.attendeeId&&(t.attendeeId=String(e.attendeeId)),e.mediaType){case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return null!=e.externalUserId&&(t.externalUserId=String(e.externalUserId)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.framerate=0,n.maxBitrateKbps=0,n.trackLabel="",n.groupId=0,n.avgBitrateBps=0,n.attendeeId="",n.mediaType=t.enums===String?"AUDIO":1,n.externalUserId=""),null!=e.streamId&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),null!=e.framerate&&e.hasOwnProperty("framerate")&&(n.framerate=e.framerate),null!=e.maxBitrateKbps&&e.hasOwnProperty("maxBitrateKbps")&&(n.maxBitrateKbps=e.maxBitrateKbps),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),null!=e.groupId&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),null!=e.mediaType&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]:e.mediaType),null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkStreamAllocation=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.trackLabel="",e.prototype.streamId=0,e.prototype.groupId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.trackLabel&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),null!=e.streamId&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),null!=e.groupId&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkStreamAllocation;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.trackLabel=e.string();break;case 2:i.streamId=e.uint32();break;case 3:i.groupId=e.uint32();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&!s.isString(e.trackLabel)?"trackLabel: string expected":null!=e.streamId&&e.hasOwnProperty("streamId")&&!s.isInteger(e.streamId)?"streamId: integer expected":null!=e.groupId&&e.hasOwnProperty("groupId")&&!s.isInteger(e.groupId)?"groupId: integer expected":null},e.fromObject=function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return null!=e.trackLabel&&(t.trackLabel=String(e.trackLabel)),null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.groupId&&(t.groupId=e.groupId>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.trackLabel="",n.streamId=0,n.groupId=0),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),null!=e.streamId&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),null!=e.groupId&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTrackMapping=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.streamId=0,e.prototype.ssrc=0,e.prototype.trackLabel="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.streamId&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),null!=e.ssrc&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),null!=e.trackLabel&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTrackMapping;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.streamId=e.uint32();break;case 2:i.ssrc=e.uint32();break;case 3:i.trackLabel=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.streamId&&e.hasOwnProperty("streamId")&&!s.isInteger(e.streamId)?"streamId: integer expected":null!=e.ssrc&&e.hasOwnProperty("ssrc")&&!s.isInteger(e.ssrc)?"ssrc: integer expected":null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&!s.isString(e.trackLabel)?"trackLabel: string expected":null},e.fromObject=function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.ssrc&&(t.ssrc=e.ssrc>>>0),null!=e.trackLabel&&(t.trackLabel=String(e.trackLabel)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.ssrc=0,n.trackLabel=""),null!=e.streamId&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),null!=e.ssrc&&e.hasOwnProperty("ssrc")&&(n.ssrc=e.ssrc),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkBitrate=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sourceStreamId=0,e.prototype.avgBitrateBps=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.sourceStreamId&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),null!=e.avgBitrateBps&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkBitrate;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.sourceStreamId=e.uint32();break;case 2:i.avgBitrateBps=e.uint32();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.sourceStreamId&&e.hasOwnProperty("sourceStreamId")&&!s.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&!s.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},e.fromObject=function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return null!=e.sourceStreamId&&(t.sourceStreamId=e.sourceStreamId>>>0),null!=e.avgBitrateBps&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceStreamId=0,n.avgBitrateBps=0),null!=e.sourceStreamId&&e.hasOwnProperty("sourceStreamId")&&(n.sourceStreamId=e.sourceStreamId),null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkAudioControlFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.muted=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.muted&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkAudioControlFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.muted=e.bool();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.muted&&e.hasOwnProperty("muted")&&"boolean"!==typeof e.muted?"muted: boolean expected":null},e.fromObject=function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return null!=e.muted&&(t.muted=Boolean(e.muted)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.muted=!1),null!=e.muted&&e.hasOwnProperty("muted")&&(n.muted=e.muted),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkAudioMetadataFrame=function(){function e(e){if(this.attendeeStates=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.attendeeStates=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.attendeeStates&&e.attendeeStates.length)for(var n=0;n<e.attendeeStates.length;++n)a.SdkAudioAttendeeState.encode(e.attendeeStates[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkAudioMetadataFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.attendeeStates&&i.attendeeStates.length||(i.attendeeStates=[]),i.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.attendeeStates&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var n=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(n)return"attendeeStates."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n){if("object"!==typeof e.attendeeStates[n])throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[n]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){n.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i)n.attendeeStates[i]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkAudioAttendeeState=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.audioStreamId=0,e.prototype.volume=0,e.prototype.muted=!1,e.prototype.signalStrength=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.audioStreamId&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),null!=e.volume&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),null!=e.muted&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),null!=e.signalStrength&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkAudioAttendeeState;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.audioStreamId=e.uint32();break;case 2:i.volume=e.uint32();break;case 3:i.muted=e.bool();break;case 4:i.signalStrength=e.uint32();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&!s.isInteger(e.audioStreamId)?"audioStreamId: integer expected":null!=e.volume&&e.hasOwnProperty("volume")&&!s.isInteger(e.volume)?"volume: integer expected":null!=e.muted&&e.hasOwnProperty("muted")&&"boolean"!==typeof e.muted?"muted: boolean expected":null!=e.signalStrength&&e.hasOwnProperty("signalStrength")&&!s.isInteger(e.signalStrength)?"signalStrength: integer expected":null},e.fromObject=function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return null!=e.audioStreamId&&(t.audioStreamId=e.audioStreamId>>>0),null!=e.volume&&(t.volume=e.volume>>>0),null!=e.muted&&(t.muted=Boolean(e.muted)),null!=e.signalStrength&&(t.signalStrength=e.signalStrength>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.volume=0,n.muted=!1,n.signalStrength=0),null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),null!=e.volume&&e.hasOwnProperty("volume")&&(n.volume=e.volume),null!=e.muted&&e.hasOwnProperty("muted")&&(n.muted=e.muted),null!=e.signalStrength&&e.hasOwnProperty("signalStrength")&&(n.signalStrength=e.signalStrength),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkAudioStreamIdInfoFrame=function(){function e(e){if(this.streams=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.streams=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.streams&&e.streams.length)for(var n=0;n<e.streams.length;++n)a.SdkAudioStreamIdInfo.encode(e.streams[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkAudioStreamIdInfoFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.streams&&i.streams.length||(i.streams=[]),i.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.streams&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var n=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(n)return"streams."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var n=0;n<e.streams.length;++n){if("object"!==typeof e.streams[n])throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[n]=a.SdkAudioStreamIdInfo.fromObject(e.streams[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streams=[]),e.streams&&e.streams.length){n.streams=[];for(var i=0;i<e.streams.length;++i)n.streams[i]=a.SdkAudioStreamIdInfo.toObject(e.streams[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkAudioStreamIdInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.audioStreamId=0,e.prototype.attendeeId="",e.prototype.muted=!1,e.prototype.externalUserId="",e.prototype.dropped=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.audioStreamId&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),null!=e.attendeeId&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),null!=e.muted&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),null!=e.externalUserId&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),null!=e.dropped&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkAudioStreamIdInfo;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.audioStreamId=e.uint32();break;case 2:i.attendeeId=e.string();break;case 3:i.muted=e.bool();break;case 4:i.externalUserId=e.string();break;case 5:i.dropped=e.bool();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&!s.isInteger(e.audioStreamId)?"audioStreamId: integer expected":null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&!s.isString(e.attendeeId)?"attendeeId: string expected":null!=e.muted&&e.hasOwnProperty("muted")&&"boolean"!==typeof e.muted?"muted: boolean expected":null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&!s.isString(e.externalUserId)?"externalUserId: string expected":null!=e.dropped&&e.hasOwnProperty("dropped")&&"boolean"!==typeof e.dropped?"dropped: boolean expected":null},e.fromObject=function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return null!=e.audioStreamId&&(t.audioStreamId=e.audioStreamId>>>0),null!=e.attendeeId&&(t.attendeeId=String(e.attendeeId)),null!=e.muted&&(t.muted=Boolean(e.muted)),null!=e.externalUserId&&(t.externalUserId=String(e.externalUserId)),null!=e.dropped&&(t.dropped=Boolean(e.dropped)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.attendeeId="",n.muted=!1,n.externalUserId="",n.dropped=!1),null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),null!=e.muted&&e.hasOwnProperty("muted")&&(n.muted=e.muted),null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),null!=e.dropped&&e.hasOwnProperty("dropped")&&(n.dropped=e.dropped),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkPingPongType=function(){var e={},t=Object.create(e);return t[e[1]="PING"]=1,t[e[2]="PONG"]=2,t}(),a.SdkPingPongFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=1,e.prototype.pingId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkPingPongFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.type=e.int32();break;case 2:i.pingId=e.uint32();break;default:e.skipType(7&o);break}}if(!i.hasOwnProperty("type"))throw s.ProtocolError("missing required 'type'",{instance:i});if(!i.hasOwnProperty("pingId"))throw s.ProtocolError("missing required 'pingId'",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return s.isInteger(e.pingId)?null:"pingId: integer expected"},e.fromObject=function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return null!=e.pingId&&(t.pingId=e.pingId>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"PING":1,n.pingId=0),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkPingPongType[e.type]:e.type),null!=e.pingId&&e.hasOwnProperty("pingId")&&(n.pingId=e.pingId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkAudioStatusFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.audioStatus=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.audioStatus&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkAudioStatusFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.audioStatus=e.uint32();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&!s.isInteger(e.audioStatus)?"audioStatus: integer expected":null},e.fromObject=function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return null!=e.audioStatus&&(t.audioStatus=e.audioStatus>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStatus=0),null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=e.audioStatus),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkMetric=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=1,e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkMetric;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.type=e.int32();break;case 2:i.value=e.double();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:break}return null!=e.value&&e.hasOwnProperty("value")&&"number"!==typeof e.value?"value: number expected":null},e.fromObject=function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break}return null!=e.value&&(t.value=Number(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,n.value=0),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkMetric.Type[e.type]:e.type),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,t[e[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,t[e[3]="VIDEO_RETRANSMIT_BITRATE"]=3,t[e[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,t[e[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,t[e[6]="VIDEO_BUCKET_DELAY_MS"]=6,t[e[7]="STUN_RTT_MS"]=7,t[e[8]="SOCKET_DISCARDED_PPS"]=8,t[e[9]="RTC_MIC_JITTER_MS"]=9,t[e[10]="RTC_MIC_PPS"]=10,t[e[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,t[e[12]="RTC_MIC_BITRATE"]=12,t[e[13]="RTC_MIC_RTT_MS"]=13,t[e[14]="RTC_SPK_PPS"]=14,t[e[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,t[e[16]="RTC_SPK_JITTER_MS"]=16,t[e[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,t[e[18]="RTC_SPK_BITRATE"]=18,t[e[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,t[e[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,t[e[21]="VIDEO_SENT_RTT_MS"]=21,t[e[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,t[e[23]="VIDEO_NACKS_RECEIVED"]=23,t[e[24]="VIDEO_PLIS_RECEIVED"]=24,t[e[25]="VIDEO_ENCODE_MS"]=25,t[e[26]="VIDEO_INPUT_FPS"]=26,t[e[27]="VIDEO_ENCODE_FPS"]=27,t[e[28]="VIDEO_SENT_FPS"]=28,t[e[29]="VIDEO_FIRS_RECEIVED"]=29,t[e[30]="VIDEO_SENT_PPS"]=30,t[e[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,t[e[32]="VIDEO_SENT_BITRATE"]=32,t[e[33]="VIDEO_DROPPED_FPS"]=33,t[e[34]="VIDEO_TARGET_DELAY_MS"]=34,t[e[35]="VIDEO_DECODE_MS"]=35,t[e[36]="VIDEO_OUTPUT_FPS"]=36,t[e[37]="VIDEO_RECEIVED_PPS"]=37,t[e[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,t[e[39]="VIDEO_RENDER_DELAY_MS"]=39,t[e[40]="VIDEO_RECEIVED_FPS"]=40,t[e[41]="VIDEO_DECODE_FPS"]=41,t[e[42]="VIDEO_NACKS_SENT"]=42,t[e[43]="VIDEO_FIRS_SENT"]=43,t[e[44]="VIDEO_RECEIVED_BITRATE"]=44,t[e[45]="VIDEO_CURRENT_DELAY_MS"]=45,t[e[46]="VIDEO_JITTER_BUFFER_MS"]=46,t[e[47]="VIDEO_DISCARDED_PPS"]=47,t[e[48]="VIDEO_PLIS_SENT"]=48,t[e[49]="VIDEO_RECEIVED_JITTER_MS"]=49,t[e[64]="VIDEO_ENCODE_HEIGHT"]=64,t[e[66]="VIDEO_SENT_QP_SUM"]=66,t[e[69]="VIDEO_DECODE_HEIGHT"]=69,t[e[72]="VIDEO_RECEIVED_QP_SUM"]=72,t[e[86]="VIDEO_ENCODE_WIDTH"]=86,t[e[87]="VIDEO_DECODE_WIDTH"]=87,t[e[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,t[e[89]="VIDEO_DECODER_IS_HARDWARE"]=89,t}(),e}(),a.SdkStreamMetricFrame=function(){function e(e){if(this.metrics=[],this.dimensions=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.streamId=0,e.prototype.groupId=0,e.prototype.metrics=s.emptyArray,e.prototype.dimensions=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.streamId&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),null!=e.groupId&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),null!=e.metrics&&e.metrics.length)for(var n=0;n<e.metrics.length;++n)a.SdkMetric.encode(e.metrics[n],t.uint32(42).fork()).ldelim();if(null!=e.dimensions&&e.dimensions.length)for(n=0;n<e.dimensions.length;++n)a.SdkStreamDimension.encode(e.dimensions[n],t.uint32(50).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkStreamMetricFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 3:i.streamId=e.uint32();break;case 4:i.groupId=e.uint32();break;case 5:i.metrics&&i.metrics.length||(i.metrics=[]),i.metrics.push(a.SdkMetric.decode(e,e.uint32()));break;case 6:i.dimensions&&i.dimensions.length||(i.dimensions=[]),i.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.streamId&&e.hasOwnProperty("streamId")&&!s.isInteger(e.streamId))return"streamId: integer expected";if(null!=e.groupId&&e.hasOwnProperty("groupId")&&!s.isInteger(e.groupId))return"groupId: integer expected";if(null!=e.metrics&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var n=a.SdkMetric.verify(e.metrics[t]);if(n)return"metrics."+n}}if(null!=e.dimensions&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(t=0;t<e.dimensions.length;++t){n=a.SdkStreamDimension.verify(e.dimensions[t]);if(n)return"dimensions."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.groupId&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var n=0;n<e.metrics.length;++n){if("object"!==typeof e.metrics[n])throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[n]=a.SdkMetric.fromObject(e.metrics[n])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(n=0;n<e.dimensions.length;++n){if("object"!==typeof e.dimensions[n])throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[n]=a.SdkStreamDimension.fromObject(e.dimensions[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.metrics=[],n.dimensions=[]),t.defaults&&(n.streamId=0,n.groupId=0),null!=e.streamId&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),null!=e.groupId&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.metrics&&e.metrics.length){n.metrics=[];for(var i=0;i<e.metrics.length;++i)n.metrics[i]=a.SdkMetric.toObject(e.metrics[i],t)}if(e.dimensions&&e.dimensions.length){n.dimensions=[];for(i=0;i<e.dimensions.length;++i)n.dimensions[i]=a.SdkStreamDimension.toObject(e.dimensions[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkClientMetricFrame=function(){function e(e){if(this.globalMetrics=[],this.streamMetricFrames=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.globalMetrics=s.emptyArray,e.prototype.streamMetricFrames=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.globalMetrics&&e.globalMetrics.length)for(var n=0;n<e.globalMetrics.length;++n)a.SdkMetric.encode(e.globalMetrics[n],t.uint32(10).fork()).ldelim();if(null!=e.streamMetricFrames&&e.streamMetricFrames.length)for(n=0;n<e.streamMetricFrames.length;++n)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[n],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkClientMetricFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.globalMetrics&&i.globalMetrics.length||(i.globalMetrics=[]),i.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break;case 2:i.streamMetricFrames&&i.streamMetricFrames.length||(i.streamMetricFrames=[]),i.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.globalMetrics&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var n=a.SdkMetric.verify(e.globalMetrics[t]);if(n)return"globalMetrics."+n}}if(null!=e.streamMetricFrames&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(t=0;t<e.streamMetricFrames.length;++t){n=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(n)return"streamMetricFrames."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n){if("object"!==typeof e.globalMetrics[n])throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[n]=a.SdkMetric.fromObject(e.globalMetrics[n])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(n=0;n<e.streamMetricFrames.length;++n){if("object"!==typeof e.streamMetricFrames[n])throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[n]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.globalMetrics=[],n.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){n.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i)n.globalMetrics[i]=a.SdkMetric.toObject(e.globalMetrics[i],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){n.streamMetricFrames=[];for(i=0;i<e.streamMetricFrames.length;++i)n.streamMetricFrames[i]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkStreamDimension=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=1,e.prototype.value=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkStreamDimension;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.type=e.int32();break;case 2:i.value=a.SdkDimensionValue.decode(e,e.uint32());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(null!=e.value&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},e.fromObject=function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(null!=e.value){if("object"!==typeof e.value)throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ENCODER_NAME":1,n.value=null),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkStreamDimension.Type[e.type]:e.type),null!=e.value&&e.hasOwnProperty("value")&&(n.value=a.SdkDimensionValue.toObject(e.value,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[1]="VIDEO_ENCODER_NAME"]=1,t[e[2]="VIDEO_DECODER_NAME"]=2,t}(),e}(),a.SdkDimensionValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.stringValue="",e.prototype.boolValue=!1,e.prototype.uintValue=s.Long?s.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),null!=e.boolValue&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),null!=e.uintValue&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkDimensionValue;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.stringValue=e.string();break;case 2:i.boolValue=e.bool();break;case 3:i.uintValue=e.uint64();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.stringValue&&e.hasOwnProperty("stringValue")&&!s.isString(e.stringValue)?"stringValue: string expected":null!=e.boolValue&&e.hasOwnProperty("boolValue")&&"boolean"!==typeof e.boolValue?"boolValue: boolean expected":null==e.uintValue||!e.hasOwnProperty("uintValue")||s.isInteger(e.uintValue)||e.uintValue&&s.isInteger(e.uintValue.low)&&s.isInteger(e.uintValue.high)?null:"uintValue: integer|Long expected"},e.fromObject=function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return null!=e.stringValue&&(t.stringValue=String(e.stringValue)),null!=e.boolValue&&(t.boolValue=Boolean(e.boolValue)),null!=e.uintValue&&(s.Long?(t.uintValue=s.Long.fromValue(e.uintValue)).unsigned=!0:"string"===typeof e.uintValue?t.uintValue=parseInt(e.uintValue,10):"number"===typeof e.uintValue?t.uintValue=e.uintValue:"object"===typeof e.uintValue&&(t.uintValue=new s.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.stringValue="",n.boolValue=!1,s.Long){var i=new s.Long(0,0,!0);n.uintValue=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.uintValue=t.longs===String?"0":0;return null!=e.stringValue&&e.hasOwnProperty("stringValue")&&(n.stringValue=e.stringValue),null!=e.boolValue&&e.hasOwnProperty("boolValue")&&(n.boolValue=e.boolValue),null!=e.uintValue&&e.hasOwnProperty("uintValue")&&("number"===typeof e.uintValue?n.uintValue=t.longs===String?String(e.uintValue):e.uintValue:n.uintValue=t.longs===String?s.Long.prototype.toString.call(e.uintValue):t.longs===Number?new s.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkDataMessageFrame=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)a.SdkDataMessagePayload.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkDataMessageFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.messages&&i.messages.length||(i.messages=[]),i.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.messages&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=a.SdkDataMessagePayload.verify(e.messages[t]);if(n)return"messages."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if("object"!==typeof e.messages[n])throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[n]=a.SdkDataMessagePayload.fromObject(e.messages[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var i=0;i<e.messages.length;++i)n.messages[i]=a.SdkDataMessagePayload.toObject(e.messages[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkDataMessagePayload=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.data=s.newBuffer([]),e.prototype.lifetimeMs=0,e.prototype.senderAttendeeId="",e.prototype.ingestTimeNs=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.senderExternalUserId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.lifetimeMs&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),null!=e.senderAttendeeId&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),null!=e.ingestTimeNs&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),null!=e.senderExternalUserId&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkDataMessagePayload;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.topic=e.string();break;case 2:i.data=e.bytes();break;case 3:i.lifetimeMs=e.uint32();break;case 4:i.senderAttendeeId=e.string();break;case 5:i.ingestTimeNs=e.int64();break;case 6:i.senderExternalUserId=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.topic&&e.hasOwnProperty("topic")&&!s.isString(e.topic)?"topic: string expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"===typeof e.data.length||s.isString(e.data))?"data: buffer expected":null!=e.lifetimeMs&&e.hasOwnProperty("lifetimeMs")&&!s.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":null!=e.senderAttendeeId&&e.hasOwnProperty("senderAttendeeId")&&!s.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":null==e.ingestTimeNs||!e.hasOwnProperty("ingestTimeNs")||s.isInteger(e.ingestTimeNs)||e.ingestTimeNs&&s.isInteger(e.ingestTimeNs.low)&&s.isInteger(e.ingestTimeNs.high)?null!=e.senderExternalUserId&&e.hasOwnProperty("senderExternalUserId")&&!s.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null:"ingestTimeNs: integer|Long expected"},e.fromObject=function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return null!=e.topic&&(t.topic=String(e.topic)),null!=e.data&&("string"===typeof e.data?s.base64.decode(e.data,t.data=s.newBuffer(s.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.lifetimeMs&&(t.lifetimeMs=e.lifetimeMs>>>0),null!=e.senderAttendeeId&&(t.senderAttendeeId=String(e.senderAttendeeId)),null!=e.ingestTimeNs&&(s.Long?(t.ingestTimeNs=s.Long.fromValue(e.ingestTimeNs)).unsigned=!1:"string"===typeof e.ingestTimeNs?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):"number"===typeof e.ingestTimeNs?t.ingestTimeNs=e.ingestTimeNs:"object"===typeof e.ingestTimeNs&&(t.ingestTimeNs=new s.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),null!=e.senderExternalUserId&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.topic="",t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=s.newBuffer(n.data))),n.lifetimeMs=0,n.senderAttendeeId="",s.Long){var i=new s.Long(0,0,!1);n.ingestTimeNs=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.ingestTimeNs=t.longs===String?"0":0;n.senderExternalUserId=""}return null!=e.topic&&e.hasOwnProperty("topic")&&(n.topic=e.topic),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?s.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.lifetimeMs&&e.hasOwnProperty("lifetimeMs")&&(n.lifetimeMs=e.lifetimeMs),null!=e.senderAttendeeId&&e.hasOwnProperty("senderAttendeeId")&&(n.senderAttendeeId=e.senderAttendeeId),null!=e.ingestTimeNs&&e.hasOwnProperty("ingestTimeNs")&&("number"===typeof e.ingestTimeNs?n.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:n.ingestTimeNs=t.longs===String?s.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new s.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),null!=e.senderExternalUserId&&e.hasOwnProperty("senderExternalUserId")&&(n.senderExternalUserId=e.senderExternalUserId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTurnCredentials=function(){function e(e){if(this.uris=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.username="",e.prototype.password="",e.prototype.ttl=0,e.prototype.uris=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.username&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),null!=e.password&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),null!=e.ttl&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),null!=e.uris&&e.uris.length)for(var n=0;n<e.uris.length;++n)t.uint32(34).string(e.uris[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTurnCredentials;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.username=e.string();break;case 2:i.password=e.string();break;case 3:i.ttl=e.uint32();break;case 4:i.uris&&i.uris.length||(i.uris=[]),i.uris.push(e.string());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.username&&e.hasOwnProperty("username")&&!s.isString(e.username))return"username: string expected";if(null!=e.password&&e.hasOwnProperty("password")&&!s.isString(e.password))return"password: string expected";if(null!=e.ttl&&e.hasOwnProperty("ttl")&&!s.isInteger(e.ttl))return"ttl: integer expected";if(null!=e.uris&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!s.isString(e.uris[t]))return"uris: string[] expected"}return null},e.fromObject=function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(null!=e.username&&(t.username=String(e.username)),null!=e.password&&(t.password=String(e.password)),null!=e.ttl&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var n=0;n<e.uris.length;++n)t.uris[n]=String(e.uris[n])}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.uris=[]),t.defaults&&(n.username="",n.password="",n.ttl=0),null!=e.username&&e.hasOwnProperty("username")&&(n.username=e.username),null!=e.password&&e.hasOwnProperty("password")&&(n.password=e.password),null!=e.ttl&&e.hasOwnProperty("ttl")&&(n.ttl=e.ttl),e.uris&&e.uris.length){n.uris=[];for(var i=0;i<e.uris.length;++i)n.uris[i]=e.uris[i]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTranscriptItem=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.content="",e.prototype.endTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.speakerAttendeeId="",e.prototype.speakerExternalUserId="",e.prototype.startTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.type=1,e.prototype.vocabularyFilterMatch=!1,e.prototype.confidence=0,e.prototype.stable=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),null!=e.endTime&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),null!=e.speakerAttendeeId&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),null!=e.speakerExternalUserId&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),null!=e.startTime&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),null!=e.vocabularyFilterMatch&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),null!=e.confidence&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),null!=e.stable&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptItem;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.content=e.string();break;case 2:i.endTime=e.int64();break;case 3:i.speakerAttendeeId=e.string();break;case 4:i.speakerExternalUserId=e.string();break;case 5:i.startTime=e.int64();break;case 6:i.type=e.int32();break;case 7:i.vocabularyFilterMatch=e.bool();break;case 8:i.confidence=e.double();break;case 9:i.stable=e.bool();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.content&&e.hasOwnProperty("content")&&!s.isString(e.content))return"content: string expected";if(null!=e.endTime&&e.hasOwnProperty("endTime")&&!s.isInteger(e.endTime)&&!(e.endTime&&s.isInteger(e.endTime.low)&&s.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(null!=e.speakerAttendeeId&&e.hasOwnProperty("speakerAttendeeId")&&!s.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(null!=e.speakerExternalUserId&&e.hasOwnProperty("speakerExternalUserId")&&!s.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(null!=e.startTime&&e.hasOwnProperty("startTime")&&!s.isInteger(e.startTime)&&!(e.startTime&&s.isInteger(e.startTime.low)&&s.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return null!=e.vocabularyFilterMatch&&e.hasOwnProperty("vocabularyFilterMatch")&&"boolean"!==typeof e.vocabularyFilterMatch?"vocabularyFilterMatch: boolean expected":null!=e.confidence&&e.hasOwnProperty("confidence")&&"number"!==typeof e.confidence?"confidence: number expected":null!=e.stable&&e.hasOwnProperty("stable")&&"boolean"!==typeof e.stable?"stable: boolean expected":null},e.fromObject=function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(null!=e.content&&(t.content=String(e.content)),null!=e.endTime&&(s.Long?(t.endTime=s.Long.fromValue(e.endTime)).unsigned=!1:"string"===typeof e.endTime?t.endTime=parseInt(e.endTime,10):"number"===typeof e.endTime?t.endTime=e.endTime:"object"===typeof e.endTime&&(t.endTime=new s.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),null!=e.speakerAttendeeId&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),null!=e.speakerExternalUserId&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),null!=e.startTime&&(s.Long?(t.startTime=s.Long.fromValue(e.startTime)).unsigned=!1:"string"===typeof e.startTime?t.startTime=parseInt(e.startTime,10):"number"===typeof e.startTime?t.startTime=e.startTime:"object"===typeof e.startTime&&(t.startTime=new s.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return null!=e.vocabularyFilterMatch&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),null!=e.confidence&&(t.confidence=Number(e.confidence)),null!=e.stable&&(t.stable=Boolean(e.stable)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.content="",s.Long){var i=new s.Long(0,0,!1);n.endTime=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.endTime=t.longs===String?"0":0;if(n.speakerAttendeeId="",n.speakerExternalUserId="",s.Long){i=new s.Long(0,0,!1);n.startTime=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.startTime=t.longs===String?"0":0;n.type=t.enums===String?"PRONUNCIATION":1,n.vocabularyFilterMatch=!1,n.confidence=0,n.stable=!1}return null!=e.content&&e.hasOwnProperty("content")&&(n.content=e.content),null!=e.endTime&&e.hasOwnProperty("endTime")&&("number"===typeof e.endTime?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?s.Long.prototype.toString.call(e.endTime):t.longs===Number?new s.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),null!=e.speakerAttendeeId&&e.hasOwnProperty("speakerAttendeeId")&&(n.speakerAttendeeId=e.speakerAttendeeId),null!=e.speakerExternalUserId&&e.hasOwnProperty("speakerExternalUserId")&&(n.speakerExternalUserId=e.speakerExternalUserId),null!=e.startTime&&e.hasOwnProperty("startTime")&&("number"===typeof e.startTime?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?s.Long.prototype.toString.call(e.startTime):t.longs===Number?new s.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]:e.type),null!=e.vocabularyFilterMatch&&e.hasOwnProperty("vocabularyFilterMatch")&&(n.vocabularyFilterMatch=e.vocabularyFilterMatch),null!=e.confidence&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),null!=e.stable&&e.hasOwnProperty("stable")&&(n.stable=e.stable),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[1]="PRONUNCIATION"]=1,t[e[2]="PUNCTUATION"]=2,t}(),e}(),a.SdkTranscriptEntity=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.category="",e.prototype.confidence=0,e.prototype.content="",e.prototype.endTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.startTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.type="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.category&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),null!=e.confidence&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),null!=e.endTime&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),null!=e.startTime&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptEntity;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.category=e.string();break;case 2:i.confidence=e.double();break;case 3:i.content=e.string();break;case 4:i.endTime=e.int64();break;case 5:i.startTime=e.int64();break;case 6:i.type=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.category&&e.hasOwnProperty("category")&&!s.isString(e.category)?"category: string expected":null!=e.confidence&&e.hasOwnProperty("confidence")&&"number"!==typeof e.confidence?"confidence: number expected":null!=e.content&&e.hasOwnProperty("content")&&!s.isString(e.content)?"content: string expected":null==e.endTime||!e.hasOwnProperty("endTime")||s.isInteger(e.endTime)||e.endTime&&s.isInteger(e.endTime.low)&&s.isInteger(e.endTime.high)?null==e.startTime||!e.hasOwnProperty("startTime")||s.isInteger(e.startTime)||e.startTime&&s.isInteger(e.startTime.low)&&s.isInteger(e.startTime.high)?null!=e.type&&e.hasOwnProperty("type")&&!s.isString(e.type)?"type: string expected":null:"startTime: integer|Long expected":"endTime: integer|Long expected"},e.fromObject=function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return null!=e.category&&(t.category=String(e.category)),null!=e.confidence&&(t.confidence=Number(e.confidence)),null!=e.content&&(t.content=String(e.content)),null!=e.endTime&&(s.Long?(t.endTime=s.Long.fromValue(e.endTime)).unsigned=!1:"string"===typeof e.endTime?t.endTime=parseInt(e.endTime,10):"number"===typeof e.endTime?t.endTime=e.endTime:"object"===typeof e.endTime&&(t.endTime=new s.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),null!=e.startTime&&(s.Long?(t.startTime=s.Long.fromValue(e.startTime)).unsigned=!1:"string"===typeof e.startTime?t.startTime=parseInt(e.startTime,10):"number"===typeof e.startTime?t.startTime=e.startTime:"object"===typeof e.startTime&&(t.startTime=new s.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),null!=e.type&&(t.type=String(e.type)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.category="",n.confidence=0,n.content="",s.Long){var i=new s.Long(0,0,!1);n.endTime=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.endTime=t.longs===String?"0":0;if(s.Long){i=new s.Long(0,0,!1);n.startTime=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.startTime=t.longs===String?"0":0;n.type=""}return null!=e.category&&e.hasOwnProperty("category")&&(n.category=e.category),null!=e.confidence&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),null!=e.content&&e.hasOwnProperty("content")&&(n.content=e.content),null!=e.endTime&&e.hasOwnProperty("endTime")&&("number"===typeof e.endTime?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?s.Long.prototype.toString.call(e.endTime):t.longs===Number?new s.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),null!=e.startTime&&e.hasOwnProperty("startTime")&&("number"===typeof e.startTime?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?s.Long.prototype.toString.call(e.startTime):t.longs===Number?new s.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTranscriptAlternative=function(){function e(e){if(this.items=[],this.entities=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.items=s.emptyArray,e.prototype.transcript="",e.prototype.entities=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.items&&e.items.length)for(var n=0;n<e.items.length;++n)a.SdkTranscriptItem.encode(e.items[n],t.uint32(10).fork()).ldelim();if(null!=e.transcript&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),null!=e.entities&&e.entities.length)for(n=0;n<e.entities.length;++n)a.SdkTranscriptEntity.encode(e.entities[n],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptAlternative;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.items&&i.items.length||(i.items=[]),i.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break;case 2:i.transcript=e.string();break;case 3:i.entities&&i.entities.length||(i.entities=[]),i.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.items&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var n=a.SdkTranscriptItem.verify(e.items[t]);if(n)return"items."+n}}if(null!=e.transcript&&e.hasOwnProperty("transcript")&&!s.isString(e.transcript))return"transcript: string expected";if(null!=e.entities&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(t=0;t<e.entities.length;++t){n=a.SdkTranscriptEntity.verify(e.entities[t]);if(n)return"entities."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var n=0;n<e.items.length;++n){if("object"!==typeof e.items[n])throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[n]=a.SdkTranscriptItem.fromObject(e.items[n])}}if(null!=e.transcript&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(n=0;n<e.entities.length;++n){if("object"!==typeof e.entities[n])throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[n]=a.SdkTranscriptEntity.fromObject(e.entities[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.items=[],n.entities=[]),t.defaults&&(n.transcript=""),e.items&&e.items.length){n.items=[];for(var i=0;i<e.items.length;++i)n.items[i]=a.SdkTranscriptItem.toObject(e.items[i],t)}if(null!=e.transcript&&e.hasOwnProperty("transcript")&&(n.transcript=e.transcript),e.entities&&e.entities.length){n.entities=[];for(i=0;i<e.entities.length;++i)n.entities[i]=a.SdkTranscriptEntity.toObject(e.entities[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTranscriptLanguageWithScore=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.languageCode="",e.prototype.score=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.languageCode&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),null!=e.score&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptLanguageWithScore;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.languageCode=e.string();break;case 2:i.score=e.double();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.languageCode&&e.hasOwnProperty("languageCode")&&!s.isString(e.languageCode)?"languageCode: string expected":null!=e.score&&e.hasOwnProperty("score")&&"number"!==typeof e.score?"score: number expected":null},e.fromObject=function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return null!=e.languageCode&&(t.languageCode=String(e.languageCode)),null!=e.score&&(t.score=Number(e.score)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.languageCode="",n.score=0),null!=e.languageCode&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),null!=e.score&&e.hasOwnProperty("score")&&(n.score=t.json&&!isFinite(e.score)?String(e.score):e.score),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTranscriptResult=function(){function e(e){if(this.alternatives=[],this.languageIdentification=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.alternatives=s.emptyArray,e.prototype.channelId="",e.prototype.endTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.isPartial=!1,e.prototype.resultId="",e.prototype.startTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.languageCode="",e.prototype.languageIdentification=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.alternatives&&e.alternatives.length)for(var n=0;n<e.alternatives.length;++n)a.SdkTranscriptAlternative.encode(e.alternatives[n],t.uint32(10).fork()).ldelim();if(null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),null!=e.endTime&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),null!=e.isPartial&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),null!=e.resultId&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),null!=e.startTime&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),null!=e.languageCode&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),null!=e.languageIdentification&&e.languageIdentification.length)for(n=0;n<e.languageIdentification.length;++n)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[n],t.uint32(66).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptResult;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.alternatives&&i.alternatives.length||(i.alternatives=[]),i.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break;case 2:i.channelId=e.string();break;case 3:i.endTime=e.int64();break;case 4:i.isPartial=e.bool();break;case 5:i.resultId=e.string();break;case 6:i.startTime=e.int64();break;case 7:i.languageCode=e.string();break;case 8:i.languageIdentification&&i.languageIdentification.length||(i.languageIdentification=[]),i.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.alternatives&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var n=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(n)return"alternatives."+n}}if(null!=e.channelId&&e.hasOwnProperty("channelId")&&!s.isString(e.channelId))return"channelId: string expected";if(null!=e.endTime&&e.hasOwnProperty("endTime")&&!s.isInteger(e.endTime)&&!(e.endTime&&s.isInteger(e.endTime.low)&&s.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(null!=e.isPartial&&e.hasOwnProperty("isPartial")&&"boolean"!==typeof e.isPartial)return"isPartial: boolean expected";if(null!=e.resultId&&e.hasOwnProperty("resultId")&&!s.isString(e.resultId))return"resultId: string expected";if(null!=e.startTime&&e.hasOwnProperty("startTime")&&!s.isInteger(e.startTime)&&!(e.startTime&&s.isInteger(e.startTime.low)&&s.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(null!=e.languageCode&&e.hasOwnProperty("languageCode")&&!s.isString(e.languageCode))return"languageCode: string expected";if(null!=e.languageIdentification&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(t=0;t<e.languageIdentification.length;++t){n=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(n)return"languageIdentification."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var n=0;n<e.alternatives.length;++n){if("object"!==typeof e.alternatives[n])throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[n]=a.SdkTranscriptAlternative.fromObject(e.alternatives[n])}}if(null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.endTime&&(s.Long?(t.endTime=s.Long.fromValue(e.endTime)).unsigned=!1:"string"===typeof e.endTime?t.endTime=parseInt(e.endTime,10):"number"===typeof e.endTime?t.endTime=e.endTime:"object"===typeof e.endTime&&(t.endTime=new s.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),null!=e.isPartial&&(t.isPartial=Boolean(e.isPartial)),null!=e.resultId&&(t.resultId=String(e.resultId)),null!=e.startTime&&(s.Long?(t.startTime=s.Long.fromValue(e.startTime)).unsigned=!1:"string"===typeof e.startTime?t.startTime=parseInt(e.startTime,10):"number"===typeof e.startTime?t.startTime=e.startTime:"object"===typeof e.startTime&&(t.startTime=new s.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),null!=e.languageCode&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(n=0;n<e.languageIdentification.length;++n){if("object"!==typeof e.languageIdentification[n])throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[n]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.alternatives=[],n.languageIdentification=[]),t.defaults){if(n.channelId="",s.Long){var i=new s.Long(0,0,!1);n.endTime=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.endTime=t.longs===String?"0":0;if(n.isPartial=!1,n.resultId="",s.Long){i=new s.Long(0,0,!1);n.startTime=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.startTime=t.longs===String?"0":0;n.languageCode=""}if(e.alternatives&&e.alternatives.length){n.alternatives=[];for(var r=0;r<e.alternatives.length;++r)n.alternatives[r]=a.SdkTranscriptAlternative.toObject(e.alternatives[r],t)}if(null!=e.channelId&&e.hasOwnProperty("channelId")&&(n.channelId=e.channelId),null!=e.endTime&&e.hasOwnProperty("endTime")&&("number"===typeof e.endTime?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?s.Long.prototype.toString.call(e.endTime):t.longs===Number?new s.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),null!=e.isPartial&&e.hasOwnProperty("isPartial")&&(n.isPartial=e.isPartial),null!=e.resultId&&e.hasOwnProperty("resultId")&&(n.resultId=e.resultId),null!=e.startTime&&e.hasOwnProperty("startTime")&&("number"===typeof e.startTime?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?s.Long.prototype.toString.call(e.startTime):t.longs===Number?new s.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),null!=e.languageCode&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){n.languageIdentification=[];for(r=0;r<e.languageIdentification.length;++r)n.languageIdentification[r]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTranscript=function(){function e(e){if(this.results=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.results=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.results&&e.results.length)for(var n=0;n<e.results.length;++n)a.SdkTranscriptResult.encode(e.results[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscript;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.results&&i.results.length||(i.results=[]),i.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.results&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var n=a.SdkTranscriptResult.verify(e.results[t]);if(n)return"results."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var n=0;n<e.results.length;++n){if("object"!==typeof e.results[n])throw TypeError(".SdkTranscript.results: object expected");t.results[n]=a.SdkTranscriptResult.fromObject(e.results[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.results=[]),e.results&&e.results.length){n.results=[];for(var i=0;i<e.results.length;++i)n.results[i]=a.SdkTranscriptResult.toObject(e.results[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTranscriptionStatus=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=1,e.prototype.eventTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.transcriptionRegion="",e.prototype.transcriptionConfiguration="",e.prototype.message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.eventTime&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),null!=e.transcriptionRegion&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),null!=e.transcriptionConfiguration&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptionStatus;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.type=e.int32();break;case 2:i.eventTime=e.int64();break;case 3:i.transcriptionRegion=e.string();break;case 4:i.transcriptionConfiguration=e.string();break;case 5:i.message=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return null==e.eventTime||!e.hasOwnProperty("eventTime")||s.isInteger(e.eventTime)||e.eventTime&&s.isInteger(e.eventTime.low)&&s.isInteger(e.eventTime.high)?null!=e.transcriptionRegion&&e.hasOwnProperty("transcriptionRegion")&&!s.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":null!=e.transcriptionConfiguration&&e.hasOwnProperty("transcriptionConfiguration")&&!s.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":null!=e.message&&e.hasOwnProperty("message")&&!s.isString(e.message)?"message: string expected":null:"eventTime: integer|Long expected"},e.fromObject=function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return null!=e.eventTime&&(s.Long?(t.eventTime=s.Long.fromValue(e.eventTime)).unsigned=!1:"string"===typeof e.eventTime?t.eventTime=parseInt(e.eventTime,10):"number"===typeof e.eventTime?t.eventTime=e.eventTime:"object"===typeof e.eventTime&&(t.eventTime=new s.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),null!=e.transcriptionRegion&&(t.transcriptionRegion=String(e.transcriptionRegion)),null!=e.transcriptionConfiguration&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),null!=e.message&&(t.message=String(e.message)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.type=t.enums===String?"STARTED":1,s.Long){var i=new s.Long(0,0,!1);n.eventTime=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.eventTime=t.longs===String?"0":0;n.transcriptionRegion="",n.transcriptionConfiguration="",n.message=""}return null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]:e.type),null!=e.eventTime&&e.hasOwnProperty("eventTime")&&("number"===typeof e.eventTime?n.eventTime=t.longs===String?String(e.eventTime):e.eventTime:n.eventTime=t.longs===String?s.Long.prototype.toString.call(e.eventTime):t.longs===Number?new s.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),null!=e.transcriptionRegion&&e.hasOwnProperty("transcriptionRegion")&&(n.transcriptionRegion=e.transcriptionRegion),null!=e.transcriptionConfiguration&&e.hasOwnProperty("transcriptionConfiguration")&&(n.transcriptionConfiguration=e.transcriptionConfiguration),null!=e.message&&e.hasOwnProperty("message")&&(n.message=e.message),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[1]="STARTED"]=1,t[e[2]="INTERRUPTED"]=2,t[e[3]="RESUMED"]=3,t[e[4]="STOPPED"]=4,t[e[5]="FAILED"]=5,t}(),e}(),a.SdkTranscriptEvent=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.status=null,e.prototype.transcript=null,Object.defineProperty(e.prototype,"Event",{get:s.oneOfGetter(t=["status","transcript"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&a.SdkTranscriptionStatus.encode(e.status,t.uint32(10).fork()).ldelim(),null!=e.transcript&&Object.hasOwnProperty.call(e,"transcript")&&a.SdkTranscript.encode(e.transcript,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptEvent;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.status=a.SdkTranscriptionStatus.decode(e,e.uint32());break;case 2:i.transcript=a.SdkTranscript.decode(e,e.uint32());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";var t={};if(null!=e.status&&e.hasOwnProperty("status")){t.Event=1;var n=a.SdkTranscriptionStatus.verify(e.status);if(n)return"status."+n}if(null!=e.transcript&&e.hasOwnProperty("transcript")){if(1===t.Event)return"Event: multiple values";t.Event=1;n=a.SdkTranscript.verify(e.transcript);if(n)return"transcript."+n}return null},e.fromObject=function(e){if(e instanceof a.SdkTranscriptEvent)return e;var t=new a.SdkTranscriptEvent;if(null!=e.status){if("object"!==typeof e.status)throw TypeError(".SdkTranscriptEvent.status: object expected");t.status=a.SdkTranscriptionStatus.fromObject(e.status)}if(null!=e.transcript){if("object"!==typeof e.transcript)throw TypeError(".SdkTranscriptEvent.transcript: object expected");t.transcript=a.SdkTranscript.fromObject(e.transcript)}return t},e.toObject=function(e,t){t||(t={});var n={};return null!=e.status&&e.hasOwnProperty("status")&&(n.status=a.SdkTranscriptionStatus.toObject(e.status,t),t.oneofs&&(n.Event="status")),null!=e.transcript&&e.hasOwnProperty("transcript")&&(n.transcript=a.SdkTranscript.toObject(e.transcript,t),t.oneofs&&(n.Event="transcript")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkTranscriptFrame=function(){function e(e){if(this.events=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.events=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.events&&e.events.length)for(var n=0;n<e.events.length;++n)a.SdkTranscriptEvent.encode(e.events[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkTranscriptFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.events&&i.events.length||(i.events=[]),i.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.events&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var n=a.SdkTranscriptEvent.verify(e.events[t]);if(n)return"events."+n}}return null},e.fromObject=function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var n=0;n<e.events.length;++n){if("object"!==typeof e.events[n])throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[n]=a.SdkTranscriptEvent.fromObject(e.events[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.events=[]),e.events&&e.events.length){n.events=[];for(var i=0;i<e.events.length;++i)n.events[i]=a.SdkTranscriptEvent.toObject(e.events[i],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkRemoteVideoUpdateFrame=function(){function e(e){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.addedOrUpdatedVideoSubscriptions=s.emptyArray,e.prototype.removedVideoSubscriptionMids=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length)for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[n],t.uint32(10).fork()).ldelim();if(null!=e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length)for(n=0;n<e.removedVideoSubscriptionMids.length;++n)t.uint32(18).string(e.removedVideoSubscriptionMids[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkRemoteVideoUpdateFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.addedOrUpdatedVideoSubscriptions&&i.addedOrUpdatedVideoSubscriptions.length||(i.addedOrUpdatedVideoSubscriptions=[]),i.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break;case 2:i.removedVideoSubscriptionMids&&i.removedVideoSubscriptionMids.length||(i.removedVideoSubscriptionMids=[]),i.removedVideoSubscriptionMids.push(e.string());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.addedOrUpdatedVideoSubscriptions&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(n)return"addedOrUpdatedVideoSubscriptions."+n}}if(null!=e.removedVideoSubscriptionMids&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!s.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},e.fromObject=function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n){if("object"!==typeof e.addedOrUpdatedVideoSubscriptions[n])throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[n])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(n=0;n<e.removedVideoSubscriptionMids.length;++n)t.removedVideoSubscriptionMids[n]=String(e.removedVideoSubscriptionMids[n])}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addedOrUpdatedVideoSubscriptions=[],n.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){n.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)n.addedOrUpdatedVideoSubscriptions[i]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[i],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){n.removedVideoSubscriptionMids=[];for(i=0;i<e.removedVideoSubscriptionMids.length;++i)n.removedVideoSubscriptionMids[i]=e.removedVideoSubscriptionMids[i]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkVideoSubscriptionConfiguration=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.mid="",e.prototype.attendeeId="",e.prototype.streamId=0,e.prototype.priority=0,e.prototype.targetBitrateKbps=0,e.prototype.groupId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),t.uint32(10).string(e.mid),null!=e.attendeeId&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),null!=e.streamId&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),null!=e.targetBitrateKbps&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),null!=e.groupId&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkVideoSubscriptionConfiguration;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.mid=e.string();break;case 2:i.attendeeId=e.string();break;case 3:i.streamId=e.uint32();break;case 4:i.priority=e.uint32();break;case 5:i.targetBitrateKbps=e.uint32();break;case 6:i.groupId=e.uint32();break;default:e.skipType(7&o);break}}if(!i.hasOwnProperty("mid"))throw s.ProtocolError("missing required 'mid'",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":s.isString(e.mid)?null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&!s.isString(e.attendeeId)?"attendeeId: string expected":null!=e.streamId&&e.hasOwnProperty("streamId")&&!s.isInteger(e.streamId)?"streamId: integer expected":null!=e.priority&&e.hasOwnProperty("priority")&&!s.isInteger(e.priority)?"priority: integer expected":null!=e.targetBitrateKbps&&e.hasOwnProperty("targetBitrateKbps")&&!s.isInteger(e.targetBitrateKbps)?"targetBitrateKbps: integer expected":null!=e.groupId&&e.hasOwnProperty("groupId")&&!s.isInteger(e.groupId)?"groupId: integer expected":null:"mid: string expected"},e.fromObject=function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;return null!=e.mid&&(t.mid=String(e.mid)),null!=e.attendeeId&&(t.attendeeId=String(e.attendeeId)),null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.priority&&(t.priority=e.priority>>>0),null!=e.targetBitrateKbps&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),null!=e.groupId&&(t.groupId=e.groupId>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.mid="",n.attendeeId="",n.streamId=0,n.priority=0,n.targetBitrateKbps=0,n.groupId=0),null!=e.mid&&e.hasOwnProperty("mid")&&(n.mid=e.mid),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),null!=e.streamId&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),null!=e.priority&&e.hasOwnProperty("priority")&&(n.priority=e.priority),null!=e.targetBitrateKbps&&e.hasOwnProperty("targetBitrateKbps")&&(n.targetBitrateKbps=e.targetBitrateKbps),null!=e.groupId&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkPrimaryMeetingJoinFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.credentials=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.credentials&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkPrimaryMeetingJoinFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.credentials&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},e.fromObject=function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(null!=e.credentials){if("object"!==typeof e.credentials)throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.credentials=null),null!=e.credentials&&e.hasOwnProperty("credentials")&&(n.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkPrimaryMeetingJoinAckFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkPrimaryMeetingLeaveFrame=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkPrimaryMeetingLeaveFrame;while(e.pos<n){var o=e.uint32();switch(o>>>3){default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkMeetingSessionCredentials=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.attendeeId="",e.prototype.externalUserId="",e.prototype.joinToken="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.attendeeId&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),null!=e.externalUserId&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),null!=e.joinToken&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t,i=new a.SdkMeetingSessionCredentials;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:i.attendeeId=e.string();break;case 2:i.externalUserId=e.string();break;case 3:i.joinToken=e.string();break;default:e.skipType(7&o);break}}return i},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&!s.isString(e.attendeeId)?"attendeeId: string expected":null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&!s.isString(e.externalUserId)?"externalUserId: string expected":null!=e.joinToken&&e.hasOwnProperty("joinToken")&&!s.isString(e.joinToken)?"joinToken: string expected":null},e.fromObject=function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return null!=e.attendeeId&&(t.attendeeId=String(e.attendeeId)),null!=e.externalUserId&&(t.externalUserId=String(e.externalUserId)),null!=e.joinToken&&(t.joinToken=String(e.joinToken)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.attendeeId="",n.externalUserId="",n.joinToken=""),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),null!=e.joinToken&&e.hasOwnProperty("joinToken")&&(n.joinToken=e.joinToken),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),a.SdkVideoCodecCapability=function(){var e={},t=Object.create(e);return t[e[1]="VP8"]=1,t[e[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,t}(),e.exports=a,s.Long=void 0,i.configure()},1270:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3487),o=n(45),s=n(4207);class a{constructor(e){this.chimeClient=e}makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const n=new r.Sha256(t);return n.update(e),n.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,n,r){return i(this,void 0,void 0,(function*(){const i=yield this.hmac(t,"AWS4"+e),o=yield this.hmac(n,i),s=yield this.hmac(r,o),a=yield this.hmac("aws4_request",s);return a}))}signURL(e,t,n,r,a,c,l){return i(this,void 0,void 0,(function*(){const i=this.getDateTimeString(),d=this.getDateString(i),u="AWS4-HMAC-SHA256";let h="";h=this.chimeClient.config.region instanceof Function?yield this.chimeClient.config.region():this.chimeClient.config.region;const p="host",f="host:"+r.toLowerCase()+"\n",m=d+"/"+h+"/"+n+"/aws4_request";let g;g=this.chimeClient.config.credentials instanceof Function?yield this.chimeClient.config.credentials():this.chimeClient.config.credentials;let v=new Map;v.set("X-Amz-Algorithm",[u]),v.set("X-Amz-Credential",[encodeURIComponent(g.accessKeyId+"/"+m)]),v.set("X-Amz-Date",[i]),v.set("X-Amz-Expires",["10"]),v.set("X-Amz-SignedHeaders",["host"]),g.sessionToken&&v.set("X-Amz-Security-Token",[encodeURIComponent(g.sessionToken)]),v.set(s.default.X_AMZN_VERSION,[encodeURIComponent(s.default.sdkVersion)]),v.set(s.default.X_AMZN_USER_AGENT,[encodeURIComponent(s.default.sdkUserAgentLowResolution)]),null===l||void 0===l||l.forEach(((e,t)=>{const n=encodeURIComponent(t);e.sort().forEach((e=>{v.has(n)||v.set(n,[]),v.get(n).push(encodeURIComponent(e))}))}));let b="";v=new Map([...v.entries()].sort()),v.forEach(((e,t)=>{e.forEach((e=>{b.length&&(b+="&"),b+=t+"="+e}))}));const S=e+"\n"+a+"\n"+b+"\n"+f+"\n"+p+"\n"+o.toHex(yield this.hmac(c)),y=o.toHex(yield this.hmac(S)),w="AWS4-HMAC-SHA256\n"+i+"\n"+d+"/"+h+"/"+n+"/aws4_request\n"+y,C=yield this.getSignatureKey(g.secretAccessKey,d,h,n),k=o.toHex(yield this.hmac(w,C)),E=b+"&X-Amz-Signature="+k;return t+"://"+r+a+"?"+E}))}}t["default"]=a},8718:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SimulcastLayers=void 0,function(e){e[e["Low"]=0]="Low",e[e["LowAndMedium"]=1]="LowAndMedium",e[e["LowAndHigh"]=2]="LowAndHigh",e[e["Medium"]=3]="Medium",e[e["MediumAndHigh"]=4]="MediumAndHigh",e[e["High"]=5]="High"}(n=t.SimulcastLayers||(t.SimulcastLayers={})),t["default"]=n},2861:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioLogEvent=void 0,function(e){e[e["DeviceChanged"]=0]="DeviceChanged",e[e["MutedLocal"]=1]="MutedLocal",e[e["UnmutedLocal"]=2]="UnmutedLocal",e[e["Connected"]=3]="Connected",e[e["ConnectFailed"]=4]="ConnectFailed",e[e["RedmicStartLoss"]=5]="RedmicStartLoss",e[e["RedmicEndLoss"]=6]="RedmicEndLoss"}(n=t.AudioLogEvent||(t.AudioLogEvent={})),t["default"]=n},6372:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1671),o=n(3511),s=n(3926),a=n(4832),c=n(1204),l=n(2513),d=n(8389),u=n(4059),h=n(8692),p=n(2861),f=n(1660);class m{constructor(e,t,n=m.INTERVAL_MS){this.audioVideoController=e,this.logger=t,this.interval=n,this.intervalScheduler=null,this.metricsAddTime=(e,t,n)=>{},this.metricsLogEvent=(e,t)=>{}}toAttribute(e){return this.toSuffix(e).substring(1)}toSuffix(e){return e.toLowerCase()===e?`_${e}`:e.toUpperCase()===e?`_${e.toLowerCase()}`:e.replace(/([A-Z][a-z]+)/g,(function(e){return`_${e}`})).replace(/([A-Z][A-Z]+)/g,(function(e){return`_${e}`})).toLowerCase()}logLatency(e,t,n){const i=this.toSuffix(e);this.logEventTime("meeting"+i,t,n)}logStateTimeout(e,t){const n=this.toSuffix(e);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},t),{state:`state${n}`}))}logAudioEvent(e,t){const n="audio"+this.toSuffix(p.default[e]);this.logEvent(n,t)}logVideoEvent(e,t){const n="video"+this.toSuffix(f.default[e]);this.logEvent(n,t)}logEventTime(e,t,n={}){const i=Object.assign(Object.assign({},n),{call_id:this.audioVideoController.configuration.meetingId,client_type:m.CLIENT_TYPE,metric_type:"latency"});this.logger.debug((()=>`[StatsCollector] ${e}: ${JSON.stringify(i)}`)),this.metricsAddTime(e,t,i)}logMeetingSessionStatus(e){const t=`${e.statusCode()}`;this.logEvent(t);const n={status:t,status_code:`${e.statusCode()}`};this.logEvent("meeting_session_status",n),e.isTerminal()&&this.logEvent("meeting_session_stopped",n),e.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",n),e.isFailure()&&this.logEvent("meeting_session_failed",n)}logLifecycleEvent(e,t){const n={lifecycle_event:`lifecycle${this.toSuffix(c.default[e])}`,lifecycle_event_code:`${e}`,lifecycle_event_condition:`condition${this.toSuffix(l.default[t])}`,lifecycle_event_condition_code:`${t}`};this.logEvent("meeting_session_lifecycle",n)}logEvent(e,t={}){const n=Object.assign(Object.assign({},t),{call_id:this.audioVideoController.configuration.meetingId,client_type:m.CLIENT_TYPE});this.logger.debug((()=>`[StatsCollector] ${e}: ${JSON.stringify(n)}`)),this.metricsLogEvent(e,n)}start(e,t){return!this.intervalScheduler&&(this.logger.info("Starting StatsCollector"),this.signalingClient=e,this.videoStreamIndex=t,this.clientMetricReport=new r.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new d.default(this.interval),this.intervalScheduler.start((()=>i(this,void 0,void 0,(function*(){yield this.getStatsWrapper()})))),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(e,t){const n=t?this.clientMetricReport.streamMetricReports[Number(e.ssrc)]:this.clientMetricReport.globalMetricReport;let i;i=t?this.clientMetricReport.getMetricMap(n.mediaType,n.direction):this.clientMetricReport.getMetricMap();for(const r in e)r in i&&("number"===typeof e[r]?(n.previousMetrics[r]=n.currentMetrics[r],n.currentMetrics[r]=e[r]):"string"===typeof e[r]?n.currentStringMetrics[r]=e[r]:this.logger.error(`Unknown metric value type ${typeof e[r]} for metric ${r}`))}processRawMetricReports(e){this.clientMetricReport.currentSsrcs={};const t=Date.now();for(const n of e){const e=this.isStreamRawMetricReport(n.type);if(e){const e=this.clientMetricReport.streamMetricReports[Number(n.ssrc)];if(e)e.streamId=this.videoStreamIndex.streamIdForSSRC(Number(n.ssrc));else{const e=new a.default;e.mediaType=this.getMediaType(n),e.direction=this.getDirectionType(n),this.videoStreamIndex.allStreams().empty()||(e.streamId=this.videoStreamIndex.streamIdForSSRC(Number(n.ssrc))),this.clientMetricReport.streamMetricReports[Number(n.ssrc)]=e}this.clientMetricReport.currentSsrcs[Number(n.ssrc)]=1}this.updateMetricValues(n,e)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=t,this.clientMetricReport.print()}addStreamMetricDimensionFrames(e,t){const n=this.clientMetricReport.getStreamDimensionMap();for(const i in t.currentStringMetrics)if(i in n){const r=u.SdkStreamDimension.create();r.type=n[i];const o=u.SdkDimensionValue.create();o.stringValue=t.currentStringMetrics[i],r.value=o,e.dimensions.push(r)}}addMetricFrame(e,t,n,i){const r=n.type,o=n.transform,s=n.source,a=t.streamMetricFrames.length,c=t.streamMetricFrames[a-1];if(r){const n=u.SdkMetric.create();n.type=r,n.value=o(s||e,i),i?c.metrics.push(n):t.globalMetrics.push(n)}}addGlobalMetricsToProtobuf(e){const t=this.clientMetricReport.getMetricMap();for(const n in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(n,e,t[n])}addStreamMetricsToProtobuf(e){for(const t in this.clientMetricReport.streamMetricReports){const n=this.clientMetricReport.streamMetricReports[t],i=u.SdkStreamMetricFrame.create();i.streamId=n.streamId,i.metrics=[],this.addStreamMetricDimensionFrames(i,n),e.streamMetricFrames.push(i);const r=this.clientMetricReport.getMetricMap(n.mediaType,n.direction);for(const o in n.currentMetrics)this.addMetricFrame(o,e,r[o],Number(t));for(const o in n.currentStringMetrics)this.addMetricFrame(o,e,r[o],Number(t))}}makeClientMetricProtobuf(){const e=u.SdkClientMetricFrame.create();return e.globalMetrics=[],e.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(e),this.addStreamMetricsToProtobuf(e),e}sendClientMetricProtobuf(e){this.signalingClient.sendClientMetrics(e)}isStreamRawMetricReport(e){return["inbound-rtp","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(e)}getMediaType(e){return"audio"===e.kind?s.default.AUDIO:s.default.VIDEO}getDirectionType(e){const{type:t}=e;return"inbound-rtp"===t||"remote-outbound-rtp"===t?o.default.DOWNSTREAM:o.default.UPSTREAM}isValidStandardRawMetric(e){return"inbound-rtp"===e.type||"outbound-rtp"===e.type||"remote-inbound-rtp"===e.type||"remote-outbound-rtp"===e.type||"candidate-pair"===e.type&&"succeeded"===e.state}isValidSsrc(e){let t=!0;return this.isStreamRawMetricReport(e.type)&&this.getDirectionType(e)===o.default.DOWNSTREAM&&this.getMediaType(e)===s.default.VIDEO&&(t=this.videoStreamIndex.streamIdForSSRC(Number(e.ssrc))>0),t}isValidRawMetricReport(e){return this.isValidStandardRawMetric(e)&&this.isValidSsrc(e)}filterRawMetricReports(e){const t=[];for(const n of e)this.isValidRawMetricReport(n)&&t.push(n);return t}handleRawMetricReports(e){const t=this.filterRawMetricReports(e);this.logger.debug((()=>`Filtered raw metrics : ${JSON.stringify(t)}`)),this.processRawMetricReports(t);const n=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(n),this.audioVideoController.forEachObserver((e=>{h.Maybe.of(e.metricsDidReceive).map((t=>t.bind(e)(this.clientMetricReport.clone())))}))}getStatsWrapper(){return i(this,void 0,void 0,(function*(){if(!this.audioVideoController.rtcPeerConnection)return;const e=[];try{const t=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=t,t.forEach((t=>{e.push(t)})),this.handleRawMetricReports(e)}catch(t){this.logger.error(t.message)}}))}}t["default"]=m,m.INTERVAL_MS=1e3,m.CLIENT_TYPE="amazon-chime-sdk-js"},1660:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.VideoLogEvent=void 0,function(e){e[e["InputAttached"]=0]="InputAttached",e[e["SendingFailed"]=1]="SendingFailed",e[e["SendingSuccess"]=2]="SendingSuccess"}(n=t.VideoLogEvent||(t.VideoLogEvent={})),t["default"]=n},7829:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1660),o=n(5375);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="AttachMediaInputTask"}run(){return i(this,void 0,void 0,(function*(){const e=this.context.transceiverController;e.setPeer(this.context.peer),e.setupLocalTransceivers();const t=this.context.activeAudioInput;if(t){const n=t.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield e.setAudioInput(n.length?n[0]:null)}else yield e.setAudioInput(null),this.context.logger.info("no audio track");const n=this.context.activeVideoInput;if(n){const t=n.getVideoTracks(),i=t.length?t[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield e.setVideoInput(i),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const t=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();e.setEncodingParameters(t)}i&&(this.context.statsCollector.logVideoEvent(r.default.InputAttached,this.context.videoDeviceInformation),this.context.videoInputAttachedTimestampMs=Date.now())}else yield e.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=e.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)}))}}t["default"]=s},5375:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8241),o=n(4631);class s{constructor(e){this.logger=e,this.taskName="BaseTask",this.parentTask=null,this.status=o.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}once(...e){return new r.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(e){this.parentTask=e}getStatus(){return this.status}logAndThrow(e){throw this.logger.info(e),new Error(e)}baseRun(e){return i(this,void 0,void 0,(function*(){try{const t=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case o.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case o.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case o.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=o.default.RUNNING,yield e.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-t)} ms`)}catch(t){throw t}finally{this.status!==o.default.CANCELED&&(this.status=o.default.FINISHED)}}))}baseCancel(e){this.status!==o.default.CANCELED&&this.status!==o.default.FINISHED?(this.logger.info(`canceling task ${this.name()}`),this.status=o.default.CANCELED,e.call(this)):this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`)}}t["default"]=s},1847:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5375);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="CleanRestartedSessionTask"}run(){return i(this,void 0,void 0,(function*(){this.context.peer&&this.context.peer.close(),this.context.transceiverController.reset(),this.context.peer=null,this.context.videoDownlinkBandwidthPolicy.reset(),this.context.videoUplinkBandwidthPolicy.reset&&this.context.videoUplinkBandwidthPolicy.reset(),this.context.iceCandidateHandler=null,this.context.iceCandidates=[],this.context.previousSdpOffer=null}))}}t["default"]=o},4975:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8614),o=n(5375);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return i(this,void 0,void 0,(function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(e){throw e}finally{for(const t of this.context.removableObservers)t.removeObserver();this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.peer&&this.context.peer.close(),this.context.peer=null,this.context.sdpAnswer=null,this.context.sdpOfferInit=null,this.context.indexFrame=null,this.context.videoDownlinkBandwidthPolicy.reset(),this.context.videoUplinkBandwidthPolicy.reset&&this.context.videoUplinkBandwidthPolicy.reset(),this.context.iceCandidateHandler=null,this.context.iceCandidates=[],this.context.turnCredentials=null,this.context.videoSubscriptions=null,this.context.transceiverController.reset(),this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const e=this.context.videoTileController.getLocalVideoTile();e&&e.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}}))}receiveWebSocketClosedEvent(){return new Promise(((e,t)=>{class n{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(t){t.type===r.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),e())}}const i=new n(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)}))}}t["default"]=s},6023:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5375);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=e=>{const t=e.track;if(this.context.logger.info(`received track event: kind=${t.kind} id=${t.id} label=${t.label}`),e.transceiver&&"inactive"===e.transceiver.currentDirection)return;if(0===e.streams.length)return void this.context.logger.warn("Track event but no stream");const n=e.streams[0];"audio"===t.kind?this.context.audioMixController.bindAudioStream(n):"video"!==t.kind||this.trackIsVideoInput(t)||this.addRemoteVideoTrack(t,n)}}removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const e in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[e]()}addPeerConnectionEventLogger(){const e=this.context.peer;e.addEventListener("connectionstatechange",(()=>{this.context.logger.info(`peer connection state changed: ${e.connectionState}`)})),e.addEventListener("negotiationneeded",(()=>{this.context.logger.info("peer connection negotiation is needed")})),e.addEventListener("icegatheringstatechange",(()=>{this.context.logger.info(`peer connection ice gathering state changed: ${e.iceGatheringState}`)})),e.addEventListener("icecandidate",(e=>{this.context.logger.info(`peer connection ice candidate: ${e.candidate?e.candidate.candidate:"(null)"}`)})),e.addEventListener("iceconnectionstatechange",(()=>{this.context.logger.info(`peer connection ice connection state changed: ${e.iceConnectionState}`)}))}run(){return i(this,void 0,void 0,(function*(){this.context.removableObservers.push(this);const e=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0,t=e?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};t.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),t.sdpSemantics="unified-plan",this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(t),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)}))}trackIsVideoInput(e){return!!this.context.transceiverController.useTransceivers()&&(this.logger.debug((()=>"getting video track type")),this.context.transceiverController.trackIsVideoInput(e))}addRemoteVideoTrack(e,t){var n;const i=t.id,r=this.context.videoStreamIndex.attendeeIdForTrack(i);let o,s;if(this.context.videoTileController.getVideoTileForAttendeeId?(s=this.context.videoTileController.getVideoTileForAttendeeId(r),o=!!(null===(n=null===s||void 0===s?void 0:s.state())||void 0===n?void 0:n.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(r),o)return void this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${r}`);s||(s=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${s.id()}`));let a,c,l=this.context.videoStreamIndex.streamIdForTrack(i);"undefined"===typeof l&&(this.logger.warn(`stream not found for tile=${s.id()} track=${i}`),l=null);for(let f=0;f<this.trackEvents.length;f++){const n=this.trackEvents[f],i=t.getVideoTracks();if(i&&i.length){const t=i[0],r=()=>{this.context.logger.info(`received the ${n} event for tile=${s.id()} id=${e.id} streamId=${l}`),"ended"===n&&this.removeRemoteVideoTrack(e,s.state())};t.addEventListener(n,r),this.removeVideoTrackEventListeners[e.id]||(this.removeVideoTrackEventListeners[e.id]=[]),this.removeVideoTrackEventListeners[e.id].push((()=>{t.removeEventListener(n,r)}))}}if(e.getSettings){const t=e.getSettings();a=t.width,c=t.height}else{const t=e.getCapabilities();a=t.width,c=t.height}const d=this.context.videoStreamIndex.externalUserIdForTrack(i);s.bindVideoStream(r,!1,t,a,c,l,d),this.logger.info(`video track added, use tile=${s.id()} track=${i} streamId=${l}`);const u="removetrack",h=t,p=()=>this.removeRemoteVideoTrack(e,s.state());this.removeTrackRemovedEventListeners[e.id]=()=>{h.removeEventListener(u,p),delete this.removeTrackRemovedEventListeners[e.id]},h.addEventListener(u,p)}removeRemoteVideoTrack(e,t){if(this.removeTrackRemovedEventListeners.hasOwnProperty(e.id)){this.removeTrackRemovedEventListeners[e.id]();for(const t of this.removeVideoTrackEventListeners[e.id])t();delete this.removeVideoTrackEventListeners[e.id]}this.logger.info(`video track ended, removing tile=${t.tileId} id=${e.id} stream=${t.streamId}`),t.streamId?this.context.videosPaused.remove(t.streamId):this.logger.warn(`no stream found for tile=${t.tileId}`),this.context.videoTileController.removeVideoTile(t.tileId)}}t["default"]=o,o.REMOVE_HANDLER_INTERVAL_MS=1e4},752:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7726),o=n(8833),s=n(5375);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(null===(t=null===(e=this.context.meetingSessionConfiguration)||void 0===e?void 0:e.urls)||void 0===t?void 0:t.audioHostURL)}sessionUsesVideo(){const e=!0;let t;t=this.context.transceiverController.useTransceivers()?this.context.transceiverController.hasVideoInput():this.context.videoTileController.hasStartedLocalVideoTile();const n=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),i=e&&(t||n);return this.context.logger.info(`uses video: ${i} (enabled: ${e}, sending: ${t}, receiving: ${n})`),i}run(){return i(this,void 0,void 0,(function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise(((t,n)=>i(this,void 0,void 0,(function*(){this.cancelPromise=e=>{n(e)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new o.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const e=new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.IncompatibleSDP}`);return this.context.previousSdpOffer=null,void n(e)}t()}catch(i){n(i)}finally{delete this.cancelPromise}}))))}))}}t["default"]=a},1535:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7726),o=n(8833),s=n(5375);class a extends s.default{constructor(e,t=a.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;if(this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs){const t=Date.now()-this.startTimestampMs;t>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.ICEGatheringTimeoutWorkaround}`))}this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return i(this,void 0,void 0,(function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new o.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines())return void this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`)}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if(!this.context.browserBehavior.hasFirefoxWebRTC()&&"complete"!==this.context.peer.iceGatheringState||!new o.default(this.context.peer.localDescription.sdp).hasCandidates())try{yield new Promise(((e,t)=>{this.cancelPromise=e=>{this.removeEventListener(),t(e)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if("complete"===this.context.peer.iceGatheringState)return this.removeEventListener(),e(),void delete this.cancelPromise},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=n=>{if(this.context.logger.info(`ice candidate: ${n.candidate?n.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),n.candidate&&(o.default.isRTPCandidate(n.candidate.candidate)&&this.context.iceCandidates.push(n.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1))return this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),void delete this.cancelPromise;"complete"===this.context.peer.iceGatheringState&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),new o.default(this.context.peer.localDescription.sdp).hasCandidates()&&0!==this.context.iceCandidates.length?(e(),delete this.cancelPromise):(t(new Error("no ice candidates were gathered")),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()}))}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}else this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering")}))}}t["default"]=a,a.CHROME_VPN_TIMEOUT_MS=5e3},8758:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5207),o=n(7726),s=n(9729),a=n(4694),c=n(8614),l=n(8586),d=n(4059),u=n(5375);class h extends u.default{constructor(e){super(e.logger),this.context=e,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return i(this,void 0,void 0,(function*(){const e=yield new Promise(((e,t)=>{const n=this.context;n.turnCredentials=null;class i{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(t){if(t.type===c.default.WebSocketClosed){let e=`The signaling connection was closed with code ${t.closeCode} and reason: ${t.closeReason}`;n.logger.warn(e);let i=o.default.SignalingBadRequest;return 4410===t.closeCode?(e="The meeting already ended.",n.logger.warn(e),i=o.default.MeetingEnded):t.closeCode>=4500&&t.closeCode<4600&&(i=o.default.SignalingInternalServerError),void n.audioVideoController.handleMeetingSessionStatus(new r.default(i),new Error(e))}if(t.type!==c.default.ReceivedSignalFrame)return;if(t.message.type===d.SdkSignalFrame.Type.JOIN_ACK){const e=t.message.joinack;if(e&&e.videoSubscriptionLimit&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),n.serverSupportsCompression=null===e||void 0===e?void 0:e.wantsCompressedSdp,void 0!==(null===e||void 0===e?void 0:e.defaultServerSideNetworkAdaption)&&e.defaultServerSideNetworkAdaption!==a.default.Default&&void 0!==n.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption){const t=e.defaultServerSideNetworkAdaption;n.logger.info(`Overriding server side network adaption value to ${t}`),n.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(a.convertServerSideNetworkAdaptionEnumFromSignaled(t))}return void(e&&e.turnCredentials?(n.turnCredentials=new s.default,n.turnCredentials.username=e.turnCredentials.username,n.turnCredentials.password=e.turnCredentials.password,n.turnCredentials.ttl=e.turnCredentials.ttl,n.turnCredentials.uris=e.turnCredentials.uris.map((e=>n.meetingSessionConfiguration.urls.urlRewriter(e))).filter((e=>!!e))):n.logger.error("missing TURN credentials in JoinAckFrame"))}if(t.message.type!==d.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const i=t.message.index;e(i)}}const u=new i(this.context.signalingClient);this.context.signalingClient.registerObserver(u),this.taskCanceler=u,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const h=new l.default(this.context.meetingSessionConfiguration.applicationMetadata);void 0!==this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption&&void 0!==this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions&&(h.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),h.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.signalingClient.join(h)}));this.context.logger.info(`received first index ${JSON.stringify(e)}`),this.context.indexFrame=e}))}}t["default"]=h},860:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8614),o=n(4059),s=n(5375);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return i(this,void 0,void 0,(function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())}))}receiveLeaveAck(){return new Promise(((e,t)=>{class n{constructor(e,t){this.signalingClient=e,this.logger=t}cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(t){if(t.isConnectionTerminated())return this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),void e();t.type===r.default.ReceivedSignalFrame&&t.message.type===o.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}}const i=new n(this.context.signalingClient,this.context.logger);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)}))}}t["default"]=a},613:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8614),o=n(4059),s=n(5375);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=e=>{this.context.signalingClient.mute(e)}}run(){return i(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)}))}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===r.default.ReceivedSignalFrame)if(e.message.type===o.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===o.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}t["default"]=a},3576:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3511),o=n(3926),s=n(2465),a=n(2743),c=n(5044),l=n(9970),d=n(5207),u=n(7726),h=n(8614),p=n(4059),f=n(2861),m=n(8692),g=n(5375);class v extends g.default{constructor(e,t,n){super(e.logger),this.context=e,this.initialConnectionHealthData=n,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentVideoDownlinkBandwidthEstimationKbps=1e4,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.checkAndSendWeakSignalEvent=e=>{const t=e<1,n=this.prevSignalStrength<1,i=t?n?null:f.default.RedmicStartLoss:n?f.default.RedmicEndLoss:null;i&&this.context.statsCollector.logAudioEvent(i),this.prevSignalStrength=e},this.realtimeFatalErrorCallback=e=>{this.logger.error(`realtime error: ${e}: ${e.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new d.default(u.default.RealtimeApiFailed),e)},this.realtimeAttendeeIdPresenceHandler=(e,t)=>{var n;const i=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${i}`),i===e&&t&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,null===(n=this.context.eventController)||void 0===n||n.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:e,startTimeMs:t,iceGatheringDurationMs:n,attendeePresenceDurationMs:i,meetingStartDurationMs:r}=this.context;return{meetingDurationMs:null===t?0:Math.round(Date.now()-t),signalingOpenDurationMs:e,iceGatheringDurationMs:n,attendeePresenceDurationMs:i,meetingStartDurationMs:r}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const e=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},e),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(e.logger,Object.assign({},t),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new l.default(Object.assign({},t),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new c.default(e.logger,Object.assign({},t),this.initialConnectionHealthData.clone())}removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return i(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)}))}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(e){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(e){if(this.isResubscribeCheckPaused)return this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),void(this.pendingMetricsReport=e);this.pendingMetricsReport=void 0;const t=e.getObservableMetrics();if(!t)return!1;const n=t.availableOutgoingBitrate,i=t.nackCountReceivedPerSecond;let r=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(e);const o=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(r=r||o,o){const e=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=e.truncate(this.context.videoSubscriptionLimit),e.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${o}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:n/1e3,nackCountPerSecond:i});const e=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();r=r||e,e&&(this.logger.info(`trigger resubscribe for up=${e}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(),this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints())}return r}metricsDidReceive(e){const t=e;if(!t)return;if(this.checkResubscribe(e)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const n=t.streamMetricReports;if(!n)return;const i=e.getObservableMetrics();this.currentVideoDownlinkBandwidthEstimationKbps=i.availableIncomingBitrate;const a=new Map,c=new Map;for(const s in n)n[s].mediaType===o.default.VIDEO&&n[s].direction===r.default.DOWNSTREAM&&a.set(n[s].streamId,n[s]);let l=!1;for(const r of this.currentAvailableStreamAvgBitrates.bitrates)if(a.has(r.sourceStreamId)){const e=a.get(r.sourceStreamId),t=this.context.videoStreamIndex.attendeeIdForStreamId(r.sourceStreamId);if(!t)continue;const n=new s.default,i=e.previousMetrics["bytesReceived"],o=e.currentMetrics["bytesReceived"];if(!i||!o)continue;const d=8*(o-i)/1e3;n.expectedAverageBitrateKbps=r.avgBitrateBps/1e3,n.receivedAverageBitrateKbps=d,n.attendeeId=t,d<r.avgBitrateBps/1e3*v.DEFAULT_DOWNLINK_CALLRATE_UNDERSHOOT_FACTOR&&(l=!0),c.set(t,n)}l&&this.logger.info(`One or more video streams are not receiving expected amounts of data ${JSON.stringify(Array.from(c.values()))}`)}connectionHealthDidChange(e){0===e.consecutiveMissedPongs&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,e,(()=>{this.context.audioVideoController.handleMeetingSessionStatus(new d.default(u.default.ConnectionHealthReconnect),null)})),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,e,(()=>{var e;this.context.poorConnectionCount+=1;const t=this.generateAudioVideoEventAttributesForReceivingAudioDropped();null===(e=this.context.eventController)||void 0===e||e.publishEvent("receivingAudioDropped",t),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver((e=>{m.Maybe.of(e.connectionDidSuggestStopVideo).map((t=>t.bind(e)()))})):this.context.audioVideoController.forEachObserver((e=>{m.Maybe.of(e.connectionDidBecomePoor).map((t=>t.bind(e)()))}))}),(()=>{this.context.audioVideoController.forEachObserver((e=>{m.Maybe.of(e.connectionDidBecomeGood).map((t=>t.bind(e)()))}))})),this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,e,(()=>{var e;const t=this.generateBaseAudioVideoEventAttributes();null===(e=this.context.eventController)||void 0===e||e.publishEvent("sendingAudioFailed",t)}),(()=>{var e;const t=this.generateBaseAudioVideoEventAttributes();null===(e=this.context.eventController)||void 0===e||e.publishEvent("sendingAudioRecovered",t)}))}applyHealthPolicy(e,t,n,i){e.update(t);const r=e.healthIfChanged();null!==r&&(this.logger.info(`${e.name} value is now ${r}`),r<=e.minimumHealth()?m.Maybe.of(n).map((e=>e.bind(this)())):m.Maybe.of(i).map((e=>e.bind(this)())))}handleBitrateFrame(e){let t=0;this.currentAvailableStreamAvgBitrates=e,this.logger.debug((()=>`simulcast: bitrates from server ${JSON.stringify(e)}`));for(const n of e.bitrates)this.context.videosToReceive.contain(n.sourceStreamId)&&(t+=n.avgBitrateBps);t/=1e3,this.currentVideoDownlinkBandwidthEstimationKbps*v.DEFAULT_DOWNLINK_CALLRATE_OVERSHOOT_FACTOR<t&&this.logger.info(`Downlink bandwidth pressure is high: estimated bandwidth ${this.currentVideoDownlinkBandwidthEstimationKbps}Kbps, required bandwidth ${t}Kbps`)}handleSignalingClientEvent(e){var t;if(e.type===h.default.WebSocketClosed&&(4410===e.closeCode||e.closeCode>=4500&&e.closeCode<4600)||e.type===h.default.WebSocketError||e.type===h.default.WebSocketFailed){if(!this.hasSignalingError){const e=this.generateAudioVideoEventAttributesForReceivingAudioDropped();null===(t=this.context.eventController)||void 0===t||t.publishEvent("signalingDropped",e),this.hasSignalingError=!0}}else e.type===h.default.WebSocketOpen&&(this.hasSignalingError=!1);if(e.type===h.default.ReceivedSignalFrame){if(e.message.bitrates){const t=e.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(t),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(e.message.bitrates)}const t=d.default.fromSignalFrame(e.message);e.message.type!==p.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&t.statusCode()!==u.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(t,null)}}}t["default"]=v,v.DEFAULT_DOWNLINK_CALLRATE_OVERSHOOT_FACTOR=2,v.DEFAULT_DOWNLINK_CALLRATE_UNDERSHOOT_FACTOR=.2},6733:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(e){}}t["default"]=n},8241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(664),r=n(5971);class o{constructor(e,t,n){this.logger=e,this.task=t,this.dependencies=n,this.canceled=!1}name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const e of this.dependencies)e.cancel();this.logger.info(`Canceling ${this.name()}`),r.default.nextTick((()=>this.task.cancel())),this.canceled=!0,this.cancelPromise&&r.default.nextTick((()=>this.cancelPromise(new Error(`canceling ${this.name()}`))))}}logDependencies(){if(this.logger.getLogLevel()>i.default.INFO)return;if(!this.dependencies)return;const e=this.dependencies.filter((e=>e)).map((e=>e.name())).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${e}`)}run(){if(this.promise)return this.promise;const e=this.dependencies?Promise.all(this.dependencies.map((e=>null===e||void 0===e?void 0:e.run()))):Promise.resolve();return this.logDependencies(),this.ongoing=e.then((()=>this.task.run())),this.promise=new Promise(((e,t)=>{this.cancelPromise=t,this.ongoing.then(e).catch(t)}))}setParent(e){this.task.setParent(e)}}t["default"]=o},4003:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(687),o=n(8614),s=n(5375);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return i(this,void 0,void 0,(function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new r.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise(((e,t)=>{class n{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(n){switch(n.type){case o.default.WebSocketOpen:this.signalingClient.removeObserver(this),e();break;case o.default.WebSocketFailed:this.signalingClient.removeObserver(this),t(new Error("WebSocket connection failed"));break}}}const i=new n(this.context.signalingClient);this.context.signalingClient.registerObserver(i),this.taskCanceler=i}))}catch(n){throw n}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}}))}}t["default"]=a},7296:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5375);class o extends r.default{constructor(e,t,n){super(e),this.taskName=t,this.tasksToRunParallel=n;for(const i of n)i.setParent(this)}cancel(){for(const e of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${e.name()}`),e.cancel()}run(){return i(this,void 0,void 0,(function*(){const e=[];for(const i of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${i.name()}`),e.push(i.run());const t=[];for(let i=0;i<e.length;i++){try{yield e[i]}catch(n){t.push(`task ${this.tasksToRunParallel[i].name()} failed: ${n.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[i].name()}`)}if(t.length>0){const e=t.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)}))}}t["default"]=o},3654:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3958),o=n(8614),s=n(4059),a=n(5375);class c extends a.default{constructor(e,t,n){super(e.logger),this.context=e,this.credentials=t,this.completionCallback=n,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return i(this,void 0,void 0,(function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new r.MeetingSessionStatus(r.MeetingSessionStatusCode.SignalingRequestFailed))}))}receivePrimaryMeetingJoinAck(){return new Promise(((e,t)=>{class n{constructor(e,t,n){this.signalingClient=e,this.completionCallback=t,this.logger=n}cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new r.MeetingSessionStatus(r.MeetingSessionStatusCode.SignalingRequestFailed)),e()}handleSignalingClientEvent(t){t.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new r.MeetingSessionStatus(r.MeetingSessionStatusCode.SignalingRequestFailed)),e()),t.type===o.default.ReceivedSignalFrame&&t.message.type===s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(r.MeetingSessionStatus.fromSignalFrame(t.message)),e())}}const i=new n(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)}))}}t["default"]=c},9819:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5375);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveAudioInputTask"}run(){var e,t;return i(this,void 0,void 0,(function*(){if(!(null===(t=null===(e=this.context.meetingSessionConfiguration)||void 0===e?void 0:e.urls)||void 0===t?void 0:t.audioHostURL))return void this.context.logger.info("No audio connection: not acquiring audio input");if(this.context.activeAudioInput)return void this.context.logger.info("an active audio input exists");let n;try{n=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch(i){this.context.logger.warn("could not acquire audio input from current device")}n?this.context.activeAudioInput=n:this.context.logger.warn("an audio input is not available")}))}}t["default"]=o},5546:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7726),o=n(9729),s=n(7517),a=n(4207),c=n(5375);class l extends c.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveTURNCredentialsTask",this.url=e.meetingSessionConfiguration.urls.turnControlURL,this.meetingId=e.meetingSessionConfiguration.meetingId,this.joinToken=e.meetingSessionConfiguration.credentials.joinToken}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return i(this,void 0,void 0,(function*(){if(this.context.turnCredentials)return void this.context.logger.info("TURN credentials available, skipping credentials fetch");if(this.context.logger.error("missing TURN credentials - falling back to fetch"),!this.url)return void this.context.logger.info("TURN control url not supplied, skipping credentials fetch");const e={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json","X-Chime-Auth-Token":"_aws_wt_session="+new s.default(this.joinToken).base()},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({meetingId:this.meetingId})};this.context.logger.info(`requesting TURN credentials from ${this.url}`);const t=yield new Promise(((t,n)=>i(this,void 0,void 0,(function*(){this.cancelPromise=e=>{n(e)};try{const i=yield fetch(a.default.urlWithVersion(this.url),e);if(this.context.logger.info("received TURN credentials"),i.status&&403===i.status)return void n(new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.TURNCredentialsForbidden}`));if(i.status&&404===i.status)return void n(new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.MeetingEnded}`));t(yield i.json())}catch(i){n(i)}finally{delete this.cancelPromise}}))));this.context.turnCredentials=new o.default,this.context.turnCredentials.password=t.password,this.context.turnCredentials.ttl=t.ttl,this.context.turnCredentials.uris=t.uris.map((e=>this.context.meetingSessionConfiguration.urls.urlRewriter(e))).filter((e=>!!e)),this.context.turnCredentials.username=t.username}))}}t["default"]=l},6145:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7517),o=n(4059),s=n(5375);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}run(){return i(this,void 0,void 0,(function*(){const e=this.context.videoDuplexMode===o.SdkStreamServiceType.RX||this.context.videoDuplexMode===o.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?o.SdkStreamServiceType.DUPLEX:o.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?o.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile())return this.context.logger.info("has not started local video tile"),void(this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([])));const t=this.context.videoTileController.getLocalVideoTile();let n;try{n=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch(i){this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const e=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(e.values()))}if(this.context.activeVideoInput=n,n){const e=n.getVideoTracks();if(!e||0===e.length)return;const o=this.context.meetingSessionConfiguration.credentials.attendeeId,s=new r.default(o).hasModality(r.default.MODALITY_CONTENT),a=e[0].getSettings();if(this.context.enableSimulcast&&!s){const t=this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints();this.context.logger.info(`simulcast: choose constraint ${JSON.stringify(t)}`);try{yield e[0].applyConstraints(t)}catch(i){this.context.logger.info("simulcast: pass video without more constraint")}}const c=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(o,!0,n,a.width,a.height,null,c);for(let t=0;t<e.length;t++){const n=e[t];this.logger.info(`using video device label=${n.label} id=${n.id}`),this.context.videoDeviceInformation["current_camera_name"]=n.label,this.context.videoDeviceInformation["current_camera_id"]=n.id}}}))}}t["default"]=a},2036:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(6126),o=n(7517),s=n(1420),a=n(8614),c=n(4059),l=n(8692),d=n(5375);class u extends d.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return i(this,void 0,void 0,(function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)}))}handleSignalingClientEvent(e){if(e.type!==a.default.ReceivedSignalFrame||e.message.type!==c.SdkSignalFrame.Type.INDEX)return;const t=e.message.index;this.context.logger.info(`received new index ${JSON.stringify(t)}`),this.handleIndexFrame(t)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(e){if(!e)return;if(this.isIngestionPaused)return this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),void(this.pendingIndex=e);this.pendingIndex=null;const t=this.context.audioVideoController.configuration.credentials.attendeeId;e.sources=e.sources.filter((e=>{const n=new o.default(e.attendeeId);return!(n.base()===t&&n.hasModality(o.default.MODALITY_CONTENT))}));const{videoStreamIndex:n,videoDownlinkBandwidthPolicy:i,videoUplinkBandwidthPolicy:r}=this.context,s=n.allVideoSendingSourcesExcludingSelf(t);n.integrateIndexFrame(e),i.updateIndex(n),r.updateIndex(n),this.resubscribe(i,r),this.updateVideoAvailability(e),this.handleIndexVideosPausedAtSource(),e.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(e);const a=n.allVideoSendingSourcesExcludingSelf(t);this.areVideoSourcesEqual(s,a)||this.context.audioVideoController.forEachObserver((e=>{l.Maybe.of(e.remoteVideoSourcesDidChange).map((t=>t.bind(e)(a)))}))}areVideoSourcesEqual(e,t){if(e.length!==t.length)return!1;const n=(e,t)=>e.attendee.attendeeId.localeCompare(t.attendee.attendeeId),i=[...e].sort(n),r=[...t].sort(n);for(let o=0;o<i.length;o++)if(i[o].attendee.attendeeId!==r[o].attendee.attendeeId)return!1;return!0}resubscribe(e,t){const n=e.wantsResubscribe(),i=(this.context.videoDuplexMode===c.SdkStreamServiceType.TX||this.context.videoDuplexMode===c.SdkStreamServiceType.DUPLEX)&&t.wantsResubscribe(),r=n||i;if(this.logger.info(`should resubscribe: ${r} (downlink: ${n} uplink: ${i})`),!r)return;const o=e.chooseSubscriptions();this.context.videosToReceive=o.truncate(this.context.videoSubscriptionLimit),o.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=t.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${i} down=${n}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(e){if(!this.context.videosToReceive)return void this.logger.error("videosToReceive must be set in the meeting context.");const t=new r.default;t.remoteVideoAvailable=!this.context.videosToReceive.empty(),t.canStartLocalVideo=!e.atCapacity,this.context.lastKnownVideoAvailability&&this.context.lastKnownVideoAvailability.equal(t)||(this.context.lastKnownVideoAvailability=t.clone(),this.context.audioVideoController.forEachObserver((e=>{l.Maybe.of(e.videoAvailabilityDidChange).map((n=>n.bind(e)(t.clone())))})))}handleSupportedVideoReceiveCodecIntersection(e){if(void 0===this.context.videoSendCodecPreferences)return;const t=[];let n=!1;for(const i of this.context.videoSendCodecPreferences){let r=!1;for(const n of e.supportedReceiveCodecIntersection)if(i.equals(s.default.fromSignaled(n))){r=!0,t.push(i);break}!r&&i.equals(this.context.currentVideoSendCodec)&&(n=!0)}t.length>0?this.context.meetingSupportedVideoSendCodecPreferences=t:(this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0),n&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const e=this.context.videoStreamIndex.streamsPausedAtSource();for(const t of this.context.videoTileController.getAllVideoTiles()){const n=t.state();e.contain(n.streamId)?t.markPoorConnection()&&this.logger.info(`marks the tile ${n.tileId} as having a poor connection`):t.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${n.tileId} as having a poor connection`)}}}t["default"]=u},6852:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5375);class r extends i.default{constructor(e,t,n="RunnableTask"){super(e),this.fn=t,this.taskName=n}run(){return this.fn().then((()=>{}))}}t["default"]=r},1356:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2236),o=n(8614),s=n(4059),a=n(5375);class c extends a.default{constructor(e){super(e.logger),this.context=e,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(e,t,n)=>{if(this.context.signalingClient.ready()){let i;i=t instanceof Uint8Array?t:"string"===typeof t?(new TextEncoder).encode(t):(new TextEncoder).encode(JSON.stringify(t)),this.validateDataMessage(e,i,n);const r=s.SdkDataMessagePayload.create();r.topic=e,r.lifetimeMs=n,r.data=i;const o=s.SdkDataMessageFrame.create();o.messages=[r],this.context.signalingClient.sendDataMessage(o)}else this.context.logger.error("Signaling client is not ready")}}run(){return i(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)}))}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===o.default.ReceivedSignalFrame&&e.message.type===s.SdkSignalFrame.Type.DATA_MESSAGE)for(const t of e.message.dataMessage.messages){const e=new r.default(t.ingestTimeNs/1e6,t.topic,t.data,t.senderAttendeeId,t.senderExternalUserId,0===t.ingestTimeNs);this.context.realtimeController.realtimeReceiveDataMessage(e)}}validateDataMessage(e,t,n){if(!c.TOPIC_REGEX.test(e))throw new Error("Invalid topic");if(t.length>c.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(n&&n<0)throw new Error("The life time of the message has to be non negative")}}t["default"]=c,c.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),c.DATA_SIZE=2048},2320:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5375),o=n(4631);class s extends r.default{constructor(e,t,n){super(e),this.taskName=t,this.tasksToRunSerially=n,this.currentTask=null;for(const i of n)i.setParent(this)}cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return i(this,void 0,void 0,(function*(){for(const t of this.tasksToRunSerially){this.getStatus()===o.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${t.name()}`),this.currentTask=t,yield t.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${t.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)}))}}t["default"]=s},3341:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4380),o=n(8833),s=n(5375);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="SetLocalDescriptionTask"}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return i(this,void 0,void 0,(function*(){const e=this.context.peer,t=this.context.sdpOfferInit;let n=t.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(n=new o.default(n).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),(new r.default).requiresDisablingH264Encoding()&&(n=new o.default(n).removeH264SupportFromSendSection().sdp),void 0!==this.context.videoSendCodecPreferences&&this.context.videoSendCodecPreferences.length>0&&(n=new o.default(n).withVideoSendCodecPreferences(void 0!==this.context.meetingSupportedVideoSendCodecPreferences?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(n=new o.default(n).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(n=new o.default(n).withStereoAudio().sdp)),this.logger.debug((()=>`local description is >>>${n}<<<`));const s={type:"offer",sdp:n,toJSON:null};yield new Promise(((t,n)=>i(this,void 0,void 0,(function*(){this.cancelPromise=e=>{n(e)};try{yield e.setLocalDescription(s),t()}catch(i){n(i)}finally{delete this.cancelPromise}})))),this.context.logger.info("set local description")}))}}t["default"]=a},3276:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8833),o=n(5375);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="SetRemoteDescriptionTask"}cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){return i(this,void 0,void 0,(function*(){const e=this.context.peer;e||this.logAndThrow("session does not have peer connection; bypass set remote description");let t=this.context.sdpAnswer;t=new r.default(t).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(t=new r.default(t).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(t=new r.default(t).withStereoAudio().sdp)),void 0!==this.context.videoSendCodecPreferences&&this.context.videoSendCodecPreferences.length>0&&(t=new r.default(t).withVideoSendCodecPreferences(void 0!==this.context.meetingSupportedVideoSendCodecPreferences?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp,this.context.currentVideoSendCodec=new r.default(t).highestPriorityVideoSendCodec()),this.logger.info(`processed remote description is >>>${t}<<<`);const n={type:"answer",sdp:t,toJSON:null};try{yield this.createICEConnectionCompletedPromise(n)}catch(i){throw i}}))}createICEConnectionCompletedPromise(e){return new Promise(((t,n)=>i(this,void 0,void 0,(function*(){const i=()=>{"connected"!==this.context.peer.iceConnectionState&&"completed"!==this.context.peer.iceConnectionState||(this.context.peer.removeEventListener("iceconnectionstatechange",i),t())};this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",i),n(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",i);try{yield this.context.peer.setRemoteDescription(e),this.logger.info("set remote description, waiting for ICE connection"),i()}catch(r){n(r)}}))))}}t["default"]=s},2695:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5207),o=n(7726),s=n(8833),a=n(2484),c=n(4694),l=n(8614),d=n(1788),u=n(1737),h=n(4059),p=n(5375);class f extends p.default{constructor(e){super(e.logger),this.context=e,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new a.default(e.logger)}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return i(this,void 0,void 0,(function*(){let e="";if(this.context.peer&&this.context.peer.localDescription&&(e=new s.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let e=0,t=0;this.context.videoCaptureAndEncodeParameter&&(e=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),t=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const n={rid:"hi",maxBitrate:1e3*t,maxFramerate:e,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([n])}this.context.videoStreamIndex.subscribeFrameSent();const t=this.fixUpSubscriptionOrder(e,this.context.videoSubscriptions),n=this.context.videoDuplexMode===h.SdkStreamServiceType.TX||this.context.videoDuplexMode===h.SdkStreamServiceType.DUPLEX;let i;const r=e;if(this.context.serverSupportsCompression){const t=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";i=this.textCompressor.compress(r,t),this.context.logger.info(`Compressed the SDP message from ${r.length} to ${i.length} bytes.`),e=""}this.context.previousSdpOffer=new s.default(r);const o=new d.default(this.context.meetingSessionConfiguration.credentials.attendeeId,e,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,t,n,this.context.videoStreamIndex.localStreamDescriptions(),!0,i);void 0!==this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption&&this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()!==c.default.None&&void 0!==this.context.videoDownlinkBandwidthPolicy.getVideoPreferences&&(o.videoSubscriptionConfiguration=this.convertVideoPreferencesToVideoSubscriptionConfiguration(t,this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(o)}`),this.context.signalingClient.subscribe(o);const a=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(a)}`);let l="";a.compressedSdpAnswer&&a.compressedSdpAnswer.length?(l=this.textCompressor.decompress(a.compressedSdpAnswer,this.context.previousSdpAnswerAsString),0===l.length&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${a.compressedSdpAnswer.length} to ${l.length} bytes.`),this.context.sdpAnswer=l):this.context.sdpAnswer=a.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(a)}))}fixUpSubscriptionOrder(e,t){if(void 0===this.context.transceiverController.getMidForStreamId)return t;const n=new Map;for(const o of t){const e=this.context.transceiverController.getMidForStreamId(o);void 0!==e?n.set(e,o):0!==o&&this.logger.warn(`Could not find MID for stream ID: ${o}`)}const i=new s.default(e).mediaSections(),r=[];for(const o of i)if("video"===o.mediaType)if("recvonly"===o.direction){const e=n.get(o.mid);if(void 0===e){this.logger.warn(`Could not find stream ID for MID: ${o.mid}`);continue}r.push(e)}else r.push(0);return this.logger.info(`Fixed up ${JSON.stringify(t)} to ${JSON.stringify(r)} (may be same))}`),r}convertVideoPreferencesToVideoSubscriptionConfiguration(e,t){if(void 0===this.context.transceiverController.getMidForStreamId||void 0===t)return[];const n=new Array,i=new Map,r=new Map;for(const o of e){const e=this.context.transceiverController.getMidForStreamId(o);if(void 0===e){0!==o&&this.context.logger.warn(`Could not find MID for stream ID: ${o}`);continue}const t=this.context.videoStreamIndex.attendeeIdForStreamId(o);i.set(t,e),r.set(t,this.context.videoStreamIndex.groupIdForStreamId(o))}for(const o of t){const e=new u.default,t=i.get(o.attendeeId);void 0!==t?(e.mid=t,e.attendeeId=o.attendeeId,e.groupId=r.get(o.attendeeId),e.priority=Number.MAX_SAFE_INTEGER-o.priority,e.targetBitrateKbps=o.targetSizeToBitrateKbps(o.targetSize),n.push(e)):this.context.logger.warn(`Could not find MID for attendee ID: ${o.attendeeId}`)}return n}receiveSubscribeAck(){return new Promise(((e,t)=>{const n=this.context;class i{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(t){if(t.isConnectionTerminated()){const e=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${t.closeCode} and reason: ${t.closeReason}`;n.logger.warn(e);let i=o.default.TaskFailed;return t.closeCode>=4500&&t.closeCode<4600&&(i=o.default.SignalingInternalServerError),void n.audioVideoController.handleMeetingSessionStatus(new r.default(i),new Error(e))}if(t.type!==l.default.ReceivedSignalFrame||t.message.type!==h.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const i=t.message.suback;e(i)}}const s=new i(this.context.signalingClient);this.context.signalingClient.registerObserver(s),this.taskCanceler=s}))}}t["default"]=f},4631:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["IDLE"]="IDLE",e["RUNNING"]="RUNNING",e["CANCELED"]="CANCELED",e["FINISHED"]="FINISHED"}(n||(n={})),t["default"]=n},7138:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7230),o=n(5375);class s extends o.default{constructor(e,t,n){super(e),this.taskToRunBeforeTimeout=t,this.timeoutMs=n,this.taskName=`Timeout${this.timeoutMs}ms`,t.setParent(this)}cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return i(this,void 0,void 0,(function*(){const e=new r.default(this.timeoutMs);e.start((()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()}));try{yield this.taskToRunBeforeTimeout.run()}finally{e.stop()}this.logger.info(`timeout task ${this.name()} completed`)}))}}t["default"]=s},339:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7726),o=n(5375);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="WaitForAttendeePresenceTask"}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.NoAttendeePresent}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return i(this,void 0,void 0,(function*(){const e=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise(((t,n)=>{const i=(n,r,o,s,a)=>{e===n&&r&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(),delete this.cancelPromise)};this.cancelPromise=e=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),n(e)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}))}))}}t["default"]=s},2358:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.logger=e,this.browserBehavior=t,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map}setEncodingParameters(e){return i(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const t=this._localCameraTransceiver.sender;if(!e||0===e.size)return;const n=Array.from(e.values()),i=t.getParameters();if(i.encodings&&0!==i.encodings.length)for(const e of i.encodings)for(const t of n){if((e.rid||t.rid)&&e.rid!==t.rid)continue;let n;for(n in t)"rid"!==n&&"codecPayloadType"!==n&&t.hasOwnProperty(n)&&(e[n]=t[n])}else i.encodings=n;yield t.setParameters(i)}))}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(e){return i(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const t=this._localCameraTransceiver.sender;if(!t||e<=0)return;const n=t.getParameters();n.encodings||(n.encodings=[{}]);for(const i of n.encodings)i.maxBitrate=1e3*e;yield t.setParameters(n)}))}setPeer(e){this.peer=e}reset(){this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&"undefined"!==typeof this.peer.getTransceivers}hasVideoInput(){return!(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)}trackIsVideoInput(e){return!!this._localCameraTransceiver&&(e===this._localCameraTransceiver.sender.track||e===this._localCameraTransceiver.receiver.track)}setupLocalTransceivers(){this.useTransceivers()&&(this.defaultMediaStream||"undefined"===typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]})),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(e){return i(this,void 0,void 0,(function*(){return this._localAudioTransceiver&&"sendrecv"===this._localAudioTransceiver.direction?(yield this._localAudioTransceiver.sender.replaceTrack(e),!0):(this.logger.info("audio transceiver direction is not set up or not activated"),!1)}))}setAudioInput(e){return i(this,void 0,void 0,(function*(){yield this.setTransceiverInput(this._localAudioTransceiver,e)}))}setVideoInput(e){return i(this,void 0,void 0,(function*(){yield this.setTransceiverInput(this._localCameraTransceiver,e)}))}updateVideoTransceivers(e,t){if(!this.useTransceivers())return t.array();const n=this.peer.getTransceivers();return this.videoSubscriptions=[0],t=t.clone(),this.updateTransceivers(n,e,t),this.logger.debug((()=>this.debugDumpTransceivers())),this.videoSubscriptions}updateTransceivers(e,t,n){const i=n.array();0===e.length||e[0].stop?0!==e.length&&this.updateTransceiverWithStop(e,t,i):(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(e,t,i));for(const r of i){const e=this.peer.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(r,e),this.videoSubscriptions.push(r),this.logger.info(`adding transceiver mid: ${e.mid} subscription: ${r} direction: recvonly`)}}updateTransceiverWithStop(e,t,n){let i=1;this.videoSubscriptions=[0];for(const r of e){if(r===this._localCameraTransceiver||!this.transceiverIsVideo(r)||!r.mid)continue;let e=!1;const o=t.streamIdForTrack("v_"+r.mid);if("inactive"!==r.direction&&void 0!==o)for(const[s,a]of n.entries())if(t.StreamIdsInSameGroup(o,a)){r.direction="recvonly",this.videoSubscriptions[i]=a,e=!0,this.streamIdToTransceiver.delete(o),this.streamIdToTransceiver.set(a,r),n.splice(s,1);break}if(!e){this.videoSubscriptions[i]=0,this.logger.info(`Stopping MID: ${r.mid}, direction: ${r.direction}, current direction: ${r.currentDirection}`),r.stop();for(const[e,t]of this.streamIdToTransceiver.entries())r.mid===t.mid&&this.streamIdToTransceiver.delete(e)}i+=1}}updateTransceiverWithoutStop(e,t,n){let i=1;for(const r of e)if(r!==this._localCameraTransceiver&&this.transceiverIsVideo(r)){if(this.videoSubscriptions[i]=0,"inactive"!==r.direction){const e=t.streamIdForTrack("v_"+r.mid);if(void 0!==e)for(const[o,s]of n.entries())if(t.StreamIdsInSameGroup(e,s)){r.direction="recvonly",this.videoSubscriptions[i]=s,this.streamIdToTransceiver.delete(e),this.streamIdToTransceiver.set(s,r),n.splice(o,1);break}}i+=1}i=1;for(const r of e)if(r!==this._localCameraTransceiver&&this.transceiverIsVideo(r)){if("inactive"===r.direction&&n.length>0){r.direction="recvonly";const e=n.shift();this.videoSubscriptions[i]=e,this.streamIdToTransceiver.set(e,r)}else if(0===this.videoSubscriptions[i]){r.direction="inactive";for(const[e,t]of this.streamIdToTransceiver.entries())r===t&&this.streamIdToTransceiver.delete(e)}i+=1}}getMidForStreamId(e){var t;return null===(t=this.streamIdToTransceiver.get(e))||void 0===t?void 0:t.mid}setStreamIdForMid(e,t){for(const[n,i]of this.streamIdToTransceiver.entries())if(i.mid===e)return this.streamIdToTransceiver.delete(n),void this.streamIdToTransceiver.set(t,i)}transceiverIsVideo(e){return e.receiver&&e.receiver.track&&"video"===e.receiver.track.kind||e.sender&&e.sender.track&&"video"===e.sender.track.kind}debugDumpTransceivers(){let e="",t=0;for(const n of this.peer.getTransceivers())this.transceiverIsVideo(n)&&(e+=`transceiver index=${t} mid=${n.mid} subscription=${this.videoSubscriptions[t]} direction=${n.direction}\n`,t+=1);return e}setTransceiverInput(e,t){return i(this,void 0,void 0,(function*(){e&&(e.direction=t?"sendrecv":"inactive",yield e.sender.replaceTrack(t))}))}}t["default"]=r},9198:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(9108);class o extends r.default{constructor(e,t){super(e,t);let n=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<o.NAME_ARR_ASCENDING.length;i++){const e=o.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(e,{rid:e,scaleResolutionDownBy:n,maxBitrate:1e3*o.BITRATE_ARR_ASCENDING[i]}),n/=2}}setEncodingParameters(e){return i(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const t=this._localCameraTransceiver.sender,n=Array.from(e.values());if(n.length<=0)return;const i=t.getParameters();if(i.encodings)for(let o=0;o<i.encodings.length;o++)i.encodings[o].rid===r.default.LOW_LEVEL_NAME&&this.copyEncodingParams(e.get(r.default.LOW_LEVEL_NAME),i.encodings[o]),i.encodings[o].rid===r.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(e.get(r.default.HIGH_LEVEL_NAME),i.encodings[o]);else i.encodings=n;yield t.setParameters(i),this.logVideoTransceiverParameters()}))}}t["default"]=o,o.NAME_ARR_ASCENDING=["low","hi"],o.BITRATE_ARR_ASCENDING=[300,1200]},9108:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2358);class o extends r.default{constructor(e,t){super(e,t),this.videoQualityControlParameterMap=new Map;let n=4;for(let i=0;i<o.NAME_ARR_ASCENDING.length;i++){const e=o.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(e,{rid:e,scaleResolutionDownBy:n,maxBitrate:1e3*o.BITRATE_ARR_ASCENDING[i]}),n/=2}}setEncodingParameters(e){return i(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const t=this._localCameraTransceiver.sender,n=Array.from(e.values());if(n.length<=0)return;const i=t.getParameters();if(i.encodings)for(let r=0;r<i.encodings.length;r++)i.encodings[r].rid===o.LOW_LEVEL_NAME&&this.copyEncodingParams(e.get(o.LOW_LEVEL_NAME),i.encodings[r]),i.encodings[r].rid===o.MID_LEVEL_NAME&&this.copyEncodingParams(e.get(o.MID_LEVEL_NAME),i.encodings[r]),i.encodings[r].rid===o.HIGH_LEVEL_NAME&&this.copyEncodingParams(e.get(o.HIGH_LEVEL_NAME),i.encodings[r]);else i.encodings=n;yield t.setParameters(i),this.logVideoTransceiverParameters()}))}setVideoSendingBitrateKbps(e){return i(this,void 0,void 0,(function*(){}))}setupLocalTransceivers(){if(this.useTransceivers()&&(this.defaultMediaStream||"undefined"===typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]})),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const e=this._localCameraTransceiver.sender.getParameters(),t=e.encodings;let n="simulcast: current encoding parameters \n";for(const i of t)n+=`rid=${i.rid} maxBitrate=${i.maxBitrate} active=${i.active} scaleDownBy=${i.scaleResolutionDownBy} maxFrameRate = ${i.maxFramerate} \n`;this.logger.info(n)}copyEncodingParams(e,t){t.active=e.active,t.maxBitrate=e.maxBitrate,t.scaleResolutionDownBy=e.scaleResolutionDownBy,t.maxFramerate=e.maxFramerate}}t["default"]=o,o.LOW_LEVEL_NAME="low",o.MID_LEVEL_NAME="mid",o.HIGH_LEVEL_NAME="hi",o.NAME_ARR_ASCENDING=["low","mid","hi"],o.BITRATE_ARR_ASCENDING=[200,400,1100]},4903:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2358);class r extends i.default{constructor(e,t){super(e,t)}setupLocalTransceivers(){this.useTransceivers()&&(this.defaultMediaStream||"undefined"===typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}}t["default"]=r},3522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const i=n(1973);t.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";class r{constructor(e){this.realtimeController=e,this.transcriptEventCallbacks=new Set}subscribeToTranscriptEvent(e){0===this.transcriptEventCallbacks.size&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(t.TRANSCRIPTION_DATA_MESSAGE_TOPIC,(e=>{for(const t of i.TranscriptEventConverter.from(e))for(const e of this.transcriptEventCallbacks)e(t)})),this.transcriptEventCallbacks.add(e)}unsubscribeFromTranscriptEvent(e){this.transcriptEventCallbacks.delete(e),0===this.transcriptEventCallbacks.size&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(t.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}}t["default"]=r},474:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},8311:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},307:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},1973:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptEventConverter=void 0;const i=n(4059),r=n(474),o=n(4627),s=n(9122),a=n(5809),c={[i.SdkTranscriptionStatus.Type.STARTED]:s.default.STARTED,[i.SdkTranscriptionStatus.Type.INTERRUPTED]:s.default.INTERRUPTED,[i.SdkTranscriptionStatus.Type.RESUMED]:s.default.RESUMED,[i.SdkTranscriptionStatus.Type.STOPPED]:s.default.STOPPED,[i.SdkTranscriptionStatus.Type.FAILED]:s.default.FAILED};class l{static from(e){let t;try{t=i.SdkTranscriptFrame.decode(e.data)}catch(s){throw new Error("Cannot decode transcript data message: "+s)}const n=[];for(const l of t.events)if(l.status){const e=c[l.status.type];if(!e)continue;const t=new o.default;t.type=e,t.eventTimeMs=l.status.eventTime,t.transcriptionRegion=l.status.transcriptionRegion,t.transcriptionConfiguration=l.status.transcriptionConfiguration,l.status.message&&(t.message=l.status.message),n.push(t)}else if(l.transcript){const e=new r.default;e.results=[];for(const t of l.transcript.results){const n={channelId:t.channelId,isPartial:t.isPartial,resultId:t.resultId,startTimeMs:t.startTime,endTimeMs:t.endTime,alternatives:[]};if(t.languageCode&&(n.languageCode=t.languageCode),t.languageIdentification&&t.languageIdentification.length>0){n.languageIdentification=[];for(const e of t.languageIdentification){const t={languageCode:e.languageCode,score:e.score};n.languageIdentification.push(t)}}for(const e of t.alternatives){const t={items:[],transcript:e.transcript};for(const n of e.items){const e={content:n.content,attendee:{attendeeId:n.speakerAttendeeId,externalUserId:n.speakerExternalUserId},startTimeMs:n.startTime,endTimeMs:n.endTime,type:null};switch(n.vocabularyFilterMatch&&(e.vocabularyFilterMatch=n.vocabularyFilterMatch),n.hasOwnProperty("stable")&&(e.stable=n.stable),n.hasOwnProperty("confidence")&&(e.confidence=n.confidence),n.type){case i.SdkTranscriptItem.Type.PRONUNCIATION:e.type=a.default.PRONUNCIATION;break;case i.SdkTranscriptItem.Type.PUNCTUATION:e.type=a.default.PUNCTUATION;break}t.items.push(e)}for(const n of e.entities){t.entities||(t.entities=[]);const e={category:n.category,confidence:n.confidence,content:n.content,startTimeMs:n.startTime,endTimeMs:n.endTime};n.type&&(e.type=n.type),t.entities.push(e)}n.alternatives.push(t)}e.results.push(n)}n.push(e)}return n}}t.TranscriptEventConverter=l},7260:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},5809:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["PRONUNCIATION"]="pronunciation",e["PUNCTUATION"]="punctuation"}(n||(n={})),t["default"]=n},2017:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},1641:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},4627:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},9122:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e["STARTED"]="started",e["INTERRUPTED"]="interrupted",e["RESUMED"]="resumed",e["STOPPED"]="stopped",e["FAILED"]="failed"}(n||(n={})),t["default"]=n},6370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2827),r=n(4207);class o{constructor(e){var t,n,r,s,a,c,l;try{this.parserResult=navigator&&navigator.userAgent?new i.UAParser(navigator.userAgent).getResult():void 0}catch(d){e.error(d.message)}this.browserMajorVersion=(null===(r=null===(n=null===(t=this.parserResult)||void 0===t?void 0:t.browser)||void 0===n?void 0:n.version)||void 0===r?void 0:r.split(".")[0])||o.UNAVAILABLE,this.browserName=(null===(s=this.parserResult)||void 0===s?void 0:s.browser.name)||o.UNAVAILABLE,this.browserVersion=(null===(a=this.parserResult)||void 0===a?void 0:a.browser.version)||o.UNAVAILABLE,this.deviceName=[(null===(c=this.parserResult)||void 0===c?void 0:c.device.vendor)||"",(null===(l=this.parserResult)||void 0===l?void 0:l.device.model)||""].join(" ").trim()||o.UNAVAILABLE}getParserResult(){var e,t;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:(null===(e=this.parserResult)||void 0===e?void 0:e.os.name)||o.UNAVAILABLE,osVersion:(null===(t=this.parserResult)||void 0===t?void 0:t.os.version)||o.UNAVAILABLE,sdkVersion:r.default.sdkVersion,sdkName:r.default.sdkName}}}t["default"]=o,o.UNAVAILABLE="Unavailable"},6258:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.queue=Promise.resolve()}add(e){return new Promise(((t,n)=>{this.queue=this.queue.then(e).then(t).catch(n)}))}}t["default"]=n},8692:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.None=t.Some=t.Maybe=void 0;class n{static of(e){return void 0===e||null===e?r.of():i.of(e)}}t.Maybe=n;class i{constructor(e){this.value=e,this.isSome=!0,this.isNone=!1}map(e){return n.of(e(this.value))}flatMap(e){return e(this.value)}get(){return this.value}getOrElse(e){return this.value}defaulting(e){return n.of(this.getOrElse(e))}static of(e){if(null===e||void 0===e)throw new Error("value is ${value}");return new i(e)}}t.Some=i;class r{constructor(){this.isSome=!1,this.isNone=!0}get(){throw new Error("value is null")}getOrElse(e){return e}map(e){return new r}flatMap(e){return new r}defaulting(e){return n.of(this.getOrElse(e))}static of(){return new r}}t.None=r},6843:function(e,t){"use strict";function n(e){return new Promise((t=>setTimeout(t,e)))}function i(){var e;try{return"IFRAME"===(null===(e=window.frameElement)||void 0===e?void 0:e.nodeName)||parent!==top}catch(t){return!0}}function r(e){return null===e?null:"object"!==typeof e?e:Array.isArray(e)?e.map(r):Object.keys(e).reduce(((t,n)=>{const i=e[n],o="object"===typeof i?r(i):i;return t[n.toLowerCase()]=o,t}),{})}Object.defineProperty(t,"__esModule",{value:!0}),t.toLowerCasePropertyNames=t.isIFramed=t.wait=void 0,t.wait=n,t.isIFramed=i,t.toLowerCasePropertyNames=r},4207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4380),r=n(4714);class o{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return r.default.semverString}static get sdkVersionSemVer(){var e,t,n,i;const o=r.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:null===(e=null===o||void 0===o?void 0:o.groups)||void 0===e?void 0:e.major,minor:null===(t=null===o||void 0===o?void 0:o.groups)||void 0===t?void 0:t.minor,patch:null===(n=null===o||void 0===o?void 0:o.groups)||void 0===n?void 0:n.patch,preRelease:null===(i=null===o||void 0===o?void 0:o.groups)||void 0===i?void 0:i.preRelease}}static get buildSHA(){return r.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const e=new i.default;return`${e.name()}-${e.majorVersion()}`}static urlWithVersion(e){const t=new URL(e);return t.searchParams.append(o.X_AMZN_VERSION,o.sdkVersion),t.searchParams.append(o.X_AMZN_USER_AGENT,o.sdkUserAgentLowResolution),t.toString()}}t["default"]=o,o.X_AMZN_VERSION="X-Amzn-Version",o.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},4714:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={hash:"e6cf38a",raw:"v3.10.0",semverString:"3.10.0"}},5221:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n,i,r,o=1){this.cameraWidth=e,this.cameraHeight=t,this.cameraFrameRate=n,this.maxEncodeBitrateKbps=i,this.isSimulcast=r,this.scaleResolutionDownBy=o}equal(e){let t=e.captureWidth()===this.cameraWidth&&e.captureHeight()===this.cameraHeight&&e.captureFrameRate()===this.cameraFrameRate&&e.encodeBitrates().length===this.encodeBitrates().length&&e.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&e.encodeWidths().length===this.encodeWidths().length&&e.encodeHeights().length===this.encodeHeights().length;if(t)for(let n=0;n<e.encodeWidths().length;n++)if(e.encodeWidths()[n]!==this.encodeWidths()[n]||e.encodeHeights()[n]!==this.encodeHeights()[n]||e.encodeBitrates()[n]!==this.encodeBitrates()[n]||e.encodeScaleResolutionDownBy()[n]!==this.encodeScaleResolutionDownBy()[n])return t=!1,t;return t}clone(){return new n(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}}t["default"]=n},3670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4933);class r{constructor(e){this.selfAttendeeId=e,this.reset()}reset(){this.optimalReceiveSet=new i.default,this.subscribedReceiveSet=new i.default,this.videoSources=void 0}updateIndex(e){this.videoIndex=e,this.optimalReceiveSet=this.calculateOptimalReceiveSet(e)}updateMetrics(e){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(e){this.videoSources=e,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(e){const t=new i.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return t;const n=e.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId);if(void 0===this.videoSources)return n;const r=this.videoIndex.remoteStreamDescriptions(),o=new Map;for(const i of r)n.contain(i.streamId)&&o.set(i.attendeeId,i.streamId);for(const i of this.videoSources){const e=i.attendee.attendeeId;o.has(e)&&t.add(o.get(e))}return t}}t["default"]=r},5554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4933);class r{reset(){}updateIndex(e){}updateMetrics(e){}wantsResubscribe(){return!1}chooseSubscriptions(){return new i.default}}t["default"]=r},8365:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TargetDisplaySize=void 0,function(e){e[e["Low"]=0]="Low",e[e["Medium"]=1]="Medium",e[e["High"]=2]="High"}(n=t.TargetDisplaySize||(t.TargetDisplaySize={})),t["default"]=n},4595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5946),r=n(5010),o=n(9269),s=n(4766);class a extends s.default{constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=o.VideoPreferences.prepare();let n=!1;const s=e.remoteStreamDescriptions();for(const o of s)t.some((e=>e.attendeeId===o.attendeeId))||(o.attendeeId.endsWith(i.default.Modality)?(t.add(new r.default(o.attendeeId,1)),n=!0):t.add(new r.default(o.attendeeId,2)));n?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}}t["default"]=a},5010:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8365);class r{constructor(e,t,n){this.attendeeId=e,this.priority=t,this.targetSize=void 0!==n?n:i.default.High}partialCompare(e){return this.priority-e.priority}equals(e){return this.attendeeId===e.attendeeId&&this.targetSize===e.targetSize&&this.priority===e.priority}clone(){return new r(this.attendeeId,this.priority,this.targetSize)}targetSizeToBitrateKbps(e){switch(e){case i.default.High:return r.HIGH_BITRATE_KBPS;case i.default.Medium:return r.MID_BITRATE_KBPS;case i.default.Low:return r.LOW_BITRATE_KBPS}}}t["default"]=r,r.LOW_BITRATE_KBPS=300,r.MID_BITRATE_KBPS=600,r.HIGH_BITRATE_KBPS=1200},9269:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPreferences=t.MutableVideoPreferences=void 0;class i{constructor(e=[]){this.items=e}static default(){return new i([])}[Symbol.iterator](){let e=0;const t=this.items;return{next(){return e<t.length?{done:!1,value:t[e++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(e){this.items.push(e)}replaceFirst(e,t){const n=this.items.findIndex(t);-1===n?this.items.push(e):this.has(e)?this.items.splice(n,1):this.items[n]=e}remove(e){this.items=this.items.filter((t=>!t.equals(e)))}clear(){this.items=[]}isEmpty(){return 0===this.items.length}equals(e){if(e===this)return!0;if(e.items.length!==this.items.length)return!1;for(const t of this.items)if(!e.items.some((e=>e.equals(t))))return!1;return!0}has(e){return this.items.some((t=>t.equals(e)))}some(e){return this.items.some(e)}clone(){return new i([...this.items])}sort(){this.items.sort(((e,t)=>e.partialCompare(t)))}modify(){return new r(this)}}class r{constructor(e=new i){this.items=e,this.copied=!1}cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(e){this.items.has(e)||(this.cow(),this.items.add(e))}replaceFirst(e,t){this.items.has(e)&&!this.items.some(t)||(this.cow(),this.items.replaceFirst(e,t))}remove(e){this.items.has(e)&&(this.cow(),this.items.remove(e))}some(e){return this.items.some(e)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}}class o{constructor(e){this.builder=e}add(e){this.builder.add(e)}replaceFirst(e,t){this.builder.replaceFirst(e,t)}remove(e){this.builder.remove(e)}some(e){return this.builder.some(e)}clear(){this.builder.clear()}build(){return new s(this.builder.build())}}t.MutableVideoPreferences=o;class s{constructor(e){this.items=e}static prepare(){return new o(new r)}static default(){return new s(i.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var e;return null===(e=this.items.first())||void 0===e?void 0:e.priority}sorted(){return this.items[Symbol.iterator]()}equals(e){return e===this||this.items.equals(e.items)}modify(){return new o(this.items.modify())}some(e){return this.items.some(e)}isEmpty(){return this.items.isEmpty()}clone(){const e=s.prepare();for(const t of this.items)e.add(t.clone());return e.build()}}t.VideoPreferences=s,t["default"]=s},4766:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0});const i=n(3511),r=n(3926),o=n(5946),s=n(664),a=n(4694),c=n(4933),l=n(8365),d=n(5010),u=n(9269),h=n(7570);class p{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}}class f{constructor(e,t=h.default.Default){this.logger=e,this.videoPriorityBasedPolicyConfig=t,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.reset()}reset(){this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=f.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=f.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new p,this.prevDownlinkStats=new p,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption}bindToTileController(e){this.tileController=e,this.logger.info("tileController bound")}chooseRemoteVideoSources(e){var t;(null===(t=this.videoPreferences)||void 0===t?void 0:t.equals(e))||(this.videoPreferences=null===e||void 0===e?void 0:e.clone(),this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(e)}`))}updateIndex(e){this.videoIndex=e,this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const e=new Set;for(const r of this.videoIndex.remoteStreamDescriptions())e.add(r.attendeeId);const t=u.VideoPreferences.prepare(),n=e.size;let i=l.default.High;n>8?i=l.default.Low:n>4&&(i=l.default.Medium);for(const r of e)t.add(new d.default(r,1,i));this.defaultVideoPreferences=t.build()}updateMetrics(e){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new p;const t=e.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=t.availableIncomingBitrate/1e3;for(const n in e.streamMetricReports){const t=Number.parseInt(n,10),o=e.streamMetricReports[t];o.direction===i.default.DOWNSTREAM&&o.mediaType===r.default.VIDEO&&(o.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=e.countPerSecond("nackCount",t)),o.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=e.countPerSecond("packetsLost",t)),o.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=e.bitsPerSecond("bytesReceived",t)/1e3))}}wantsResubscribe(){return this.calculateOptimalReceiveSet(),!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone()}addObserver(e){this.observerQueue.add(e)}removeObserver(e){this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)e(t)}setVideoPriorityBasedPolicyConfigs(e){this.videoPriorityBasedPolicyConfig=e}calculateOptimalReceiveStreams(){var e;const t=[],n=this.videoIndex.remoteStreamDescriptions();if(0===n.length||(null===(e=this.videoPreferences)||void 0===e?void 0:e.isEmpty()))return void(this.optimalReceiveStreams=[]);const i=this.rateProbeState;this.cleanBwPausedTiles(n),this.handleAppPausedStreams(t,n);const r=this.availStreamsSameAsLast(n),c=!this.startupPeriod&&r;if(c&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;n.sort(((e,t)=>e.maxBitrateKbps===t.maxBitrateKbps?e.streamId-t.streamId:e.maxBitrateKbps-t.maxBitrateKbps));for(const s of n)(0===s.avgBitrateKbps||s.avgBitrateKbps>s.maxBitrateKbps)&&(s.attendeeId.endsWith(o.default.Modality)&&s.maxBitrateKbps<100?s.maxBitrateKbps=s.avgBitrateKbps:s.avgBitrateKbps=s.maxBitrateKbps);const l={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};l.targetDownlinkBitrate=this.determineTargetRate();const d=this.subscribedReceiveSet.size(),u=this.downlinkStats.bandwidthEstimateKbps,h=!this.videoPriorityBasedPolicyConfig.allowSubscribe(d,u);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=f.MIN_TIME_BETWEEN_SUBSCRIBE_MS,c&&h))return;const p=this.priorityPolicy(l,n,t),m=this.serverSideNetworkAdaption!==a.default.None&&this.serverSideNetworkAdaption!==a.default.Default;let g=0;if(m||this.startupPeriod||!r?(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0):"Probing"===this.rateProbeState?g=this.handleProbe(t,l.targetDownlinkBitrate):0!==l.deltaToNextUpgrade&&(g=this.maybeOverrideOrProbe(t,l,p)),this.prevRemoteInfos=n,this.videoPreferencesUpdated=!1,1===g)return this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),void(this.prevTargetRateKbps=l.targetDownlinkBitrate);if(2===g){const e=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);return this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(n,this.preProbeNonPausedReceiveStreams),void this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+e)}this.optimalNonPausedReceiveStreams=t.slice();const v=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(n,t),this.logger.getLogLevel()<=s.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==i||this.optimalReceiveStreams.length!==t.length||v!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(n,l.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=l.targetDownlinkBitrate,this.optimalReceiveStreams=t.slice()}calculateOptimalReceiveSet(){const e=new c.default;this.calculateOptimalReceiveStreams();for(const t of this.optimalReceiveStreams)e.add(t.streamId);if(!this.optimalReceiveSet.equal(e)){const t=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(e)} subscribedRate:${t}`)}this.optimalReceiveSet=e}determineTargetRate(){let e=0;const t=Date.now();return 0!==this.downlinkStats.bandwidthEstimateKbps?(0===this.firstEstimateTimestamp&&(this.firstEstimateTimestamp=t),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>f.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||t-this.firstEstimateTimestamp>f.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?e=f.DEFAULT_BANDWIDTH_KBPS:"Probing"===this.rateProbeState&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<f.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),e=this.downlinkStats.usedBandwidthKbps+f.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):e=this.downlinkStats.bandwidthEstimateKbps):e=0===this.firstEstimateTimestamp?f.DEFAULT_BANDWIDTH_KBPS:this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-f.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*f.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&0===this.downlinkStats.packetsLost?(this.logger.debug((()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps)),this.usingPrevTargetRate=!0,e=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,e}setProbeState(e){if(this.rateProbeState===e)return!1;const t=Date.now();switch(e){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(!(0===this.lastProbeTimestamp||t-this.lastProbeTimestamp>f.MIN_TIME_BETWEEN_PROBE_MS))return!1;this.probePendingStartTimestamp=t;break;case"Probing":if(!(t-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs))return!1;this.lastProbeTimestamp=t,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(2*this.timeBeforeAllowProbeMs,f.MAX_HOLD_BEFORE_PROBE_MS);break}return this.logger.info("bwe: setProbeState to "+e+" from "+this.rateProbeState),this.rateProbeState=e,!0}upgradeToStream(e,t){for(let n=0;n<e.length;n++)if(e[n].groupId===t.groupId){const i=t.avgBitrateKbps-e[n].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(e[n])+" to "+t),this.lastUpgradeRateKbps=i,e[n]=t,i}return e.push(t),this.lastUpgradeRateKbps=t.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(e,t){if(Date.now()-this.lastProbeTimestamp>f.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>f.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=3*Math.max(f.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs),2;const n=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(e)||t>n?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=f.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(e,t,n){const i=this.chosenStreamsSameAsLast(e);let r=0;const o=t.targetDownlinkBitrate>f.LOW_BITRATE_THRESHOLD_KBPS?f.TARGET_RATE_CHANGE_TRIGGER_PERCENT:2*f.TARGET_RATE_CHANGE_TRIGGER_PERCENT,s=t.targetDownlinkBitrate*o/100;if(this.targetRateBaselineForDeltaCheckKbps=void 0!==this.targetRateBaselineForDeltaCheckKbps?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!i&&Math.abs(t.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<s?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),r=1):this.targetRateBaselineForDeltaCheckKbps=t.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,r;if(i||1===r)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(e,n),r=0);break}else this.setProbeState("Not Probing");return r}calculateSubscribeRate(e){let t=0;for(const n of e)this.pausedStreamIds.contain(n.streamId)||this.pausedBwAttendeeIds.has(n.attendeeId)||(t+=n.maxBitrateKbps);return t}handleAppPausedStreams(e,t){if(!this.tileController)return void this.logger.warn("tileController not found!");this.pausedStreamIds=new c.default;const n=this.tileController.getAllRemoteVideoTiles();for(const i of n){const n=i.state();if(n.paused&&!this.pausedBwAttendeeIds.has(n.boundAttendeeId)){let i=t.length;while(i--)t[i].attendeeId===n.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+n.boundAttendeeId+" streamId: "+t[i].streamId),this.pausedStreamIds.add(t[i].streamId),this.subscribedReceiveSet.contain(t[i].streamId)&&e.push(t[i]),t.splice(i,1))}}}processBwPausedStreams(e,t){if(!this.tileController)return void this.logger.warn("tileController not found!");const n=this.getCurrentVideoPreferences();if(n&&this.shouldPauseTiles){const i=this.tileController.getAllVideoTiles();for(const r of n){const n=this.getVideoTileForAttendeeId(r.attendeeId,i),o=(null===n||void 0===n?void 0:n.state().paused)||!1;if(t.some((e=>e.attendeeId===r.attendeeId)))o&&this.pausedBwAttendeeIds.has(r.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${r.attendeeId} due to bandwidth`),this.forEachObserver((e=>{e.tileWillBeUnpausedByDownlinkPolicy(n.id())})),this.tileController.unpauseVideoTile(n.id()),this.pausedBwAttendeeIds.delete(r.attendeeId));else{const i=e.some((e=>e.attendeeId===r.attendeeId));if(n&&i){const e=this.optimalReceiveStreams.find((e=>e.attendeeId===r.attendeeId));void 0!==e&&(o||(this.logger.info(`bwe: pausing streamId ${e.streamId} attendee ${r.attendeeId} due to bandwidth`),this.forEachObserver((e=>{e.tileWillBePausedByDownlinkPolicy(n.id())})),this.tileController.pauseVideoTile(n.id())),t.push(e)),this.pausedBwAttendeeIds.add(r.attendeeId)}else if(i){const e=this.tileController.addVideoTile();e.bindVideoStream(r.attendeeId,!1,null,0,0,0,null),this.forEachObserver((t=>{t.tileWillBePausedByDownlinkPolicy(e.id())})),e.pause(),this.logger.info(`bwe: Created video tile ${e.id()} for bw paused attendee ${r.attendeeId}`),this.pausedBwAttendeeIds.add(r.attendeeId)}}}}}cleanBwPausedTiles(e){if(!this.tileController)return void this.logger.warn("tileController not found!");const t=this.tileController.getAllRemoteVideoTiles(),n=this.getCurrentVideoPreferences();for(const i of t){const t=i.state();t.boundVideoStream||(e.some((e=>e.attendeeId===t.boundAttendeeId))?void 0===n||n.some((e=>e.attendeeId===t.boundAttendeeId))||this.tileController.removeVideoTile(t.tileId):(this.tileController.removeVideoTile(t.tileId),this.logger.info(`bwe: Removed video tile ${t.tileId} for bw paused attendee ${t.boundAttendeeId}`)))}}priorityPolicy(e,t,n){let i;const r=this.getCurrentVideoPreferences(),s=r.highestPriority();let a,c=s;while(-1!==c){a=-1;for(const o of r)if(o.priority===c)for(const r of t)r.attendeeId===o.attendeeId&&(n.some((e=>e.groupId===r.groupId))||(e.chosenTotalBitrate+r.avgBitrateKbps<=e.targetDownlinkBitrate?(n.push(r),e.chosenTotalBitrate+=r.avgBitrateKbps):0===e.deltaToNextUpgrade&&(e.deltaToNextUpgrade=r.avgBitrateKbps,i=r)));else if(o.priority>c){a=o.priority;break}for(const s of r)if(s.priority===c){for(const r of t)if(r.attendeeId===s.attendeeId){const a=n.findIndex((e=>e.groupId===r.groupId&&e.maxBitrateKbps<r.maxBitrateKbps));if(-1!==a){const c=r.avgBitrateKbps-n[a].avgBitrateKbps;this.hasSimulcastStreams(t,r.attendeeId,r.groupId)&&this.canUpgrade(r.avgBitrateKbps,s.targetSize,s.targetSizeToBitrateKbps(s.targetSize),r.attendeeId.endsWith(o.default.Modality))?(this.logger.info(`bwe: attendee: ${r.attendeeId} group: ${r.groupId} has simulcast and can upgrade avgBitrate: ${r.avgBitrateKbps} target: ${s.targetSizeToBitrateKbps(s.targetSize)} targetTotalBitrate: ${e.targetDownlinkBitrate}`),e.chosenTotalBitrate+c<=e.targetDownlinkBitrate?(e.chosenTotalBitrate+=c,n[a]=r):0===e.deltaToNextUpgrade&&(e.deltaToNextUpgrade=c,i=r)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(s.priority>c)break;if(c===s&&0!==e.deltaToNextUpgrade)break;c=a}return i}getVideoTileForAttendeeId(e,t){for(const n of t){const t=n.state();if(t.boundAttendeeId===e)return n}return null}canUpgrade(e,t,n,i){let r=!1;return i?(t===l.default.High||t===l.default.Medium&&e<=n)&&(r=!0):e<=n&&(r=!0),r?(this.logger.info(`bwe: canUpgrade: bitrateKbp: ${e} targetBitrateKbp: ${n}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbp: ${e} targetBitrateKbp: ${n}`),!1)}hasSimulcastStreams(e,t,n){let i=0;for(const r of e)r.attendeeId===t&&r.groupId===n&&i++;return this.logger.info(`bwe: attendeeId: ${t} groupId: ${n} hasSimulcastStreams: streamCount: ${i}`),i>1}availStreamsSameAsLast(e){if(void 0===this.prevRemoteInfos||e.length!==this.prevRemoteInfos.length||!0===this.videoPreferencesUpdated)return!1;for(const t of e){const e=this.prevRemoteInfos.find((e=>e.groupId===t.groupId&&e.streamId===t.streamId&&e.maxBitrateKbps===t.maxBitrateKbps));if(void 0===e)return!1}return!0}chosenStreamsSameAsLast(e){if(this.optimalNonPausedReceiveStreams.length!==e.length)return!1;for(const t of this.optimalNonPausedReceiveStreams)if(!e.some((e=>e.streamId===t.streamId)))return!1;return!0}policyStateLogStr(e,t){const n=this.calculateSubscribeRate(this.optimalReceiveStreams),i={targetBitrate:t,subscribedRate:n,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let r="remoteInfos: [";for(const s of e)r+=`{grpId:${s.groupId} strId:${s.streamId} maxBr:${s.maxBitrateKbps} avgBr:${s.avgBitrateKbps}}, `;r+="]";let o=`bwe: optimalReceiveSet ${JSON.stringify(i)}\nbwe:   prev ${JSON.stringify(this.prevDownlinkStats)}\nbwe:   now  ${JSON.stringify(this.downlinkStats)}\nbwe:   ${r}\n`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(o+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }\n`),this.videoPreferences?o+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:o+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,o}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(e){this.serverSideNetworkAdaption=e,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[a.default.None,a.default.BandwidthProbing]}getVideoPreferences(){let e=this.getCurrentVideoPreferences();if(!e){const t=u.VideoPreferences.prepare();e=t.build()}return e}}t["default"]=f,f.DEFAULT_BANDWIDTH_KBPS=2800,f.STARTUP_PERIOD_MS=6e3,f.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,f.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,f.LOW_BITRATE_THRESHOLD_KBPS=300,f.MIN_TIME_BETWEEN_PROBE_MS=5e3,f.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,f.MAX_HOLD_BEFORE_PROBE_MS=3e4,f.MAX_ALLOWED_PROBE_TIME_MS=6e4,f.SPURIOUS_PACKET_LOST_THRESHOLD=2,f.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},7570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4694);class r{constructor(e=0,t=0){this.networkIssueResponseDelayFactor=e,this.networkIssueRecoveryDelayFactor=t,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=i.default.Default,e<0?e=0:e>1&&(e=1),this.networkIssueResponseDelayFactor=e,t<0?t=0:t>1&&(t=1),this.networkIssueRecoveryDelayFactor=t}allowSubscribe(e,t){let n=0;const i=this.currentNetworkEvent;if(t>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=t,!0;if(t<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,e),1!==i)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=t,!0;return!1}return this.currentNetworkEvent=0,!1}getSubscribeDelay(e,t){let n=r.MINIMUM_DELAY_MS;const i=r.MAXIMUM_DELAY_MS-r.MINIMUM_DELAY_MS,o=this.networkIssueResponseDelayFactor;switch(e){case 1:n+=i*o*(1+t/10),n=Math.min(r.MAXIMUM_DELAY_MS,n);break}return n}}t["default"]=r,r.MINIMUM_DELAY_MS=2e3,r.MAXIMUM_DELAY_MS=8e3,r.Default=new r(0,0),r.UnstableNetworkPreset=new r(0,1),r.StableNetworkPreset=new r(1,0)},9742:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{create(){const e={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{e.paused=!0},play:()=>(e.paused=!1,Promise.resolve())};return e}}t["default"]=n},7797:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.canvas=e,this.destroyed=!1}destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return n(this,void 0,void 0,(function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)}))}asCanvasElement(){return this.canvas}}t["default"]=i},8047:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7797),o=15;class s{constructor(e,t){this.logger=e,this.stages=t,this.fr=o,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=e=>i(this,void 0,void 0,(function*(){if(!this.inputVideoStream)return;const e=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let t,n=[];n.push(this.sourceBuffers[0]);try{for(const e of this.processors)n=yield e.process(n)}catch(c){return void this.forEachObserver((e=>{e.processingDidFailToStart&&e.processingDidFailToStart()}))}this.destBuffers=n;try{t=yield this.destBuffers[0].asCanvasImageSource()}catch(l){return void(this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver((e=>{e.processingDidFailToStart&&e.processingDidFailToStart()}))))}const i=t.width,r=t.height;0!==i&&0!==r&&(this.canvasOutput.width!==i&&this.canvasOutput.height!==r&&(this.canvasOutput.width=i,this.canvasOutput.height=r),this.outputCtx.drawImage(t,0,0,i,r,0,0,i,r),this.hasStarted||(this.hasStarted=!0,this.forEachObserver((e=>{e.processingDidStart&&e.processingDidStart()}))));const o=performance.now()-e,s=2e3/this.framerate-o,a=Math.max(0,1e3/this.framerate-o);s<=0&&this.forEachObserver((e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(o)})),this.lastTimeOut=setTimeout(this.process,a)}))}destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?o:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.lastTimeOut&&(clearTimeout(this.lastTimeOut),this.lastTimeOut=void 0),this.hasStarted&&(this.hasStarted=!1,this.forEachObserver((e=>{e.processingDidStop&&e.processingDidStop()})))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return i(this,void 0,void 0,(function*(){return this.inputVideoStream}))}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()||(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput()),this.outputMediaStream}setInputMediaStream(e){return i(this,void 0,void 0,(function*(){if(!e)return void this.stop();if(0===e.getVideoTracks().length)return void this.logger.error("No video tracks in input media stream, ignoring");this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const n=new r.default(this.canvasInput);this.sourceBuffers.push(n),this.videoInput.load();try{yield this.videoInput.play()}catch(i){this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()}))}cloneInputAudioTracksToOutput(){if(this.isOutputMediaStreamActive()&&null!==this.inputVideoStream){for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}else this.logger.info("Not cloning input audio tracks to output, do not have media streams ready")}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout((()=>{e(t)}),0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}}t["default"]=s},1261:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4380),o=n(8047);class s{constructor(e,t,n,i=new r.default){this.logger=e,this.device=t,this.processors=n,this.browserBehavior=i,this.observers=new Set,this.pipe=new o.default(this.logger,this.processors),this.pipe.addObserver(this)}get outputMediaStream(){return this.pipe.outputMediaStream}chooseNewInnerDevice(e){const t=new s(this.logger,e,this.processors,this.browserBehavior);return t.pipe=this.pipe,t}getInnerDevice(){return this.device}intrinsicDevice(){return i(this,void 0,void 0,(function*(){return this.device}))}transformStream(e){return i(this,void 0,void 0,(function*(){return yield this.pipe.setInputMediaStream(e),this.inputMediaStream=e,this.pipe.getActiveOutputMediaStream()}))}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const e=this.device&&this.device.id;if(this.pipe.stop(),!e&&this.inputMediaStream)for(const t of this.inputMediaStream.getVideoTracks())t.stop()}stop(){return i(this,void 0,void 0,(function*(){if(this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop();this.pipe.destroy(),this.inputMediaStream=null}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver((e=>{e.processingDidStart&&e.processingDidStart()}))}processingLatencyTooHigh(e){this.forEachObserver((t=>{t.processingLatencyTooHigh&&t.processingLatencyTooHigh(e)}))}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver((e=>{e.processingDidFailToStart&&e.processingDidFailToStart()}))}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver((e=>{e.processingDidStop&&e.processingDidStop()}))}forEachObserver(e){for(const t of this.observers)setTimeout((()=>{e(t)}),0)}}t["default"]=s},5640:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class i{process(e){return n(this,void 0,void 0,(function*(){return e}))}destroy(){return n(this,void 0,void 0,(function*(){}))}}t["default"]=i},2361:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},4933:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.ids=new Set(e)}add(e){this.ids.add(e)}array(){const e=Array.from(this.ids.values());return e.sort(((e,t)=>e-t))}contain(e){return this.ids.has(e)}forEach(e){this.ids.forEach(e)}empty(){return 0===this.ids.size}size(){return this.ids.size}equal(e){if(!e)return 0===this.ids.size;const t=this.array(),n=e.array();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0}clone(){return new n(this.array())}remove(e){this.ids.delete(e)}toJSON(){return this.array()}truncate(e){const t=this.array();return new n(t.splice(0,e))}}t["default"]=n},7816:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0});const i=n(4059),r=n(4933),o=n(4645);class s{constructor(e){this.logger=e,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.streamToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new o.default,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(e){return e>0&&e<1e3?1:Math.trunc(e/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const e=[];return this.currentIndex.sources.forEach((t=>{const n=new o.default;n.attendeeId=t.attendeeId,n.groupId=t.groupId,n.streamId=t.streamId,n.maxBitrateKbps=t.maxBitrateKbps,n.avgBitrateKbps=this.convertBpsToKbps(t.avgBitrateBps),e.push(n)})),e}integrateUplinkPolicyDecision(e){if(e&&e.length){const t=e[0];this.videoStreamDescription.maxBitrateKbps=t.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=t.maxFramerate}}integrateIndexFrame(e){this.currentIndex=e;const t=new Map;let n=!1;for(const i of e.sources){if(!t.has(i.attendeeId)){t.set(i.attendeeId,i.groupId);continue}const e=t.get(i.attendeeId);e<i.groupId&&(this.logger.warn(`Old group ID ${e} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),t.set(i.attendeeId,i.groupId)),n=!0}n&&(this.currentIndex.sources=this.currentIndex.sources.filter((e=>t.get(e.attendeeId)===e.groupId))),this.streamToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(e){this.currentSubscribeAck=e,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe)}integrateBitratesFrame(e){if(this.currentIndex)for(const t of e.bitrates){const e=this.currentIndex.sources.find((e=>e.streamId===t.sourceStreamId));void 0!==e&&(e.avgBitrateBps=t.avgBitrateBps)}}allStreams(){const e=new r.default;if(this.currentIndex)for(const t of this.currentIndex.sources)e.add(t.streamId);return e}allVideoSendingSourcesExcludingSelf(e){const t=[],n=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const r of this.currentIndex.sources){const{attendeeId:o,externalUserId:s,mediaType:a}=r;o!==e&&a===i.SdkStreamMediaType.VIDEO&&(n.has(o)||(t.push({attendee:{attendeeId:o,externalUserId:s}}),n.add(o)))}return t}streamSelectionUnderBandwidthConstraint(e,t,n,o){const s=new Set;if(this.currentIndex)for(const r of this.currentIndex.sources)r.attendeeId!==e&&r.mediaType===i.SdkStreamMediaType.VIDEO&&(t.has(r.attendeeId)||n.has(r.attendeeId)||s.add(r.attendeeId));const a=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(e),c=new Map;let l=0;a.forEach(((e,t)=>{c.set(t,e[0]),l+=e[0].maxBitrateKbps})),l=this.trySelectHighBitrateForAttendees(a,t,l,o,c),this.trySelectHighBitrateForAttendees(a,s,l,o,c);const d=new r.default;for(const i of c.values())d.add(i.streamId);return d}highestQualityStreamFromEachGroupExcludingSelf(e){const t=new r.default;if(this.currentIndex){const n=new Map;for(const t of this.currentIndex.sources)t.attendeeId!==e&&t.mediaType===i.SdkStreamMediaType.VIDEO&&(!n.has(t.groupId)||t.maxBitrateKbps>n.get(t.groupId).maxBitrateKbps)&&n.set(t.groupId,t);for(const e of n.values())t.add(e.streamId)}return t}numberOfVideoPublishingParticipantsExcludingSelf(e){return this.highestQualityStreamFromEachGroupExcludingSelf(e).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(e){const t=this.streamIdForTrack(e);if(void 0===t||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${e}`),"";const n=this.subscribeStreamToAttendeeMap.get(t);return n||(this.logger.info(`track ${e} (stream ${t}) does not correspond to a known attendee`),"")}externalUserIdForTrack(e){const t=this.streamIdForTrack(e);if(void 0===t||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${e}`),"";const n=this.subscribeStreamToExternalUserIdMap.get(t);return n||(this.logger.info(`track ${e} (stream ${t}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(e){if(!this.streamToAttendeeMap){if(!this.currentIndex)return"";this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex)}const t=this.streamToAttendeeMap.get(e);return t||(this.logger.info(`stream ${e}) does not correspond to a known attendee`),"")}groupIdForStreamId(e){if(this.currentIndex&&this.currentIndex.sources){for(const t of this.currentIndex.sources)if(t.streamId===e)return t.groupId;if(this.indexForSubscribe)for(const t of this.indexForSubscribe.sources)if(t.streamId===e)return t.groupId}}StreamIdsInSameGroup(e,t){return this.groupIdForStreamId(e)===this.groupIdForStreamId(t)}streamIdForTrack(e){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(e)}streamIdForSSRC(e){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(e)}overrideStreamIdMappings(e,t){if(this.subscribeTrackToStreamMap)for(const[n,i]of this.subscribeTrackToStreamMap.entries())if(e===i){this.subscribeTrackToStreamMap.set(n,t);break}if(this.subscribeSsrcToStreamMap)for(const[n,i]of this.subscribeSsrcToStreamMap.entries())if(e===i){this.subscribeSsrcToStreamMap.set(n,t);break}}streamsPausedAtSource(){const e=new r.default;if(this.currentIndex)for(const t of this.currentIndex.pausedAtSourceIds)e.add(t);return e}buildTrackToStreamMap(e){const t=new Map;this.logger.debug((()=>`trackMap ${JSON.stringify(e.tracks)}`));for(const n of e.tracks)n.trackLabel.length>0&&n.streamId>0&&t.set(n.trackLabel,n.streamId);return t}buildSSRCToStreamMap(e){const t=new Map;this.logger.debug((()=>`ssrcMap ${JSON.stringify(e.tracks)}`));for(const n of e.tracks)n.trackLabel.length>0&&n.streamId>0&&t.set(n.ssrc,n.streamId);return t}buildStreamToAttendeeMap(e){const t=new Map;if(e)for(const n of e.sources)t.set(n.streamId,n.attendeeId);return t}buildStreamExternalUserIdMap(e){const t=new Map;if(e)for(const n of e.sources)n.externalUserId&&t.set(n.streamId,n.externalUserId);return t}trySelectHighBitrateForAttendees(e,t,n,i,r){for(const o of t){if(n>=i)break;if(e.has(o)){const t=e.get(o);for(const e of t.reverse())if(n-r.get(o).maxBitrateKbps+e.maxBitrateKbps<i){n=n-r.get(o).maxBitrateKbps+e.maxBitrateKbps,r.set(o,e);break}}}return n}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(e){const t=new Map;if(this.currentIndex)for(const n of this.currentIndex.sources)n.attendeeId!==e&&n.mediaType===i.SdkStreamMediaType.VIDEO&&(t.has(n.attendeeId)?t.get(n.attendeeId).push(n):t.set(n.attendeeId,[n]));return t.forEach(((e,t)=>{e.sort(((e,t)=>e.maxBitrateKbps>t.maxBitrateKbps?1:e.maxBitrateKbps<t.maxBitrateKbps?-1:0))})),t}}t["default"]=s},16:function(e,t,n){"use strict";n(7658),Object.defineProperty(t,"__esModule",{value:!0});const i=n(4059),r=n(7816),o=n(4645);class s extends r.default{constructor(e){super(e),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._lastBitRateMsgTime=Date.now()}localStreamDescriptions(){const e=[];return this._localStreamInfos.forEach((t=>{e.push(t.clone())})),e}integrateUplinkPolicyDecision(e){let t=!0,n=0;for(let i=0;i<e.length;i++){const r=e[i].maxBitrate/1e3,s=e[i].maxFramerate;if(t&&i!==this._localStreamInfos.length)0===this._localStreamInfos[n].maxBitrateKbps&&r>0&&(this._localStreamInfos[n].timeEnabled=Date.now()),this._localStreamInfos[n].maxBitrateKbps=r,this._localStreamInfos[n].maxFrameRate=s,this._localStreamInfos[n].disabledByUplinkPolicy=0===r,!0===this._localStreamInfos[n].disabledByUplinkPolicy&&(this._localStreamInfos[n].disabledByWebRTC=!1),n++;else{t=!1;const e=new o.default;e.maxBitrateKbps=r,e.maxFrameRate=s,e.disabledByUplinkPolicy=0===r,0!==r&&(e.timeEnabled=Date.now()),this._localStreamInfos.push(e),n++}}t&&this._localStreamInfos.splice(n)}integrateBitratesFrame(e){super.integrateBitratesFrame(e);const t=new Set,n=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of e.bitrates)t.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of n)if(!t.has(i)){const e=this.streamIdToBitrateKbpsMap.get(i);e===s.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,s.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,s.NOT_SENDING_STREAM_BITRATE)}for(let i=0;i<this._localStreamInfos.length;i++){this._localStreamInfos[i].disabledByWebRTC=!1;const e=this._localStreamInfos[i].streamId;if(!this._localStreamInfos[i].disabledByUplinkPolicy)if(this.streamIdToBitrateKbpsMap.has(e)){const t=this.streamIdToBitrateKbpsMap.get(e);t===s.NOT_SENDING_STREAM_BITRATE&&this._lastBitRateMsgTime-this._localStreamInfos[i].timeEnabled>s.BitratesMsgFrequencyMs&&(this._localStreamInfos[i].disabledByWebRTC=!0)}else this._lastBitRateMsgTime-this._localStreamInfos[i].timeEnabled>s.BitratesMsgFrequencyMs&&(this._localStreamInfos[i].disabledByWebRTC=!0)}this._lastBitRateMsgTime=Date.now(),this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let e="";for(const t of this._localStreamInfos)e+=`streamId=${t.streamId} maxBitrate=${t.maxBitrateKbps} disabledByWebRTC=${t.disabledByWebRTC} disabledByUplink=${t.disabledByUplinkPolicy}\n`;this.logger.debug((()=>e))}integrateIndexFrame(e){super.integrateIndexFrame(e);const t=new Set,n=new Set(this.streamIdToBitrateKbpsMap.keys());for(const r of this.currentIndex.sources)r.mediaType===i.SdkStreamMediaType.VIDEO&&(t.add(r.streamId),this.streamIdToBitrateKbpsMap.has(r.streamId)||this.streamIdToBitrateKbpsMap.set(r.streamId,s.UNSEEN_STREAM_BITRATE));for(const i of n)t.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(e){if(super.integrateSubscribeAckFrame(e),!e.allocations||void 0===e.allocations)return;let t=0;for(const n of e.allocations){if(this._localStreamInfos.length<t+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[t].groupId=n.groupId,this._localStreamInfos[t].streamId=n.streamId,this.streamIdToBitrateKbpsMap.has(n.streamId)||this.streamIdToBitrateKbpsMap.set(n.streamId,s.UNSEEN_STREAM_BITRATE),t++}}}t["default"]=s,s.UNSEEN_STREAM_BITRATE=-2,s.RECENTLY_INACTIVE_STREAM_BITRATE=-1,s.NOT_SENDING_STREAM_BITRATE=0,s.BitratesMsgFrequencyMs=4e3},4645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4059);class r{constructor(e,t,n,i,r){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.attendeeId=e,this.groupId=t,this.streamId=n,this.maxBitrateKbps=i,this.avgBitrateKbps=r}clone(){const e=new r;return e.attendeeId=this.attendeeId,e.groupId=this.groupId,e.streamId=this.streamId,e.ssrc=this.ssrc,e.trackLabel=this.trackLabel,e.maxBitrateKbps=this.maxBitrateKbps,e.avgBitrateKbps=this.avgBitrateKbps,e.maxFrameRate=this.maxFrameRate,e.timeEnabled=this.timeEnabled,e.disabledByWebRTC=this.disabledByWebRTC,e.disabledByUplinkPolicy=this.disabledByUplinkPolicy,e}toStreamDescriptor(){const e=i.SdkStreamDescriptor.create();return e.mediaType=i.SdkStreamMediaType.VIDEO,e.trackLabel=this.trackLabel,e.attendeeId=this.attendeeId,e.streamId=this.streamId,e.groupId=this.groupId,e.framerate=this.maxFrameRate,e.maxBitrateKbps=this.disabledByUplinkPolicy||this.disabledByWebRTC?0:this.maxBitrateKbps,e.avgBitrateBps=this.avgBitrateKbps,e}}t["default"]=r},6619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4380),r=n(7517),o=n(6744);class s{constructor(e,t,n,i){this.tileController=n,this.devicePixelRatioMonitor=i,this.tileState=new o.default,this.tileState.tileId=e,this.tileState.localTile=t,this.devicePixelRatioMonitor.registerObserver(this)}static connectVideoStreamToVideoElement(e,t,n){const r=n&&"environment"!==e.getVideoTracks()[0].getSettings().facingMode?"rotateY(180deg)":"";if(s.setVideoElementFlag(t,"disablePictureInPicture",n),s.setVideoElementFlag(t,"disableRemotePlayback",n),t.style.transform!==r&&(t.style.transform=r),t.hasAttribute("controls")&&t.removeAttribute("controls"),t.hasAttribute("autoplay")||t.setAttribute("autoplay","true"),t.hasAttribute("playsinline")||t.setAttribute("playsinline","true"),t.hasAttribute("muted")||(t.setAttribute("muted","true"),t.muted=!0),t.srcObject!==e&&(t.srcObject=e,(new i.default).requiresVideoPlayWorkaround()&&t.paused)){const e=t.play();void 0!==e&&e.catch((e=>{console.warn("Error playing video in Safari",e)})).then((()=>{console.debug("Video played successfully in Safari")}))}}static disconnectVideoStreamFromVideoElement(e,t,n=!1){if(e)if(t)n||(e.srcObject=null,e.style.transform="");else{if(!e.srcObject)return;e.pause(),e.style.transform="",s.setVideoElementFlag(e,"disablePictureInPicture",!1),s.setVideoElementFlag(e,"disableRemotePlayback",!1),e.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&s.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new o.default}devicePixelRatioChanged(e){this.tileState.devicePixelRatio=e,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(e,t,n,i,o,s,a){let c=!1;this.tileState.boundAttendeeId!==e&&(this.tileState.boundAttendeeId=e,new r.default(e).hasModality(r.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),c=!0),this.tileState.boundExternalUserId!==a&&(this.tileState.boundExternalUserId=a,c=!0),this.tileState.localTile!==t&&(this.tileState.localTile=t,c=!0),this.tileState.boundVideoStream!==n&&(this.tileState.boundVideoStream=n,c=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,c=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,c=!0),this.tileState.streamId!==s&&(this.tileState.streamId=s,c=!0),c&&this.sendTileStateUpdate()}bindVideoElement(e){let t=!1;this.tileState.boundVideoElement!==e&&(this.tileState.boundVideoElement=e,t=!0),null!==this.tileState.boundVideoElement?(this.tileState.videoElementCSSWidthPixels!==e.clientWidth&&(this.tileState.videoElementCSSWidthPixels=e.clientWidth,t=!0),this.tileState.videoElementCSSHeightPixels!==e.clientHeight&&(this.tileState.videoElementCSSHeightPixels=e.clientHeight,t=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),t&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return!this.tileState.poorConnection&&(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return!!this.tileState.poorConnection&&(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0)}capture(){if(!this.tileState.active)return null;const e=document.createElement("canvas"),t=this.tileState.boundVideoElement;e.width=t.videoWidth||t.width,e.height=t.videoHeight||t.height;const n=e.getContext("2d");return n.drawImage(t,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)}setStreamId(e){this.tileState.streamId=e,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!(this.tileState.paused||this.tileState.poorConnection||!this.tileState.boundAttendeeId||!this.tileState.boundVideoElement||!this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){"number"===typeof this.tileState.videoElementCSSWidthPixels&&"number"===typeof this.tileState.videoElementCSSHeightPixels?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?s.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):s.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(e,t,n){t in e&&(e[t]=n)}}t["default"]=s},6744:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null}clone(){const e=new n;return e.tileId=this.tileId,e.localTile=this.localTile,e.isContent=this.isContent,e.active=this.active,e.paused=this.paused,e.poorConnection=this.poorConnection,e.boundAttendeeId=this.boundAttendeeId,e.boundExternalUserId=this.boundExternalUserId,e.boundVideoStream=this.boundVideoStream,e.boundVideoElement=this.boundVideoElement,e.nameplate=this.nameplate,e.videoStreamContentWidth=this.videoStreamContentWidth,e.videoStreamContentHeight=this.videoStreamContentHeight,e.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,e.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,e.devicePixelRatio=this.devicePixelRatio,e.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,e.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,e.streamId=this.streamId,e}}t["default"]=n},3062:function(e,t,n){"use strict";n(7658);var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(9257),o=n(6054),s=n(8692),a=n(6619);class c{constructor(e,t,n){this.tileFactory=e,this.audioVideoController=t,this.logger=n,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=t.configuration.keepLastFrameWhenPaused}createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new r.default(new o.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return i(this,void 0,void 0,(function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const e=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,e.destroy()}))}bindVideoElement(e,t){const n=this.getVideoTile(e);null!==n?n.bindVideoElement(t):this.logger.warn(`Ignoring video element binding for unknown tile id ${e}`)}unbindVideoElement(e,t=!0){const n=this.getVideoTile(e);if(null===n)return void this.logger.warn(`Ignoring video element unbinding for unknown tile id ${e}`);this.logger.info("Unbinding the video element");const i=n.stateRef().boundVideoElement;n.bindVideoElement(null),t&&(this.logger.info("Cleaning up the video element"),a.default.disconnectVideoStreamFromVideoElement(i,!1))}startLocalVideoTile(){const e=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),e.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!(!this.currentLocalTile||!this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(e){const t=this.getVideoTile(e);t&&(this.currentPausedTilesByIds.has(e)||(this.audioVideoController.pauseReceivingStream(t.stateRef().streamId),this.currentPausedTilesByIds.add(e)),t.pause())}unpauseVideoTile(e){const t=this.getVideoTile(e);t&&(this.currentPausedTilesByIds.has(e)&&(this.audioVideoController.resumeReceivingStream(t.stateRef().streamId),this.currentPausedTilesByIds.delete(e)),t.unpause())}getVideoTile(e){return this.tileMap.has(e)?this.tileMap.get(e):null}getVideoTileArea(e){const t=e.state();let n=0,i=0;return t.boundVideoElement&&(n=t.boundVideoElement.clientHeight*t.devicePixelRatio,i=t.boundVideoElement.clientWidth*t.devicePixelRatio),n*i}getAllRemoteVideoTiles(){const e=new Array;return this.tileMap.forEach(((t,n)=>{this.currentLocalTile&&n===this.currentLocalTile.id()||e.push(t)})),e}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(e=!1){const t=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const n=this.tileFactory.makeTile(t,e,this,this.devicePixelRatioMonitor);return this.tileMap.set(t,n),n}removeVideoTile(e){if(!this.tileMap.has(e))return;const t=this.tileMap.get(e);this.currentLocalTile===t&&(this.currentLocalTile=null),t.destroy(),this.tileMap.delete(e),this.audioVideoController.forEachObserver((t=>{s.Maybe.of(t.videoTileWasRemoved).map((n=>n.bind(t)(e)))})),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(e){const t=[];for(const n of this.getAllVideoTiles()){const i=n.state();i.boundAttendeeId===e&&(this.removeVideoTile(i.tileId),t.push(i.tileId))}return t}removeAllVideoTiles(){const e=Array.from(this.tileMap.keys());for(const t of e)this.removeVideoTile(t)}sendTileStateUpdate(e){this.audioVideoController.forEachObserver((t=>{s.Maybe.of(t.videoTileDidUpdate).map((n=>n.bind(t)(e)))}))}haveVideoTilesWithStreams(){for(const e of this.getAllVideoTiles())if(e.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(e){return!!this.getVideoTileForAttendeeId(e)}getVideoTileForAttendeeId(e){for(const t of this.getAllVideoTiles()){const n=t.state();if(n.boundAttendeeId===e)return t}}captureVideoTile(e){const t=this.getVideoTile(e);return t?t.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile||(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId)),this.currentLocalTile}}t["default"]=c},2818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6619);class r{makeTile(e,t,n,r){return new i.default(e,t,n,r)}}t["default"]=r},4849:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{}t["default"]=n},5620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8718),r=n(9108),o=n(8692),s=n(5221),a=n(4849);class c{constructor(e,t){this.selfAttendeeId=e,this.logger=t,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.currentActiveStreams=1,this.lastUplinkBandwidthKbps=c.defaultUplinkBandwidthKbps,this.startTimeMs=0,this.lastUpdatedMs=Date.now(),this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.observerQueue=new Set,this.optimalParameters=new s.default(0,0,0,0,!0),this.parametersInEffect=new s.default(0,0,0,0,!0),this.lastUplinkBandwidthKbps=c.defaultUplinkBandwidthKbps,this.currentQualityMap=this.fillEncodingParamWithBitrates([300,0,1200]),this.newQualityMap=this.fillEncodingParamWithBitrates([300,0,1200])}updateConnectionMetric({uplinkKbps:e=0}){if(isNaN(e))return;0===this.startTimeMs&&(this.startTimeMs=Date.now()),Date.now()-this.startTimeMs<c.startupDurationMs?this.lastUplinkBandwidthKbps=c.defaultUplinkBandwidthKbps:this.lastUplinkBandwidthKbps=e,this.logger.debug((()=>`simulcast: uplink policy update metrics ${this.lastUplinkBandwidthKbps}`));let t=c.holdDownDurationMs;3===this.currentActiveStreams?t=2*c.holdDownDurationMs:(2===this.currentActiveStreams&&e<=c.kMidDisabledRate||1===this.currentActiveStreams&&e<=c.kHiDisabledRate)&&(t=c.holdDownDurationMs/2),Date.now()<this.lastUpdatedMs+t||(this.newQualityMap=this.calculateEncodingParameters(!1))}calculateEncodingParameters(e){const t=[new a.default,new a.default,new a.default];let n=0,i=0;if(0===this.currentActiveStreams?(n=this.lastUplinkBandwidthKbps+1,i=0):1===this.currentActiveStreams?(n=2400,i=c.kHiDisabledRate):2===this.currentActiveStreams?(n=1e3,i=c.kMidDisabledRate):(n=300,i=0),e||this.lastUplinkBandwidthKbps>=n||this.lastUplinkBandwidthKbps<=i){this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=1200,t[2].maxBitrateKbps=0):this.numSenders<=4&&this.lastUplinkBandwidthKbps>=c.kHiDisabledRate?(this.newActiveStreams=1,t[0].maxBitrateKbps=300,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=1200):this.lastUplinkBandwidthKbps>=c.kMidDisabledRate?(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lastUplinkBandwidthKbps>=350?200:150,t[1].maxBitrateKbps=this.numSenders<=6?600:350,t[2].maxBitrateKbps=0):(this.newActiveStreams=3,t[0].maxBitrateKbps=300,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=0);const e=t.map(((e,t,n)=>e.maxBitrateKbps));this.newQualityMap=this.fillEncodingParamWithBitrates(e),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters bw:${this.lastUplinkBandwidthKbps} numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`)}return this.newQualityMap}chooseMediaTrackConstraints(){const e={width:{ideal:1280},height:{ideal:768},frameRate:{ideal:15}};return e}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.currentActiveStreams=this.newActiveStreams,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(e){const t=e.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,n=t!==this.numSenders,i=e.numberOfParticipants(),r=i>=0&&i<=2,o=this.shouldDisableSimulcast!==r;this.numSenders=t,this.shouldDisableSimulcast=r,this.optimalParameters=new s.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=e,this.newQualityMap=this.calculateEncodingParameters(n||o)}wantsResubscribe(){let e=!this.encodingParametersEqual();this.nextLocalDescriptions=this.videoIndex.localStreamDescriptions();for(let t=0;t<this.nextLocalDescriptions.length;t++){const n=this.nextLocalDescriptions[t].streamId;if(0!==n&&n){const i=this.currLocalDescriptions.findIndex((e=>e.streamId===n));-1!==i&&this.nextLocalDescriptions[t].disabledByWebRTC!==this.currLocalDescriptions[i].disabledByWebRTC&&(e=!0)}}return e&&(this.lastUpdatedMs=Date.now()),this.currLocalDescriptions=this.nextLocalDescriptions,e}compareEncodingParameter(e,t){return JSON.stringify(e)===JSON.stringify(t)}encodingParametersEqual(){let e=!1;for(const t of r.default.NAME_ARR_ASCENDING)if(e=e||!this.compareEncodingParameter(this.newQualityMap.get(t),this.currentQualityMap.get(t)),e)break;return!e}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){const e=1280;return e}captureHeight(){const e=768;return e}captureFrameRate(){return 15}maxBandwidthKbps(){return 1400}setIdealMaxBandwidthKbps(e){}setHasBandwidthPriority(e){}fillEncodingParamWithBitrates(e){const t=new Map,n=1e3,i=r.default.NAME_ARR_ASCENDING,o=e;let s=this.shouldDisableSimulcast?1:4;for(let r=0;r<i.length;r++){const e=i[r];t.set(e,{rid:e,active:o[r]>0,scaleResolutionDownBy:Math.max(s,1),maxBitrate:o[r]*n}),s/=2}return t}getQualityMapString(e){let t="";const n=this.videoIndex.localStreamDescriptions();return 3===n.length&&e.forEach((e=>{let i=!1;i="low"===e.rid?n[0].disabledByWebRTC:"mid"===e.rid?n[1].disabledByWebRTC:n[2].disabledByWebRTC,t+=`{ rid: ${e.rid} active:${e.active} disabledByWebRTC: ${i} maxBitrate:${e.maxBitrate}}`})),t}getEncodingSimulcastLayer(e){switch(e){case 0:return i.default.High;case 1:return i.default.LowAndHigh;case 2:return i.default.LowAndMedium;case 3:return i.default.Low}}publishEncodingSimulcastLayer(){const e=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver((t=>{o.Maybe.of(t.encodingSimulcastLayersDidChange).map((n=>n.bind(t)(e)))}))}addObserver(e){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)e(t)}}t["default"]=c,c.defaultUplinkBandwidthKbps=1200,c.startupDurationMs=6e3,c.holdDownDurationMs=4e3,c.defaultMaxFrameRate=15,c.kHiDisabledRate=700,c.kMidDisabledRate=240},5710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9198);class r{constructor(e,t){this.logger=e,this.encodingParams=t,this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[]}updateConnectionMetric(e){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var e,t,n,r,o,s,a,c,l,d,u,h;const p=new Map,f=1e3,m=i.default.NAME_ARR_ASCENDING;return p.set(m[0],{rid:m[0],active:!0,scaleResolutionDownBy:(null===(t=null===(e=this.encodingParams)||void 0===e?void 0:e.low)||void 0===t?void 0:t.scaleResolutionDownBy)||2,maxBitrate:((null===(r=null===(n=this.encodingParams)||void 0===n?void 0:n.low)||void 0===r?void 0:r.maxBitrateKbps)||300)*f,maxFramerate:(null===(s=null===(o=this.encodingParams)||void 0===o?void 0:o.low)||void 0===s?void 0:s.maxFramerate)||5}),p.set(m[1],{rid:m[1],active:!0,scaleResolutionDownBy:(null===(c=null===(a=this.encodingParams)||void 0===a?void 0:a.high)||void 0===c?void 0:c.scaleResolutionDownBy)||1,maxBitrate:((null===(d=null===(l=this.encodingParams)||void 0===l?void 0:l.high)||void 0===d?void 0:d.maxBitrateKbps)||1200)*f,maxFramerate:null===(h=null===(u=this.encodingParams)||void 0===u?void 0:u.high)||void 0===h?void 0:h.maxFramerate}),this.getQualityMapString(p),p}updateIndex(e){this.videoIndex=e}wantsResubscribe(){var e,t;let n=!1;this.nextLocalDescriptions=null===(e=this.videoIndex)||void 0===e?void 0:e.localStreamDescriptions();for(let i=0;i<(null===(t=this.nextLocalDescriptions)||void 0===t?void 0:t.length);i++){const e=this.nextLocalDescriptions[i].streamId;if(0!==e&&e){const t=this.currLocalDescriptions.findIndex((t=>t.streamId===e));-1!==t&&this.nextLocalDescriptions[i].disabledByWebRTC!==this.currLocalDescriptions[t].disabledByWebRTC&&(n=!0)}}return this.currLocalDescriptions=this.nextLocalDescriptions,n}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return 1200}setIdealMaxBandwidthKbps(e){}setHasBandwidthPriority(e){}getQualityMapString(e){var t;let n="";const i=null===(t=this.videoIndex)||void 0===t?void 0:t.localStreamDescriptions();(null===i||void 0===i?void 0:i.length)>0&&(e.forEach((e=>{let t=!1;t="low"===e.rid?i[0].disabledByWebRTC:i[1].disabledByWebRTC,n+=`{ rid: ${e.rid} active:${e.active} disabledByWebRTC: ${t} maxBitrate:${e.maxBitrate} scaleResolutionDownBy:${e.scaleResolutionDownBy} maxFrameRate:${e.maxFramerate}`})),this.logger.info(`simulcast: content policy:chooseEncodingParameters newQualityMap: ${n}`))}addObserver(e){}removeObserver(e){}forEachObserver(e){}}t["default"]=r},9663:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(5221);class o{constructor(e,t=!0,n,i){this.selfAttendeeId=e,this.scaleResolution=t,this.logger=n,this.browserBehavior=i,this.numberOfPublishedVideoSources=0,this.idealMaxBandwidthKbps=1400,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.reset()}reset(){this.numberOfPublishedVideoSources=0,this.optimalParameters=new r.default(0,0,0,0,!1),this.parametersInEffect=new r.default(0,0,0,0,!1),this.encodingParamMap.set(o.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(e){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(e){var t;let n=!0,i=1;this.transceiverController&&(n=this.transceiverController.hasVideoInput());const o=e.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(n?1:0);if(this.numberOfPublishedVideoSources!==o){if(this.numberOfPublishedVideoSources=o,this.transceiverController){const e=this.getStreamCaptureSetting();if(e){const t=this.calculateEncodingParameters(e);i=t.scaleResolutionDownBy}}this.optimalParameters=new r.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,i)}else null===(t=this.logger)||void 0===t||t.debug("Skipping update index; Number of participants has not changed")}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){let e=640;return this.getNumberOfPublishedVideoSources()>4&&(e=320),e}captureHeight(){let e=384;return this.getNumberOfPublishedVideoSources()>4&&(e=192),e}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let e=0;return e=this.getNumberOfPublishedVideoSources()<=2?this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?2*this.idealMaxBandwidthKbps/3:(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(e)}setIdealMaxBandwidthKbps(e){this.idealMaxBandwidthKbps=e}setHasBandwidthPriority(e){this.hasBandwidthPriority=e}setTransceiverController(e){this.transceiverController=e}updateTransceiverController(){return i(this,void 0,void 0,(function*(){const e=this.getStreamCaptureSetting();if(!e)return;const t=this.calculateEncodingParameters(e);this.shouldUpdateEndcodingParameters(t)&&(this.encodingParamMap.set(o.encodingMapKey,t),this.transceiverController.setEncodingParameters(this.encodingParamMap))}))}shouldUpdateEndcodingParameters(e){var t,n;const i=null===(n=null===(t=this.transceiverController.localVideoTransceiver().sender.getParameters())||void 0===t?void 0:t.encodings)||void 0===n?void 0:n[0];return e.maxBitrate!==(null===i||void 0===i?void 0:i.maxBitrate)||e.scaleResolutionDownBy!==(null===i||void 0===i?void 0:i.scaleResolutionDownBy)}calculateEncodingParameters(e){var t,n;const i=1e3*this.maxBandwidthKbps();let r=1;if(void 0!==e.height&&void 0!==e.width&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2){let i=o.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),o.targetHeightArray.length-1)];480===i&&(null===(t=this.browserBehavior)||void 0===t?void 0:t.disable480pResolutionScaleDown())&&(i=360),r=Math.max(Math.min(e.height,e.width)/i,1),null===(n=this.logger)||void 0===n||n.info(`Resolution scale factor is ${r} for capture resolution ${e.width}x${e.height}. New dimension is ${e.width/r}x${e.height/r}`)}return{scaleResolutionDownBy:r,maxBitrate:i}}getStreamCaptureSetting(){var e,t,n,i;return null===(i=null===(n=null===(t=null===(e=this.transceiverController)||void 0===e?void 0:e.localVideoTransceiver())||void 0===t?void 0:t.sender)||void 0===n?void 0:n.track)||void 0===i?void 0:i.getSettings()}getNumberOfPublishedVideoSources(){var e;return null!==(e=this.numberOfPublishedVideoSources)&&void 0!==e?e:0}}t["default"]=o,o.encodingMapKey="video",o.targetHeightArray=[0,0,0,540,540,480,480,480,480,360,360,360,360,270,270,270,270,180,180,180,180,180,180,180,180,180]},4271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5221);class r{constructor(){}updateConnectionMetric(e){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(e){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new i.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(e){}setHasBandwidthPriority(e){}}t["default"]=r},4522:function(e,t){"use strict";function n(e){return e.map((e=>"object"===typeof e?JSON.stringify(e):`${e}`)).join(" ")}Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.base=e}debug(...e){this.base.debug(n(e))}info(...e){this.base.info(n(e))}warn(...e){this.base.warn(n(e))}error(...e){this.base.error(n(e))}}t["default"]=i},958:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceFocusDeviceTransformer=void 0;const r=n(5123),o=n(6843),s=n(4207),a=n(4522),c=n(2902),l=n(5231);class d{constructor(e,{preload:t=!0,logger:n,fetchBehavior:i=d.defaultFetchBehavior()},r){this.spec=e,this.supported=!0,this.logger=n,this.vfLogger=n?new a.default(n):void 0,this.preload=t,this.fetchBehavior=i,this.spec=d.augmentSpec(this.spec),r&&(this.configuration=Promise.resolve(r))}static isSupported(e,t){var n,i;const s=d.defaultFetchBehavior(),c=(null===t||void 0===t?void 0:t.logger)?new a.default(t.logger):void 0,l={fetchBehavior:s,logger:c};if(o.isIFramed()){if(!1===(null===t||void 0===t?void 0:t.allowIFrame))return null===(n=null===t||void 0===t?void 0:t.logger)||void 0===n||n.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);null===(i=null===t||void 0===t?void 0:t.logger)||void 0===i||i.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return r.VoiceFocus.isSupported(d.augmentSpec(e),l)}static create(e={},t={},n,r,o){var s,a,c;return i(this,void 0,void 0,(function*(){r&&r.Meeting.Meeting&&(r=r.Meeting);const i="AVAILABLE"===(null===(c=null===(a=null===(s=null===r||void 0===r?void 0:r.Meeting)||void 0===s?void 0:s.MeetingFeatures)||void 0===a?void 0:a.Audio)||void 0===c?void 0:c.EchoReduction),o=n&&!0===n.supported&&"ns_es"===n.model.name&&!i,l="ns_es"===e.name&&!i;if(o||l)throw new Error("Echo Reduction requested but not enabled.");const u=new d(e,t,n);return yield u.init(),u}))}static configure(e={},t={}){return i(this,void 0,void 0,(function*(){const n=new d(e,t,void 0);return n.configure(!0)}))}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(e,t){return i(this,void 0,void 0,(function*(){if(this.supported)try{const n=!0,[i,r]=yield this.allocateVoiceFocus(n),o=Object.assign(Object.assign({},t),{es:"ns_es"===this.spec.name});return new c.default(e,i,r,o)}catch(n){return}}))}static destroyVoiceFocus(e){var t;return i(this,void 0,void 0,(function*(){null===(t=null===e||void 0===e?void 0:e.vf)||void 0===t||t.destroy()}))}static augmentSpec(e){return e&&(e.assetGroup||e.revisionID)?e:Object.assign(Object.assign({},e),{assetGroup:d.currentSDKAssetGroup()})}configure(e=!1){return i(this,void 0,void 0,(function*(){const t={fetchBehavior:this.fetchBehavior,preResolve:e,logger:this.vfLogger};return r.VoiceFocus.configure(this.spec,t)}))}init(){var e;return i(this,void 0,void 0,(function*(){this.configuration||(this.configuration=this.configure());const t=yield this.configuration;if(t.supported){this.pendingVoiceFocus=this.createVoiceFocus(t,this.preload);try{yield this.pendingVoiceFocus}catch(n){null===(e=this.logger)||void 0===e||e.error(`Unable to initialize Amazon Voice Focus: ${n}`),this.supported=!1}}else this.supported=!1}))}createVoiceFocus(e,t){return i(this,void 0,void 0,(function*(){const n=new l.default;return this.vf=yield r.VoiceFocus.init(e,{delegate:n,preload:t,logger:this.vfLogger}),[this.vf,n]}))}allocateVoiceFocus(e){return i(this,void 0,void 0,(function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const e=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,e}return this.createVoiceFocus(yield this.configuration,e)}))}static majorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const e=this.majorVersion();return e?`sdk-${e}`:"stable-v1"}static defaultFetchBehavior(){const e=d.majorMinorVersion()||"unknown",t=s.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(e)}&ua=${encodeURIComponent(t)}`}}}t.VoiceFocusDeviceTransformer=d,t["default"]=d},2902:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4380);class o{constructor(e,t,n,i,o=!1,s,a=new r.default,c=new Map,l,d){this.device=e,this.voiceFocus=t,this.delegate=n,this.nodeOptions=i,this.failed=o,this.node=s,this.browserBehavior=a,this.farEndStreamToAudioSourceNode=c,this.mixDestNode=l,this.mixSourceNode=d}getInnerDevice(){return this.device}mute(e){return i(this,void 0,void 0,(function*(){this.node&&(e?yield this.node.disable():yield this.node.enable())}))}stop(){return i(this,void 0,void 0,(function*(){this.node&&(this.node.disconnect(),yield this.node.stop())}))}chooseNewInnerDevice(e){return i(this,void 0,void 0,(function*(){return this.device!==e||s(e)?new o(e,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode):this}))}intrinsicDevice(){return i(this,void 0,void 0,(function*(){if(this.failed)return this.device;const e=this.nodeOptions.es,t={echoCancellation:!e,googEchoCancellation:!e,googEchoCancellation2:!e,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let n;return n=!this.nodeOptions||void 0===this.nodeOptions.agc||this.nodeOptions.agc.useBuiltInAGC,t.autoGainControl=n,t.googAutoGainControl=n,t.googAutoGainControl2=n,this.device?"string"===typeof this.device?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?t.deviceId=this.device:t.deviceId={exact:this.device},t):this.device.id?this.device:Object.assign(Object.assign({},this.device),t):t}))}createAudioNode(e){var t,n;return i(this,void 0,void 0,(function*(){if((null===(t=this.node)||void 0===t?void 0:t.context)===e)return{start:this.node,end:this.node};const i={useVoiceFocusAGC:!1},r=Object.assign({enabled:!0,agc:i},this.nodeOptions);try{if(null===(n=this.node)||void 0===n||n.disconnect(),this.node=yield this.voiceFocus.createNode(e,r),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(e,{channelCount:1,channelCountMode:"explicit"});for(const e of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(e);this.createMixSourceNode()}const t=this.node,i=this.node;return{start:t,end:i}}catch(o){throw this.failed=!0,this.delegate.onFallback(this,o),o}}))}observeMeetingAudio(e){return i(this,void 0,void 0,(function*(){if(!this.nodeOptions.es)return;e.addAudioMixObserver(this);const t=yield e.getCurrentMeetingAudioStream();t&&this.addFarEndStream(t)}))}unObserveMeetingAudio(e){return i(this,void 0,void 0,(function*(){if(!this.nodeOptions.es)return;e.removeAudioMixObserver(this);const t=yield e.getCurrentMeetingAudioStream();t&&this.removeFarendStream(t)}))}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}addFarEndStream(e){return i(this,void 0,void 0,(function*(){this.nodeOptions.es&&e&&!this.farEndStreamToAudioSourceNode.has(e)&&(this.node?this.assignFarEndStreamToAudioSourceNode(e):this.farEndStreamToAudioSourceNode.set(e,null))}))}removeFarendStream(e){var t;return i(this,void 0,void 0,(function*(){null===(t=this.farEndStreamToAudioSourceNode.get(e))||void 0===t||t.disconnect(),this.farEndStreamToAudioSourceNode.delete(e)}))}meetingAudioStreamBecameActive(e){return i(this,void 0,void 0,(function*(){this.addFarEndStream(e)}))}meetingAudioStreamBecameInactive(e){return i(this,void 0,void 0,(function*(){this.removeFarendStream(e)}))}assignFarEndStreamToAudioSourceNode(e){const t=this.node.context.createMediaStreamSource(e);t.channelCount=1,t.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(e,t),t.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}}function s(e){return"default"===e||!(!e||"object"!==typeof e)&&("deviceId"in e&&"default"===e.deviceId||"id"in e&&"default"===e.id)}t["default"]=o},5231:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.observers=new Set}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}onFallback(e,t){var n;for(const i of this.observers)null===(n=i.voiceFocusFellBackToInnerStream)||void 0===n||n.call(i,e,t)}onCPUWarning(){var e;for(const t of this.observers)null===(e=t.voiceFocusInsufficientResources)||void 0===e||e.call(t)}}t["default"]=n},1183:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n,i,r){this.logger=e,this.realtimeController=t,this.minVolumeDecibels=n,this.maxVolumeDecibels=i,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(e){let t=0;for(const n of e.streams){const i=!!n.attendeeId,r=!!n.externalUserId,o=n.hasOwnProperty("muted"),s=!!n.dropped;if(i){this.attendeeIdToStreamId[n.attendeeId]&&this.attendeeIdToStreamId[n.attendeeId]<n.audioStreamId&&delete this.attendeeIdToStreamId[n.attendeeId],this.streamIdToAttendeeId[n.audioStreamId]=n.attendeeId;const i=r?n.externalUserId:n.attendeeId;this.streamIdToExternalUserId[n.audioStreamId]=i,this.attendeeIdToStreamId[n.attendeeId]=n.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(n.attendeeId,!0,i,!1,{attendeeIndex:t++,attendeesInFrame:e.streams.length})}if(o){const e=this.streamIdToAttendeeId[n.audioStreamId],t=this.streamIdToExternalUserId[n.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(e,null,n.muted,null,t)}if(!i&&!o){const i=this.streamIdToAttendeeId[n.audioStreamId];if(i){const r=this.streamIdToExternalUserId[n.audioStreamId];delete this.streamIdToAttendeeId[n.audioStreamId],delete this.streamIdToExternalUserId[n.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[n.audioStreamId],this.attendeeIdToStreamId[i]===n.audioStreamId&&delete this.attendeeIdToStreamId[i];let o=!1;for(const e of Object.keys(this.streamIdToAttendeeId)){const t=parseInt(e);if(t>n.audioStreamId&&this.streamIdToAttendeeId[t]===i){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(i,!1,r,s,{attendeeIndex:t++,attendeesInFrame:e.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(e),this.sessionReconnected=!1)}cleanUpState(e){const t=Object.values(this.streamIdToAttendeeId),n=e.streams.map((e=>e.attendeeId)),i=t.filter((e=>!n.includes(e)));for(const[r,o]of i.entries()){const e=this.attendeeIdToStreamId[o],t=this.streamIdToExternalUserId[e];delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[o],o!==this.selfAttendeeId?this.realtimeController.realtimeSetAttendeeIdPresence(o,!1,t,!1,{attendeeIndex:r,attendeesInFrame:o.length}):this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection")}}sendRealtimeUpdatesForAudioMetadata(e){let t=null,n=null;for(const i of e.attendeeStates){const e=this.attendeeIdForStreamId(i.audioStreamId);i.hasOwnProperty("volume")&&(null===t&&(t={}),null!==e&&(t[e]=this.normalizedVolume(i))),i.hasOwnProperty("signalStrength")&&(null===n&&(n={}),null!==e&&(n[e]=this.normalizedSignalStrength(i)))}this.applyRealtimeUpdatesForAudioMetadata(t,n)}normalizedVolume(e){const t=-e.volume,n=1-(t-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels),i=Math.min(Math.max(n,0),1);return i}normalizedSignalStrength(e){const t=e.signalStrength/n.MAX_SIGNAL_STRENGTH_LEVELS,i=Math.min(Math.max(t,0),1);return i}applyRealtimeUpdatesForAudioMetadata(e,t){for(const i in this.streamIdToAttendeeId){const r=this.streamIdToAttendeeId[i],o=this.streamIdToExternalUserId[i];let s=null,a=null;null!==e&&(s=e.hasOwnProperty(r)?e[r]:n.IMPLICIT_VOLUME),null!==t&&(a=t.hasOwnProperty(r)?t[r]:n.IMPLICIT_SIGNAL_STRENGTH),null===s&&null===a||this.realtimeController.realtimeUpdateVolumeIndicator(r,s,null,a,o)}}attendeeIdForStreamId(e){if(0===e)return null;const t=this.streamIdToAttendeeId[e];return t||(this.warnedAboutMissingStreamIdMapping[e]||(this.warnedAboutMissingStreamIdMapping[e]=!0,this.logger.warn(`volume indicator stream id ${e} seen before being defined`)),null)}}t["default"]=n,n.MAX_SIGNAL_STRENGTH_LEVELS=2,n.IMPLICIT_VOLUME=0,n.IMPLICIT_SIGNAL_STRENGTH=1},9870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4207),r=n(6032);class o{constructor(e){this.logger=e}create(e,t,n){this.connection=new WebSocket(n?e:i.default.urlWithVersion(e),t),this.connection.binaryType="arraybuffer"}send(e){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return e instanceof Uint8Array?this.connection.send(e.buffer):this.connection.send(e),!0}catch(t){return this.logger.debug((()=>`send error: ${t.message}, websocket state=${r.default[this.readyState()]}`)),!1}}close(e,t){var n;null===(n=this.connection)||void 0===n||n.close(e,t)}destroy(){this.connection=void 0}addEventListener(e,t){this.connection?this.connection.addEventListener(e,t):this.logger.warn("Cannot add event listener with no WebSocket connection.")}removeEventListener(e,t){var n;null===(n=this.connection)||void 0===n||n.removeEventListener(e,t)}readyState(){if(!this.connection)return r.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return r.default.Connecting;case WebSocket.OPEN:return r.default.Open;case WebSocket.CLOSING:return r.default.Closing;case WebSocket.CLOSED:return r.default.Closed}}}t["default"]=o},6032:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketReadyState=void 0,function(e){e[e["None"]=0]="None",e[e["Connecting"]=1]="Connecting",e[e["Open"]=2]="Open",e[e["Closing"]=3]="Closing",e[e["Closed"]=4]="Closed"}(n=t.WebSocketReadyState||(t.WebSocketReadyState={})),t["default"]=n},7851:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.decideModel=t.measureAndDecideExecutionApproach=void 0;const r=n(8097),o=n(3018),s=3,a=2.5,c=2.63,l=.6,d=.65,u=.5,h=.7,p={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};class f{constructor(e,t){this.fetchConfig=e,this.logger=t;const n=`${e.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:e.headers,escapedQueryString:e.escapedQueryString},this.worker=r.loadWorker(n,"VoiceFocusEstimator",this.fetchBehavior,t)}roundtrip(e,t,n){return new Promise(((i,r)=>{this.worker.then((r=>{let o;o=e=>{const{message:s,key:a}=e.data;s===t&&a===n&&(r.removeEventListener("message",o),i(e.data))},r.addEventListener("message",o),r.postMessage(e)})).catch((e=>{var t;null===(t=this.logger)||void 0===t||t.error("Failed to load worker.",e),r(e)}))}))}supportsSIMD(e){const t="simd",n=e||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,i={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:n,key:t};return this.roundtrip(i,"simd-support",t).then((e=>e.supports))}measure(e,t){const n=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,i=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,r=e?i:n,o=`bench:${e}`,s={message:"measure",fetchBehavior:this.fetchBehavior,budget:t,path:r,key:o};return this.roundtrip(s,"measurement",o).then((e=>{if(e.measurement)return e.measurement;throw new Error("Failed to measure.")}))}stop(){this.worker.then((e=>{var t;null===(t=this.logger)||void 0===t||t.debug("Stopping estimator worker."),e.terminate()})).catch((e=>{}))}}const m=(e,t)=>1===e?l:"quality"===t?d*e:u*e,g=({supportsSIMD:e,supportsSAB:t,duration:n,executionPreference:i="auto",simdPreference:r,variantPreference:l="auto",namePreference:d="default",usagePreference:u,executionQuantaPreference:f=s},g=p,v)=>{const b="force"===r,S=b||"disable"!==r&&e,y=-1!==n,w=y?(S?a:c)/n:0,C=S?g.simd:g.wasm,k=y?m(f,u)*w:0,E=y?h*w:0,I=d,T=e=>({supported:!1,reason:e});if(y){if(w<C.noSupport)return T(`Performance score ${w} worse than threshold ${C.noSupport}.`)}else if("auto"===i||"auto"===l)return T(`Missing explicit execution (${i}) or variant (${l}) preference, but no scoring performed.`);null===v||void 0===v||v.debug(`Bench duration ${n} yields inline score ${k} and worker score ${E}.`);const x=(e,t,n)=>({supported:!0,useSIMD:S,processor:e,executionApproach:t,variant:n,executionQuanta:"inline"===t?f:void 0,name:I}),M=(e,t,n)=>"auto"!==t?!y||e>n[t]?t:"failed":e>n.c100?"c100":e>n.c50?"c50":e>n.c20?"c20":e>n.c10?"c10":"failed",A=e=>{switch(e||"auto"){case"auto":{let e=A("inline"),t=A("worker");return null===v||void 0===v||v.debug(`Reducing auto preference: ${JSON.stringify(e)} vs ${JSON.stringify(t)}`),!1===e.supported||!1===t.supported?t:e.variant===t.variant||"c50"===e.variant?e:t}case"worker":return o.supportsSharedArrayBuffer(globalThis,window,v)?A("worker-sab"):A("worker-postMessage");case"inline":{const e=M(k,l,C.inline);return"failed"===e?T(`Performance score ${k} not sufficient for inline use with variant preference ${l}.`):x("voicefocus-inline-processor","inline",e)}case"worker-sab":{if(!t){const e="Requested worker-sab but no SharedArrayBuffer support.";return null===v||void 0===v||v.warn(e),{supported:!1,reason:e}}const e=M(E,l,C.worker);return"failed"===e?T(`Performance score ${E} not sufficient for worker use with variant preference ${l}.`):x("voicefocus-worker-sab-processor","worker-sab",e)}case"worker-postMessage":{const e=M(E,l,C.worker);if("failed"===e)return T(`Performance score ${E} not sufficient for worker use.`);if("ns_es"===I){const e="Requested echo suppression but postMessage executor does not support it.";return null===v||void 0===v||v.warn(e),{supported:!1,reason:e}}return x("voicefocus-worker-postMessage-processor","worker-postMessage",e)}}};return A(i)},v=(e,t,n,r)=>i(void 0,void 0,void 0,(function*(){const i={supportsSIMD:e,supportsSAB:o.supportsSharedArrayBuffer(globalThis,window,n),duration:-1};if(e)return null===n||void 0===n||n.info("Supports SIMD: true (force)"),i;const s=!r,a=r||new f(t,n);try{const t=!o.isOldChrome(window,n)&&(yield a.supportsSIMD());return null===n||void 0===n||n.info(`Supports SIMD: ${t} (force: ${e})`),i.supportsSIMD=t,i}finally{s&&a.stop()}})),b=(e,t,n,r)=>i(void 0,void 0,void 0,(function*(){const i=new f(t,r);try{const s=yield v(e,t,r,i);if(s.supportsSIMD)try{return s.duration=yield i.measure(!0,n),null===r||void 0===r||r.info("SIMD timing:",s.duration),s}catch(o){null===r||void 0===r||r.warn("Failed SIMD estimation; falling back to non-SIMD."),s.supportsSIMD=!1}return s.duration=yield i.measure(!1,n),null===r||void 0===r||r.info("No-SIMD timing:",s.duration),s}catch(o){throw null===r||void 0===r||r.error("Could not feature check.",o),o}finally{i.stop()}})),S=(e,t,n,r=p)=>i(void 0,void 0,void 0,(function*(){let i=e.executionPreference;const{usagePreference:o,variantPreference:s,namePreference:a,simdPreference:c,estimatorBudget:l,executionQuantaPreference:d}=e;"interactivity"===o&&"inline"!==i&&(null===n||void 0===n||n.debug(`Overriding execution preference ${i} to reflect interactivity preference.`),i="inline");const u="force"===c,h="auto"!==s,p="auto"!==i;let f;try{f=h&&p?yield v(u,t,n):yield b(u,t,l,n)}catch(m){throw null===n||void 0===n||n.error("Could not load estimator.",m),new Error("Could not load Voice Focus estimator.")}return g(Object.assign(Object.assign({},f),{simdPreference:c,executionPreference:i,variantPreference:s,namePreference:a,usagePreference:o,executionQuantaPreference:d}),r,n)}));t.measureAndDecideExecutionApproach=S;const y=({category:e,name:t,variant:n,simd:i,url:r})=>`${e}-${t}-${n}-v1${i?"_simd":""}`;t.decideModel=y},7231:function(e,t){"use strict";function n(e,t,n){if(!n)return fetch(e,t);const o=r(e,n),s=i(t,n);return fetch(o,s)}function i(e,t){return(null===t||void 0===t?void 0:t.headers)?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}function r(e,t){if(!(null===t||void 0===t?void 0:t.escapedQueryString))return e;const n=-1!==e.lastIndexOf("?");return`${e}${n?"&":"?"}${t.escapedQueryString}`}function o(e,t){const n=Object.keys(t);if(!n.length)return e;const i=new URLSearchParams(null===e||void 0===e?void 0:e.escapedQueryString);for(const r of n)i.append(r,t[r]);return Object.assign(Object.assign({},e),{escapedQueryString:i.toString()})}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidRevisionID=t.isValidAssetGroup=t.resolveURL=t.addQueryParams=t.withQueryString=t.withRequestHeaders=t.fetchWithBehavior=void 0,t.fetchWithBehavior=n,t.withRequestHeaders=i,t.withQueryString=r,t.addQueryParams=o;const s={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return n(e,s,t).then((t=>t.redirected?t.url:e))}function c(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}function l(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}t.resolveURL=a,t.isValidAssetGroup=c,t.isValidRevisionID=l},8097:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadWorker=void 0;const i=n(7231),r={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},o=(e,t,n,o)=>{null===o||void 0===o||o.debug(`Loading ${t} worker from ${e}.`);let s=!1;try{s=self.origin===new URL(e).origin}catch(a){null===o||void 0===o||o.error("Could not compare origins.",a)}if(s){const r=i.withQueryString(e,n);return Promise.resolve(new Worker(r,{name:t}))}return i.fetchWithBehavior(e,r,n).then((e=>{if(e.ok)return e.blob().then((e=>new Worker(window.URL.createObjectURL(e))));throw new Error("Fetch failed.")}))};t.loadWorker=o},3018:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isOldChrome=t.supportsWASMStreaming=t.supportsSharedArrayBuffer=t.supportsWASM=t.supportsAudioWorklet=t.supportsWorker=t.supportsVoiceFocusWorker=t.supportsWASMPostMessage=t.isSafari=void 0;const r=n(8097),o=(e=globalThis)=>{const t=e.navigator.userAgent;return!!t.match(/Chrom(?:e|ium)\/([0-9]+)/)},s=(e=globalThis)=>{const t=e.navigator.userAgent,n=t.match(/Safari\//),i=t.match(/Chrom(?:e|ium)\//);return!(!n||i)};t.isSafari=s;const a=(e=globalThis)=>{if(t.isSafari(e))return!1;if(o(e)){const t=m(e)||0;return t<95}return!0};t.supportsWASMPostMessage=a;const c=(e=globalThis,n,o)=>i(void 0,void 0,void 0,(function*(){if(!t.supportsWorker(e,o))return!1;const i=`${n.paths.workers}worker-v1.js`;try{const e=yield r.loadWorker(i,"VoiceFocusTestWorker",n,o);try{e.terminate()}catch(s){null===o||void 0===o||o.debug("Failed to terminate worker.",s)}return!0}catch(s){return null===o||void 0===o||o.info("Failed to fetch and instantiate test worker",s),!1}}));t.supportsVoiceFocusWorker=c;const l=(e=globalThis,t)=>{try{return!!e.Worker}catch(n){return null===t||void 0===t||t.info("Does not support Worker",n),!1}};t.supportsWorker=l;const d=(e=globalThis,t)=>{try{return!!e.AudioWorklet&&!!e.AudioWorkletNode}catch(n){return null===t||void 0===t||t.info("Does not support Audio Worklet",n),!1}};t.supportsAudioWorklet=d;const u=(e=globalThis,t)=>{try{return!!e.WebAssembly&&(!!e.WebAssembly.compile||!!e.WebAssembly.compileStreaming)}catch(n){return null===t||void 0===t||t.info("Does not support WASM",n),!1}};t.supportsWASM=u;const h=(e=globalThis,t=globalThis,n)=>{try{return!!e.SharedArrayBuffer&&(!!t.chrome||!!e.crossOriginIsolated)}catch(i){return null===n||void 0===n||n.info("Does not support SharedArrayBuffer."),!1}};t.supportsSharedArrayBuffer=h;const p=(e=globalThis,t)=>{var n;try{return!!(null===(n=e.WebAssembly)||void 0===n?void 0:n.compileStreaming)}catch(i){return null===t||void 0===t||t.info("Does not support WASM streaming compilation",i),!1}};t.supportsWASMStreaming=p;const f=90,m=(e=globalThis)=>{try{if(!e.chrome)return}catch(n){}const t=e.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(t)return parseInt(t[1],10)},g=(e=globalThis,t)=>{const n=m(e);return!!n&&(n<f&&(null===t||void 0===t||t.debug(`Chrome ${n} has incomplete SIMD support.`),!0))};t.isOldChrome=g},6142:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceFocusAudioWorkletNode=void 0;class n extends("undefined"!==typeof globalThis&&globalThis["AudioWorkletNode"]||class{}){}t.VoiceFocusAudioWorkletNode=n},5123:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getAudioInput=t.createAudioContext=t.VoiceFocus=void 0;const r=n(7851),o=n(7231),s=n(8097),a=n(3018),c=n(8720),l=n(4646),d=n(6422),u={useVoiceFocusAGC:!1,useBuiltInAGC:!0},h=u,p="stable-v1",f="https://static.sdkassets.chime.aws",m={processors:`${f}/processors/`,workers:`${f}/workers/`,wasm:`${f}/wasm/`,models:`${f}/wasm/`},g={latencyHint:0},v={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},b=Object.assign(Object.assign({},v),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),S=Object.assign(Object.assign({},v),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),y={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:l.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:d.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:c.default}},w=(e,t)=>{if(void 0!==e&&!o.isValidAssetGroup(e))throw new Error(`Invalid asset group ${e}`);if(void 0!==t&&!o.isValidRevisionID(t))throw new Error(`Invalid revision ID ${t}`)},C=(e,t)=>{let n;if(n=t.useBuiltInAGC?b:S,!e)return{audio:n};if(!e.audio)return e;if(e.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},e),{audio:!0===e.audio?n:Object.assign(Object.assign({},e.audio),n)})},k=(e,t)=>`${t.models}${r.decideModel(e)}.wasm`;class E{constructor(e,t,n,i,r){this.processorURL=t,this.nodeConstructor=n,this.nodeOptions=i,this.executionQuanta=r,this.internal={worker:e,nodeOptions:i,isDestroyed:!1}}static isSupported(e,t){const{fetchBehavior:n,logger:i}=t||{};if("undefined"===typeof globalThis)return null===i||void 0===i||i.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,i))return null===i||void 0===i||i.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,i))return null===i||void 0===i||i.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,i)||null===i||void 0===i||i.debug("Browser does not support streaming WASM compilation.");const{assetGroup:r=p,revisionID:s,paths:c=m}=e||{};w(r,s);const l=s?{revisionID:s}:{assetGroup:r},d=o.addQueryParams(n,l),u=Object.assign(Object.assign({},d),{paths:c});return a.supportsVoiceFocusWorker(globalThis,u,i)}static mungeExecutionPreference(e,t){const n=void 0===e||"auto"===e;if(a.isSafari(globalThis)){if(n||"inline"===e)return"inline";if(!n)throw new Error(`Unsupported execution preference ${e}`)}if("worker-sab"===e&&!a.supportsSharedArrayBuffer(globalThis,globalThis,t))throw new Error(`Unsupported execution preference ${e}`);return e||"auto"}static configure(e,t){return i(this,void 0,void 0,(function*(){const{fetchBehavior:n,preResolve:i,logger:s}=t||{},{category:a="voicefocus",name:c="default",variant:l="auto",assetGroup:d=p,revisionID:u,simd:h="detect",executionPreference:f="auto",executionQuantaPreference:g,usagePreference:v="interactivity",estimatorBudget:b=100,paths:S=m,thresholds:y}=e||{};if(null===s||void 0===s||s.debug("Configuring Voice Focus with spec",e),void 0!==a&&"voicefocus"!==a)throw new Error(`Unrecognized category ${a}`);if(void 0!==c&&"default"!==c&&"ns_es"!==c)throw new Error(`Unrecognized feature name ${c}`);if(void 0!==l&&!["auto","c100","c50","c20","c10"].includes(l))throw new Error(`Unrecognized feature variant ${l}`);if(void 0!==g&&![1,2,3].includes(g))throw new Error(`Unrecognized execution quanta preference ${g}`);if(w(d,u),void 0!==h&&!["detect","force","disable"].includes(h))throw new Error(`Unrecognized SIMD option ${h}`);if(void 0!==f&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(f))throw new Error(`Unrecognized execution preference ${f}`);if(void 0!==v&&!["quality","interactivity"].includes(v))throw new Error(`Unrecognized usage preference ${v}`);const C={executionPreference:this.mungeExecutionPreference(f,s),usagePreference:v,executionQuantaPreference:g,variantPreference:l,namePreference:c,simdPreference:h,estimatorBudget:b},E=u?{revisionID:u}:{assetGroup:d},I=o.addQueryParams(n,E),T=Object.assign({paths:S},I),x=yield r.measureAndDecideExecutionApproach(C,T,s,y);if(!1===x.supported)return{supported:!1,reason:x.reason};null===s||void 0===s||s.info("Decided execution approach",x);const{useSIMD:M,processor:A,variant:P,executionQuanta:_}=x,O={category:a||"voicefocus",name:c||"default",variant:P,simd:M};if(i){const e=k(O,S);O.url=yield o.resolveURL(e,I)}return{fetchConfig:T,model:O,processor:A,executionQuanta:_,supported:!0}}))}static init(e,{delegate:t,preload:n=!0,logger:r}){return i(this,void 0,void 0,(function*(){if(!1===e.supported)throw new Error("Voice Focus not supported. Reason: "+e.reason);const{model:i,processor:o,fetchConfig:c,executionQuanta:l}=e,{simd:d,name:u}=i,{paths:h}=c;if("voicefocus-inline-processor"!==o&&"voicefocus-worker-postMessage-processor"!==o&&"voicefocus-worker-sab-processor"!==o)throw new Error(`Unknown processor ${o}`);const p=i.url||k(i,h);null===r||void 0===r||r.debug(`Using model URL ${p}.`);const f=`${h.wasm}audio_buffer-v1${d?"_simd":""}.wasm`,m=`${h.wasm}resampler-v1${d?"_simd":""}.wasm`,g=`${h.workers}worker-v1.js`,{file:v,node:b}=y[o],S=`${h.processors}${v}`,w=yield s.loadWorker(g,"VoiceFocusWorker",c,r);if(n){null===r||void 0===r||r.debug("Preloading",p);let e=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";w.postMessage({message:e,preload:!0,key:"model",fetchBehavior:c,path:p})}const C="ns_es"===u?2:1,I={processor:o,worker:w,audioBufferURL:f,resamplerURL:m,fetchBehavior:c,modelURL:p,delegate:t,logger:r,numberOfInputs:C},T=new E(w,S,b,I,l);return Promise.resolve(T)}))}createNode(e,t){var n;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:i=(16e3===e.sampleRate?16e3:48e3),enabled:r=!0,agc:s=h}=t||{},a=null===t||void 0===t?void 0:t.es,c={voiceFocusSampleRate:i,enabled:r,sendBufferCount:10,prefill:6,agc:s,executionQuanta:this.executionQuanta,supportFarendStream:a},l=o.withQueryString(this.processorURL,null===(n=this.nodeOptions)||void 0===n?void 0:n.fetchBehavior);return e.audioWorklet.addModule(l).then((()=>new this.nodeConstructor(e,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:c}))))}applyToStream(e,t,n){return i(this,void 0,void 0,(function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const i=t.createMediaStreamSource(e),r=yield this.applyToSourceNode(i,t,n),o=t.createMediaStreamDestination();return r.connect(o),{node:r,source:i,destination:o,stream:o.stream}}))}applyToSourceNode(e,t,n){return i(this,void 0,void 0,(function*(){const i=yield this.createNode(t,n);return e.connect(i),i}))}destroy(){this.internal.worker?.terminate(),this.internal.isDestroyed=!0}}t.VoiceFocus=E;const I=(e=g)=>new(window.AudioContext||window.webkitAudioContext)(e);t.createAudioContext=I;const T=(e,t,n)=>i(void 0,void 0,void 0,(function*(){var i,r;const{constraints:o,spec:s,delegate:a,preload:c=!0,options:l}=t,{logger:d}=n,u=yield E.configure(s,n);if(!u.supported)return null===(i=n.logger)||void 0===i||i.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(o);const p=yield E.init(u,{delegate:a,preload:c,logger:d}),f=(null===(r=t.options)||void 0===r?void 0:r.agc)||h,m=yield window.navigator.mediaDevices.getUserMedia(C(o,f));return p.applyToStream(m,e,l).then((e=>e.stream))}));t.getAudioInput=T},8720:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3018),o=n(6142),s=5e3;class a extends o.VoiceFocusAudioWorkletNode{constructor(e,t){super(e,t.processor,t),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,worker:i,fetchBehavior:o,logger:s,delegate:a}=t;this.logger=s,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=a,s&&s.debug("VoiceFocusInlineNode:",n),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const c=r.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:c,key:"model",fetchBehavior:o,path:n})}onModuleBufferLoaded(e,t){this.port.postMessage({message:"module-buffer",buffer:e,key:t})}onModuleLoaded(e,t){this.port.postMessage({message:"module",module:e,key:t})}enable(){return i(this,void 0,void 0,(function*(){this.port.postMessage({message:"enable"})}))}disable(){return i(this,void 0,void 0,(function*(){this.port.postMessage({message:"disable"})}))}stop(){var e;return i(this,void 0,void 0,(function*(){this.port.postMessage({message:"stop"});try{null===(e=this.worker)||void 0===e||e.terminate()}catch(t){console.error("failed to terminate worker:",t)}this.disconnect()}))}onProcessorMessage(e){var t,n,i;const r=e.data;switch(r.message){case"cpu":this.cpuWarningCount++;const e=Date.now(),o=this.cpuWarningLastTriggered||e,a=Math.abs(e-o);(!this.cpuWarningLastTriggered||a>s)&&(null===(t=this.logger)||void 0===t||t.warn(`CPU warning (count: ${this.cpuWarningCount}):`,r.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=e),null===(n=this.delegate)||void 0===n||n.onCPUWarning();break;default:null===(i=this.logger)||void 0===i||i.debug("Ignoring processor message.")}}onWorkerMessage(e){const t=e.data;switch(t.message){case"module-buffer":if(!t.buffer||!t.key)return;this.onModuleBufferLoaded(t.buffer,t.key);break;case"module":if(!t.module||!t.key)return;this.onModuleLoaded(t.module,t.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}}t["default"]=a},6422:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3018),o=n(6142);class s extends o.VoiceFocusAudioWorkletNode{constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,audioBufferURL:i,worker:o,fetchBehavior:s,delegate:a}=t;this.delegate=a,this.worker=o,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:c,agc:l,supportFarendStream:d}=t.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:16e3===e.sampleRate?160:480,enabled:c,agc:l,fetchBehavior:s,model:n,supportFarendStream:d});const u=r.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:u,key:"buffer",fetchBehavior:s,path:i})}enable(){return i(this,void 0,void 0,(function*(){this.worker.postMessage({message:"enable"})}))}disable(){return i(this,void 0,void 0,(function*(){this.worker.postMessage({message:"disable"})}))}stop(){return i(this,void 0,void 0,(function*(){try{this.worker.postMessage({message:"stop"})}catch(e){}this.disconnect()}))}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":this.port.postMessage({message:"ready",shared:n.shared},n.shared?Object.values(n.shared):[]);break;case"data":if(!n.buffer)return;this.port.postMessage({message:"data",buffer:n.buffer},[n.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"data":if(!n.buffer)return;this.worker.postMessage({message:"data",buffer:n.buffer},[n.buffer]);break;case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:return}}}t["default"]=s},4646:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3018),o=n(6142),s={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};class c extends o.VoiceFocusAudioWorkletNode{constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,resamplerURL:i,worker:o,fetchBehavior:s,delegate:a}=t;this.delegate=a,this.worker=o,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:c,supportFarendStream:l}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:16e3===e.sampleRate?160:480,enabled:c,model:n,supportFarendStream:l});const d=r.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:d,key:"resampler",fetchBehavior:s,path:i})}enable(){return i(this,void 0,void 0,(function*(){this.state?(Atomics.store(this.state,s.enabled,a.enabled),Atomics.notify(this.state,s.ready,1)):this.worker.postMessage({message:"enable"})}))}disable(){return i(this,void 0,void 0,(function*(){this.state?(Atomics.store(this.state,s.enabled,a.disabled),Atomics.notify(this.state,s.ready,1)):this.worker.postMessage({message:"disable"})}))}stop(){return i(this,void 0,void 0,(function*(){if(this.state)Atomics.store(this.state,s.enabled,a.stopped),Atomics.notify(this.state,s.ready,1);else try{this.worker.postMessage({message:"stop"})}catch(e){}this.disconnect()}))}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":if(!n.shared)throw new Error("No shared state.");this.state=new Int32Array(n.shared.state),this.port.postMessage(n);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:}}}t["default"]=c},7544:function(e,t,n){n(7658),function(t,n){e.exports=n()}(0,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=n(18),r=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,i){void 0===i&&(i=!1);var r=e.getVersionPrecision(t),o=e.getVersionPrecision(n),s=Math.max(r,o),a=0,c=e.map([t,n],(function(t){var n=s-e.getVersionPrecision(t),i=t+new Array(n+1).join(".0");return e.map(i.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(i&&(a=s-Math.min(r,o)),s-=1;s>=a;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===a)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}},e.map=function(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)i.push(t(e[n]));return i},e.find=function(e,t){var n,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,i=e.length;n<i;n+=1){var r=e[n];if(t(r,n))return r}},e.assign=function(e){for(var t,n,i=e,r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var a=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)a();return e},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||""},e}();t.default=r,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(91))&&i.__esModule?i:{default:i},o=n(18);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){}var t,n,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new r.default(e,t)},e.parse=function(e){return new r.default(e).getResult()},t=e,i=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&s(t.prototype,n),i&&s(t,i),e}();t.default=a,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=c(n(92)),r=c(n(93)),o=c(n(94)),s=c(n(95)),a=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},i=0,r={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(r[t]=s,o+=1):"object"==typeof s&&(n[t]=s,i+=1)})),i>0){var s=Object.keys(n),c=a.default.find(s,(function(e){return t.isOS(e)}));if(c){var l=this.satisfies(n[c]);if(void 0!==l)return l}var d=a.default.find(s,(function(e){return t.isPlatform(e)}));if(d){var u=this.satisfies(n[d]);if(void 0!==u)return u}}if(o>0){var h=Object.keys(r),p=a.default.find(h,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(r[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),r=a.default.getBrowserTypeByAlias(i);return t&&r&&(i=r.toLowerCase()),i===n},t.compareVersion=function(e){var t=[0],n=e,i=!1,r=this.getBrowserVersion();if("string"==typeof r)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(i=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(i=!0,n=e.substr(1)),t.indexOf(a.default.compareVersions(r,n,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(t,e),version:r.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=r.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=r.default.getMacOSVersionName(t),i={name:o.OS_MAP.MacOS,version:t};return n&&(i.versionName=n),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=r.default.getAndroidVersionName(t),i={name:o.OS_MAP.Android,version:t};return n&&(i.versionName=n),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||r.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=r.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=r.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,r=(i=n(17))&&i.__esModule?i:{default:i},o=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}})}))},3606:function(e,t,n){"use strict";n.r(t),n.d(t,{BotInfo:function(){return a},BrowserInfo:function(){return r},NodeInfo:function(){return o},ReactNativeInfo:function(){return c},SearchBotDeviceInfo:function(){return s},browserName:function(){return g},detect:function(){return f},detectOS:function(){return b},getNodeVersion:function(){return S},parseUserAgent:function(){return v}});n(7658);var i=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},r=function(){function e(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return e}(),o=function(){function e(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return e}(),s=function(){function e(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return e}(),a=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),c=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),l=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,d=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u=3,h=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",l]],p=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(e){return e?v(e):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new c:"undefined"!==typeof navigator?v(navigator.userAgent):S()}function m(e){return""!==e&&h.reduce((function(t,n){var i=n[0],r=n[1];if(t)return t;var o=r.exec(e);return!!o&&[i,o]}),!1)}function g(e){var t=m(e);return t?t[0]:null}function v(e){var t=m(e);if(!t)return null;var n=t[0],o=t[1];if("searchbot"===n)return new a;var c=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);c?c.length<u&&(c=i(i([],c,!0),y(u-c.length),!0)):c=[];var l=c.join("."),h=b(e),p=d.exec(e);return p&&p[1]?new s(n,l,h,p[1]):new r(n,l,h)}function b(e){for(var t=0,n=p.length;t<n;t++){var i=p[t],r=i[0],o=i[1],s=o.exec(e);if(s)return r}return null}function S(){var e="undefined"!==typeof process&&process.version;return e?new o(process.version.slice(1)):null}function y(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}},524:function(e,t,n){"use strict";const{Deflate:i,deflate:r,deflateRaw:o,gzip:s}=n(5903),{Inflate:a,inflate:c,inflateRaw:l,ungzip:d}=n(3967),u=n(3300);e.exports.Deflate=i,e.exports.deflate=r,e.exports.deflateRaw=o,e.exports.gzip=s,e.exports.Inflate=a,e.exports.inflate=c,e.exports.inflateRaw=l,e.exports.ungzip=d,e.exports.constants=u},5903:function(e,t,n){"use strict";n(7658);const i=n(1672),r=n(8746),o=n(9329),s=n(7675),a=n(9731),c=Object.prototype.toString,{Z_NO_FLUSH:l,Z_SYNC_FLUSH:d,Z_FULL_FLUSH:u,Z_FINISH:h,Z_OK:p,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:m,Z_DEFAULT_STRATEGY:g,Z_DEFLATED:v}=n(3300);function b(e){this.options=r.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==p)throw new Error(s[n]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=i.deflateSetDictionary(this.strm,e),n!==p)throw new Error(s[n]);this._dict_set=!0}}function S(e,t){const n=new b(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}function y(e,t){return t=t||{},t.raw=!0,S(e,t)}function w(e,t){return t=t||{},t.gzip=!0,S(e,t)}b.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?h:l,"string"===typeof e?n.input=o.string2buf(e):"[object ArrayBuffer]"===c.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===d||a===u)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(s=i.deflate(n,a),s===f)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=i.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===p;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===p&&(this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=b,e.exports.deflate=S,e.exports.deflateRaw=y,e.exports.gzip=w,e.exports.constants=n(3300)},3967:function(e,t,n){"use strict";n(7658);const i=n(669),r=n(8746),o=n(9329),s=n(7675),a=n(9731),c=n(4524),l=Object.prototype.toString,{Z_NO_FLUSH:d,Z_FINISH:u,Z_OK:h,Z_STREAM_END:p,Z_NEED_DICT:f,Z_STREAM_ERROR:m,Z_DATA_ERROR:g,Z_MEM_ERROR:v}=n(3300);function b(e){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=i.inflateInit2(this.strm,t.windowBits);if(n!==h)throw new Error(s[n]);if(this.header=new c,i.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=i.inflateSetDictionary(this.strm,t.dictionary),n!==h)))throw new Error(s[n])}function S(e,t){const n=new b(t);if(n.push(e),n.err)throw n.msg||s[n.err];return n.result}function y(e,t){return t=t||{},t.raw=!0,S(e,t)}b.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let a,c,b;if(this.ended)return!1;for(c=t===~~t?t:!0===t?u:d,"[object ArrayBuffer]"===l.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=i.inflate(n,c),a===f&&s&&(a=i.inflateSetDictionary(n,s),a===h?a=i.inflate(n,c):a===g&&(a=f));while(n.avail_in>0&&a===p&&n.state.wrap>0&&0!==e[n.next_in])i.inflateReset(n),a=i.inflate(n,c);switch(a){case m:case g:case f:case v:return this.onEnd(a),this.ended=!0,!1}if(b=n.avail_out,n.next_out&&(0===n.avail_out||a===p))if("string"===this.options.to){let e=o.utf8border(n.output,n.next_out),t=n.next_out-e,i=o.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==h||0!==b){if(a===p)return a=i.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=b,e.exports.inflate=S,e.exports.inflateRaw=y,e.exports.ungzip=S,e.exports.constants=n(3300)},8746:function(e){"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const n=Array.prototype.slice.call(arguments,1);while(n.length){const i=n.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(const n in i)t(i,n)&&(e[n]=i[n])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,o=e.length;i<o;i++){let t=e[i];n.set(t,r),r+=t.length}return n}},9329:function(e){"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){t=!1}const n=new Uint8Array(256);for(let o=0;o<256;o++)n[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;n[254]=n[254]=1,e.exports.string2buf=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,o,s=e.length,a=0;for(r=0;r<s;r++)n=e.charCodeAt(r),55296===(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,r=0;o<a;r++)n=e.charCodeAt(r),55296===(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t};const i=(e,n)=>{if(n<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let i="";for(let t=0;t<n;t++)i+=String.fromCharCode(e[t]);return i};e.exports.buf2string=(e,t)=>{const r=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let o,s;const a=new Array(2*r);for(s=0,o=0;o<r;){let t=e[o++];if(t<128){a[s++]=t;continue}let i=n[t];if(i>4)a[s++]=65533,o+=i-1;else{t&=2===i?31:3===i?15:7;while(i>1&&o<r)t=t<<6|63&e[o++],i--;i>1?a[s++]=65533:t<65536?a[s++]=t:(t-=65536,a[s++]=55296|t>>10&1023,a[s++]=56320|1023&t)}}return i(a,s)},e.exports.utf8border=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let i=t-1;while(i>=0&&128===(192&e[i]))i--;return i<0||0===i?t:i+n[e[i]]>t?i:t}},5942:function(e){"use strict";const t=(e,t,n,i)=>{let r=65535&e|0,o=e>>>16&65535|0,s=0;while(0!==n){s=n>2e3?2e3:n,n-=s;do{r=r+t[i++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16|0};e.exports=t},3300:function(e){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},5906:function(e){"use strict";const t=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t},n=new Uint32Array(t()),i=(e,t,i,r)=>{const o=n,s=r+i;e^=-1;for(let n=r;n<s;n++)e=e>>>8^o[255&(e^t[n])];return-1^e};e.exports=i},1672:function(e,t,n){"use strict";const{_tr_init:i,_tr_stored_block:r,_tr_flush_block:o,_tr_tally:s,_tr_align:a}=n(4191),c=n(5942),l=n(5906),d=n(7675),{Z_NO_FLUSH:u,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:p,Z_FINISH:f,Z_BLOCK:m,Z_OK:g,Z_STREAM_END:v,Z_STREAM_ERROR:b,Z_DATA_ERROR:S,Z_BUF_ERROR:y,Z_DEFAULT_COMPRESSION:w,Z_FILTERED:C,Z_HUFFMAN_ONLY:k,Z_RLE:E,Z_FIXED:I,Z_DEFAULT_STRATEGY:T,Z_UNKNOWN:x,Z_DEFLATED:M}=n(3300),A=9,P=15,_=8,O=29,R=256,D=R+1+O,F=30,N=19,L=2*D+1,B=15,U=3,V=258,j=V+U+1,z=32,$=42,W=57,H=69,q=73,K=91,G=103,J=113,Z=666,Q=1,X=2,Y=3,ee=4,te=3,ne=(e,t)=>(e.msg=d[t],t),ie=e=>2*e-(e>4?9:0),re=e=>{let t=e.length;while(--t>=0)e[t]=0},oe=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=r?n-r:0}while(--t);t=r,i=t;do{n=e.prev[--i],e.prev[i]=n>=r?n-r:0}while(--t)};let se=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ae=se;const ce=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},le=(e,t)=>{o(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ce(e.strm)},de=(e,t)=>{e.pending_buf[e.pending++]=t},ue=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},he=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=c(e.adler,t,r,n):2===e.state.wrap&&(e.adler=l(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},pe=(e,t)=>{let n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-j?e.strstart-(e.w_size-j):0,l=e.window,d=e.w_mask,u=e.prev,h=e.strstart+V;let p=l[o+s-1],f=l[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+s]===f&&l[n+s-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(i=V-(h-o),o=h-V,i>s){if(e.match_start=t,s=i,i>=a)break;p=l[o+s-1],f=l[o+s]}}}while((t=u[t&d])>c&&0!==--r);return s<=e.lookahead?s:e.lookahead},fe=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-j)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),oe(e),i+=t),0===e.strm.avail_in)break;if(n=he(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=U){r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=ae(e,e.ins_h,e.window[r+1]);while(e.insert)if(e.ins_h=ae(e,e.ins_h,e.window[r+U-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,e.lookahead+e.insert<U)break}}while(e.lookahead<j&&0!==e.strm.avail_in)},me=(e,t)=>{let n,i,o,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,c=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>o&&(n=o),n<s&&(0===n&&t!==f||t===u||n!==i+e.strm.avail_in))break;a=t===f&&n===i+e.strm.avail_in?1:0,r(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,ce(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(he(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return c-=e.strm.avail_in,c&&(c>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=c&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-c,e.strm.next_in),e.strstart),e.strstart+=c,e.insert+=c>e.w_size-e.insert?e.w_size-e.insert:c),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?ee:t!==u&&t!==f&&0===e.strm.avail_in&&e.strstart===e.block_start?X:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(he(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,s=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=s||(i||t===f)&&t!==u&&0===e.strm.avail_in&&i<=o)&&(n=i>o?o:i,a=t===f&&0===e.strm.avail_in&&n===i?1:0,r(e,e.block_start,n,a),e.block_start+=n,ce(e.strm)),a?Y:Q)},ge=(e,t)=>{let n,i;for(;;){if(e.lookahead<j){if(fe(e),e.lookahead<j&&t===u)return Q;if(0===e.lookahead)break}if(n=0,e.lookahead>=U&&(e.ins_h=ae(e,e.ins_h,e.window[e.strstart+U-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-j&&(e.match_length=pe(e,n)),e.match_length>=U)if(i=s(e,e.strstart-e.match_start,e.match_length-U),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=U){e.match_length--;do{e.strstart++,e.ins_h=ae(e,e.ins_h,e.window[e.strstart+U-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ae(e,e.ins_h,e.window[e.strstart+1]);else i=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(le(e,!1),0===e.strm.avail_out))return Q}return e.insert=e.strstart<U-1?e.strstart:U-1,t===f?(le(e,!0),0===e.strm.avail_out?Y:ee):e.sym_next&&(le(e,!1),0===e.strm.avail_out)?Q:X},ve=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<j){if(fe(e),e.lookahead<j&&t===u)return Q;if(0===e.lookahead)break}if(n=0,e.lookahead>=U&&(e.ins_h=ae(e,e.ins_h,e.window[e.strstart+U-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=U-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-j&&(e.match_length=pe(e,n),e.match_length<=5&&(e.strategy===C||e.match_length===U&&e.strstart-e.match_start>4096)&&(e.match_length=U-1)),e.prev_length>=U&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-U,i=s(e,e.strstart-1-e.prev_match,e.prev_length-U),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=ae(e,e.ins_h,e.window[e.strstart+U-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=U-1,e.strstart++,i&&(le(e,!1),0===e.strm.avail_out))return Q}else if(e.match_available){if(i=s(e,0,e.window[e.strstart-1]),i&&le(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Q}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=s(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<U-1?e.strstart:U-1,t===f?(le(e,!0),0===e.strm.avail_out?Y:ee):e.sym_next&&(le(e,!1),0===e.strm.avail_out)?Q:X},be=(e,t)=>{let n,i,r,o;const a=e.window;for(;;){if(e.lookahead<=V){if(fe(e),e.lookahead<=V&&t===u)return Q;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=U&&e.strstart>0&&(r=e.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){o=e.strstart+V;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);e.match_length=V-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=U?(n=s(e,1,e.match_length-U),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(le(e,!1),0===e.strm.avail_out))return Q}return e.insert=0,t===f?(le(e,!0),0===e.strm.avail_out?Y:ee):e.sym_next&&(le(e,!1),0===e.strm.avail_out)?Q:X},Se=(e,t)=>{let n;for(;;){if(0===e.lookahead&&(fe(e),0===e.lookahead)){if(t===u)return Q;break}if(e.match_length=0,n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(le(e,!1),0===e.strm.avail_out))return Q}return e.insert=0,t===f?(le(e,!0),0===e.strm.avail_out?Y:ee):e.sym_next&&(le(e,!1),0===e.strm.avail_out)?Q:X};function ye(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const we=[new ye(0,0,0,0,me),new ye(4,4,8,4,ge),new ye(4,5,16,8,ge),new ye(4,6,32,32,ge),new ye(4,4,16,16,ve),new ye(8,16,32,32,ve),new ye(8,16,128,128,ve),new ye(8,32,128,256,ve),new ye(32,128,258,1024,ve),new ye(32,258,258,4096,ve)],Ce=e=>{e.window_size=2*e.w_size,re(e.head),e.max_lazy_match=we[e.level].max_lazy,e.good_match=we[e.level].good_length,e.nice_match=we[e.level].nice_length,e.max_chain_length=we[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=U-1,e.match_available=0,e.ins_h=0};function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*L),this.dyn_dtree=new Uint16Array(2*(2*F+1)),this.bl_tree=new Uint16Array(2*(2*N+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(B+1),this.heap=new Uint16Array(2*D+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*D+1),re(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ee=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==$&&t.status!==W&&t.status!==H&&t.status!==q&&t.status!==K&&t.status!==G&&t.status!==J&&t.status!==Z?1:0},Ie=e=>{if(Ee(e))return ne(e,b);e.total_in=e.total_out=0,e.data_type=x;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?W:t.wrap?$:J,e.adler=2===t.wrap?0:1,t.last_flush=-2,i(t),g},Te=e=>{const t=Ie(e);return t===g&&Ce(e.state),t},xe=(e,t)=>Ee(e)||2!==e.state.wrap?b:(e.state.gzhead=t,g),Me=(e,t,n,i,r,o)=>{if(!e)return b;let s=1;if(t===w&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>A||n!==M||i<8||i>15||t<0||t>9||o<0||o>I||8===i&&1!==s)return ne(e,b);8===i&&(i=9);const a=new ke;return e.state=a,a.strm=e,a.status=$,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+U-1)/U),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,Te(e)},Ae=(e,t)=>Me(e,t,M,P,_,T),Pe=(e,t)=>{if(Ee(e)||t>m||t<0)return e?ne(e,b):b;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Z&&t!==f)return ne(e,0===e.avail_out?y:b);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ce(e),0===e.avail_out)return n.last_flush=-1,g}else if(0===e.avail_in&&ie(t)<=ie(i)&&t!==f)return ne(e,y);if(n.status===Z&&0!==e.avail_in)return ne(e,y);if(n.status===$&&0===n.wrap&&(n.status=J),n.status===$){let t=M+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=k||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=z),t+=31-t%31,ue(n,t),0!==n.strstart&&(ue(n,e.adler>>>16),ue(n,65535&e.adler)),e.adler=1,n.status=J,ce(e),0!==n.pending)return n.last_flush=-1,g}if(n.status===W)if(e.adler=0,de(n,31),de(n,139),de(n,8),n.gzhead)de(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),de(n,255&n.gzhead.time),de(n,n.gzhead.time>>8&255),de(n,n.gzhead.time>>16&255),de(n,n.gzhead.time>>24&255),de(n,9===n.level?2:n.strategy>=k||n.level<2?4:0),de(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(de(n,255&n.gzhead.extra.length),de(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=l(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=H;else if(de(n,0),de(n,0),de(n,0),de(n,0),de(n,0),de(n,9===n.level?2:n.strategy>=k||n.level<2?4:0),de(n,te),n.status=J,ce(e),0!==n.pending)return n.last_flush=-1,g;if(n.status===H){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;while(n.pending+i>n.pending_buf_size){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=l(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,ce(e),0!==n.pending)return n.last_flush=-1,g;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=l(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=q}if(n.status===q){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=l(e.adler,n.pending_buf,n.pending-i,i)),ce(e),0!==n.pending)return n.last_flush=-1,g;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,de(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=l(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=K}if(n.status===K){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=l(e.adler,n.pending_buf,n.pending-i,i)),ce(e),0!==n.pending)return n.last_flush=-1,g;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,de(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=l(e.adler,n.pending_buf,n.pending-i,i))}n.status=G}if(n.status===G){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ce(e),0!==n.pending))return n.last_flush=-1,g;de(n,255&e.adler),de(n,e.adler>>8&255),e.adler=0}if(n.status=J,ce(e),0!==n.pending)return n.last_flush=-1,g}if(0!==e.avail_in||0!==n.lookahead||t!==u&&n.status!==Z){let i=0===n.level?me(n,t):n.strategy===k?Se(n,t):n.strategy===E?be(n,t):we[n.level].func(n,t);if(i!==Y&&i!==ee||(n.status=Z),i===Q||i===Y)return 0===e.avail_out&&(n.last_flush=-1),g;if(i===X&&(t===h?a(n):t!==m&&(r(n,0,0,!1),t===p&&(re(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ce(e),0===e.avail_out))return n.last_flush=-1,g}return t!==f?g:n.wrap<=0?v:(2===n.wrap?(de(n,255&e.adler),de(n,e.adler>>8&255),de(n,e.adler>>16&255),de(n,e.adler>>24&255),de(n,255&e.total_in),de(n,e.total_in>>8&255),de(n,e.total_in>>16&255),de(n,e.total_in>>24&255)):(ue(n,e.adler>>>16),ue(n,65535&e.adler)),ce(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?g:v)},_e=e=>{if(Ee(e))return b;const t=e.state.status;return e.state=null,t===J?ne(e,S):g},Oe=(e,t)=>{let n=t.length;if(Ee(e))return b;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==$||i.lookahead)return b;if(1===r&&(e.adler=c(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(re(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const o=e.avail_in,s=e.next_in,a=e.input;e.avail_in=n,e.next_in=0,e.input=t,fe(i);while(i.lookahead>=U){let e=i.strstart,t=i.lookahead-(U-1);do{i.ins_h=ae(i,i.ins_h,i.window[e+U-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=U-1,fe(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=U-1,i.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,i.wrap=r,g};e.exports.deflateInit=Ae,e.exports.deflateInit2=Me,e.exports.deflateReset=Te,e.exports.deflateResetKeep=Ie,e.exports.deflateSetHeader=xe,e.exports.deflate=Pe,e.exports.deflateEnd=_e,e.exports.deflateSetDictionary=Oe,e.exports.deflateInfo="pako deflate (from Nodeca project)"},4524:function(e){"use strict";function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=t},6643:function(e){"use strict";const t=16209,n=16191;e.exports=function(e,i){let r,o,s,a,c,l,d,u,h,p,f,m,g,v,b,S,y,w,C,k,E,I,T,x;const M=e.state;r=e.next_in,T=e.input,o=r+(e.avail_in-5),s=e.next_out,x=e.output,a=s-(i-e.avail_out),c=s+(e.avail_out-257),l=M.dmax,d=M.wsize,u=M.whave,h=M.wnext,p=M.window,f=M.hold,m=M.bits,g=M.lencode,v=M.distcode,b=(1<<M.lenbits)-1,S=(1<<M.distbits)-1;e:do{m<15&&(f+=T[r++]<<m,m+=8,f+=T[r++]<<m,m+=8),y=g[f&b];t:for(;;){if(w=y>>>24,f>>>=w,m-=w,w=y>>>16&255,0===w)x[s++]=65535&y;else{if(!(16&w)){if(0===(64&w)){y=g[(65535&y)+(f&(1<<w)-1)];continue t}if(32&w){M.mode=n;break e}e.msg="invalid literal/length code",M.mode=t;break e}C=65535&y,w&=15,w&&(m<w&&(f+=T[r++]<<m,m+=8),C+=f&(1<<w)-1,f>>>=w,m-=w),m<15&&(f+=T[r++]<<m,m+=8,f+=T[r++]<<m,m+=8),y=v[f&S];n:for(;;){if(w=y>>>24,f>>>=w,m-=w,w=y>>>16&255,!(16&w)){if(0===(64&w)){y=v[(65535&y)+(f&(1<<w)-1)];continue n}e.msg="invalid distance code",M.mode=t;break e}if(k=65535&y,w&=15,m<w&&(f+=T[r++]<<m,m+=8,m<w&&(f+=T[r++]<<m,m+=8)),k+=f&(1<<w)-1,k>l){e.msg="invalid distance too far back",M.mode=t;break e}if(f>>>=w,m-=w,w=s-a,k>w){if(w=k-w,w>u&&M.sane){e.msg="invalid distance too far back",M.mode=t;break e}if(E=0,I=p,0===h){if(E+=d-w,w<C){C-=w;do{x[s++]=p[E++]}while(--w);E=s-k,I=x}}else if(h<w){if(E+=d+h-w,w-=h,w<C){C-=w;do{x[s++]=p[E++]}while(--w);if(E=0,h<C){w=h,C-=w;do{x[s++]=p[E++]}while(--w);E=s-k,I=x}}}else if(E+=h-w,w<C){C-=w;do{x[s++]=p[E++]}while(--w);E=s-k,I=x}while(C>2)x[s++]=I[E++],x[s++]=I[E++],x[s++]=I[E++],C-=3;C&&(x[s++]=I[E++],C>1&&(x[s++]=I[E++]))}else{E=s-k;do{x[s++]=x[E++],x[s++]=x[E++],x[s++]=x[E++],C-=3}while(C>2);C&&(x[s++]=x[E++],C>1&&(x[s++]=x[E++]))}break}}break}}while(r<o&&s<c);C=m>>3,r-=C,m-=C<<3,f&=(1<<m)-1,e.next_in=r,e.next_out=s,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=s<c?c-s+257:257-(s-c),M.hold=f,M.bits=m}},669:function(e,t,n){"use strict";n(2087);const i=n(5942),r=n(5906),o=n(6643),s=n(1659),a=0,c=1,l=2,{Z_FINISH:d,Z_BLOCK:u,Z_TREES:h,Z_OK:p,Z_STREAM_END:f,Z_NEED_DICT:m,Z_STREAM_ERROR:g,Z_DATA_ERROR:v,Z_MEM_ERROR:b,Z_BUF_ERROR:S,Z_DEFLATED:y}=n(3300),w=16180,C=16181,k=16182,E=16183,I=16184,T=16185,x=16186,M=16187,A=16188,P=16189,_=16190,O=16191,R=16192,D=16193,F=16194,N=16195,L=16196,B=16197,U=16198,V=16199,j=16200,z=16201,$=16202,W=16203,H=16204,q=16205,K=16206,G=16207,J=16208,Z=16209,Q=16210,X=16211,Y=852,ee=592,te=15,ne=te,ie=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function re(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const oe=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<w||t.mode>X?1:0},se=e=>{if(oe(e))return g;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Y),t.distcode=t.distdyn=new Int32Array(ee),t.sane=1,t.back=-1,p},ae=e=>{if(oe(e))return g;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,se(e)},ce=(e,t)=>{let n;if(oe(e))return g;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,ae(e))},le=(e,t)=>{if(!e)return g;const n=new re;e.state=n,n.strm=e,n.window=null,n.mode=w;const i=ce(e,t);return i!==p&&(e.state=null),i},de=e=>le(e,ne);let ue,he,pe=!0;const fe=e=>{if(pe){ue=new Int32Array(512),he=new Int32Array(32);let t=0;while(t<144)e.lens[t++]=8;while(t<256)e.lens[t++]=9;while(t<280)e.lens[t++]=7;while(t<288)e.lens[t++]=8;s(c,e.lens,0,288,ue,0,e.work,{bits:9}),t=0;while(t<32)e.lens[t++]=5;s(l,e.lens,0,32,he,0,e.work,{bits:5}),pe=!1}e.lencode=ue,e.lenbits=9,e.distcode=he,e.distbits=5},me=(e,t,n,i)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(t.subarray(n-i,n-i+r),o.wnext),i-=r,i?(o.window.set(t.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0},ge=(e,t)=>{let n,Y,ee,te,ne,re,se,ae,ce,le,de,ue,he,pe,ge,ve,be,Se,ye,we,Ce,ke,Ee=0;const Ie=new Uint8Array(4);let Te,xe;const Me=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(oe(e)||!e.output||!e.input&&0!==e.avail_in)return g;n=e.state,n.mode===O&&(n.mode=R),ne=e.next_out,ee=e.output,se=e.avail_out,te=e.next_in,Y=e.input,re=e.avail_in,ae=n.hold,ce=n.bits,le=re,de=se,ke=p;e:for(;;)switch(n.mode){case w:if(0===n.wrap){n.mode=R;break}while(ce<16){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(2&n.wrap&&35615===ae){0===n.wbits&&(n.wbits=15),n.check=0,Ie[0]=255&ae,Ie[1]=ae>>>8&255,n.check=r(n.check,Ie,2,0),ae=0,ce=0,n.mode=C;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&ae)<<8)+(ae>>8))%31){e.msg="incorrect header check",n.mode=Z;break}if((15&ae)!==y){e.msg="unknown compression method",n.mode=Z;break}if(ae>>>=4,ce-=4,Ce=8+(15&ae),0===n.wbits&&(n.wbits=Ce),Ce>15||Ce>n.wbits){e.msg="invalid window size",n.mode=Z;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&ae?P:O,ae=0,ce=0;break;case C:while(ce<16){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(n.flags=ae,(255&n.flags)!==y){e.msg="unknown compression method",n.mode=Z;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Z;break}n.head&&(n.head.text=ae>>8&1),512&n.flags&&4&n.wrap&&(Ie[0]=255&ae,Ie[1]=ae>>>8&255,n.check=r(n.check,Ie,2,0)),ae=0,ce=0,n.mode=k;case k:while(ce<32){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}n.head&&(n.head.time=ae),512&n.flags&&4&n.wrap&&(Ie[0]=255&ae,Ie[1]=ae>>>8&255,Ie[2]=ae>>>16&255,Ie[3]=ae>>>24&255,n.check=r(n.check,Ie,4,0)),ae=0,ce=0,n.mode=E;case E:while(ce<16){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}n.head&&(n.head.xflags=255&ae,n.head.os=ae>>8),512&n.flags&&4&n.wrap&&(Ie[0]=255&ae,Ie[1]=ae>>>8&255,n.check=r(n.check,Ie,2,0)),ae=0,ce=0,n.mode=I;case I:if(1024&n.flags){while(ce<16){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}n.length=ae,n.head&&(n.head.extra_len=ae),512&n.flags&&4&n.wrap&&(Ie[0]=255&ae,Ie[1]=ae>>>8&255,n.check=r(n.check,Ie,2,0)),ae=0,ce=0}else n.head&&(n.head.extra=null);n.mode=T;case T:if(1024&n.flags&&(ue=n.length,ue>re&&(ue=re),ue&&(n.head&&(Ce=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(Y.subarray(te,te+ue),Ce)),512&n.flags&&4&n.wrap&&(n.check=r(n.check,Y,ue,te)),re-=ue,te+=ue,n.length-=ue),n.length))break e;n.length=0,n.mode=x;case x:if(2048&n.flags){if(0===re)break e;ue=0;do{Ce=Y[te+ue++],n.head&&Ce&&n.length<65536&&(n.head.name+=String.fromCharCode(Ce))}while(Ce&&ue<re);if(512&n.flags&&4&n.wrap&&(n.check=r(n.check,Y,ue,te)),re-=ue,te+=ue,Ce)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=M;case M:if(4096&n.flags){if(0===re)break e;ue=0;do{Ce=Y[te+ue++],n.head&&Ce&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ce))}while(Ce&&ue<re);if(512&n.flags&&4&n.wrap&&(n.check=r(n.check,Y,ue,te)),re-=ue,te+=ue,Ce)break e}else n.head&&(n.head.comment=null);n.mode=A;case A:if(512&n.flags){while(ce<16){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(4&n.wrap&&ae!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Z;break}ae=0,ce=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=O;break;case P:while(ce<32){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}e.adler=n.check=ie(ae),ae=0,ce=0,n.mode=_;case _:if(0===n.havedict)return e.next_out=ne,e.avail_out=se,e.next_in=te,e.avail_in=re,n.hold=ae,n.bits=ce,m;e.adler=n.check=1,n.mode=O;case O:if(t===u||t===h)break e;case R:if(n.last){ae>>>=7&ce,ce-=7&ce,n.mode=K;break}while(ce<3){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}switch(n.last=1&ae,ae>>>=1,ce-=1,3&ae){case 0:n.mode=D;break;case 1:if(fe(n),n.mode=V,t===h){ae>>>=2,ce-=2;break e}break;case 2:n.mode=L;break;case 3:e.msg="invalid block type",n.mode=Z}ae>>>=2,ce-=2;break;case D:ae>>>=7&ce,ce-=7&ce;while(ce<32){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if((65535&ae)!==(ae>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Z;break}if(n.length=65535&ae,ae=0,ce=0,n.mode=F,t===h)break e;case F:n.mode=N;case N:if(ue=n.length,ue){if(ue>re&&(ue=re),ue>se&&(ue=se),0===ue)break e;ee.set(Y.subarray(te,te+ue),ne),re-=ue,te+=ue,se-=ue,ne+=ue,n.length-=ue;break}n.mode=O;break;case L:while(ce<14){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(n.nlen=257+(31&ae),ae>>>=5,ce-=5,n.ndist=1+(31&ae),ae>>>=5,ce-=5,n.ncode=4+(15&ae),ae>>>=4,ce-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Z;break}n.have=0,n.mode=B;case B:while(n.have<n.ncode){while(ce<3){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}n.lens[Me[n.have++]]=7&ae,ae>>>=3,ce-=3}while(n.have<19)n.lens[Me[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Te={bits:n.lenbits},ke=s(a,n.lens,0,19,n.lencode,0,n.work,Te),n.lenbits=Te.bits,ke){e.msg="invalid code lengths set",n.mode=Z;break}n.have=0,n.mode=U;case U:while(n.have<n.nlen+n.ndist){for(;;){if(Ee=n.lencode[ae&(1<<n.lenbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,be=65535&Ee,ge<=ce)break;if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(be<16)ae>>>=ge,ce-=ge,n.lens[n.have++]=be;else{if(16===be){xe=ge+2;while(ce<xe){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(ae>>>=ge,ce-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=Z;break}Ce=n.lens[n.have-1],ue=3+(3&ae),ae>>>=2,ce-=2}else if(17===be){xe=ge+3;while(ce<xe){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}ae>>>=ge,ce-=ge,Ce=0,ue=3+(7&ae),ae>>>=3,ce-=3}else{xe=ge+7;while(ce<xe){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}ae>>>=ge,ce-=ge,Ce=0,ue=11+(127&ae),ae>>>=7,ce-=7}if(n.have+ue>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Z;break}while(ue--)n.lens[n.have++]=Ce}}if(n.mode===Z)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Z;break}if(n.lenbits=9,Te={bits:n.lenbits},ke=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,Te),n.lenbits=Te.bits,ke){e.msg="invalid literal/lengths set",n.mode=Z;break}if(n.distbits=6,n.distcode=n.distdyn,Te={bits:n.distbits},ke=s(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Te),n.distbits=Te.bits,ke){e.msg="invalid distances set",n.mode=Z;break}if(n.mode=V,t===h)break e;case V:n.mode=j;case j:if(re>=6&&se>=258){e.next_out=ne,e.avail_out=se,e.next_in=te,e.avail_in=re,n.hold=ae,n.bits=ce,o(e,de),ne=e.next_out,ee=e.output,se=e.avail_out,te=e.next_in,Y=e.input,re=e.avail_in,ae=n.hold,ce=n.bits,n.mode===O&&(n.back=-1);break}for(n.back=0;;){if(Ee=n.lencode[ae&(1<<n.lenbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,be=65535&Ee,ge<=ce)break;if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(ve&&0===(240&ve)){for(Se=ge,ye=ve,we=be;;){if(Ee=n.lencode[we+((ae&(1<<Se+ye)-1)>>Se)],ge=Ee>>>24,ve=Ee>>>16&255,be=65535&Ee,Se+ge<=ce)break;if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}ae>>>=Se,ce-=Se,n.back+=Se}if(ae>>>=ge,ce-=ge,n.back+=ge,n.length=be,0===ve){n.mode=q;break}if(32&ve){n.back=-1,n.mode=O;break}if(64&ve){e.msg="invalid literal/length code",n.mode=Z;break}n.extra=15&ve,n.mode=z;case z:if(n.extra){xe=n.extra;while(ce<xe){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}n.length+=ae&(1<<n.extra)-1,ae>>>=n.extra,ce-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=$;case $:for(;;){if(Ee=n.distcode[ae&(1<<n.distbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,be=65535&Ee,ge<=ce)break;if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(0===(240&ve)){for(Se=ge,ye=ve,we=be;;){if(Ee=n.distcode[we+((ae&(1<<Se+ye)-1)>>Se)],ge=Ee>>>24,ve=Ee>>>16&255,be=65535&Ee,Se+ge<=ce)break;if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}ae>>>=Se,ce-=Se,n.back+=Se}if(ae>>>=ge,ce-=ge,n.back+=ge,64&ve){e.msg="invalid distance code",n.mode=Z;break}n.offset=be,n.extra=15&ve,n.mode=W;case W:if(n.extra){xe=n.extra;while(ce<xe){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}n.offset+=ae&(1<<n.extra)-1,ae>>>=n.extra,ce-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Z;break}n.mode=H;case H:if(0===se)break e;if(ue=de-se,n.offset>ue){if(ue=n.offset-ue,ue>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Z;break}ue>n.wnext?(ue-=n.wnext,he=n.wsize-ue):he=n.wnext-ue,ue>n.length&&(ue=n.length),pe=n.window}else pe=ee,he=ne-n.offset,ue=n.length;ue>se&&(ue=se),se-=ue,n.length-=ue;do{ee[ne++]=pe[he++]}while(--ue);0===n.length&&(n.mode=j);break;case q:if(0===se)break e;ee[ne++]=n.length,se--,n.mode=j;break;case K:if(n.wrap){while(ce<32){if(0===re)break e;re--,ae|=Y[te++]<<ce,ce+=8}if(de-=se,e.total_out+=de,n.total+=de,4&n.wrap&&de&&(e.adler=n.check=n.flags?r(n.check,ee,de,ne-de):i(n.check,ee,de,ne-de)),de=se,4&n.wrap&&(n.flags?ae:ie(ae))!==n.check){e.msg="incorrect data check",n.mode=Z;break}ae=0,ce=0}n.mode=G;case G:if(n.wrap&&n.flags){while(ce<32){if(0===re)break e;re--,ae+=Y[te++]<<ce,ce+=8}if(4&n.wrap&&ae!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Z;break}ae=0,ce=0}n.mode=J;case J:ke=f;break e;case Z:ke=v;break e;case Q:return b;case X:default:return g}return e.next_out=ne,e.avail_out=se,e.next_in=te,e.avail_in=re,n.hold=ae,n.bits=ce,(n.wsize||de!==e.avail_out&&n.mode<Z&&(n.mode<K||t!==d))&&me(e,e.output,e.next_out,de-e.avail_out)?(n.mode=Q,b):(le-=e.avail_in,de-=e.avail_out,e.total_in+=le,e.total_out+=de,n.total+=de,4&n.wrap&&de&&(e.adler=n.check=n.flags?r(n.check,ee,de,e.next_out-de):i(n.check,ee,de,e.next_out-de)),e.data_type=n.bits+(n.last?64:0)+(n.mode===O?128:0)+(n.mode===V||n.mode===F?256:0),(0===le&&0===de||t===d)&&ke===p&&(ke=S),ke)},ve=e=>{if(oe(e))return g;let t=e.state;return t.window&&(t.window=null),e.state=null,p},be=(e,t)=>{if(oe(e))return g;const n=e.state;return 0===(2&n.wrap)?g:(n.head=t,t.done=!1,p)},Se=(e,t)=>{const n=t.length;let r,o,s;return oe(e)?g:(r=e.state,0!==r.wrap&&r.mode!==_?g:r.mode===_&&(o=1,o=i(o,t,n,0),o!==r.check)?v:(s=me(e,t,n,n),s?(r.mode=Q,b):(r.havedict=1,p)))};e.exports.inflateReset=ae,e.exports.inflateReset2=ce,e.exports.inflateResetKeep=se,e.exports.inflateInit=de,e.exports.inflateInit2=le,e.exports.inflate=ge,e.exports.inflateEnd=ve,e.exports.inflateGetHeader=be,e.exports.inflateSetDictionary=Se,e.exports.inflateInfo="pako inflate (from Nodeca project)"},1659:function(e){"use strict";const t=15,n=852,i=592,r=0,o=1,s=2,a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),c=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),l=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),d=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),u=(e,u,h,p,f,m,g,v)=>{const b=v.bits;let S,y,w,C,k,E,I=0,T=0,x=0,M=0,A=0,P=0,_=0,O=0,R=0,D=0,F=null;const N=new Uint16Array(t+1),L=new Uint16Array(t+1);let B,U,V,j=null;for(I=0;I<=t;I++)N[I]=0;for(T=0;T<p;T++)N[u[h+T]]++;for(A=b,M=t;M>=1;M--)if(0!==N[M])break;if(A>M&&(A=M),0===M)return f[m++]=20971520,f[m++]=20971520,v.bits=1,0;for(x=1;x<M;x++)if(0!==N[x])break;for(A<x&&(A=x),O=1,I=1;I<=t;I++)if(O<<=1,O-=N[I],O<0)return-1;if(O>0&&(e===r||1!==M))return-1;for(L[1]=0,I=1;I<t;I++)L[I+1]=L[I]+N[I];for(T=0;T<p;T++)0!==u[h+T]&&(g[L[u[h+T]]++]=T);if(e===r?(F=j=g,E=20):e===o?(F=a,j=c,E=257):(F=l,j=d,E=0),D=0,T=0,I=x,k=m,P=A,_=0,w=-1,R=1<<A,C=R-1,e===o&&R>n||e===s&&R>i)return 1;for(;;){B=I-_,g[T]+1<E?(U=0,V=g[T]):g[T]>=E?(U=j[g[T]-E],V=F[g[T]-E]):(U=96,V=0),S=1<<I-_,y=1<<P,x=y;do{y-=S,f[k+(D>>_)+y]=B<<24|U<<16|V|0}while(0!==y);S=1<<I-1;while(D&S)S>>=1;if(0!==S?(D&=S-1,D+=S):D=0,T++,0===--N[I]){if(I===M)break;I=u[h+g[T]]}if(I>A&&(D&C)!==w){0===_&&(_=A),k+=x,P=I-_,O=1<<P;while(P+_<M){if(O-=N[P+_],O<=0)break;P++,O<<=1}if(R+=1<<P,e===o&&R>n||e===s&&R>i)return 1;w=D&C,f[w]=A<<24|P<<16|k-m|0}}return 0!==D&&(f[k+D]=I-_<<24|64<<16|0),v.bits=A,0};e.exports=u},7675:function(e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4191:function(e){"use strict";const t=4,n=0,i=1,r=2;function o(e){let t=e.length;while(--t>=0)e[t]=0}const s=0,a=1,c=2,l=3,d=258,u=29,h=256,p=h+1+u,f=30,m=19,g=2*p+1,v=15,b=16,S=7,y=256,w=16,C=17,k=18,E=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),I=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),T=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=512,A=new Array(2*(p+2));o(A);const P=new Array(2*f);o(P);const _=new Array(M);o(_);const O=new Array(d-l+1);o(O);const R=new Array(u);o(R);const D=new Array(f);function F(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let N,L,B;function U(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}o(D);const V=e=>e<256?_[e]:_[256+(e>>>7)],j=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},z=(e,t,n)=>{e.bi_valid>b-n?(e.bi_buf|=t<<e.bi_valid&65535,j(e,e.bi_buf),e.bi_buf=t>>b-e.bi_valid,e.bi_valid+=n-b):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},$=(e,t,n)=>{z(e,n[2*t],n[2*t+1])},W=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},H=e=>{16===e.bi_valid?(j(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},q=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,d,u,h,p,f,m=0;for(h=0;h<=v;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<g;l++)d=e.heap[l],h=n[2*n[2*d+1]+1]+1,h>c&&(h=c,m++),n[2*d+1]=h,d>i||(e.bl_count[h]++,p=0,d>=a&&(p=s[d-a]),f=n[2*d],e.opt_len+=f*(h+p),o&&(e.static_len+=f*(r[2*d+1]+p)));if(0!==m){do{h=c-1;while(0===e.bl_count[h])h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(h=c;0!==h;h--){d=e.bl_count[h];while(0!==d)u=e.heap[--l],u>i||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}}},K=(e,t,n)=>{const i=new Array(v+1);let r,o,s=0;for(r=1;r<=v;r++)s=s+n[r-1]<<1,i[r]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=W(i[t]++,t))}},G=()=>{let e,t,n,i,r;const o=new Array(v+1);for(n=0,i=0;i<u-1;i++)for(R[i]=n,e=0;e<1<<E[i];e++)O[n++]=i;for(O[n-1]=i,r=0,i=0;i<16;i++)for(D[i]=r,e=0;e<1<<I[i];e++)_[r++]=i;for(r>>=7;i<f;i++)for(D[i]=r<<7,e=0;e<1<<I[i]-7;e++)_[256+r++]=i;for(t=0;t<=v;t++)o[t]=0;e=0;while(e<=143)A[2*e+1]=8,e++,o[8]++;while(e<=255)A[2*e+1]=9,e++,o[9]++;while(e<=279)A[2*e+1]=7,e++,o[7]++;while(e<=287)A[2*e+1]=8,e++,o[8]++;for(K(A,p+1,o),e=0;e<f;e++)P[2*e+1]=5,P[2*e]=W(e,5);N=new F(A,E,h+1,p,v),L=new F(P,I,0,f,v),B=new F(new Array(0),T,0,m,S)},J=e=>{let t;for(t=0;t<p;t++)e.dyn_ltree[2*t]=0;for(t=0;t<f;t++)e.dyn_dtree[2*t]=0;for(t=0;t<m;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Z=e=>{e.bi_valid>8?j(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Q=(e,t,n,i)=>{const r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]},X=(e,t,n)=>{const i=e.heap[n];let r=n<<1;while(r<=e.heap_len){if(r<e.heap_len&&Q(t,e.heap[r+1],e.heap[r],e.depth)&&r++,Q(t,i,e.heap[r],e.depth))break;e.heap[n]=e.heap[r],n=r,r<<=1}e.heap[n]=i},Y=(e,t,n)=>{let i,r,o,s,a=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+a++],i+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===i?$(e,r,t):(o=O[r],$(e,o+h+1,t),s=E[o],0!==s&&(r-=R[o],z(e,r,s)),i--,o=V(i),$(e,o,n),s=I[o],0!==s&&(i-=D[o],z(e,i,s)))}while(a<e.sym_next);$(e,y,t)},ee=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,l=-1;for(e.heap_len=0,e.heap_max=g,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[2*s+1]=0;while(e.heap_len<2)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)X(e,n,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,X(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],q(e,t),K(n,l,e.bl_count)},te=(e,t,n)=>{let i,r,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++a<c&&r===s||(a<l?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[2*w]++):a<=10?e.bl_tree[2*C]++:e.bl_tree[2*k]++,a=0,o=r,0===s?(c=138,l=3):r===s?(c=6,l=3):(c=7,l=4))},ne=(e,t,n)=>{let i,r,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),i=0;i<=n;i++)if(r=s,s=t[2*(i+1)+1],!(++a<c&&r===s)){if(a<l)do{$(e,r,e.bl_tree)}while(0!==--a);else 0!==r?(r!==o&&($(e,r,e.bl_tree),a--),$(e,w,e.bl_tree),z(e,a-3,2)):a<=10?($(e,C,e.bl_tree),z(e,a-3,3)):($(e,k,e.bl_tree),z(e,a-11,7));a=0,o=r,0===s?(c=138,l=3):r===s?(c=6,l=3):(c=7,l=4)}},ie=e=>{let t;for(te(e,e.dyn_ltree,e.l_desc.max_code),te(e,e.dyn_dtree,e.d_desc.max_code),ee(e,e.bl_desc),t=m-1;t>=3;t--)if(0!==e.bl_tree[2*x[t]+1])break;return e.opt_len+=3*(t+1)+5+5+4,t},re=(e,t,n,i)=>{let r;for(z(e,t-257,5),z(e,n-1,5),z(e,i-4,4),r=0;r<i;r++)z(e,e.bl_tree[2*x[r]+1],3);ne(e,e.dyn_ltree,t-1),ne(e,e.dyn_dtree,n-1)},oe=e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return n;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return i;for(t=32;t<h;t++)if(0!==e.dyn_ltree[2*t])return i;return n};let se=!1;const ae=e=>{se||(G(),se=!0),e.l_desc=new U(e.dyn_ltree,N),e.d_desc=new U(e.dyn_dtree,L),e.bl_desc=new U(e.bl_tree,B),e.bi_buf=0,e.bi_valid=0,J(e)},ce=(e,t,n,i)=>{z(e,(s<<1)+(i?1:0),3),Z(e),j(e,n),j(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},le=e=>{z(e,a<<1,3),$(e,y,A),H(e)},de=(e,n,i,o)=>{let s,l,d=0;e.level>0?(e.strm.data_type===r&&(e.strm.data_type=oe(e)),ee(e,e.l_desc),ee(e,e.d_desc),d=ie(e),s=e.opt_len+3+7>>>3,l=e.static_len+3+7>>>3,l<=s&&(s=l)):s=l=i+5,i+4<=s&&-1!==n?ce(e,n,i,o):e.strategy===t||l===s?(z(e,(a<<1)+(o?1:0),3),Y(e,A,P)):(z(e,(c<<1)+(o?1:0),3),re(e,e.l_desc.max_code+1,e.d_desc.max_code+1,d+1),Y(e,e.dyn_ltree,e.dyn_dtree)),J(e),o&&Z(e)},ue=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(O[n]+h+1)]++,e.dyn_dtree[2*V(t)]++),e.sym_next===e.sym_end);e.exports._tr_init=ae,e.exports._tr_stored_block=ce,e.exports._tr_flush_block=de,e.exports._tr_tally=ue,e.exports._tr_align=le},9731:function(e){"use strict";function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=t},6425:function(e,t,n){"use strict";e.exports=n(9507)},9507:function(e,t,n){"use strict";var i=t;function r(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=n(7156),i.BufferWriter=n(8252),i.Reader=n(9799),i.BufferReader=n(8894),i.util=n(7102),i.rpc=n(7753),i.roots=n(358),i.configure=r,r()},9799:function(e,t,n){"use strict";e.exports=c;var i,r=n(7102),o=r.LongBits,s=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return r.Buffer?function(e){return(c.create=function(e){return r.Buffer.isBuffer(e)?new i(e):l(e)})(e)}:l};function u(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(e=7&this.uint32()))this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){i=e,c.create=d(),i._configure();var t=r.Long?"toLong":"toNumber";r.merge(c.prototype,{int64:function(){return u.call(this)[t](!1)},uint64:function(){return u.call(this)[t](!0)},sint64:function(){return u.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},8894:function(e,t,n){"use strict";e.exports=o;var i=n(9799);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(7102);function o(e){i.call(this,e)}o._configure=function(){r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},358:function(e){"use strict";e.exports={}},7753:function(e,t,n){"use strict";var i=t;i.Service=n(964)},964:function(e,t,n){"use strict";e.exports=r;var i=n(7102);function r(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return i.asPromise(e,a,t,n,r,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(c){return a.emit("error",c,t),void setTimeout((function(){s(c)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},6350:function(e,t,n){"use strict";e.exports=r;var i=n(7102);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(e){if("number"===typeof e)return r.fromNumber(e);if(i.isString(e)){if(!i.Long)return r.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},7102:function(e,t,n){"use strict";var i=t;function r(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(5186),i.base64=n(8673),i.EventEmitter=n(8825),i.float=n(2913),i.inquire=n(6332),i.utf8=n(9561),i.pool=n(1168),i.LongBits=n(6350),i.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),i.global=i.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"===typeof e||e instanceof String},i.isObject=function(e){return e&&"object"===typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"===typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=r,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},7156:function(e,t,n){"use strict";e.exports=u;var i,r=n(7102),o=r.LongBits,s=r.base64,a=r.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(u.create=function(){return new i})()}:function(){return new u}};function p(e,t,n){t[n]=255&e}function f(e,t,n){while(e>127)t[n++]=127&e|128,e>>>=7;t[n]=e}function m(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){while(e.hi)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;while(e.lo>127)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function v(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=h(),u.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(u.alloc=r.pool(u.alloc,r.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},m.prototype=Object.create(c.prototype),m.prototype.fn=f,u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new m((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},u.prototype.bool=function(e){return this._push(p,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(v,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=o.from(e);return this._push(v,4,t.lo)._push(v,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var b=r.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var n=u.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(b,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){var e=this.head.next,t=this.constructor.alloc(this.len),n=0;while(e)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){i=e,u.create=h(),i._configure()}},8252:function(e,t,n){"use strict";e.exports=o;var i=n(7156);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(7102);function o(){i.call(this)}function s(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=r._Buffer_allocUnsafe,o.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},o.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},2827:function(e,t,n){var i;(function(r,o){"use strict";var s="1.0.33",a="",c="?",l="function",d="undefined",u="object",h="string",p="major",f="model",m="name",g="type",v="vendor",b="version",S="architecture",y="console",w="mobile",C="tablet",k="smarttv",E="wearable",I="embedded",T=350,x="Amazon",M="Apple",A="ASUS",P="BlackBerry",_="Browser",O="Chrome",R="Edge",D="Firefox",F="Google",N="Huawei",L="LG",B="Microsoft",U="Motorola",V="Opera",j="Samsung",z="Sharp",$="Sony",W="Xiaomi",H="Zebra",q="Facebook",K=function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},G=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},J=function(e,t){return typeof e===h&&-1!==Z(t).indexOf(Z(e))},Z=function(e){return e.toLowerCase()},Q=function(e){return typeof e===h?e.replace(/[^\d\.]/g,a).split(".")[0]:o},X=function(e,t){if(typeof e===h)return e=e.replace(/^\s\s*/,a),typeof t===d?e:e.substring(0,T)},Y=function(e,t){var n,i,r,s,a,c,d=0;while(d<t.length&&!a){var h=t[d],p=t[d+1];n=i=0;while(n<h.length&&!a)if(a=h[n++].exec(e),a)for(r=0;r<p.length;r++)c=a[++i],s=p[r],typeof s===u&&s.length>0?2===s.length?typeof s[1]==l?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==l||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):o:this[s[0]]=c?s[1].call(this,c,s[2]):o:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):o):this[s]=c||o;d+=2}},ee=function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(J(t[n][i],e))return n===c?o:n}else if(J(t[n],e))return n===c?o:n;return e},te={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ne={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ie={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,b],[/opios[\/ ]+([\w\.]+)/i],[b,[m,V+" Mini"]],[/\bopr\/([\w\.]+)/i],[b,[m,V]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,b],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[m,"UC"+_]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[b,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[b,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[b,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+_],b],[/\bfocus\/([\w\.]+)/i],[b,[m,D+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[m,V+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[m,V+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[m,"MIUI "+_]],[/fxios\/([-\w\.]+)/i],[b,[m,D]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+_]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+_],b],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,b],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,q],b],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[m,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,O+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[m,"Android "+_]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[b,ee,te]],[/(webkit|khtml)\/([\w\.]+)/i],[m,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[m,D+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,b],[/(cobalt)\/([\w\.]+)/i],[m,[b,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,Z]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,a,Z]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,Z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[v,j],[g,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[v,j],[g,w]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[v,M],[g,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[v,M],[g,C]],[/(macintosh);/i],[f,[v,M]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[v,N],[g,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[v,N],[g,w]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[v,W],[g,w]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[v,W],[g,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[v,"OPPO"],[g,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[v,"Vivo"],[g,w]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[v,"Realme"],[g,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[v,U],[g,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[v,U],[g,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[v,L],[g,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[v,L],[g,w]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[v,"Lenovo"],[g,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[v,"Nokia"],[g,w]],[/(pixel c)\b/i],[f,[v,F],[g,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[v,F],[g,w]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[v,$],[g,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[v,$],[g,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[v,"OnePlus"],[g,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[v,x],[g,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[v,x],[g,w]],[/(playbook);[-\w\),; ]+(rim)/i],[f,v,[g,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[v,P],[g,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[v,A],[g,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[v,A],[g,w]],[/(nexus 9)/i],[f,[v,"HTC"],[g,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[f,/_/g," "],[g,w]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[v,"Acer"],[g,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[v,"Meizu"],[g,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[v,z],[g,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,f,[g,w]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,f,[g,C]],[/(surface duo)/i],[f,[v,B],[g,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[v,"Fairphone"],[g,w]],[/(u304aa)/i],[f,[v,"AT&T"],[g,w]],[/\bsie-(\w*)/i],[f,[v,"Siemens"],[g,w]],[/\b(rct\w+) b/i],[f,[v,"RCA"],[g,C]],[/\b(venue[\d ]{2,7}) b/i],[f,[v,"Dell"],[g,C]],[/\b(q(?:mv|ta)\w+) b/i],[f,[v,"Verizon"],[g,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[v,"Barnes & Noble"],[g,C]],[/\b(tm\d{3}\w+) b/i],[f,[v,"NuVision"],[g,C]],[/\b(k88) b/i],[f,[v,"ZTE"],[g,C]],[/\b(nx\d{3}j) b/i],[f,[v,"ZTE"],[g,w]],[/\b(gen\d{3}) b.+49h/i],[f,[v,"Swiss"],[g,w]],[/\b(zur\d{3}) b/i],[f,[v,"Swiss"],[g,C]],[/\b((zeki)?tb.*\b) b/i],[f,[v,"Zeki"],[g,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],f,[g,C]],[/\b(ns-?\w{0,9}) b/i],[f,[v,"Insignia"],[g,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[v,"NextBook"],[g,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],f,[g,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],f,[g,w]],[/\b(ph-1) /i],[f,[v,"Essential"],[g,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[v,"Envizen"],[g,C]],[/\b(trio[-\w\. ]+) b/i],[f,[v,"MachSpeed"],[g,C]],[/\btu_(1491) b/i],[f,[v,"Rotor"],[g,C]],[/(shield[\w ]+) b/i],[f,[v,"Nvidia"],[g,C]],[/(sprint) (\w+)/i],[v,f,[g,w]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,B],[g,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[v,H],[g,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[v,H],[g,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,f,[g,y]],[/droid.+; (shield) bui/i],[f,[v,"Nvidia"],[g,y]],[/(playstation [345portablevi]+)/i],[f,[v,$],[g,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[v,B],[g,y]],[/smart-tv.+(samsung)/i],[v,[g,k]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[v,j],[g,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,L],[g,k]],[/(apple) ?tv/i],[v,[f,M+" TV"],[g,k]],[/crkey/i],[[f,O+"cast"],[v,F],[g,k]],[/droid.+aft(\w)( bui|\))/i],[f,[v,x],[g,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[v,z],[g,k]],[/(bravia[\w ]+)( bui|\))/i],[f,[v,$],[g,k]],[/(mitv-\w{5}) bui/i],[f,[v,W],[g,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[v,X],[f,X],[g,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,k]],[/((pebble))app/i],[v,f,[g,E]],[/droid.+; (glass) \d/i],[f,[v,F],[g,E]],[/droid.+; (wt63?0{2,3})\)/i],[f,[v,H],[g,E]],[/(quest( 2)?)/i],[f,[v,q],[g,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[g,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[g,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[g,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,w]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[m,R+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,b],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[b,ee,ne]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[b,ee,ne]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,b],[/\(bb(10);/i],[b,[m,P]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[m,D+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[b,[m,O+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],b],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,b],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,b]]},re=function(e,t){if(typeof e===u&&(t=e,e=o),!(this instanceof re))return new re(e,t).getResult();var n=e||(typeof r!==d&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:a),i=t?K(ie,t):ie;return this.getBrowser=function(){var e={};return e[m]=o,e[b]=o,Y.call(e,n,i.browser),e.major=Q(e.version),e},this.getCPU=function(){var e={};return e[S]=o,Y.call(e,n,i.cpu),e},this.getDevice=function(){var e={};return e[v]=o,e[f]=o,e[g]=o,Y.call(e,n,i.device),e},this.getEngine=function(){var e={};return e[m]=o,e[b]=o,Y.call(e,n,i.engine),e},this.getOS=function(){var e={};return e[m]=o,e[b]=o,Y.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===h&&e.length>T?X(e,T):e,this},this.setUA(n),this};re.VERSION=s,re.BROWSER=G([m,b,p]),re.CPU=G([S]),re.DEVICE=G([f,v,g,y,w,k,C,E,I]),re.ENGINE=re.OS=G([m,b]),typeof t!==d?("object"!==d&&e.exports&&(t=e.exports=re),t.UAParser=re):"function"===l&&n.amdO?(i=function(){return re}.call(t,n,t,e),i===o||(e.exports=i)):typeof r!==d&&(r.UAParser=re);var oe=typeof r!==d&&(r.jQuery||r.Zepto);if(oe&&!oe.ua){var se=new re;oe.ua=se.getResult(),oe.ua.get=function(){return se.getUA()},oe.ua.set=function(e){se.setUA(e);var t=se.getResult();for(var n in t)oe.ua[n]=t[n]}}})("object"===typeof window?window:this)},89:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n}}}]);
//# sourceMappingURL=chunk-vendors.6a176e15.js.map